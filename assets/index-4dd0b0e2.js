import{al as L,am as xe,an as Le,ao as Ce,a as v,j as a,r as m,ah as be,aq as we}from"./index-3b75abce.js";import{A as je}from"./AdaptableCard-4b7ca83d.js";import{D as De}from"./DataTable-bebf68a9.js";import{S as ve}from"./StatusCapsule-d787aa31.js";import{T as Ie}from"./TagsList-63e66f79.js";import{T as z}from"./TextTruncate-7a045d93.js";import{u as X}from"./checkEditUpdate-319d00fe.js";import{u as Ne}from"./useThemeClass-18b89493.js";import{c as V}from"./cloneDeep-ab0a474e.js";import{d as Se,e as Te,f as Ae,g as Me,h as Fe,i as Oe,j as Pe,k as Ee,l as ke,m as Re,n as ce,o as qe}from"./CrmService-8fcfc3ee.js";import{t as Y,N as Z}from"./toast-0c52027e.js";import{C as Be}from"./ConfirmDialog-bd77e135.js";import{B as ee}from"./Button-aa548732.js";import{D as ze}from"./Drawer-15ac5d62.js";import{a as D,F as $e}from"./FormItem-e74ad77d.js";import{T as ie}from"./index-f6e9ee71.js";import{u as Ge,b as S,F as He,a as Ke}from"./formik.esm-18b59c85.js";import{c as $,a as _,d as Ve,e as We}from"./index.esm-4ebd7616.js";import{I as W}from"./Input-5296713b.js";import{D as Ue,t as _e,c as Qe}from"./tagAndCategory-dd47c821.js";/* empty css              */import{N as Je,O as Xe,P as Ye,b as Ze,o as ea,Q as aa,C as ta}from"./index.esm-93048f5c.js";import"./Alert-6a4990df.js";import{A as sa}from"./index-77bdb034.js";import"./Badge-066e767d.js";import"./RangeCalendar-f8aa8a0c.js";import{C as oa}from"./Card-afa367db.js";import"./index-c6e7df82.js";import"./index-4b3de645.js";import"./Dialog-908cc387.js";import"./index-3c0f9d3a.js";import"./toString-0e65f0bb.js";import"./index-43a15a3c.js";import"./index-45f3422c.js";import"./index-3d5f382b.js";import"./Pagination-86b6bc82.js";import"./Progress-2318e05c.js";import"./index-f38d0e6d.js";import"./ScrollBar-3c5f8283.js";import"./index-8c67ce72.js";import{S as G}from"./Select-ae2a684c.js";import"./Skeleton-52e293f4.js";import"./index-0057d9cc.js";import"./Switcher-1ba3538d.js";import"./index-3a8e913d.js";import"./Tag-06e42a81.js";import"./index-264eb58a.js";import"./index-556ea58d.js";import"./Tooltip-d837fb36.js";import"./Upload-372713be.js";import{T as Q,a as ra,b as na}from"./index.esm-918f76fb.js";import{M as da}from"./index.esm-dfd750e4.js";import{B as ca}from"./index.esm-ee280f6e.js";import{d as ia}from"./debounce-5741995d.js";import{g as la}from"./index-17a7f67f.js";import{s as ma}from"./index-c0546366.js";import{F as ua}from"./FormDesription-477af013.js";import{M as pa}from"./MediaSkeleton-1d546f7d.js";import{N as ga}from"./react-number-format.es-1729d857.js";import"./index-6f1ae4a2.js";import"./_MapCache-e81eccfb.js";import"./Views-6fb03b81.js";import"./_getPrototype-dba6d9d5.js";import"./useTimeout-c5d76f6b.js";import"./CloseButton-fa51e0e0.js";import"./StatusIcon-31729652.js";import"./chainedFunction-070f832c.js";import"./index-38427021.js";import"./index-45df90b8.js";import"./useControllableState-9304705b.js";import"./isNil-c598595d.js";import"./get-e1e547eb.js";import"./useMergeRef-788c4cb0.js";import"./_baseIsEqual-7db55527.js";import"./useRootClose-b763db89.js";import"./usePopper-a53aa304.js";import"./TimeInput-1bfcdf49.js";import"./useUniqueId-c6f2310d.js";import"./useDidUpdate-16764a11.js";import"./useUncertainRef-a63c0b8a.js";import"./slicedToArray-f197f283.js";import"./objectWithoutProperties-8809bfcf.js";import"./toConsumableArray-c8be4fca.js";import"./floating-ui.dom-bef9cea3.js";import"./mapCloneElement-ab4cc10e.js";import"./index.esm-48f23c6d.js";import"./index.esm-62fe521f.js";import"./index-6909504f.js";import"./index-f0592348.js";const ya="crmLeads",K=L("crmLeads/data/getLeadsStatistic",async()=>(await Se()).data),A=L("crmLeads/data/getLeads",async()=>(await Te()).data),ae=L("crmContact/data/getContact",async()=>(await Ae()).data),ha=L("crmLeads/data/editLeads",async({leadsId:s,updatedData:t})=>{var e,r;try{return(await Me(s,t)).data}catch(l){throw new Error((r=(e=l==null?void 0:l.response)==null?void 0:e.data)==null?void 0:r.message)}}),fa=L("crmLeads/data/deleteLeads",async s=>{var t,e;try{return await Fe(s)}catch(r){throw new Error((e=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:e.message)}}),xa=L("crmLeads/data/createLeads",async s=>{var t,e;try{return(await Oe(s)).data}catch(r){throw new Error((e=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:e.message)}}),re=L("crmLeads/data/getProduct",async s=>{var t,e;try{const r=await Pe(s);return console.log({response:r}),r.data}catch(r){throw new Error((e=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:e.message)}}),ne=L("crmLeads/data/getSubByIdCategory",async s=>{var t,e;try{return(await Ee(s)).data}catch(r){throw new Error((e=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:e.message)}}),le=L("crmLeads/data/getCategory",async()=>{var s,t;try{return(await ke()).data}catch(e){throw new Error((t=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:t.message)}}),La=L("crmLeads/data/module",async()=>(await Re()).data),Ca=L("tag-category",async({id:s})=>(await ce(s)).data);L("crmLeads/data/fetchTag",async({id:s})=>(await ce(s)).data);L("crmLeads/data/createTag",async({masterId:s,colorName:t,tagName:e,tagCategoryId:r})=>(await qe({colorName:t,tagName:e,masterId:s,tagCategoryId:r})).data);const ba={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},wa={status:""},ja={loading:!1,statisticLoading:!1,leadsList:[],categoryList:[],productList:[],subCategoryList:[],displayedLeadsList:[],statisticData:{},tableData:ba,filterData:wa,drawerOpen:!1,selectedLeads:{},contactList:[],deleteConfirmation:!1},me=xe({name:`${ya}/state`,initialState:ja,reducers:{setTableData:(s,t)=>{s.tableData=t.payload;const e=s.leadsList.filter(r=>r.contactData.firstName.toLowerCase().includes(t.payload.query.toLowerCase())||r.contactData.lastName.toLowerCase().includes(t.payload.query.toLowerCase()));s.displayedLeadsList=e.slice(t.payload.pageSize*(t.payload.pageIndex-1),t.payload.pageSize*t.payload.pageIndex)},setLeadsList:(s,t)=>{s.leadsList=t.payload},setFilterData:(s,t)=>{s.filterData=t.payload},setSelectedLeads:(s,t)=>{s.selectedLeads=t.payload},setDrawerOpen:s=>{s.drawerOpen=!0},setDrawerClose:s=>{s.drawerOpen=!1},toggleDeleteConfirmation:(s,t)=>{s.deleteConfirmation=t.payload}},extraReducers:s=>{s.addCase(A.fulfilled,(t,e)=>{var r;t.leadsList=e.payload.data,t.tableData.total=(r=e.payload.data)==null?void 0:r.length,t.displayedLeadsList=e.payload.data.slice(0,10),t.loading=!1}).addCase(A.pending,t=>{t.loading=!0}).addCase(K.fulfilled,(t,e)=>{t.statisticData=e.payload,t.statisticLoading=!1}).addCase(K.pending,t=>{t.statisticLoading=!0}).addCase(ae.fulfilled,(t,e)=>{t.contactList=e.payload.data,t.loading=!1}).addCase(ae.pending,t=>{t.loading=!0}).addCase(ne.fulfilled,(t,e)=>{t.subCategoryList=e==null?void 0:e.payload.data}).addCase(le.fulfilled,(t,e)=>{t.categoryList=e==null?void 0:e.payload.data}).addCase(re.fulfilled,(t,e)=>{console.log("=====>",e==null?void 0:e.payload.data),t.productList=e==null?void 0:e.payload.data})}}),{setTableData:U,setLeadsList:Cs,setFilterData:bs,setSelectedLeads:te,setDrawerOpen:ue,setDrawerClose:pe,toggleDeleteConfirmation:se}=me.actions,Da=me.reducer,va=Le({data:Da}),y=Ce,Ia=()=>{const s=v(),t=y(c=>c.crmLeads.data.deleteConfirmation),e=y(c=>c.crmLeads.data.selectedLeads),r=()=>{s(se(!1))},l=async()=>{var u,i,x;s(se(!1));const c=await s(fa(e.id));await s(A()),(u=c==null?void 0:c.payload)!=null&&u.success?Y.push(a.jsx(Z,{title:"Successfuly Deleted",type:"success",duration:2500,children:(i=c==null?void 0:c.payload)==null?void 0:i.message}),{placement:"top-end"}):Y.push(a.jsx(Z,{title:"Something Went Wrong !!!",type:"danger",duration:2500,children:(x=c==null?void 0:c.error)==null?void 0:x.message}),{placement:"top-end"}),await s(A()),await s(K())};return a.jsx(Be,{isOpen:t,type:"danger",title:"Delete Lead",confirmButtonColor:"red-600",onClose:r,onRequestClose:r,onCancel:r,onConfirm:l,children:a.jsx("p",{children:"Are you sure you want to delete this Lead? All record related to this lead will be deleted as well. This action cannot be undone."})})},oe=[{label:"Open",value:"open"},{label:"Cancelled",value:"cancelled"},{label:"Converted",value:"converted"}],H=[],Na=s=>{const{touched:t,errors:e,setFieldValue:r,values:l}=s,c=v(),u=Ge(),[i,x]=m.useState(!1),[b,I]=m.useState(!1),[P,E]=m.useState([]),k=()=>{x(!i),I(!1)},M=y(n=>n.crmLeads.data.contactList);H.length=0,M.forEach(n=>{H.push({value:n==null?void 0:n.id,label:`${n==null?void 0:n.firstName} ${n==null?void 0:n.lastName}`})});const[R,F]=m.useState("");m.useEffect(()=>{(async()=>{var f,de;try{const{payload:q}=await c(La()),B=(f=q==null?void 0:q.data)==null?void 0:f.find(O=>(O==null?void 0:O.moduleName)==="leads");if(F(B.id),B){const{payload:O}=await c(Ca({id:(de=B==null?void 0:B.id)==null?void 0:de.toString()})),fe=_e(O.data),qa=Qe(O.data);E(fe)}}catch(q){console.error("Error fetching module data:",q)}})(),c(ae())},[c]);const p=y(n=>n.crmLeads.data.selectedLeads),o=y(n=>n.crmLeads.data.categoryList),d=y(n=>n.crmLeads.data.subCategoryList),g=y(n=>n.crmLeads.data.productList),h=m.useMemo(()=>o.map(f=>({label:f.name,value:f.id})),[o]),w=m.useMemo(()=>d.map(f=>({label:f.name,value:f.id})),[d]),C=m.useMemo(()=>g.map(f=>({label:f.name,value:f.id})),[g]),[T,j]=m.useState(p?p.tags||[]:[]),N=n=>{j(n);const f=[n.value];u.setFieldValue("tagId",f)};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx("div",{className:"col-span-1",children:a.jsx(D,{label:"Contact Name",invalid:e.contactsDataId&&t.contactsDataId,errorMessage:e.contactsDataId,children:a.jsx(G,{name:"contactsDataId",placeholder:"Contact Name",options:H,id:"contactsDataId",value:H.find(n=>(n==null?void 0:n.value)===(l==null?void 0:l.contactsDataId)),onChange:n=>{const f=n.value;r("contactsDataId",f)}})})}),a.jsx("div",{className:"col-span-1",children:a.jsx(D,{label:"Title",invalid:e.title&&t.title,errorMessage:e.title,children:a.jsx(S,{type:"text",autoComplete:"off",name:"title",placeholder:"Title",component:W,prefix:a.jsx(da,{className:"text-xl"})})})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx("div",{className:"col-span-1",children:a.jsx(D,{label:"Category",invalid:e.categoryId&&t.categoryId,errorMessage:e.categoryId,children:a.jsx(S,{type:"text",autoComplete:"off",name:"categoryId",placeholder:"Category",options:h,component:G,prefix:a.jsx(Q,{className:"text-xl"}),onChange:async n=>{await c(ne(n.value)),r("categoryId",n)}})})}),a.jsx("div",{className:"col-span-1",children:a.jsx(D,{label:"Sub Category",invalid:e.subCategoryId&&t.subCategoryId,errorMessage:e.subCategoryId,children:a.jsx(S,{type:"text",autoComplete:"off",name:"subCategoryId",placeholder:"SubCategory",options:w,component:G,prefix:a.jsx(Q,{className:"text-xl"}),onChange:async n=>{await c(re(n.value)),r("subCategoryId",n)}})})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx("div",{className:"col-span-1",children:a.jsx(D,{label:"Product",invalid:e.productId&&t.productId,errorMessage:e.productId,children:a.jsx(S,{type:"text",autoComplete:"off",name:"productId",placeholder:"Product",options:C,component:G,prefix:a.jsx(Q,{className:"text-xl"}),onChange:async n=>{r("productId",n)}})})}),a.jsx("div",{className:"col-span-1",children:a.jsx(D,{label:"Budget",invalid:e.budget&&t.budget,errorMessage:e.budget,children:a.jsx(S,{type:"number",autoComplete:"off",name:"budget",placeholder:"Budget",component:W,prefix:a.jsx(ca,{className:"text-xl"})})})})]}),a.jsx(D,{label:"Status",invalid:e.status&&t.status,errorMessage:e.status,children:a.jsx(S,{type:"text",autoComplete:"off",name:"status",placeholder:"Status",component:G,options:oe,values:oe[0],prefix:a.jsx(Je,{className:"text-xl"}),onChange:async n=>{r("status",n)}})}),a.jsx("div",{style:{position:"relative"},children:a.jsx(D,{label:"Tag",children:a.jsxs("div",{style:{position:"relative"},children:[a.jsx(S,{name:"Tag",component:Ue,value:u.initialValues.tagName,options:P,placeholder:"Select a Tag",onChange:N}),a.jsx(ra,{style:{position:"absolute",right:"10px",top:"10px",border:"none",background:"#FFF"},className:"text-xl",onClick:()=>{k(),I(!0)}})]})})}),a.jsx(D,{label:"Notes",invalid:e.notes&&t.notes,errorMessage:e.notes,children:a.jsx(S,{type:"text",autoComplete:"off",name:"notes",placeholder:"Notes",component:W,prefix:a.jsx(na,{className:"text-xl"})})})]})},Sa=$().shape({title:_().required("Title is required"),categoryId:$().required("Category is required"),subCategoryId:$().notRequired(),productId:$().required("Product is required"),status:$().required("Status is required"),notes:_(),budget:Ve().test("greaterThanOne","Budget must be greater than 1",s=>s>0).required("Budget is required"),tagId:We(),contactsDataId:_().required("Contact is required").test("is-valid-contact","Invalid contact selected",s=>!!H.find(t=>t.value===s))}),{TabNav:Ta,TabList:Aa,TabContent:Ma}=ie,ge=m.forwardRef((s,t)=>{var M,R,F,p;const e=y(o=>o.crmLeads.data.selectedLeads),r=y(o=>o.crmLeads.data.categoryList),l=y(o=>o.crmLeads.data.subCategoryList),c=y(o=>o.crmLeads.data.productList),u=!!e.id,i=v(),x=async(o,d,g)=>{var C,T,j,N;const h=(C=o==null?void 0:o.payload)!=null&&C.success?d:"Something went wrong !!!",w=(T=o==null?void 0:o.payload)!=null&&T.success?(j=o==null?void 0:o.payload)==null?void 0:j.message:g;Y.push(a.jsx(Z,{title:h,type:(N=o==null?void 0:o.payload)!=null&&N.success?"success":"danger",duration:2500,children:w}),{placement:"top-end"})},b=async(o,{setSubmitting:d})=>{try{const g={title:o.title,contactsDataId:o.contactsDataId,product:o.productId.value,status:o.status.value,budget:o.budget.toString(),description:o.notes,tagId:[]},{colorName:h,name:w,tagName:C,...T}=o,j=u?await i(ha({leadsId:(e==null?void 0:e.id)||"",updatedData:g})):await i(xa(g));await x(j,u?"Successfully Updated":"Successfully Added","An error occurred."),i(pe()),await Promise.all([i(A()),i(K())])}catch(g){console.error("An error occurred:",g)}finally{d(!1)}},I=m.useMemo(()=>r.map(d=>({label:d.name,value:d.id})),[r]),P=m.useMemo(()=>l.map(d=>({label:d.name,value:d.id})),[l]),E=m.useMemo(()=>c.map(d=>({label:d.name,value:d.id})),[c]),k=async()=>{var o,d,g,h;(o=e==null?void 0:e.leadProduct)!=null&&o.categoryId&&await i(ne((d=e==null?void 0:e.leadProduct)==null?void 0:d.categoryId)),(g=e==null?void 0:e.leadProduct)!=null&&g.subCategoryId&&await i(re((h=e==null?void 0:e.leadProduct)==null?void 0:h.subCategoryId))};return m.useEffect(()=>{k(),console.log("fetchData")},[e,r,l,i]),a.jsx(He,{innerRef:t,initialValues:{contactsDataId:e.contactsDataId||null,title:(e==null?void 0:e.title)||"",categoryId:(M=e==null?void 0:e.leadProduct)!=null&&M.categoryId?I.find(o=>{var d;return o.value===((d=e==null?void 0:e.leadProduct)==null?void 0:d.categoryId)}):"",subCategoryId:(R=e==null?void 0:e.leadProduct)!=null&&R.subCategoryId?P.find(o=>{var d;return o.value===((d=e==null?void 0:e.leadProduct)==null?void 0:d.subCategoryId)}):"",productId:e!=null&&e.product?E.find(o=>o.value===(e==null?void 0:e.product)):"",status:e!=null&&e.status?oe.find(o=>o.value===(e==null?void 0:e.status)):"",notes:(e==null?void 0:e.description)||"",tagName:((p=(F=e==null?void 0:e.tags)==null?void 0:F[0])==null?void 0:p.tagName)||"",budget:(e==null?void 0:e.budget)||""},validationSchema:Sa,onSubmit:b,children:({touched:o,errors:d,values:g,setFieldValue:h})=>a.jsx(Ke,{children:a.jsx($e,{children:a.jsxs(ie,{defaultValue:"leadsInfo",children:[a.jsx(Aa,{children:a.jsx(Ta,{value:"leadsInfo",children:"Leads Detail"})}),a.jsx("div",{className:"p-6",children:a.jsx(Ma,{value:"leadsInfo",children:a.jsx(Na,{touched:o,errors:d,setFieldValue:h,values:g})})})]})})})})});ge.displayName="LeadsForm";const ye=m.forwardRef((s,t)=>{v();const e=y(l=>l.crmLeads.data.selectedLeads);y(l=>l.crmLeads.data.leadsList);const r=async l=>{};return a.jsx(ge,{ref:t,leads:e,onFormSubmit:r})});ye.displayName="LeadsEditContent";const Fa=({onSaveClick:s,onCancel:t})=>a.jsxs("div",{className:"text-right w-full",children:[a.jsx(ee,{size:"sm",className:"mr-2",onClick:t,children:"Cancel"}),a.jsx(ee,{size:"sm",variant:"solid",onClick:s,children:"Save"})]}),Oa=()=>{const s=v(),t=y(i=>i.crmLeads.data.drawerOpen),[e,r]=m.useState(window.innerWidth/2),l=()=>{s(pe()),s(te({}))},c=m.useRef(null),u=()=>{var i;(i=c.current)==null||i.submitForm()};return m.useEffect(()=>{s(le())},[]),a.jsx(ze,{isOpen:t,closable:!1,bodyClass:"p-0",width:e,footer:a.jsx(Fa,{onCancel:l,onSaveClick:u}),onClose:l,onRequestClose:l,children:a.jsx(ye,{ref:c})})},Pa=()=>{const s=v(),t=y(p=>p.crmLeads.data.displayedLeadsList),e=y(p=>p.crmLeads.data.loading),{pageIndex:r,pageSize:l,sort:c,query:u,total:i}=y(p=>p.crmLeads.data.tableData),x=m.useCallback(()=>{s(A())},[s]);m.useEffect(()=>{x()},[x]);const b=m.useMemo(()=>({pageIndex:r,pageSize:l,sort:c,query:u,total:i}),[r,l,c,u,i]),I=X("Leads","canDelete"),P=X("Leads","canModify"),E=({row:p})=>{const o=v(),{textTheme:d}=Ne(),g=()=>{o(ue()),o(te(p))},h=async()=>{await o(te(p)),o(se(!0))};return a.jsxs("div",{className:"flex justify-start text-lg",children:[I&&a.jsx("span",{className:`cursor-pointer p-2 hover:${d}`,onClick:g,children:a.jsx(Xe,{})}),I&&a.jsx("span",{className:"cursor-pointer p-2 hover:text-red-500",onClick:h,children:a.jsx(Ye,{})})]})},k=m.useMemo(()=>[{header:"Action",id:"action",cell:o=>a.jsx(E,{row:o.row.original})},{header:"Contact Name",accessorKey:"contactName",cell:o=>{var g,h,w,C;const d=((h=(g=o.row.original)==null?void 0:g.contactData)==null?void 0:h.firstName)+" "+((C=(w=o.row.original)==null?void 0:w.contactData)==null?void 0:C.lastName);return a.jsx(z,{text:d,maxLength:20})}},{header:"Title",accessorKey:"title",cell:o=>{const d=o.row.original.title;return a.jsx(z,{text:d,maxLength:20})}},{header:"Product",accessorKey:"leadProduct",cell:o=>{var C,T,j,N,n;const d=o.row.original,g=((T=(C=d.leadProduct)==null?void 0:C.category)==null?void 0:T.name)||"",h=((N=(j=d.leadProduct)==null?void 0:j.subCategory)==null?void 0:N.name)||"",w=`${(n=d.leadProduct)==null?void 0:n.name} => ${g} => ${h}`;return a.jsx(z,{text:w,maxLength:20})}},{header:"Budget",accessorKey:"budget",cell:o=>{const d=o.row.original;return a.jsx(z,{text:d.budget,maxLength:20})}},{header:"Status",accessorKey:"status",cell:o=>{const d=o.row.original;return a.jsx(ve,{status:d.status})}},{header:"Tag Name",accessorKey:"tagName",cell:o=>{const d=o.row.original.tags||[];return a.jsx(Ie,{tags:d})}},{header:"Notes",accessorKey:"description",cell:o=>{const d=o.row.original.description;return a.jsx(z,{text:d,maxLength:20})}}],[P,I]),M=p=>{const o=V(b);o.pageIndex=p,s(U(o))},R=p=>{const o=V(b);o.pageSize=Number(p),o.pageIndex=1,s(U(o))},F=p=>{const o=V(b);o.sort=p,s(U(o))};return a.jsxs("div",{children:[a.jsx(De,{columns:k,data:t,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},loading:e,pagingData:{total:b.total,pageIndex:b.pageIndex,pageSize:b.pageSize},onPaginationChange:M,onSelectChange:R,onSort:F}),a.jsx(Oa,{}),a.jsx(Ia,{})]})},he=m.forwardRef((s,t)=>{const{onInputChange:e}=s,r=ia(l,500);function l(u){e==null||e(u)}const c=u=>{r(u.target.value)};return a.jsx(W,{ref:t,className:"max-w-md md:w-52 mb-4",size:"sm",placeholder:"Search",prefix:a.jsx(Ze,{className:"text-lg"}),onChange:c})});he.displayName="LeadsTableSearch";const Ea=()=>{const s=v(),t=m.useRef(null),e=y(i=>i.crmLeads.data.tableData),r=X("leads","canCreate"),l=i=>{const x=V(e);x.query=i,x.pageIndex=1,typeof i=="string"&&i.length>1&&c(x),typeof i=="string"&&i.length===0&&c(x)},c=i=>{s(i?U(i):A())},u=()=>{s(ue()),s(ma("Add"))};return m.useEffect(()=>{async function i(){await s(la())}i()},[s]),a.jsxs("div",{className:"md:flex items-center justify-between",children:[a.jsx("div",{className:"md:flex items-center gap-4",children:a.jsx(he,{ref:t,onInputChange:l})}),a.jsx("div",{className:"mb-4",children:r&&a.jsx(ee,{size:"sm",onClick:u,children:"Add New"})})]})},J=s=>{const{icon:t,avatarClass:e,label:r,value:l,loading:c}=s,u=55;return a.jsx(oa,{bordered:!0,children:a.jsx(be,{loading:c,customLoader:a.jsx(pa,{avatarProps:{className:"rounded",width:u,height:u}}),children:a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(sa,{className:e,size:u,icon:t}),a.jsxs("div",{children:[a.jsx("span",{children:r}),a.jsx("h3",{children:a.jsx(ga,{thousandSeparator:!0,displayType:"text",value:l})})]})]})})})})},ka=()=>{const s=v(),t=y(r=>r.crmLeads.data.statisticData),e=y(r=>r.crmLeads.data.statisticLoading);return m.useEffect(()=>{s(K())},[]),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 mb-6",children:[a.jsx(J,{icon:a.jsx(ea,{}),avatarClass:"!bg-indigo-600",label:"Total Leads",value:t.totalLeads,growthRate:t==null?void 0:t.totalLeads,loading:e}),a.jsx(J,{icon:a.jsx(aa,{}),avatarClass:"!bg-blue-500",label:"Active Leads",value:t.activeLeads,growthRate:t.activeLeads,loading:e}),a.jsx(J,{icon:a.jsx(ta,{}),avatarClass:"!bg-emerald-500",label:"This Week's New Leads",value:t==null?void 0:t.newLeads,growthRate:t==null?void 0:t.newLeads,loading:e})]})};we("crmLeads",va);const Ra=()=>{const s=y(t=>t.crmLeads.data.tableData);return a.jsxs(a.Fragment,{children:[a.jsx(ka,{}),a.jsxs(je,{bodyClass:"h-full",children:[a.jsx(ua,{title:`Leads (${s==null?void 0:s.total})`,desc:"",className:"mb-2"}),a.jsx(Ea,{}),a.jsx(Pa,{})]})]})},ws=Ra;export{ws as default};
