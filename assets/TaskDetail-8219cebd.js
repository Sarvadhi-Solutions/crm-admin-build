import{al as v,am as I,an as E,ao as L,j as s,a as C,r as A,ap as M,aq as B,at as P,ah as _}from"./index-eaf52e42.js";import{C as Y,i as T}from"./Views-58b94d35.js";import{u as $}from"./CrmService-6468c9e4.js";import{A as R}from"./AdaptableCard-e9f1de59.js";import"./Badge-386f6132.js";import"./chart.constant-216bc474.js";import"./GrowShrinkTag-42fde0af.js";import"./index-ab2b5119.js";import{B as G}from"./Button-fed4171f.js";import"./Dialog-cb605769.js";import"./DataTable-b44d4841.js";import{D as H}from"./DoubleSidedImage-b10cd52b.js";import"./Input-85c69384.js";import"./Skeleton-5a72c339.js";import"./react-tooltip.min-10e8dc9b.js";import"./RichTextEditor-24410772.js";import"./SegmentItemOption-4de5a997.js";import"./SvgIcon-26de8e1d.js";import"./Tooltip-6b1d43dc.js";import{C as O}from"./Card-c132ef99.js";import{t as D,N as y}from"./toast-884670bd.js";import{C as X}from"./ConfirmDialog-d8f491e3.js";import{P as W}from"./index.esm-decdb68b.js";import{u as q,a as N,t as z,d as K,g as j,b as J}from"./index-bc089376.js";import{h as Q}from"./moment-fbc5633a.js";import{S as b}from"./StatusCapsule-f589c1d3.js";import{I as U}from"./index.esm-3a5d3ce1.js";import{T as V}from"./TagsList-5a5abc6a.js";import"./Tag-3d19264a.js";import"./useMergeRef-788c4cb0.js";import"./index-51dad566.js";import"./CloseButton-5416c92a.js";import"./index-e6ca51e2.js";import"./index.esm-819ab12a.js";import"./Pagination-d528edfb.js";import"./Select-dcd56571.js";import"./slicedToArray-1b3ef329.js";import"./objectWithoutProperties-8809bfcf.js";import"./toConsumableArray-5085ff27.js";import"./floating-ui.dom-bef9cea3.js";import"./get-ff4ee146.js";import"./toString-e414acd1.js";import"./_MapCache-f8fbe57f.js";import"./index-1ab36455.js";import"./cloneDeep-9e23e7a1.js";import"./_getPrototype-aa56c24d.js";import"./_baseIsEqual-c1b6b8b3.js";import"./index-437fdc95.js";import"./isNil-d4a6e430.js";import"./useThemeClass-62b227ea.js";import"./usePopper-c621d6e7.js";import"./index.esm-601da8bc.js";import"./index-6c9c5c4e.js";import"./useTimeout-94ee575d.js";import"./StatusIcon-fd205dd6.js";import"./chainedFunction-070f832c.js";import"./index-a3c5150d.js";import"./index-dc715cf2.js";import"./Alert-7a9d7326.js";import"./RangeCalendar-bafec6c1.js";import"./useControllableState-4a07cc2b.js";import"./index-1e41ea20.js";import"./useRootClose-f36be9cb.js";import"./TimeInput-5424b9e7.js";import"./useUniqueId-8353f3b6.js";import"./useDidUpdate-681600b0.js";import"./Drawer-13b79dad.js";import"./index-20363d34.js";import"./useUncertainRef-3af81811.js";import"./index-ccb57c31.js";import"./FormItem-29182244.js";import"./index-4e0334b1.js";import"./index-025d9039.js";import"./Progress-535aa38d.js";import"./index-eea1659e.js";import"./ScrollBar-5063b812.js";import"./index-4d78851d.js";import"./index-316ee910.js";import"./mapCloneElement-97722dc2.js";import"./Switcher-47c4cda2.js";import"./index-bdee5ec8.js";import"./index-081d6477.js";import"./index-f406f1f6.js";import"./Upload-39446094.js";import"./index.esm-024e78b1.js";const F="crmTaskDetails",Z={loading:!0,task:{}},f=v(`${F}/getTaskById`,async t=>{var i,r;try{return await $(t)}catch(l){throw new Error((r=(i=l==null?void 0:l.response)==null?void 0:i.data)==null?void 0:r.message)}}),ss=I({name:`${F}/state`,initialState:Z,reducers:{},extraReducers:t=>{t.addCase(f.fulfilled,(i,r)=>{i.loading=!1,i.task=r==null?void 0:r.payload.data}).addCase(f.pending,i=>{i.loading=!0})}}),es=ss.reducer,ts=E({data:es}),w=L,S=({title:t,value:i})=>s.jsxs("div",{children:[s.jsx("span",{children:t}),s.jsx("p",{className:`text-gray-700 dark:text-gray-200 font-semibold ${(i==null?void 0:i.length)>50?"overflow-y-auto max-h-20":""}`,children:(i==null?void 0:i.length)>50?`${i==null?void 0:i.substring(0,50)}...`:i})]}),is=t=>{const i=q(o=>{var c,a;return(a=(c=o.crmTasks)==null?void 0:c.data)==null?void 0:a.selectedTask}),r=C(),[l,e]=A.useState(!1),g=M(),x=()=>{e(!1)},n=()=>{e(!0)},h=async()=>{var c,a,d;await r(N(t)),r(z(!1));const o=await r(K(i.id));await r(j()),(c=o==null?void 0:o.payload)!=null&&c.success?(D.push(s.jsx(y,{title:"Successfuly Deleted",type:"success",duration:2500,children:(a=o==null?void 0:o.payload)==null?void 0:a.message}),{placement:"top-end"}),g("/app/crm/tasks"),r(N({}))):D.push(s.jsx(y,{title:"Something Went Wrong !!!",type:"danger",duration:2500,children:(d=o==null?void 0:o.error)==null?void 0:d.message}),{placement:"top-end"}),await r(j()),await r(J())};return s.jsxs(s.Fragment,{children:[s.jsx(G,{block:!0,icon:s.jsx(W,{}),variant:"solid",onClick:n,children:"Delete"}),s.jsx(X,{isOpen:l,type:"danger",title:"Delete Task",confirmButtonColor:"red-600",onClose:x,onRequestClose:x,onCancel:x,onConfirm:h,children:s.jsx("p",{children:"Are you sure you want to delete this Task? All record related to this Task will be deleted as well. This action cannot be undone."})})]})},rs=({data:t={}})=>s.jsx(O,{children:s.jsxs("div",{className:"flex flex-col xl:justify-between min-w-[300px] mx-auto p-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-1 gap-y-7 gap-x-4 mt-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"font-semibold",children:"Priority:"}),s.jsx("div",{className:"ml-2",children:s.jsx(b,{status:t==null?void 0:t.priority})})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"font-semibold",children:"Status:"}),s.jsx("div",{className:"ml-2",children:s.jsx(b,{status:t==null?void 0:t.completionStatus})})]}),t!=null&&t.dueDate?s.jsx(s.Fragment,{children:s.jsx(S,{title:"Due Date",value:Q(t==null?void 0:t.dueDate).format("DD MMMM YYYY")})}):null,t!=null&&t.title?s.jsx(s.Fragment,{children:s.jsx(S,{title:"Title",value:t==null?void 0:t.title})}):null]}),s.jsx("div",{className:"mt-4 flex flex-col xl:flex-row gap-2",children:s.jsx(is,{data:t})})]})});B("crmTaskDetails",ts);const Pe=()=>{var o,c,a,d,k;const t=C(),i=P(),{id:r}=i,l=w(m=>{var p,u;return(u=(p=m==null?void 0:m.crmTaskDetails)==null?void 0:p.data)==null?void 0:u.task}),e=l==null?void 0:l.data,g=w(m=>m.crmTaskDetails.data.loading);A.useEffect(()=>{x()},[]);const x=async()=>{r&&t(f(r)),await t(j())},n=({title:m,value:p})=>s.jsxs("div",{children:[s.jsx("span",{children:m}),s.jsx("p",{className:"text-gray-700 dark:text-gray-200 font-semibold",children:p})]}),h=()=>{window.history.back()};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:"15px"},children:[s.jsx("span",{className:"cursor-pointer hover:text-indigo-500 items-center lg mr-2 mt-0",style:{fontSize:"2.5rem",fontWeight:"bold",color:"black"},onClick:h,children:s.jsx(U,{})}),s.jsx("h3",{children:"Task Details"})]}),s.jsxs(Y,{className:"h-full",children:[s.jsx(_,{loading:g,children:!T(e)&&s.jsxs("div",{className:"flex flex-col xl:flex-row gap-4",children:[s.jsx("div",{children:s.jsx(rs,{data:e})}),s.jsx("div",{className:"w-full",children:s.jsx(R,{children:s.jsxs("div",{className:"flex flex-col xl:justify-between h-full 2xl:min-w-[360px] mx-auto",children:[s.jsx(n,{title:"Title",value:e==null?void 0:e.title}),s.jsx("br",{}),e!=null&&e.descriptions?s.jsxs(s.Fragment,{children:[s.jsx(n,{title:"Description",value:e==null?void 0:e.descriptions}),s.jsx("br",{})]}):null,e!=null&&e.assignedToData?s.jsxs(s.Fragment,{children:[s.jsx(n,{title:"Assigned To",value:`${(o=e==null?void 0:e.assignedToData)==null?void 0:o.firstName}  ${(c=e==null?void 0:e.assignedToData)==null?void 0:c.lastName}`}),s.jsx("br",{})]}):null,e!=null&&e.module?s.jsxs(s.Fragment,{children:[s.jsx(n,{title:"Module",value:e==null?void 0:e.module}),s.jsx("br",{})]}):null,e!=null&&e.type?s.jsxs(s.Fragment,{children:[s.jsx(n,{title:"Type",value:e==null?void 0:e.type}),s.jsx("br",{})]}):null,e!=null&&e.nextDateTime?s.jsxs(s.Fragment,{children:[s.jsx(n,{title:"Date Time",value:e==null?void 0:e.nextDateTime}),s.jsx("br",{})]}):null,((a=e==null?void 0:e.tags)==null?void 0:a.length)>0?s.jsxs(s.Fragment,{children:[s.jsx(n,{title:"Tags",value:""}),s.jsx(V,{fullDisplay:!0,tags:e==null?void 0:e.tags}),s.jsx("br",{})]}):null,((d=e==null?void 0:e.taskFields)==null?void 0:d.length)>0?s.jsxs(s.Fragment,{children:[(k=e.taskFields)==null?void 0:k.map((m,p)=>{var u;return s.jsxs(s.Fragment,{children:[s.jsx(n,{title:(u=m.customKey)==null?void 0:u.name,value:m.value}),p<e.taskFields.length-1&&s.jsx("br",{})]})}),s.jsx("br",{})]}):null]})})})]})}),!g&&T(e)&&s.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[s.jsx(H,{src:"/img/others/img-2.png",darkModeSrc:"/img/others/img-2-dark.png",alt:"No user found!"}),s.jsx("h3",{className:"mt-8",children:"No user found!"})]})]})]})};export{Pe as default};
