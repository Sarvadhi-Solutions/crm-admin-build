import{r as l,j as n,ai as O,c as _}from"./index-b09faefa.js";import{T as M}from"./index-a157bc37.js";import{P as B}from"./Pagination-d71ebe95.js";import{S as L}from"./Select-71db8857.js";import{C as V}from"./index-c173cf47.js";import{T as W}from"./TableRowSkeleton-a83d3c9d.js";import{u as $,f as T,g as q,b as G,d as J,a as K}from"./index-e08096fb.js";const{Tr:v,Th:Q,Td:U,THead:X,TBody:Y,Sorter:Z}=M,k=p=>{const{indeterminate:d,onChange:f,onCheckBoxChange:i,onIndeterminateCheckBoxChange:r,...s}=p,o=l.useRef(null);l.useEffect(()=>{typeof d=="boolean"&&o.current&&(o.current.indeterminate=!s.checked&&d)},[o,d]);const g=a=>{f(a),i==null||i(a),r==null||r(a)};return n.jsx(V,{ref:o,className:"mb-0",onChange:(a,m)=>g(m),...s})};function ee(p,d){const{skeletonAvatarColumns:f,columns:i=[],data:r=[],loading:s=!1,onCheckBoxChange:o,onIndeterminateCheckBoxChange:g,onPaginationChange:a,onSelectChange:m,onSort:h,pageSizes:C=[10,25,50,100],selectable:j=!1,skeletonAvatarProps:P,pagingData:R={total:0,pageIndex:1,pageSize:10}}=p,{pageSize:S,pageIndex:y,total:I}=R,[c,A]=l.useState(null),b=l.useMemo(()=>C.map(t=>({value:t,label:`${t} / page`})),[C]),N=(t,e)=>{s||o==null||o(t,e)},z=(t,e)=>{s||g==null||g(t,e)},D=t=>{s||a==null||a(t)},H=t=>{s||m==null||m(Number(t))};l.useEffect(()=>{if(Array.isArray(c)){const t=c.length>0?c[0].desc?"desc":"asc":"",e=c.length>0?c[0].id:"";h==null||h({order:t,key:e})}},[c]);const w=l.useMemo(()=>{const t=i;return j?[{id:"select",header:({table:e})=>n.jsx(k,{checked:e.getIsAllRowsSelected(),indeterminate:e.getIsSomeRowsSelected(),onChange:e.getToggleAllRowsSelectedHandler(),onIndeterminateCheckBoxChange:x=>{z(x.target.checked,e.getRowModel().rows)}}),cell:({row:e})=>n.jsx(k,{checked:e.getIsSelected(),disabled:!e.getCanSelect(),indeterminate:e.getIsSomeSelected(),onChange:e.getToggleSelectedHandler(),onCheckBoxChange:x=>N(x.target.checked,e.original)})},...t]:t},[i,j]),u=$({data:r,columns:w,getCoreRowModel:q(),getFilteredRowModel:G(),getPaginationRowModel:J(),getSortedRowModel:K(),manualPagination:!0,manualSorting:!0,onSortingChange:t=>{A(t)},state:{sorting:c}}),E=()=>{u.resetSorting()},F=()=>{u.toggleAllRowsSelected(!1)};return l.useImperativeHandle(d,()=>({resetSorting:E,resetSelected:F})),n.jsxs(O,{loading:s&&r.length!==0,type:"cover",children:[n.jsxs(M,{children:[n.jsx(X,{children:u.getHeaderGroups().map(t=>n.jsx(v,{children:t.headers.map(e=>n.jsx(Q,{colSpan:e.colSpan,className:"!py-3 !px-3",children:e.isPlaceholder?null:n.jsxs("div",{className:_(e.column.getCanSort()&&"cursor-pointer select-none point",s&&"pointer-events-none"),onClick:e.column.getToggleSortingHandler(),children:[T(e.column.columnDef.header,e.getContext()),e.column.getCanSort()&&n.jsx(Z,{sort:e.column.getIsSorted()})]})},e.id))},t.id))}),s&&r.length===0?n.jsx(W,{columns:w.length,rows:R.pageSize,avatarInColumns:f,avatarProps:P}):n.jsx(Y,{children:u.getRowModel().rows.slice(0,S).map(t=>n.jsx(v,{children:t.getVisibleCells().map(e=>n.jsx(U,{className:"!py-2 !px-3",children:T(e.column.columnDef.cell,e.getContext())},e.id))},t.id))})]}),n.jsxs("div",{className:"flex items-center justify-between mt-4",children:[n.jsx(B,{pageSize:S,currentPage:y,total:I,onChange:D}),n.jsx("div",{style:{minWidth:130},children:n.jsx(L,{size:"sm",menuPlacement:"top",isSearchable:!1,value:b.filter(t=>t.value===S),options:b,onChange:t=>H(t==null?void 0:t.value)})})]})]})}const ce=l.forwardRef(ee);export{ce as D};
