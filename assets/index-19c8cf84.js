import{am as $,an as q,ao as B,ap as H,a as j,r as u,j as r,c as k,as as U,aq as V,ar as Q}from"./index-7c10d2a3.js";import{T as K}from"./index-5aafa10e.js";import{A as G}from"./AdaptableCard-d528512e.js";import{c as Y}from"./CryptoService-79721dbd.js";import{c as h}from"./cloneDeep-b9fa1e05.js";import{A as _}from"./index-e31e1427.js";import{D as M}from"./DataTable-9505e436.js";import{B as J}from"./Button-208b5861.js";import{g as N}from"./GrowShrinkTag-f3d3d35f.js";import{N as x}from"./react-number-format.es-ddce5a63.js";import{D as W}from"./Dialog-ab50fc44.js";import{T as X,P as Z}from"./ProceedTrade-5726f750.js";import{i as T}from"./Views-5cb69e9a.js";import{I as D}from"./Input-81114df0.js";import{b as ee}from"./index.esm-d9298b40.js";import{d as oe}from"./debounce-1dc8077b.js";import"./useControllableState-8172e3e5.js";import"./Card-4ce3f213.js";import"./_Uint8Array-be229bd0.js";import"./_MapCache-e75dc2ce.js";import"./_getPrototype-2f204ca7.js";import"./useMergeRef-788c4cb0.js";import"./Tooltip-6aa5489c.js";import"./usePopper-80f33697.js";import"./index.esm-db0614cf.js";import"./index-be56d80d.js";import"./index-db1f8ae2.js";import"./index.esm-8bc236a5.js";import"./Pagination-16369f4c.js";import"./Select-013d671c.js";import"./slicedToArray-afe06b21.js";import"./objectWithoutProperties-8e2777d0.js";import"./objectWithoutPropertiesLoose-4f48578a.js";import"./extends-98964cd2.js";import"./toConsumableArray-2133173c.js";import"./floating-ui.dom-bef9cea3.js";import"./get-5a481960.js";import"./toString-18e1007d.js";import"./context-0e2e9d1c.js";import"./index-7ee2fb06.js";import"./_baseIsEqual-47871e7b.js";import"./TableRowSkeleton-9a6a577f.js";import"./Skeleton-f2ce5fc2.js";import"./index-92fee75d.js";import"./Tag-b24b6dab.js";import"./index-72e63a8f.js";import"./CloseButton-7345a4c9.js";import"./index-c64ed13c.js";import"./FormItem-dcfd8ab9.js";import"./Badge-96f53043.js";import"./chart.constant-57a13969.js";import"./chart.config-0ddaad92.js";import"./FormNumericInput-6bc37241.js";import"./react-tooltip.min-9388cc4a.js";import"./RichTextEditor-e866ff66.js";import"./SegmentItemOption-258ccd40.js";import"./useThemeClass-44058c3e.js";import"./SvgIcon-a95f3cc5.js";import"./formik.esm-9efe14ff.js";import"./index.esm-a61d5a6d.js";import"./isNil-d3ca72b8.js";const F="cryptoMarket",C=$(F+"/getMarketData",async t=>(await Y(t)).data),R={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},re={loading:!0,marketData:[],tableData:R,selectedTab:"all",tradeDialogOpen:!1,selectedRow:{}},z=q({name:`${F}/state`,initialState:re,reducers:{setSelectedTab:(t,a)=>{t.selectedTab=a.payload},setTableData:(t,a)=>{t.tableData=a.payload},setMarketData:(t,a)=>{t.marketData=a.payload},toggleTradeDialog:(t,a)=>{t.tradeDialogOpen=a.payload},setSelectedRow:(t,a)=>{t.selectedRow=a.payload}},extraReducers:t=>{t.addCase(C.fulfilled,(a,s)=>{a.loading=!1,a.tableData.total=s.payload.total,a.marketData=s.payload.data}).addCase(C.pending,a=>{a.loading=!0})}}),{setSelectedTab:se,setTableData:d,setMarketData:te,toggleTradeDialog:A,setSelectedRow:P}=z.actions,ae=z.reducer,ne=B({data:ae}),y=H,I=({row:t})=>{const a=j(),s=u.useCallback(()=>{a(A(!0)),a(P(t))},[a,t]);return r.jsx("div",{className:"ltr:text-right rtl:text-left",children:r.jsx(J,{size:"sm",onClick:s,children:"Trade"})})},ce=({data:t,loading:a,tableData:s})=>{const n=j(),i=u.useMemo(()=>[{header:"Name",accessorKey:"name",cell:o=>{const{img:e,symbol:l,name:w}=o.row.original;return r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(_,{src:e,size:"sm",className:"!bg-transparent"}),r.jsx("span",{className:"font-bold heading-text",children:l}),r.jsx("span",{children:w})]})}},{header:"Price",accessorKey:"price",cell:o=>{const e=o.row.original;return r.jsx(x,{displayType:"text",value:(Math.round(e.price*100)/100).toFixed(2),suffix:" USD",thousandSeparator:!0})}},{header:"24h Change",accessorKey:"change",cell:o=>{const{change:e}=o.row.original;return r.jsxs("span",{className:k("font-semibold",N(e,"text")),children:[e>0&&"+",e,"%"]})}},{header:"24h Volumn",accessorKey:"volumn",cell:o=>{const{volumn:e}=o.row.original;return r.jsxs("span",{children:[e,"M"]})}},{header:"Market Cap",accessorKey:"marketCap",cell:o=>{const{marketCap:e}=o.row.original;return r.jsxs("span",{children:["$",e,"M"]})}},{header:"",id:"action",cell:o=>{const e=o.row.original;return r.jsx(I,{row:e})}}],[]),c=o=>{const e=h(s);e.pageIndex=o,n(d(e))},g=o=>{const e=h(s);e.pageSize=Number(o),e.pageIndex=1,n(d(e))},p=o=>{const e=h(s);e.sort=o,n(d(e))};return r.jsx(M,{columns:i,data:t,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28,className:"rounded-md"},loading:a,pagingData:{total:s==null?void 0:s.total,pageIndex:s==null?void 0:s.pageIndex,pageSize:s==null?void 0:s.pageSize},onPaginationChange:c,onSelectChange:g,onSort:p})},ie=({data:t,loading:a,tableData:s})=>{const n=U(),i=u.useMemo(()=>[{header:"Name",accessorKey:"name",cell:o=>{const{name:e}=o.row.original;return r.jsx("span",{className:"font-bold heading-text",children:e})}},{header:"Price",accessorKey:"price",cell:o=>{const e=o.row.original;return r.jsxs("span",{children:[r.jsx(x,{displayType:"text",value:(Math.round(e.amount*100)/100).toFixed(2),thousandSeparator:!0}),r.jsx("span",{children:" / "}),r.jsx(x,{displayType:"text",value:(Math.round(e.price*100)/100).toFixed(2),prefix:"$",thousandSeparator:!0})]})}},{header:"24h Change",accessorKey:"change",cell:o=>{const{change:e}=o.row.original;return r.jsxs("span",{className:k("font-semibold",N(e,"text")),children:[e>0&&"+",e,"%"]})}},{header:"24h High /24h Low",accessorKey:"high",cell:o=>{const{high:e,low:l}=o.row.original;return r.jsxs("span",{children:[e," / ",l]})}},{header:"24h Volumn",accessorKey:"volumn",cell:o=>{const{volumn:e}=o.row.original;return r.jsx(x,{displayType:"text",value:(Math.round(e*100)/100).toFixed(2),thousandSeparator:!0})}},{header:"24h Turnover",accessorKey:"turnOver",cell:o=>{const{turnOver:e}=o.row.original;return r.jsxs("span",{children:["$",e,"M"]})}},{header:"",id:"action",cell:o=>{const e=o.row.original;return r.jsx(I,{row:e})}}],[]),c=o=>{const e=h(s);e.pageIndex=o,n(d(e))},g=o=>{const e=h(s);e.pageSize=Number(o),e.pageIndex=1,n(d(e))},p=o=>{const e=h(s);e.sort=o,n(d(e))};return r.jsx(M,{columns:i,data:t,loading:a,pagingData:{total:s==null?void 0:s.total,pageIndex:s==null?void 0:s.pageIndex,pageSize:s==null?void 0:s.pageSize},onPaginationChange:c,onSelectChange:g,onSort:p})},le=({data:t,loading:a,tableData:s})=>{const n=j(),i=u.useMemo(()=>[{header:"Name",accessorKey:"name",cell:o=>{const{name:e}=o.row.original;return r.jsx("span",{className:"font-bold heading-text",children:e})}},{header:"Price",accessorKey:"price",cell:o=>{const e=o.row.original;return r.jsxs("span",{children:[r.jsx(x,{displayType:"text",value:(Math.round(e.amount*100)/100).toFixed(2),thousandSeparator:!0}),r.jsx("span",{children:" / "}),r.jsx(x,{displayType:"text",value:(Math.round(e.price*100)/100).toFixed(2),prefix:"$",thousandSeparator:!0})]})}},{header:"24h Change",accessorKey:"change",cell:o=>{const{change:e}=o.row.original;return r.jsxs("span",{className:k("font-semibold",N(e,"text")),children:[e>0&&"+",e,"%"]})}},{header:"24h High /24h Low",accessorKey:"high",cell:o=>{const{high:e,low:l}=o.row.original;return r.jsxs("span",{children:[e," / ",l]})}},{header:"24h Volumn",accessorKey:"volumn",cell:o=>{const{volumn:e}=o.row.original;return r.jsx(x,{displayType:"text",value:(Math.round(e*100)/100).toFixed(2),thousandSeparator:!0})}},{header:"",id:"action",cell:o=>{const e=o.row.original;return r.jsx(I,{row:e})}}],[]),c=o=>{const e=h(s);e.pageIndex=o,n(d(e))},g=o=>{const e=h(s);e.pageSize=Number(o),e.pageIndex=1,n(d(e))},p=o=>{const e=h(s);e.sort=o,n(d(e))};return r.jsx(M,{columns:i,data:t,loading:a,pagingData:{total:s==null?void 0:s.total,pageIndex:s==null?void 0:s.pageIndex,pageSize:s==null?void 0:s.pageSize},onPaginationChange:c,onSelectChange:g,onSort:p})},de=()=>{const t=j(),a=V(),s=y(m=>m.cryptoMarket.data.tradeDialogOpen),n=y(m=>m.cryptoMarket.data.selectedRow),[i,c]=u.useState({}),[g,p]=u.useState(!1),[o,e]=u.useState(""),l=()=>{t(A(!1)),setTimeout(()=>{t(P({})),c({}),p(!1),e("")},500)},w=(m,f,b)=>{f(!0),setTimeout(()=>{c({...m,type:b}),p(!1),e("")},500)},O=()=>{p(!0),setTimeout(()=>{e("SUCCESS")},1e3)},L=m=>{l(),m&&a("/app/crypto/wallets")};return r.jsxs(W,{isOpen:s,closable:!o,width:400,onRequestClose:l,onClose:l,children:[r.jsxs("h5",{className:"mb-4",children:[T(i)&&!o&&`Trade ${n.symbol}`,!T(i)&&!o&&"Order preview"]}),T(i)?r.jsx(X,{amount:n.price,symbol:n.symbol,onBuy:(m,f)=>w(m,f,"BUY"),onSell:(m,f)=>w(m,f,"SELL")}):r.jsx(Z,{loading:g,status:o,onConfirm:O,onDone:L,...i})]})},E=u.forwardRef(({onInputChange:t},a)=>{const s=oe(n,500);function n(c){t==null||t(c)}const i=c=>{s(c.target.value)};return r.jsx(D,{ref:a,className:"lg:w-52",size:"sm",placeholder:"Search",prefix:r.jsx(ee,{className:"text-lg"}),onChange:i})});E.displayName="QueryInput";Q("cryptoMarket",ne);const{TabNav:S,TabList:pe,TabContent:v}=K,me=()=>{const t=j(),a=u.useRef(null),s=y(e=>e.cryptoMarket.data.marketData),n=y(e=>e.cryptoMarket.data.loading),i=y(e=>e.cryptoMarket.data.selectedTab),c=y(e=>e.cryptoMarket.data.tableData);u.useEffect(()=>{g()},[t,i,c]);const g=()=>{t(C({tab:i,...c}))},p=e=>{t(te([])),t(se(e)),t(d(R))},o=e=>{const l=h(c);l.query=e,l.pageIndex=1,typeof e=="string"&&e.length>1&&t(d(l)),typeof e=="string"&&e.length===0&&t(d(l))};return r.jsxs(r.Fragment,{children:[r.jsx(G,{children:r.jsxs(K,{value:i,variant:"pill",onChange:p,children:[r.jsxs("div",{className:"flex lg:items-center justify-between flex-col lg:flex-row gap-4",children:[r.jsxs(pe,{children:[r.jsx(S,{value:"all",children:"All"}),r.jsx(S,{value:"spot",children:"Spot"}),r.jsx(S,{value:"futures",children:"Futures"})]}),r.jsx(E,{ref:a,onInputChange:o})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx(v,{value:"all",children:r.jsx(ce,{data:s,loading:n,tableData:c})}),r.jsx(v,{value:"spot",children:r.jsx(ie,{data:s,loading:n,tableData:c})}),r.jsx(v,{value:"futures",children:r.jsx(le,{data:s,loading:n,tableData:c})})]})]})}),r.jsx(de,{})]})},To=me;export{To as default};
