import{a as v,r as b,j as e,ah as Ce,ap as Ne,as as Le,aq as ye}from"./index-4fc5ac15.js";import{A as De}from"./AdaptableCard-1a3c680d.js";import{F as ce}from"./FormDesription-3c355ebc.js";import{C as ve}from"./Card-a6171fd9.js";import{A as we}from"./index-ade064c2.js";import{M as Se}from"./MediaSkeleton-06a7515e.js";import{u as g,g as te,t as ee,d as Ie,a as O,b as Te,c as Fe,f as Ae,e as Ee,h as ae,i as ke,s as le,j as Oe,k,l as $,m as q,n as de,r as Re}from"./index-0586c115.js";import{o as Me,N as qe,C as ze,O as Be,P as $e,Q as We,b as Ve}from"./index.esm-4a8db888.js";import{N as Pe}from"./react-number-format.es-908be38c.js";import{D as Ke}from"./DataTable-814cf5c6.js";import{S as He}from"./StatusCapsule-24c9014d.js";import{T as Ge}from"./TagsList-c9bbc304.js";import{T as R}from"./TextTruncate-2746f080.js";import{u as _}from"./checkEditUpdate-eb39f2b1.js";import{u as Ue}from"./useThemeClass-9af86e8e.js";import{c as Q}from"./cloneDeep-715f167a.js";import{t as W,N as V}from"./toast-b752ab56.js";import{C as _e}from"./ConfirmDialog-a24226b8.js";import{B as P}from"./Button-7cd7d853.js";import{D as Qe}from"./Drawer-8dc2fd43.js";import{a as S,F as me}from"./FormItem-e8ff9726.js";import{T as ue}from"./index-dbee2c90.js";import{u as Je,b as T,F as pe,a as xe}from"./formik.esm-7fc98ee2.js";import{c as he,a as M,d as Xe,e as Ye}from"./index.esm-4c38c838.js";import{I as F}from"./Input-3854a622.js";/* empty css              */import"./Alert-7075f24d.js";import"./Badge-19df83fb.js";import"./RangeCalendar-5dd6ce1b.js";import"./index-2e6c9811.js";import"./index-f81c3042.js";import{D as Ze}from"./Dialog-5d93bc0a.js";import"./index-3903fc17.js";import"./toString-73aeebea.js";import"./index-d3c2681a.js";import"./index-99b428ba.js";import"./index-8ced4f1f.js";import"./Pagination-1e482b61.js";import"./Progress-352773c6.js";import"./index-5dc9acd3.js";import"./ScrollBar-abdf3e1e.js";import"./index-1ece77e8.js";import{S as ie}from"./Select-9180a255.js";import"./Skeleton-cef4628a.js";import"./index-5597ebd0.js";import"./Switcher-900c0698.js";import"./index-829995d1.js";import"./Tag-4b3b0483.js";import"./index-e5b54797.js";import"./index-534786cf.js";import{T as E}from"./Tooltip-56ad0384.js";import"./Upload-fe7ae2cb.js";import{t as et}from"./tagAndCategory-228f57e7.js";import{B as tt,a as at}from"./index.esm-e8f8cad7.js";import{G as st}from"./index.esm-02396f1d.js";import{M as rt}from"./index.esm-3573a53a.js";import{T as ot,a as nt}from"./index.esm-5081313b.js";import{B as it}from"./index.esm-f7b1fab3.js";import{A as ct,a as lt}from"./index.esm-1c33c198.js";import"./Views-63244708.js";import"./chart.constant-abefb831.js";import"./chart.config-099ad096.js";import"./GrowShrinkTag-093ec060.js";import"./react-tooltip.min-5552979b.js";import"./RichTextEditor-21962299.js";import"./SegmentItemOption-32fcaaa1.js";import{S as dt}from"./StickyFooter-77543de3.js";import"./SvgIcon-cd84e0c4.js";import{G as mt}from"./index.esm-aebda4b5.js";import{s as ut}from"./index-1b6a1add.js";import{d as pt}from"./debounce-cd228677.js";import"./useMergeRef-788c4cb0.js";import"./CrmService-81e45160.js";import"./index-ec319dcf.js";import"./_MapCache-dfc091e9.js";import"./_getPrototype-20c9b4ef.js";import"./useTimeout-a3a009a3.js";import"./CloseButton-f8a68d34.js";import"./StatusIcon-8eee481a.js";import"./chainedFunction-070f832c.js";import"./index-c0cd6553.js";import"./index-e53d26a4.js";import"./useControllableState-74f1ae93.js";import"./isNil-fa9ab935.js";import"./get-a17bfffb.js";import"./_baseIsEqual-049acdee.js";import"./useRootClose-4eeaabec.js";import"./usePopper-eba58dea.js";import"./TimeInput-a955edd7.js";import"./useUniqueId-f42ae95b.js";import"./useDidUpdate-2beb4a11.js";import"./useUncertainRef-41ed3c8c.js";import"./slicedToArray-a75daa7f.js";import"./objectWithoutProperties-8809bfcf.js";import"./toConsumableArray-b436f755.js";import"./floating-ui.dom-bef9cea3.js";import"./mapCloneElement-08e14627.js";import"./index.esm-e8eb3d5a.js";import"./index.esm-6e8bde72.js";import"./index-c501e7f3.js";import"./index-184022f2.js";const Z=a=>{const{icon:n,avatarClass:t,label:u,value:p,loading:i}=a,d=55;return e.jsx(ve,{bordered:!0,children:e.jsx(Ce,{loading:i,customLoader:e.jsx(Se,{avatarProps:{className:"rounded",width:d,height:d}}),children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(we,{className:t,size:d,icon:n}),e.jsxs("div",{children:[e.jsx("span",{children:u}),e.jsx("h3",{children:e.jsx(Pe,{thousandSeparator:!0,displayType:"text",value:p})})]})]})})})})},xt=()=>{const a=v(),n=g(u=>u.crmLeads.data.statisticData),t=g(u=>u.crmLeads.data.statisticLoading);return b.useEffect(()=>{a(te())},[]),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 mb-6",children:[e.jsx(Z,{icon:e.jsx(Me,{}),avatarClass:"!bg-indigo-600",label:"Total Leads",value:n.totalLeads,growthRate:n==null?void 0:n.totalLeads,loading:t}),e.jsx(Z,{icon:e.jsx(qe,{}),avatarClass:"!bg-blue-500",label:"Open Leads",value:n.openLeads,growthRate:n.openLeads,loading:t}),e.jsx(Z,{icon:e.jsx(ze,{}),avatarClass:"!bg-emerald-500",label:"This Week's New Leads",value:n==null?void 0:n.newLeads,growthRate:n==null?void 0:n.newLeads,loading:t})]})},ht=()=>{const a=v(),n=g(i=>i.crmLeads.data.deleteConfirmation),t=g(i=>i.crmLeads.data.selectedLeads),u=()=>{a(ee(!1))},p=async()=>{var d,l,x;a(ee(!1));const i=await a(Ie(t.id));await a(O()),(d=i==null?void 0:i.payload)!=null&&d.success?W.push(e.jsx(V,{title:"Successfuly Deleted",type:"success",duration:2500,children:(l=i==null?void 0:i.payload)==null?void 0:l.message}),{placement:"top-end"}):W.push(e.jsx(V,{title:"Something Went Wrong !!!",type:"danger",duration:2500,children:(x=i==null?void 0:i.error)==null?void 0:x.message}),{placement:"top-end"}),await a(O()),await a(te())};return e.jsx(_e,{isOpen:n,type:"danger",title:"Delete Lead",confirmButtonColor:"red-600",onClose:u,onRequestClose:u,onCancel:u,onConfirm:p,children:e.jsx("p",{children:"Are you sure you want to delete this Lead? All record related to this lead will be deleted as well. This action cannot be undone."})})},B=[],gt=a=>{const{touched:n,errors:t,setFieldValue:u,values:p}=a,i=v(),d=Je(),[l,x]=b.useState(null),[y,s]=b.useState([]),h=g(r=>r.crmLeads.data.contactList);B.length=0;const C=g(r=>{var j;return(j=r.crmLeads.data.customField)==null?void 0:j.data});g(r=>r.crmLeads.data.leadsList),h==null||h.forEach(r=>{B.push({value:r==null?void 0:r.id,label:`${r==null?void 0:r.firstName} ${r==null?void 0:r.lastName}`})}),b.useEffect(()=>{const r=async()=>{var j,L;try{const{payload:N}=await i(Ae()),D=(j=N==null?void 0:N.data)==null?void 0:j.find(I=>(I==null?void 0:I.moduleName)==="leads");if(D){const{payload:I}=await i(Ee({id:(L=D==null?void 0:D.id)==null?void 0:L.toString()})),z=et(I.data);s(z)}}catch(N){console.error("Error fetching module data:",N)}};x(p.contactsDataId),r(),i(Te()),i(Fe())},[i]),g(r=>r.crmLeads.data.selectedLeads);const f=r=>{d.setFieldValue("tagId",r)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(S,{label:"Contact Name",invalid:t.contactsDataId&&n.contactsDataId,errorMessage:t.contactsDataId,children:e.jsx(ie,{name:"contactsDataId",placeholder:"Contact Name",options:B,id:"contactsDataId",value:B.find(r=>(r==null?void 0:r.value)===(p==null?void 0:p.contactsDataId)),onChange:r=>{const j=r.value;u("email",""),u("contactNumber",""),x(j),u("contactsDataId",j)}})})}),e.jsx("div",{className:"col-span-1",children:e.jsx(S,{label:"Title*",invalid:t.title&&n.title,errorMessage:t.title,children:e.jsx(T,{type:"text",autoComplete:"off",name:"title",placeholder:"Title",component:F,prefix:e.jsx(rt,{className:"text-xl"})})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[!l&&e.jsx("div",{className:"col-span-1",children:e.jsx(S,{label:"Email*",invalid:t.email&&n.email,errorMessage:t.email,children:e.jsx(T,{type:"text",autoComplete:"off",name:"email",placeholder:"Email",component:F,prefix:e.jsx(Be,{className:"text-xl"})})})}),!l&&e.jsx("div",{className:"col-span-1",children:e.jsx(S,{label:"Contact Number*",invalid:t.contactNumber&&n.contactNumber,errorMessage:t.contactNumber,children:e.jsx(T,{type:"text",autoComplete:"off",name:"contactNumber",placeholder:"Contact Number",component:F,prefix:e.jsx(tt,{className:"text-xl"})})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(S,{label:"Budget",invalid:t.budget&&n.budget,errorMessage:t.budget,children:e.jsx(T,{type:"number",autoComplete:"off",name:"budget",placeholder:"Budget",component:F,prefix:e.jsx(at,{className:"text-xl"})})})}),e.jsx("div",{className:"col-span-1",children:e.jsx(S,{label:"Tag",children:e.jsx(T,{isClearable:!0,isMulti:!0,type:"text",autoComplete:"off",name:"tagId",placeholder:"Select tags",component:ie,options:y,prefix:e.jsx(st,{className:"text-xl"}),closeMenuOnSelect:!1,onChange:f})})})]}),e.jsx(S,{label:"Notes",invalid:t.notes&&n.notes,errorMessage:t.notes,children:e.jsx(T,{textArea:!0,type:"text",autoComplete:"off",name:"notes",placeholder:"Notes",component:F,prefix:e.jsx(ot,{className:"text-xl"})})}),e.jsx(ce,{title:"Additional Details",desc:"",className:"mb-2"}),C==null?void 0:C.map(r=>e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsx("div",{className:"col-span-1",children:e.jsx(S,{label:r==null?void 0:r.name,children:e.jsx(T,{type:"text",autoComplete:"off",name:r.name,placeholder:r==null?void 0:r.name,component:F,prefix:e.jsx(it,{className:"text-xl"})})})},r.id)},r.id))]})},ft=he().shape({title:M().required("Title is required"),notes:M(),contactNumber:M().test("validateContactNumber","Invalid contact number",function(a){if(!this.parent.contactsDataId){if(!a)return this.createError({message:"Contact is required"});const t=Number(a);if(isNaN(t))return this.createError({message:"Contact must be a number"});if(a.length!==10)return this.createError({message:"Contact must have exactly 10 digits"});if(a.startsWith("0"))return this.createError({message:"Contact number cannot start with 0"})}return!0}),email:M().test("validateEmail","Invalid email",function(a){return this.parent.contactsDataId?!0:!!a||this.createError({message:"Email is required"})}),budget:Xe().test("greaterThanOne","Budget must be greater than 1",a=>a>0).required("Budget is required"),tagId:Ye(),contactsDataId:M().test("is-valid-contact","Invalid contact selected",function(a){return this.parent.contactsDataId&&this.parent.contactsDataId.length>0?!!B.find(n=>n.value===a):!0})}),{TabNav:jt,TabList:bt,TabContent:Ct}=ue,ge=b.forwardRef((a,n)=>{var x,y;const t=g(s=>s.crmLeads.data.selectedLeads),u=!!t.id,p=g(s=>{var h;return(h=s.crmLeads.data.customField)==null?void 0:h.data}),i=v(),d=async(s,h,C)=>{var j,L,N,D;const f=(j=s==null?void 0:s.payload)!=null&&j.success?h:"Something went wrong !!!",r=(L=s==null?void 0:s.payload)!=null&&L.success?(N=s==null?void 0:s.payload)==null?void 0:N.message:C;W.push(e.jsx(V,{title:f,type:(D=s==null?void 0:s.payload)!=null&&D.success?"success":"danger",duration:2500,children:r}),{placement:"top-end"})},l=async(s,{setSubmitting:h})=>{const C=p.reduce((f,r)=>(f[r.name]=s[r.name],f),{});try{const f={title:s.title,contactsDataId:s.contactsDataId,email:s.email,contactNumber:s.contactNumber,budget:s.budget.toString(),description:s.notes,tagId:s==null?void 0:s.tagId.map(z=>z.value),...C},{name:r,tagName:j,...L}=s,N=u?await i(ae({leadsId:(t==null?void 0:t.id)||"",updatedData:f})):await i(ke(f));await d(N,u?"Successfully Updated":"Successfully Added","An error occurred."),i(le()),await Promise.all([i(O()),i(te())])}catch(f){console.error("An error occurred:",f)}finally{h(!1)}};return e.jsx(pe,{innerRef:n,initialValues:{contactsDataId:t.contactsDataId||"",title:(t==null?void 0:t.title)||"",notes:(t==null?void 0:t.description)||"",tagId:((x=t==null?void 0:t.tags)==null?void 0:x.map(s=>({label:s.tagName,value:s.id})))||[],budget:(t==null?void 0:t.budget)||"",contactNumber:(t==null?void 0:t.contactNumber)||"",email:(t==null?void 0:t.email)||"",...(y=t==null?void 0:t.leadFields)==null?void 0:y.reduce((s,h)=>(s[h.customKey.name]=h.value||"",s),{})},validationSchema:ft,onSubmit:l,children:({touched:s,errors:h,values:C,setFieldValue:f})=>e.jsx(xe,{children:e.jsx(me,{children:e.jsxs(ue,{defaultValue:"leadsInfo",children:[e.jsx(bt,{children:e.jsx(jt,{value:"leadsInfo",children:"Leads Detail"})}),e.jsx("div",{className:"p-6",children:e.jsx(Ct,{value:"leadsInfo",children:e.jsx(gt,{touched:s,errors:h,setFieldValue:f,values:C})})})]})})})})});ge.displayName="LeadsForm";const fe=b.forwardRef((a,n)=>{v();const t=g(p=>p.crmLeads.data.selectedLeads);g(p=>p.crmLeads.data.leadsList);const u=async p=>{};return e.jsx(ge,{ref:n,leads:t,onFormSubmit:u})});fe.displayName="LeadsEditContent";const Nt=({onSaveClick:a,onCancel:n})=>e.jsxs("div",{className:"text-right w-full",children:[e.jsx(P,{size:"sm",className:"mr-2",onClick:n,children:"Cancel"}),e.jsx(P,{size:"sm",variant:"solid",onClick:a,children:"Save"})]}),Lt=()=>{const a=v(),n=g(x=>x.crmLeads.data.drawerOpen),[t,u]=b.useState(window.innerWidth/2),p=()=>{a(le()),a(k({}))},i=b.useRef(null),d=()=>{var x;(x=i.current)==null||x.submitForm()};b.useEffect(()=>(window.addEventListener("resize",l),a(Oe()),()=>{window.removeEventListener("resize",l)}),[]);const l=()=>{u(window.innerWidth/2)};return e.jsx(Qe,{isOpen:n,closable:!1,bodyClass:"p-0",width:t,footer:e.jsx(Nt,{onCancel:p,onSaveClick:d}),onClose:p,onRequestClose:p,children:e.jsx(fe,{ref:i})})},yt=he().shape({reason:M().required("Reason is required")}),je=b.forwardRef((a,n)=>{const t=v(),u=g(d=>d.crmLeads.data.selectedLeads),p=()=>{t($(!1))},i=async(d,l,x,y)=>{var r,j,L;const s=await x(ae({leadsId:l==null?void 0:l.id,updatedData:{reason:d.reason,status:d.status}}));let h="",C="",f="danger";(r=s==null?void 0:s.payload)!=null&&r.success?(h="Successfully Added",C=(j=s==null?void 0:s.payload)==null?void 0:j.message,f="success"):(h="Something went wrong !!!",C=(L=s==null?void 0:s.error)==null?void 0:L.message),y.push(e.jsx(V,{title:h,type:f,duration:2500,children:C}),{placement:"top-end"}),x($(!1)),await x(O())};return e.jsx(pe,{innerRef:n,initialValues:{reason:"",status:"closed_lost"},validationSchema:yt,onSubmit:async(d,{setSubmitting:l})=>{await i(d,u,t,W),l(!1)},children:({touched:d,errors:l,values:x,setFieldValue:y})=>e.jsxs(xe,{children:[e.jsx(me,{children:e.jsx(S,{label:"Reason",invalid:l.reason&&d.reason,errorMessage:l.reason,children:e.jsx(T,{type:"text",autoComplete:"off",name:"reason",placeholder:"Reason",component:F,prefix:e.jsx(nt,{className:"text-xl"})})})}),e.jsx(dt,{className:"flex items-center justify-end py-2",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"md:flex items-center",children:[e.jsx(P,{size:"sm",className:"ltr:mr-3 rtl:ml-3",type:"button",onClick:p,children:"Cancel"}),e.jsx(P,{size:"sm",type:"submit",variant:"solid",icon:e.jsx(ct,{}),children:"Save"})]})})]})})});je.displayName="LeadForm";const Dt=()=>{const a=v(),n=g(o=>o.crmLeads.data.displayedLeadsList),t=g(o=>o.crmLeads.data.loading),u=g(o=>o.crmLeads.data.isDialogOpen),p=g(o=>o.crmLeads.data.tableData),{pageIndex:i,pageSize:d,sort:l,query:x,total:y}=g(o=>o.crmLeads.data.tableData),s=b.useCallback(()=>{a(O())},[a]);b.useEffect(()=>(s(),()=>{window.location.pathname.includes("lead")||a(q({...p,query:""}))}),[s]);const h=b.useMemo(()=>({pageIndex:i,pageSize:d,sort:l,query:x,total:y}),[i,d,l,x,y]);g(o=>o.crmLeads.data.selectedLeads);const C=_("leads","canDelete"),f=_("leads","canModify"),r=_("leads","canView"),j=Ne(),L=({row:o})=>{const c=v();Ue();const m=()=>{c(de()),c(k(o))},A=async()=>{await c(k(o)),c(ee(!0))},K=()=>{c(k(o));const J=`/app/crm/lead-details/${o.id}`;j(J)},H=()=>{c(k(o)),c($(!0))},G=async()=>{await c(k(o)),await U(o==null?void 0:o.id)},U=async J=>{var re,oe,ne;const w=await c(ae({leadsId:J,updatedData:{status:"closed_won"}}));let X="",Y="",se="danger";(re=w==null?void 0:w.payload)!=null&&re.success?(X="Successfully Added",Y=(oe=w==null?void 0:w.payload)==null?void 0:oe.message,se="success"):(X="Something went wrong !!!",Y=(ne=w==null?void 0:w.error)==null?void 0:ne.message),W.push(e.jsx(V,{title:X,type:se,duration:2500,children:Y}),{placement:"top-end"}),c($(!1)),await c(O())};return e.jsxs("div",{className:"flex text-base items-center",children:[f&&e.jsx("button",{disabled:(o==null?void 0:o.status)!=="open",className:`circle items-center mx-1 ${(o==null?void 0:o.status)!=="open"?"!cursor-not-allowed":"cursor-pointer hover:text-indigo-500"}`,onClick:m,children:e.jsx($e,{})}),C&&e.jsx("span",{className:"cursor-pointer hover:text-red-500 circle items-center",onClick:A,children:e.jsx(We,{})}),r&&e.jsx("span",{className:"cursor-pointer hover:text-green-500 circle mx-1 items-center text-lg",onClick:K,children:e.jsx(lt,{})}),f&&e.jsx(E,{title:"Close To Won",children:e.jsx("button",{className:` circle items-center ${(o==null?void 0:o.status)!=="open"?"!cursor-not-allowed":"cursor-pointer hover:text-indigo-500"}`,disabled:(o==null?void 0:o.status)!=="open",onClick:G,children:e.jsx(mt,{})})},o.id+"won"),f&&e.jsx(E,{title:"Close To Lost",children:e.jsx("button",{className:`${(o==null?void 0:o.status)!=="open"?"!cursor-not-allowed":"cursor-pointer hover:text-orange-500"} mx-1 circle items-center `,disabled:(o==null?void 0:o.status)!=="open",onClick:H,children:e.jsx(Le,{})})},o.id+"lost")]})},N=b.useMemo(()=>[{header:"Action",id:"action",cell:c=>e.jsx(L,{row:c.row.original})},{header:"Contact Name",accessorKey:"contactName",cell:c=>{var A,K,H,G,U;const m=(A=c.row.original)!=null&&A.contactData?((H=(K=c.row.original)==null?void 0:K.contactData)==null?void 0:H.firstName)+" "+((U=(G=c.row.original)==null?void 0:G.contactData)==null?void 0:U.lastName):"-";return e.jsx(E,{title:m,children:e.jsx(R,{text:m,maxLength:15})},m)}},{header:"Title",accessorKey:"title",cell:c=>{const m=c.row.original.title;return e.jsx(E,{title:m,children:e.jsx(R,{text:m,maxLength:20})},m)}},{header:"Budget",accessorKey:"budget",cell:c=>{const m=c.row.original;return e.jsx(R,{text:m.budget,maxLength:20})}},{header:"Status",accessorKey:"status",cell:c=>{const m=c.row.original;return e.jsx(He,{status:m.status})}},{header:"Tag Name",accessorKey:"tagName",cell:c=>{const m=c.row.original.tags;return m!=null&&m.length>0?e.jsx(Ge,{tags:m}):"-"}},{header:"Notes",accessorKey:"description",cell:c=>{const m=c.row.original.description?c.row.original.description:"-";return e.jsx(E,{title:m,children:e.jsx(R,{text:m,maxLength:20})},m)}},{header:"Reason",accessorKey:"reason",cell:c=>{var A;const m=(A=c.row.original)==null?void 0:A.reason;return m?e.jsx(E,{title:m,children:e.jsx(R,{text:m,maxLength:20})},m):e.jsx(E,{title:m,children:e.jsx(R,{text:"NA",maxLength:20})},m)}}],[f,C]),D=o=>{const c=Q(h);c.pageIndex=o,a(q(c))},I=o=>{const c=Q(h);c.pageSize=Number(o),c.pageIndex=1,a(q(c))},z=o=>{const c=Q(h);c.sort=o,a(q(c))};return e.jsxs("div",{children:[e.jsx(Ke,{columns:N,data:n,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},loading:t,pagingData:{total:h.total,pageIndex:h.pageIndex,pageSize:h.pageSize},onPaginationChange:D,onSelectChange:I,onSort:z}),e.jsx(Lt,{}),e.jsx(ht,{}),e.jsxs(Ze,{isOpen:u,onClose:()=>a($(!1)),children:[e.jsx("h5",{className:"mb-4",children:"Enter Reason"}),e.jsx(je,{})]})]})},be=b.forwardRef((a,n)=>{const{onInputChange:t}=a,u=pt(p,500);function p(d){t==null||t(d)}const i=d=>{u(d.target.value)};return e.jsx(F,{ref:n,className:"max-w-md md:w-52 mb-4",size:"sm",placeholder:"Search by name or title",prefix:e.jsx(Ve,{className:"text-lg"}),onChange:i})});be.displayName="LeadsTableSearch";const vt=()=>{const a=v(),n=b.useRef(null),t=g(l=>l.crmLeads.data.tableData),u=_("leads","canCreate"),p=l=>{const x=Q(t);x.query=l,x.pageIndex=1,typeof l=="string"&&l.length>1&&i(x),typeof l=="string"&&l.length===0&&i(x)},i=l=>{a(l?q(l):O())},d=()=>{a(de()),a(k({})),a(ut("Add"))};return b.useEffect(()=>{n.current&&(n.current.value=t.query||"",a(q(t)))},[t==null?void 0:t.query]),e.jsxs("div",{className:"md:flex items-center justify-between",children:[e.jsx("div",{className:"md:flex items-center gap-4",children:e.jsx(be,{ref:n,onInputChange:p})}),e.jsx("div",{className:"mb-4",children:u&&e.jsx(P,{size:"sm",onClick:d,children:"Add New"})})]})};ye("crmLeads",Re);const wt=()=>{const a=g(n=>n.crmLeads.data.tableData);return e.jsxs(e.Fragment,{children:[e.jsx(xt,{}),e.jsxs(De,{bodyClass:"h-full",children:[e.jsx(ce,{title:`Leads (${(a==null?void 0:a.total)||0})`,desc:"",className:"mb-2"}),e.jsx(vt,{}),e.jsx(Dt,{})]})]})},Cs=wt;export{Cs as default};
