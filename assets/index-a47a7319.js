import{r as u,a as g,j as e,ai as K,ar as H}from"./index-6767ac81.js";import{A as L}from"./AdaptableCard-1cecc9da.js";import{D as q}from"./DataTable-7c33a6e6.js";import{u as m,s as M,a as S,g as N,b,c as D,d as P,e as k,f as U,r as G}from"./AdditionalTag-8d9009b8.js";import{u as A}from"./useThemeClass-a62e85dc.js";import{B as j}from"./Button-edcd26d9.js";import{D as V}from"./Drawer-95c21b15.js";import{C as _}from"./CustomerForm-2f90aa9b.js";import{c as x}from"./cloneDeep-028f7085.js";import{I as J}from"./Input-736c9e0d.js";import{z as Q,B as W,d as X,a7 as Y,r as Z}from"./index.esm-107f547f.js";import{d as ee}from"./debounce-7fa991f6.js";import{S as te,c as se}from"./Select-3d321c37.js";import{B as T}from"./Badge-1f68c9c2.js";import{C as re}from"./Card-da872ceb.js";import{A as oe}from"./index-688b9e70.js";import{M as ae}from"./MediaSkeleton-4528ed7e.js";import{N as ie}from"./react-number-format.es-3a1aae10.js";import"./index-d5eb49a4.js";import"./index.esm-ad20eb15.js";import"./Pagination-3af44538.js";import"./index-5c02b9f9.js";import"./_Uint8Array-81109713.js";import"./_MapCache-5db605d8.js";import"./Views-e5205a91.js";import"./_baseIsEqual-98c979d7.js";import"./get-582c28e3.js";import"./toString-5f976032.js";import"./TableRowSkeleton-6125f39f.js";import"./Skeleton-f6501194.js";import"./index-43da21b1.js";import"./formik.esm-35003a33.js";import"./context-cdfa92ed.js";import"./index-fb02f18d.js";import"./Alert-c9b22c70.js";import"./useTimeout-395cc71e.js";import"./CloseButton-5ef937e0.js";import"./StatusIcon-33312305.js";import"./Calendar-defcfa74.js";import"./useControllableState-dba48cec.js";import"./index-6bf19af2.js";import"./useMergeRef-788c4cb0.js";import"./useRootClose-6563c421.js";import"./usePopper-ba5004dc.js";import"./RangeCalendar-2da4f4e1.js";import"./TimeInput-030e16c6.js";import"./useUniqueId-1387b982.js";import"./useDidUpdate-c5cefb65.js";import"./Dialog-b04dbbb3.js";import"./index-1bb56c96.js";import"./index-787c9736.js";import"./useUncertainRef-e1544d29.js";import"./isNil-1a1387e3.js";import"./chainedFunction-070f832c.js";import"./index-9fee79d2.js";import"./index-5e02ae30.js";import"./index-375da5f6.js";import"./toast-33e99923.js";import"./Progress-b13c43d8.js";import"./index-18c6d586.js";import"./ScrollBar-e8750282.js";import"./index-bf30d0ca.js";import"./index-8c6f1de1.js";import"./mapCloneElement-3589bfd8.js";import"./Switcher-becc3d78.js";import"./index-149a53e8.js";import"./Tag-28e3c136.js";import"./index-d9614e75.js";import"./index-70261eaf.js";import"./Tooltip-777f9f9c.js";import"./index.esm-52ddd804.js";import"./Upload-1c01a3b3.js";import"./index.esm-3da06225.js";import"./index.esm-da94fd5f.js";import"./CrmService-e70a4be4.js";import"./index.esm-a1939a1a.js";import"./index.esm-a61e2fe0.js";/* empty css              */import"./_getPrototype-48c0ebaa.js";import"./toConsumableArray-af8bf1ee.js";import"./objectWithoutPropertiesLoose-df62547b.js";import"./floating-ui.dom-bef9cea3.js";const I=u.forwardRef((s,t)=>{g();const r=m(n=>n.crmCustomers.data.selectedCustomer);m(n=>n.crmCustomers.data.customerList);const o=async n=>{};return e.jsx(_,{ref:t,customer:r,onFormSubmit:o})});I.displayName="CustomerEditContent";const ne=({onSaveClick:s,onCancel:t})=>e.jsxs("div",{className:"text-right w-full",children:[e.jsx(j,{size:"sm",className:"mr-2",onClick:t,children:"Cancel"}),e.jsx(j,{size:"sm",variant:"solid",onClick:s,children:"Save"})]}),le=()=>{const s=g(),t=m(c=>c.crmCustomers.data.drawerOpen),r=()=>{s(M()),s(S({}))},o=u.useRef(null),n=()=>{var c,l;console.log("formSubmit function called",(c=o.current)==null?void 0:c.values),(l=o.current)==null||l.submitForm()};return e.jsx(V,{isOpen:t,closable:!1,bodyClass:"p-0",footer:e.jsx(ne,{onCancel:r,onSaveClick:n}),onClose:r,onRequestClose:r,children:e.jsx(I,{ref:o})})},ce=({row:s})=>{const{textTheme:t}=A(),r=g(),o=()=>{r(D()),r(S(s))};return e.jsx("div",{className:`${t} cursor-pointer select-none font-semibold`,onClick:o,children:"Edit"})},me=({row:s})=>{const{textTheme:t}=A(),r=g(),o=async()=>{console.log(s,"Bhai Agaya"),await r(P(s.id)),await r(N())};return e.jsx("div",{className:`${t} cursor-pointer select-none font-semibold`,onClick:o,children:"Delete"})},de=()=>{const s=g(),t=m(a=>a.crmCustomers.data.customerList),r=m(a=>a.crmCustomers.data.loading),o=m(a=>a.crmCustomers.data.filterData),{pageIndex:n,pageSize:c,sort:l,query:i,total:d}=m(a=>a.crmCustomers.data.tableData),h=u.useCallback(()=>{s(N())},[s]);u.useEffect(()=>{h()},[h,n,c,l,o]);const C=u.useMemo(()=>({pageIndex:n,pageSize:c,sort:l,query:i,total:d}),[n,c,l,i,d]),z=u.useMemo(()=>[{header:"Customer Name",accessorKey:"clientName",cell:a=>a.row.original.clientName,width:200},{header:"Contact Number",accessorKey:"contactInfo",cell:a=>a.row.original.contactInfo,width:200},{header:"Address",accessorKey:"address",cell:a=>a.row.original.address,width:200},{header:"Billing Details",accessorKey:"billingDetails",cell:a=>a.row.original.billingDetails,width:200},{header:"History",accessorKey:"history",cell:a=>a.row.original.history,width:200},{header:"Notes",accessorKey:"notes",cell:a=>a.row.original.notes,width:200},{header:"Tag Name",accessorKey:"tagName",width:200,cell:a=>{const B=(a.row.original.tags||[]).map(w=>{const f=w.colorName||"#000000",$={backgroundColor:`rgba(${parseInt(f.slice(1,3),16)}, ${parseInt(f.slice(3,5),16)}, ${parseInt(f.slice(5,7),16)}, 0.2)`,color:f,padding:"4px 8px",borderRadius:"4px",marginRight:"4px",marginBottom:"4px"};return e.jsx("div",{style:$,children:w.tagName},w.id)});return e.jsx("div",{children:B})}},{header:"Edit",id:"action",cell:a=>e.jsx(ce,{row:a.row.original})},{header:"Delete",id:"action",cell:a=>e.jsx(me,{row:a.row.original})}],[]),E=a=>{const p=x(C);p.pageIndex=a,s(b(p))},F=a=>{const p=x(C);p.pageSize=Number(a),p.pageIndex=1,s(b(p))},O=a=>{const p=x(C);p.sort=a,s(b(p))};return e.jsxs("div",{children:[e.jsx(q,{columns:z,data:t,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},loading:r,pagingData:{total:C.total,pageIndex:C.pageIndex,pageSize:C.pageSize},onPaginationChange:E,onSelectChange:F,onSort:O}),e.jsx(le,{})]})},R=u.forwardRef((s,t)=>{const{onInputChange:r}=s,o=ee(n,500);function n(l){r==null||r(l)}const c=l=>{o(l.target.value)};return e.jsx(J,{ref:t,className:"max-w-md md:w-52 mb-4",size:"sm",placeholder:"Search",prefix:e.jsx(Q,{className:"text-lg"}),onChange:c})});R.displayName="CustomerTableSearch";const{Control:pe}=se,y=[{value:"",label:"All",color:"bg-gray-500"},{value:"active",label:"Active",color:"bg-emerald-500"},{value:"blocked",label:"Blocked",color:"bg-red-500"}],ue=({innerProps:s,label:t,data:r,isSelected:o})=>e.jsxs("div",{className:`flex items-center justify-between p-2 cursor-pointer ${o?"bg-gray-100 dark:bg-gray-500":"hover:bg-gray-50 dark:hover:bg-gray-600"}`,...s,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{innerClass:r.color}),e.jsx("span",{children:t})]}),o&&e.jsx(W,{className:"text-emerald-500 text-xl"})]}),ge=({children:s,...t})=>{const r=t.getValue()[0];return e.jsxs(pe,{...t,children:[r&&e.jsx(T,{className:"ltr:ml-4 rtl:mr-4",innerClass:r.color}),s]})},he=()=>{const s=g(),{status:t}=m(o=>o.crmCustomers.data.filterData),r=o=>{s(k({status:o==null?void 0:o.value}))};return e.jsx(te,{options:y,size:"sm",className:"mb-4 min-w-[130px]",components:{Option:ue,Control:ge},value:y.filter(o=>o.value===t),onChange:r})},Ce=()=>{const s=g(),t=u.useRef(null),r=m(i=>i.crmCustomers.data.tableData),o=i=>{const d=x(r);d.query=i,d.pageIndex=1,typeof i=="string"&&i.length>1&&n(d),typeof i=="string"&&i.length===0&&n(d)},n=i=>{s(b(i)),s(N())},c=()=>{const i=x(r);i.query="",t.current&&(t.current.value=""),s(k({status:""})),n(i)},l=()=>{s(D())};return e.jsxs("div",{className:"md:flex items-center justify-between",children:[e.jsxs("div",{className:"md:flex items-center gap-4",children:[e.jsx(R,{ref:t,onInputChange:o}),e.jsx(he,{})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(j,{size:"sm",className:"me-2",onClick:c,children:"Clear All"}),e.jsx(j,{size:"sm",onClick:l,children:"Add New"})]})]})},v=s=>{const{icon:t,avatarClass:r,label:o,value:n,growthRate:c,loading:l}=s,i=55;return e.jsx(re,{bordered:!0,children:e.jsx(K,{loading:l,customLoader:e.jsx(ae,{avatarProps:{className:"rounded",width:i,height:i}}),children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(oe,{className:r,size:i,icon:t}),e.jsxs("div",{children:[e.jsx("span",{children:o}),e.jsx("h3",{children:e.jsx(ie,{thousandSeparator:!0,displayType:"text",value:n})})]})]})})})})},xe=()=>{var o,n,c,l,i,d;const s=g(),t=m(h=>h.crmCustomers.data.statisticData),r=m(h=>h.crmCustomers.data.statisticLoading);return u.useEffect(()=>{s(U())},[]),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 mb-6",children:[e.jsx(v,{icon:e.jsx(X,{}),avatarClass:"!bg-indigo-600",label:"Total Customers",value:(o=t==null?void 0:t.totalCustomers)==null?void 0:o.value,growthRate:(n=t==null?void 0:t.totalCustomers)==null?void 0:n.growShrink,loading:r}),e.jsx(v,{icon:e.jsx(Y,{}),avatarClass:"!bg-blue-500",label:"Active Customers",value:(c=t==null?void 0:t.activeCustomers)==null?void 0:c.value,growthRate:(l=t==null?void 0:t.activeCustomers)==null?void 0:l.growShrink,loading:r}),e.jsx(v,{icon:e.jsx(Z,{}),avatarClass:"!bg-emerald-500",label:"New Customers",value:(i=t==null?void 0:t.newCustomers)==null?void 0:i.value,growthRate:(d=t==null?void 0:t.newCustomers)==null?void 0:d.growShrink,loading:r})]})};H("crmCustomers",G);const fe=()=>e.jsxs(e.Fragment,{children:[e.jsx(xe,{}),e.jsxs(L,{bodyClass:"h-full",children:[e.jsx(Ce,{}),e.jsx(de,{})]})]}),_t=fe;export{_t as default};
