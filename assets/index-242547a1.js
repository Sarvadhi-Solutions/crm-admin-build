import{a as v,r as b,j as e,ah as ye,al as Le,as as Ne,aq as De}from"./index-afeb99dd.js";import{A as ve}from"./AdaptableCard-01cd8827.js";import{F as le}from"./FormDesription-e86e128e.js";import{C as we}from"./Card-a25bc86a.js";import{A as Se}from"./index-08720d19.js";import{M as Te}from"./MediaSkeleton-69b144c5.js";import{u as f,g as te,t as ee,d as Ie,a as k,b as Ae,c as Ee,f as Me,e as Oe,h as ae,i as ke,s as de,j as Re,k as O,l as B,m as V,n as me,r as Fe}from"./index-1fcde76b.js";import{o as Ve,M as qe,C as ze,N as Be,O as $e,P as We,b as Pe}from"./index.esm-f4f10cf9.js";import{N as He}from"./react-number-format.es-f9c69fb4.js";import{D as Ge}from"./DataTable-3d6ba875.js";import{S as Ke}from"./StatusCapsule-427f96f6.js";import{T as Ue}from"./TagsList-5727ee94.js";import{T as q}from"./TextTruncate-73a85fed.js";import{u as _}from"./checkEditUpdate-9f459668.js";import{u as _e}from"./useThemeClass-a6e6a15d.js";import{c as J}from"./cloneDeep-f2528b95.js";import{t as $,N as W}from"./toast-b57ee67d.js";import{C as Je}from"./ConfirmDialog-16c69999.js";import{B as P}from"./Button-5e9321cd.js";import{D as Qe}from"./Drawer-6021c63b.js";import{a as S,F as ue}from"./FormItem-2a151033.js";import{T as pe}from"./index-b8a0c8d7.js";import{u as Xe,b as T,F as xe,a as he}from"./formik.esm-e70cf2ce.js";import{c as ge,a as F,d as Ye,e as Ze}from"./index.esm-639db9d4.js";import{I}from"./Input-fe5fc582.js";/* empty css              */import"./Alert-abc01096.js";import"./Badge-57260147.js";import"./RangeCalendar-c8e5e23d.js";import"./index-646ce73f.js";import"./index-71f17666.js";import{D as et}from"./Dialog-b0478122.js";import"./index-29936284.js";import"./toString-79dd21b9.js";import"./index-ed8cb66a.js";import"./index-cf176bc9.js";import"./index-8145753b.js";import"./Pagination-46eefec6.js";import"./Progress-65192619.js";import"./index-fde04e31.js";import"./ScrollBar-93cfd3f9.js";import"./index-b82cade4.js";import{S as ie}from"./Select-2984c046.js";import"./Skeleton-1c4e4b72.js";import"./index-a70c7a57.js";import"./Switcher-83e7e292.js";import"./index-45766b4b.js";import"./Tag-f3e28a4c.js";import"./index-53e11fec.js";import"./index-16b82756.js";import{T as R}from"./Tooltip-46e989ae.js";import"./Upload-1e962b58.js";import{t as tt}from"./tagAndCategory-228f57e7.js";import{B as at,a as st}from"./index.esm-44e5e467.js";import{G as rt}from"./index.esm-ef32d13b.js";import{M as ot}from"./index.esm-1b054edb.js";import{T as nt,a as it}from"./index.esm-013efa08.js";import{B as ce}from"./index.esm-be0e54d4.js";import{u as ct}from"./useGetModule-41dd94e6.js";import{A as lt,a as dt}from"./index.esm-726f6b92.js";import"./Views-f7a9b898.js";import"./chart.constant-e1b2238d.js";import"./GrowShrinkTag-c4569aa9.js";import"./react-tooltip.min-7fdd29c0.js";import"./RichTextEditor-9ad39754.js";import"./SegmentItemOption-666cf094.js";import{S as mt}from"./StickyFooter-f9488d76.js";import"./SvgIcon-aa33ab6d.js";import{G as ut}from"./index.esm-70b1a8d4.js";import{s as pt}from"./index-485c9981.js";import{d as xt}from"./debounce-6c864594.js";import"./useMergeRef-788c4cb0.js";import"./CrmService-80eafdff.js";import"./index-535d7f05.js";import"./moment-fbc5633a.js";import"./_MapCache-d7aaf9c0.js";import"./_getPrototype-c53836d9.js";import"./useTimeout-682d9172.js";import"./CloseButton-217fbce9.js";import"./StatusIcon-47182631.js";import"./chainedFunction-070f832c.js";import"./index-a4e43560.js";import"./index-07932842.js";import"./useControllableState-8021c4d2.js";import"./isNil-e2aeddd7.js";import"./get-a5b2ed65.js";import"./_baseIsEqual-879f4f25.js";import"./useRootClose-d6d9b544.js";import"./usePopper-996565a6.js";import"./TimeInput-a38fa8f0.js";import"./useUniqueId-6aef0ec3.js";import"./useDidUpdate-f2162ffc.js";import"./useUncertainRef-8a988cd5.js";import"./slicedToArray-fe25a6b5.js";import"./objectWithoutProperties-8809bfcf.js";import"./toConsumableArray-b3b9a0e8.js";import"./floating-ui.dom-4bc0055b.js";import"./mapCloneElement-4a1cd053.js";import"./index.esm-a56f1c0a.js";import"./index.esm-e1783cee.js";import"./index-20eff79d.js";import"./index-74327464.js";const Z=r=>{const{icon:n,avatarClass:t,label:p,value:u,loading:i}=r,m=55;return e.jsx(we,{bordered:!0,children:e.jsx(ye,{loading:i,customLoader:e.jsx(Te,{avatarProps:{className:"rounded",width:m,height:m}}),children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Se,{className:t,size:m,icon:n}),e.jsxs("div",{children:[e.jsx("span",{children:p}),e.jsx("h3",{children:e.jsx(He,{thousandSeparator:!0,displayType:"text",value:u})})]})]})})})})},ht=()=>{const r=v(),n=f(p=>p.crmLeads.data.statisticData),t=f(p=>p.crmLeads.data.statisticLoading);return b.useEffect(()=>{r(te())},[]),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 mb-6",children:[e.jsx(Z,{icon:e.jsx(Ve,{}),avatarClass:"!bg-indigo-600",label:"Total Leads",value:n.totalLeads,growthRate:n==null?void 0:n.totalLeads,loading:t}),e.jsx(Z,{icon:e.jsx(qe,{}),avatarClass:"!bg-blue-500",label:"Open Leads",value:n.openLeads,growthRate:n.openLeads,loading:t}),e.jsx(Z,{icon:e.jsx(ze,{}),avatarClass:"!bg-emerald-500",label:"This Week's New Leads",value:n==null?void 0:n.newLeads,growthRate:n==null?void 0:n.newLeads,loading:t})]})},gt=()=>{const r=v(),n=f(i=>i.crmLeads.data.deleteConfirmation),t=f(i=>i.crmLeads.data.selectedLeads),p=()=>{r(ee(!1))},u=async()=>{var m,l,x;r(ee(!1));const i=await r(Ie(t.id));await r(k()),(m=i==null?void 0:i.payload)!=null&&m.success?$.push(e.jsx(W,{title:"Successfuly Deleted",type:"success",duration:2500,children:(l=i==null?void 0:i.payload)==null?void 0:l.message}),{placement:"top-end"}):$.push(e.jsx(W,{title:"Something Went Wrong !!!",type:"danger",duration:2500,children:(x=i==null?void 0:i.error)==null?void 0:x.message}),{placement:"top-end"}),await r(k()),await r(te())};return e.jsx(Je,{isOpen:n,type:"danger",title:"Delete Lead",confirmButtonColor:"red-600",onClose:p,onRequestClose:p,onCancel:p,onConfirm:u,children:e.jsx("p",{children:"Are you sure you want to delete this Lead? All record related to this lead will be deleted as well. This action cannot be undone."})})},z=[],ft=r=>{const{touched:n,errors:t,setFieldValue:p,values:u}=r,i=v(),m=Xe(),[l,x]=b.useState(null),[D,C]=b.useState([]),o=f(a=>a.crmLeads.data.contactList);z.length=0;const j={display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"},d=f(a=>{var L;return(L=a.crmLeads.data.customField)==null?void 0:L.data});f(a=>a.crmLeads.data.leadsList),o==null||o.forEach(a=>{z.push({value:a==null?void 0:a.id,label:`${a==null?void 0:a.firstName} ${a==null?void 0:a.lastName}`})});const{getModule:g}=ct();b.useEffect(()=>{const a=async()=>{var N,A;try{const{payload:E}=await i(Me()),s=(N=E==null?void 0:E.data)==null?void 0:N.find(c=>(c==null?void 0:c.moduleName)==="leads");if(s){const{payload:c}=await i(Oe({id:(A=s==null?void 0:s.id)==null?void 0:A.toString()})),h=tt(c.data);C(h)}}catch(E){console.error("Error fetching module data:",E)}};(async()=>{const N=await g("leads");x(u.contactsDataId),a(),await i(Ae()),await i(Ee(N))})()},[i]),f(a=>{var L,N;return(N=(L=a.crmLeads)==null?void 0:L.data)==null?void 0:N.selectedLeads});const y=a=>{m.setFieldValue("tagId",a)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(S,{label:"Contact Name",invalid:t.contactsDataId&&n.contactsDataId,errorMessage:t.contactsDataId,children:e.jsx(ie,{name:"contactsDataId",placeholder:"Contact Name",options:z,id:"contactsDataId",value:z.find(a=>(a==null?void 0:a.value)===(u==null?void 0:u.contactsDataId)),onChange:a=>{const L=a.value;p("email",""),p("contactNumber",""),x(L),p("contactsDataId",L)}})})}),e.jsx("div",{className:"col-span-1",children:e.jsx(S,{label:"Title*",invalid:t.title&&n.title,errorMessage:t.title,children:e.jsx(T,{type:"text",autoComplete:"off",name:"title",placeholder:"Title",component:I,prefix:e.jsx(ot,{className:"text-xl"})})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[!l&&e.jsx("div",{className:"col-span-1",children:e.jsx(S,{label:"Email*",invalid:t.email&&n.email,errorMessage:t.email,children:e.jsx(T,{type:"text",autoComplete:"off",name:"email",placeholder:"Email",component:I,prefix:e.jsx(Be,{className:"text-xl"})})})}),!l&&e.jsx("div",{className:"col-span-1",children:e.jsx(S,{label:"Contact Number*",invalid:t.contactNumber&&n.contactNumber,errorMessage:t.contactNumber,children:e.jsx(T,{type:"text",autoComplete:"off",name:"contactNumber",placeholder:"Contact Number",component:I,prefix:e.jsx(at,{className:"text-xl"})})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(S,{label:"Budget",invalid:t.budget&&n.budget,errorMessage:t.budget,children:e.jsx(T,{type:"number",autoComplete:"off",name:"budget",placeholder:"Budget",component:I,prefix:e.jsx(st,{className:"text-xl"})})})}),e.jsx("div",{className:"col-span-1",children:e.jsx(S,{label:"Tag",children:e.jsx(T,{isClearable:!0,isMulti:!0,type:"text",autoComplete:"off",name:"tagId",placeholder:"Select tags",component:ie,options:D,prefix:e.jsx(rt,{className:"text-xl"}),closeMenuOnSelect:!1,onChange:y})})})]}),e.jsx(S,{label:"Notes",invalid:t.notes&&n.notes,errorMessage:t.notes,children:e.jsx(T,{textArea:!0,type:"text",autoComplete:"off",name:"notes",placeholder:"Notes",component:I,prefix:e.jsx(nt,{className:"text-xl"})})}),(d==null?void 0:d.length)>0?e.jsxs(e.Fragment,{children:[" ",e.jsx(le,{title:"Additional Details",desc:"",className:"mb-2"}),e.jsx("div",{style:j,children:d==null?void 0:d.map(a=>e.jsx("div",{children:e.jsx(S,{label:a==null?void 0:a.label,children:a.inputType==="textArea"?e.jsx(T,{textArea:!0,type:"text",autoComplete:"off",name:a.name,placeholder:a==null?void 0:a.label,defaultValue:a.defaultValue,component:I,prefix:e.jsx(ce,{className:"text-xl"})}):e.jsx(T,{type:a.inputType,autoComplete:"off",name:a.name,placeholder:a==null?void 0:a.label,defaultValue:a.defaultValue,component:I,prefix:e.jsx(ce,{className:"text-xl"})})})},a.id))})]}):null]})},jt=ge().shape({title:F().required("Title is required"),notes:F(),contactNumber:F().test("validateContactNumber","Invalid contact number",function(r){if(!this.parent.contactsDataId){if(!r)return this.createError({message:"Contact is required"});const t=Number(r);if(isNaN(t))return this.createError({message:"Contact must be a number"});if(r.length!==10)return this.createError({message:"Contact must have exactly 10 digits"});if(r.startsWith("0"))return this.createError({message:"Contact number cannot start with 0"})}return!0}),email:F().test("validateEmail","Invalid email",function(r){return this.parent.contactsDataId?!0:!!r||this.createError({message:"Email is required"})}),budget:Ye().test("greaterThanOne","Budget must be greater than 1",r=>r>0).required("Budget is required"),tagId:Ze(),contactsDataId:F().test("is-valid-contact","Invalid contact selected",function(r){return this.parent.contactsDataId&&this.parent.contactsDataId.length>0?!!z.find(n=>n.value===r):!0})}),{TabNav:bt,TabList:Ct,TabContent:yt}=pe,fe=b.forwardRef((r,n)=>{var D,C;const t=f(o=>o.crmLeads.data.selectedLeads),p=!!t.id,u=f(o=>{var j,d,g;return(g=(d=(j=o.crmLeads)==null?void 0:j.data)==null?void 0:d.customField)==null?void 0:g.data}),i=v(),m=async(o,j,d)=>{var a,L,N,A;const g=(a=o==null?void 0:o.payload)!=null&&a.success?j:"Something went wrong !!!",y=(L=o==null?void 0:o.payload)!=null&&L.success?(N=o==null?void 0:o.payload)==null?void 0:N.message:d;$.push(e.jsx(W,{title:g,type:(A=o==null?void 0:o.payload)!=null&&A.success?"success":"danger",duration:2500,children:y}),{placement:"top-end"})},l=async(o,{setSubmitting:j})=>{const d=u.reduce((g,y)=>(g[y.name]=o[y.name],g),{});try{const g={title:o.title,contactsDataId:o.contactsDataId,email:o.email,contactNumber:o.contactNumber,budget:o.budget.toString(),description:o.notes,tagId:o==null?void 0:o.tagId.map(s=>s.value),...d},{name:y,tagName:a,...L}=o,N=p?await i(ae({leadsId:(t==null?void 0:t.id)||"",updatedData:g})):await i(ke(g));await m(N,p?"Successfully Updated":"Successfully Added","An error occurred."),i(de()),await Promise.all([i(k()),i(te())])}catch(g){console.error("An error occurred:",g)}finally{j(!1)}},x=b.useMemo(()=>u==null?void 0:u.reduce((j,d)=>{var y;const g=(y=t==null?void 0:t.leadFields)==null?void 0:y.find(a=>(a==null?void 0:a.name)===(d==null?void 0:d.name));return j[d==null?void 0:d.name]=g?g==null?void 0:g.value:d!=null&&d.defaultValue?d==null?void 0:d.defaultValue:"",j},{}),[u]);return e.jsx(xe,{innerRef:n,initialValues:{contactsDataId:((D=t.contactData)==null?void 0:D.id)||"",title:(t==null?void 0:t.title)||"",notes:(t==null?void 0:t.description)||"",tagId:((C=t==null?void 0:t.tags)==null?void 0:C.map(o=>({label:o.tagName,value:o.id})))||[],budget:(t==null?void 0:t.budget)||"",contactNumber:(t==null?void 0:t.contactNumber)||"",email:(t==null?void 0:t.email)||"",...x},validationSchema:jt,onSubmit:l,children:({touched:o,errors:j,values:d,setFieldValue:g})=>e.jsx(he,{children:e.jsx(ue,{children:e.jsxs(pe,{defaultValue:"leadsInfo",children:[e.jsx(Ct,{children:e.jsx(bt,{value:"leadsInfo",children:"Leads Detail"})}),e.jsx("div",{className:"p-6",children:e.jsx(yt,{value:"leadsInfo",children:e.jsx(ft,{touched:o,errors:j,setFieldValue:g,values:d})})})]})})})})});fe.displayName="LeadsForm";const je=b.forwardRef((r,n)=>{v();const t=f(u=>{var i,m;return(m=(i=u.crmLeads)==null?void 0:i.data)==null?void 0:m.selectedLeads});f(u=>u.crmLeads.data.leadsList);const p=async u=>{};return e.jsx(fe,{ref:n,leads:t,onFormSubmit:p})});je.displayName="LeadsEditContent";const Lt=({onSaveClick:r,onCancel:n})=>e.jsxs("div",{className:"text-right w-full",children:[e.jsx(P,{size:"sm",className:"mr-2",onClick:n,children:"Cancel"}),e.jsx(P,{size:"sm",variant:"solid",onClick:r,children:"Save"})]}),Nt=()=>{const r=v(),n=f(x=>x.crmLeads.data.drawerOpen),[t,p]=b.useState(window.innerWidth/2),u=()=>{r(de()),r(O({}))},i=b.useRef(null),m=()=>{var x;(x=i.current)==null||x.submitForm()};b.useEffect(()=>(window.addEventListener("resize",l),r(Re()),()=>{window.removeEventListener("resize",l)}),[]);const l=()=>{p(window.innerWidth/2)};return e.jsx(Qe,{isOpen:n,closable:!1,bodyClass:"p-0",width:t,footer:e.jsx(Lt,{onCancel:u,onSaveClick:m}),onClose:u,onRequestClose:u,children:e.jsx(je,{ref:i})})},Dt=ge().shape({reason:F().required("Reason is required")}),be=b.forwardRef((r,n)=>{const t=v(),p=f(m=>{var l,x;return(x=(l=m.crmLeads)==null?void 0:l.data)==null?void 0:x.selectedLeads}),u=()=>{t(B(!1))},i=async(m,l,x,D)=>{var g,y,a;const C=await x(ae({leadsId:l==null?void 0:l.id,updatedData:{reason:m.reason,status:m.status}}));let o="",j="",d="danger";(g=C==null?void 0:C.payload)!=null&&g.success?(o="Successfully Added",j=(y=C==null?void 0:C.payload)==null?void 0:y.message,d="success"):(o="Something went wrong !!!",j=(a=C==null?void 0:C.error)==null?void 0:a.message),D.push(e.jsx(W,{title:o,type:d,duration:2500,children:j}),{placement:"top-end"}),x(B(!1)),await x(k())};return e.jsx(xe,{innerRef:n,initialValues:{reason:"",status:"closed_lost"},validationSchema:Dt,onSubmit:async(m,{setSubmitting:l})=>{await i(m,p,t,$),l(!1)},children:({touched:m,errors:l,values:x,setFieldValue:D})=>e.jsxs(he,{children:[e.jsx(ue,{children:e.jsx(S,{label:"Reason",invalid:l.reason&&m.reason,errorMessage:l.reason,children:e.jsx(T,{type:"text",autoComplete:"off",name:"reason",placeholder:"Reason",component:I,prefix:e.jsx(it,{className:"text-xl"})})})}),e.jsx(mt,{className:"flex items-center justify-end py-2",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"md:flex items-center",children:[e.jsx(P,{size:"sm",className:"ltr:mr-3 rtl:ml-3",type:"button",onClick:u,children:"Cancel"}),e.jsx(P,{size:"sm",type:"submit",variant:"solid",icon:e.jsx(lt,{}),children:"Save"})]})})]})})});be.displayName="LeadForm";const vt=()=>{const r=v(),n=f(s=>s.crmLeads.data.displayedLeadsList),t=f(s=>s.crmLeads.data.loading),p=f(s=>s.crmLeads.data.isDialogOpen),u=f(s=>s.crmLeads.data.tableData),{pageIndex:i,pageSize:m,sort:l,query:x,total:D}=f(s=>s.crmLeads.data.tableData),C=b.useCallback(()=>{r(k())},[r]);b.useEffect(()=>(C(),()=>{window.location.pathname.includes("lead")||r(V({...u,query:""}))}),[C]);const o=b.useMemo(()=>({pageIndex:i,pageSize:m,sort:l,query:x,total:D}),[i,m,l,x,D]);f(s=>s.crmLeads.data.selectedLeads);const j=_("leads","canDelete"),d=_("leads","canModify"),g=_("leads","canView"),y=Le(),a=({row:s})=>{const c=v();_e();const h=()=>{c(me()),c(O(s))},M=async()=>{await c(O(s)),c(ee(!0))},H=()=>{c(O(s));const Q=`/app/crm/lead-details/${s.id}`;y(Q)},G=()=>{c(O(s)),c(B(!0))},K=async()=>{await c(O(s)),await U(s==null?void 0:s.id)},U=async Q=>{var re,oe,ne;const w=await c(ae({leadsId:Q,updatedData:{status:"closed_won"}}));let X="",Y="",se="danger";(re=w==null?void 0:w.payload)!=null&&re.success?(X="Successfully Added",Y=(oe=w==null?void 0:w.payload)==null?void 0:oe.message,se="success"):(X="Something went wrong !!!",Y=(ne=w==null?void 0:w.error)==null?void 0:ne.message),$.push(e.jsx(W,{title:X,type:se,duration:2500,children:Y}),{placement:"top-end"}),c(B(!1)),await c(k())};return e.jsxs("div",{className:"flex text-base items-center",children:[d&&e.jsx("button",{disabled:(s==null?void 0:s.status)!=="open",className:`circle items-center mx-1 ${(s==null?void 0:s.status)!=="open"?"!cursor-not-allowed":"cursor-pointer hover:text-indigo-500"}`,onClick:h,children:e.jsx($e,{})}),j&&e.jsx("span",{className:"cursor-pointer hover:text-red-500 circle items-center",onClick:M,children:e.jsx(We,{})}),g&&e.jsx("span",{className:"cursor-pointer hover:text-green-500 circle mx-1 items-center text-lg",onClick:H,children:e.jsx(dt,{})}),d&&e.jsx(R,{title:"Close To Won",children:e.jsx("button",{className:` circle items-center ${(s==null?void 0:s.status)!=="open"?"!cursor-not-allowed":"cursor-pointer hover:text-indigo-500"}`,disabled:(s==null?void 0:s.status)!=="open",onClick:K,children:e.jsx(ut,{})})},s.id+"won"),d&&e.jsx(R,{title:"Close To Lost",children:e.jsx("button",{className:`${(s==null?void 0:s.status)!=="open"?"!cursor-not-allowed":"cursor-pointer hover:text-orange-500"} mx-1 circle items-center `,disabled:(s==null?void 0:s.status)!=="open",onClick:G,children:e.jsx(Ne,{})})},s.id+"lost")]})},L=b.useMemo(()=>[{header:"Action",id:"action",cell:c=>e.jsx(a,{row:c.row.original})},{header:"Contact Name",accessorKey:"contactName",cell:c=>{var M,H,G,K,U;const h=(M=c.row.original)!=null&&M.contactData?((G=(H=c.row.original)==null?void 0:H.contactData)==null?void 0:G.firstName)+" "+((U=(K=c.row.original)==null?void 0:K.contactData)==null?void 0:U.lastName):"-";return e.jsx(R,{title:h,children:e.jsx(q,{text:h,maxLength:15})},h)}},{header:"Title",accessorKey:"title",cell:c=>{const h=c.row.original.title;return e.jsx(R,{title:h,children:e.jsx(q,{text:h,maxLength:20})},h)}},{header:"Budget",accessorKey:"budget",cell:c=>{const h=c.row.original;return e.jsx(q,{text:h.budget,maxLength:20})}},{header:"Status",accessorKey:"status",cell:c=>{const h=c.row.original;return e.jsx(Ke,{status:h.status})}},{header:"Tag Name",accessorKey:"tagName",cell:c=>{const h=c.row.original.tags;return h!=null&&h.length>0?e.jsx(Ue,{tags:h}):"-"}},{header:"Reason",accessorKey:"reason",cell:c=>{var M;const h=(M=c.row.original)==null?void 0:M.reason;return h?e.jsx(R,{title:h,children:e.jsx(q,{text:h,maxLength:20})},h):e.jsx(R,{title:h,children:e.jsx(q,{text:"NA",maxLength:20})},h)}}],[d,j]),N=s=>{const c=J(o);c.pageIndex=s,r(V(c))},A=s=>{const c=J(o);c.pageSize=Number(s),c.pageIndex=1,r(V(c))},E=s=>{const c=J(o);c.sort=s,r(V(c))};return e.jsxs("div",{children:[e.jsx(Ge,{columns:L,data:n,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},loading:t,pagingData:{total:o.total,pageIndex:o.pageIndex,pageSize:o.pageSize},onPaginationChange:N,onSelectChange:A,onSort:E}),e.jsx(Nt,{}),e.jsx(gt,{}),e.jsxs(et,{isOpen:p,onClose:()=>r(B(!1)),children:[e.jsx("h5",{className:"mb-4",children:"Enter Reason"}),e.jsx(be,{})]})]})},Ce=b.forwardRef((r,n)=>{const{onInputChange:t}=r,p=xt(u,500);function u(m){t==null||t(m)}const i=m=>{p(m.target.value)};return e.jsx(I,{ref:n,className:"max-w-md md:w-52 mb-4",size:"sm",placeholder:"Search by name or title",prefix:e.jsx(Pe,{className:"text-lg"}),onChange:i})});Ce.displayName="LeadsTableSearch";const wt=()=>{const r=v(),n=b.useRef(null),t=f(l=>l.crmLeads.data.tableData),p=_("leads","canCreate"),u=l=>{const x=J(t);x.query=l,x.pageIndex=1,typeof l=="string"&&l.length>1&&i(x),typeof l=="string"&&l.length===0&&i(x)},i=l=>{r(l?V(l):k())},m=()=>{r(me()),r(O({})),r(pt("Add"))};return b.useEffect(()=>{n.current&&(n.current.value=t.query||"",r(V(t)))},[t==null?void 0:t.query]),e.jsxs("div",{className:"md:flex items-center justify-between",children:[e.jsx("div",{className:"md:flex items-center gap-4",children:e.jsx(Ce,{ref:n,onInputChange:u})}),e.jsx("div",{className:"mb-4",children:p&&e.jsx(P,{size:"sm",onClick:m,children:"Add New"})})]})};De("crmLeads",Fe);const St=()=>{const r=f(n=>n.crmLeads.data.tableData);return e.jsxs(e.Fragment,{children:[e.jsx(ht,{}),e.jsxs(ve,{bodyClass:"h-full",children:[e.jsx(le,{title:`Leads (${(r==null?void 0:r.total)||0})`,desc:"",className:"mb-2"}),e.jsx(wt,{}),e.jsx(vt,{})]})]})},Ls=St;export{Ls as default};
