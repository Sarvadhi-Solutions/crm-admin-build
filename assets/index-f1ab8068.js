import{am as o,an as L,ao as D,ap as S}from"./index-01b42c77.js";import{C as b,D as h,E as C,n as F,l as x,F as I,G as M,H as U,t as q,v as T,w as E}from"./CrmService-fb54ad5b.js";import{g as G}from"./index-6cd17dbd.js";import{g as O}from"./index-99289558.js";const z="crmTasks",m=o("crmTasks/data/getTasksStatistic",async()=>(await b()).data),f=o("crmTasks/data/getTasks",async()=>(await h()).data),B=o("crmTasks/data/editTask",async({taskId:s,updatedData:a})=>(await C(s,a)).data),J=o("crmStatus/data/getStatus",async s=>(await F(s)).data),P=o("crmLeads/data/getLeads",async()=>(await x()).data),K=o("crmTasks/data/deleteTask",async s=>{var a,e;try{return(await I(s)).data}catch(t){throw new Error((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)}}),y=o("crmTasks/data/putTasks",async({taskId:s,data:a})=>{var e,t;try{return(await C(s,a)).data}catch(r){throw new Error((t=(e=r==null?void 0:r.response)==null?void 0:e.data)==null?void 0:t.message)}}),A=o("crmContact/data/getCustomField",async s=>{const a=await M(s);return console.log({response:a}),a.data}),V=o("crmTasks/data/createTasks",async s=>{var a,e;try{return(await U(s)).data}catch(t){throw new Error((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)}}),W=o("crmTasks/data/module",async()=>(await q()).data),X=o("tag-category",async({id:s})=>(await T(s)).data);o("crmTasks/data/fetchTag",async({id:s})=>(await T(s)).data);o("crmTasks/data/createTag",async({masterId:s,colorName:a,tagName:e,tagCategoryId:t})=>(await E({colorName:a,tagName:e,masterId:s,tagCategoryId:t})).data);const R={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},v={status:""},Q={loading:!1,statisticLoading:!1,tasksList:[],displayedTasksList:[],statisticData:{},tableData:R,filterData:v,drawerOpen:!1,selectedTask:{},usersList:[],contactsList:[],customField:[],leadsList:[],drawerMode:"Add",deleteConfirmation:!1,followUPConfirmation:!1,quotationConfirmation:!1},k=L({name:`${z}/state`,initialState:Q,reducers:{setTableData:(s,a)=>{var t;s.tableData=a.payload;const e=(t=s.tasksList)==null?void 0:t.filter(r=>r.title.toLowerCase().includes(a.payload.query.toLowerCase()));s.tableData={...a.payload,total:e==null?void 0:e.length},s.displayedTasksList=e==null?void 0:e.slice(a.payload.pageSize*(a.payload.pageIndex-1),a.payload.pageSize*a.payload.pageIndex)},setTasksList:(s,a)=>{s.tasksList=a.payload},setUsersList:(s,a)=>{s.usersList=a.payload},setContactsList:(s,a)=>{s.usersList=a.payload},setFilterData:(s,a)=>{s.filterData=a.payload},setSelectedTask:(s,a)=>{s.selectedTask=a.payload},setRowTaskId:(s,a)=>{s.rowwithId=a.payload},setDrawerOpen:s=>{s.drawerOpen=!0},setDialogToggle:(s,a)=>{s.isDialogOpen=a.payload},setDrawerClose:s=>{s.drawerOpen=!1},setDrawerMode:(s,a)=>{s.drawerMode=a.payload},toggleDeleteConfirmation:(s,a)=>{s.deleteConfirmation=a.payload},toggleFollowUPConfirmation:(s,a)=>{s.followUPConfirmation=a.payload},toggleQuotationConfirmation:(s,a)=>{s.quotationConfirmation=a.payload}},extraReducers:s=>{s.addCase(f.fulfilled,(a,e)=>{var r,n,d,i,l,c,p,g,u;a.tasksList=(r=e.payload)==null?void 0:r.data,a.tableData.total=(d=(n=e.payload)==null?void 0:n.data)==null?void 0:d.length;const t=(l=(i=e.payload)==null?void 0:i.data)==null?void 0:l.filter(w=>w.title.toLowerCase().includes(a.tableData.query||"".toLowerCase()));a.displayedTasksList=t.slice(((c=a==null?void 0:a.tableData)==null?void 0:c.pageSize)*(((p=a==null?void 0:a.tableData)==null?void 0:p.pageIndex)-1),((g=a==null?void 0:a.tableData)==null?void 0:g.pageSize)*((u=a==null?void 0:a.tableData)==null?void 0:u.pageIndex)),a.loading=!1}).addCase(O.fulfilled,(a,e)=>{a.usersList=e.payload.data,a.loading=!1}).addCase(A.fulfilled,(a,e)=>{a.customField=e.payload,a.loading=!1}).addCase(G.fulfilled,(a,e)=>{a.contactsList=e.payload.data,a.loading=!1}).addCase(f.pending,a=>{a.loading=!0}).addCase(m.fulfilled,(a,e)=>{a.statisticData=e.payload,a.statisticLoading=!1}).addCase(P.fulfilled,(a,e)=>{a.leadsList=e.payload.data,a.loading=!1}).addCase(m.pending,a=>{a.statisticLoading=!0}).addCase(y.fulfilled,(a,e)=>{a.loading=!1}).addCase(y.pending,a=>{a.statisticLoading=!0})}}),{setRowTaskId:Y,setTableData:Z,setTasksList:aa,setFilterData:sa,setSelectedTask:ea,setDrawerOpen:ta,setDrawerClose:oa,setContactsList:ra,setDrawerMode:na,setDialogToggle:da,setUsersList:ia,toggleDeleteConfirmation:la,toggleFollowUPConfirmation:ca,toggleQuotationConfirmation:pa}=k.actions,j=k.reducer,ga=D({data:j}),ua=S;export{Z as a,ea as b,m as c,K as d,ta as e,ca as f,f as g,pa as h,P as i,A as j,W as k,X as l,V as m,oa as n,aa as o,y as p,Y as q,ga as r,na as s,la as t,ua as u,da as v,J as w,B as x};
