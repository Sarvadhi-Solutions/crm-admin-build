import{al as b,am as I,an as k,ao as E,j as e,a as S,r as w,ap as _,aq as T,at as v,ah as B}from"./index-63e2e8ff.js";import{C as P,i as g}from"./Views-003281bd.js";import{f as M}from"./CrmService-5cf7bda2.js";import{A as G}from"./AdaptableCard-65dd0b5a.js";import"./Badge-de40248e.js";import"./chart.constant-00b2142c.js";import"./chart.config-fae70cd3.js";import"./index-5d246f90.js";import{B as L}from"./Button-a97ffbe7.js";import"./Dialog-90630d0c.js";import"./DataTable-8bbaa7db.js";import{D as H}from"./DoubleSidedImage-4bfb1378.js";import"./Input-dfd69504.js";import"./GrowShrinkTag-d41201f8.js";import"./Skeleton-2b11309e.js";import"./react-tooltip.min-65e07196.js";import"./RichTextEditor-d1fdb2b6.js";import"./SegmentItemOption-d01d574f.js";import"./SvgIcon-86e7b073.js";import"./Tooltip-c31d4795.js";import{C as $}from"./Card-7fb7e828.js";import{t as y,N}from"./toast-48646e27.js";import{C as W}from"./ConfirmDialog-85686491.js";import{P as X}from"./index.esm-efc46191.js";import{u as Y,d as O,a as D,j as R,g as V}from"./index-7c8d9942.js";import{I as F}from"./index.esm-bf97ef38.js";import{S as q}from"./StatusCapsule-bb1e3f2b.js";import"./useMergeRef-788c4cb0.js";import"./index-dc0ea509.js";import"./CloseButton-6c8026ae.js";import"./index-fc16ff84.js";import"./index.esm-afe8a978.js";import"./Pagination-71030a82.js";import"./Select-694ed63b.js";import"./slicedToArray-242864f8.js";import"./objectWithoutProperties-8809bfcf.js";import"./toConsumableArray-f67a5c65.js";import"./floating-ui.dom-bef9cea3.js";import"./get-493353e0.js";import"./toString-5c4cd996.js";import"./_MapCache-dd2b8df3.js";import"./index-ec94574b.js";import"./cloneDeep-1c41923d.js";import"./_getPrototype-98c5f3ae.js";import"./_baseIsEqual-29b249d3.js";import"./index-771912a2.js";import"./isNil-f6fc7ccb.js";import"./Tag-9f31dd76.js";import"./useThemeClass-efe3e673.js";import"./usePopper-bf13ca3c.js";import"./index.esm-bc87981d.js";import"./index-cdfb36ad.js";import"./useTimeout-00dc7814.js";import"./StatusIcon-496b8ef9.js";import"./chainedFunction-070f832c.js";import"./Alert-47e0529e.js";import"./RangeCalendar-c01929fd.js";import"./useControllableState-92071fcc.js";import"./index-71c2614d.js";import"./useRootClose-4a0ada14.js";import"./TimeInput-fe7c7f1c.js";import"./useUniqueId-dc180cd8.js";import"./useDidUpdate-5e426114.js";import"./Drawer-0661c241.js";import"./index-8e59a616.js";import"./useUncertainRef-35321eb8.js";import"./index-a7f7d486.js";import"./FormItem-c438ca28.js";import"./index-00f543c1.js";import"./index-5f225953.js";import"./Progress-0c57823e.js";import"./index-8b2c7272.js";import"./ScrollBar-1cd8f673.js";import"./index-112a1f58.js";import"./index-ffea5472.js";import"./mapCloneElement-78a18daf.js";import"./Switcher-cc5c1dad.js";import"./index-d9139b01.js";import"./index-e7933672.js";import"./index-2d299461.js";import"./Upload-b29b86af.js";import"./index.esm-c2fbb27e.js";const C="crmLeadDetails",z={loading:!0,lead:{}},j=b(`${C}/getLeadById`,async t=>{var s,a;try{return await M(t)}catch(i){throw new Error((a=(s=i==null?void 0:i.response)==null?void 0:s.data)==null?void 0:a.message)}}),J=I({name:`${C}/state`,initialState:z,reducers:{},extraReducers:t=>{t.addCase(j.fulfilled,(s,a)=>{s.loading=!1,s.lead=a==null?void 0:a.payload.data}).addCase(j.pending,s=>{s.loading=!0})}}),K=J.reducer,Q=k({data:K}),A=E,h=({title:t,value:s})=>{const i=(l,c)=>l.length>c?`${l.slice(0,c)}
${i(l.slice(c),c)}`:l,r=s.length>80?i(s,80):s;return e.jsxs("div",{children:[e.jsx("span",{children:t}),e.jsx("p",{className:"text-gray-700 dark:text-gray-200 font-semibold",style:{maxWidth:"500px",wordWrap:"break-word"},children:r})]})},U=t=>{const s=S(),[a,i]=w.useState(!1),r=_(),l=()=>{i(!1)},c=()=>{i(!0)},u=Y(o=>o.crmLeads.data.selectedLeads),n=async()=>{var p,x,d;i(!1);const o=await s(O(u.id));await s(D()),(p=o==null?void 0:o.payload)!=null&&p.success?(y.push(e.jsx(N,{title:"Successfuly Deleted",type:"success",duration:2500,children:(x=o==null?void 0:o.payload)==null?void 0:x.message}),{placement:"top-end"}),r("/app/crm/leads"),s(R({}))):y.push(e.jsx(N,{title:"Something Went Wrong !!!",type:"danger",duration:2500,children:(d=o==null?void 0:o.error)==null?void 0:d.message}),{placement:"top-end"}),await s(D()),await s(V())},m=()=>{r("/app/crm/Leads")};return e.jsxs(e.Fragment,{children:[e.jsx(L,{block:!0,icon:e.jsx(X,{}),variant:"solid",onClick:c,children:"Delete"}),e.jsx(L,{block:!0,icon:e.jsx(F,{}),onClick:m,children:"Back"}),e.jsx(W,{isOpen:a,type:"danger",title:"Delete Lead",confirmButtonColor:"red-600",onClose:l,onRequestClose:l,onCancel:l,onConfirm:n,children:e.jsx("p",{children:"Are you sure you want to delete this Lead? All record related to this Lead will be deleted as well. This action cannot be undone."})})]})},Z=({data:t={}})=>{var s;return e.jsx($,{children:e.jsxs("div",{className:"flex flex-col xl:justify-between min-w-[300px] mx-auto p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-1 gap-y-7 gap-x-4",children:[t.budget?e.jsx(h,{title:"Budget",value:t.budget}):null,(s=t.contactData)!=null&&s.firstName?e.jsx(h,{title:"Contact Name",value:t.contactData.firstName}):null,t.status?e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-semibold",children:"Status:"}),e.jsxs("div",{className:"ml-2",children:[e.jsx(q,{status:t.status})," "]})]}):null,t!=null&&t.title?e.jsx(h,{title:"Title",value:t==null?void 0:t.title}):null]}),e.jsx("div",{className:"mt-4 flex flex-col xl:flex-row gap-2",children:e.jsx(U,{data:t})})]})})};T("crmLeadDetails",Q);const It=()=>{const t=S(),s=v(),{id:a}=s,i=A(n=>{var m,o;return(o=(m=n==null?void 0:n.crmLeadDetails)==null?void 0:m.data)==null?void 0:o.lead}),r=i==null?void 0:i.data,l=A(n=>n.crmLeadDetails.data.loading);w.useEffect(()=>{c()},[]);const c=()=>{a&&t(j(a))},u=({title:n,value:m})=>{const p=(d,f)=>d.length>f?`${d.slice(0,f)}
${p(d.slice(f),f)}`:d,x=m.length>250?p(m,250):m;return e.jsxs("div",{children:[e.jsx("span",{children:n}),e.jsx("p",{className:"text-gray-700 dark:text-gray-200 font-semibold",style:{maxWidth:"750px",wordWrap:"break-word"},children:x})]})};return e.jsxs(P,{className:"h-full",children:[e.jsx(B,{loading:l,children:!g(r)&&e.jsxs("div",{className:"flex flex-col xl:flex-row gap-4",children:[e.jsx("div",{children:e.jsx(Z,{data:r})}),e.jsx("div",{className:"w-full",children:e.jsx(G,{children:e.jsxs("div",{className:"flex flex-col xl:justify-between h-full 2xl:min-w-[360px] mx-auto",children:[r.title?e.jsx(u,{title:"Title",value:r==null?void 0:r.title}):null,e.jsx("br",{}),r.description?e.jsx(u,{title:"Description",value:r==null?void 0:r.description}):null]})})})]})}),!l&&g(r)&&e.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[e.jsx(H,{src:"/img/others/img-2.png",darkModeSrc:"/img/others/img-2-dark.png",alt:"No user found!"}),e.jsx("h3",{className:"mt-8",children:"No user found!"})]})]})};export{It as default};
