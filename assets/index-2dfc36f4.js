import{al as d,am as b,an as h,ao as S}from"./index-e30b2821.js";import{g as I,c as T,h as q,i as E,j as G,k as x,l as O,m as z,n as N,o as k,p as m,q as B}from"./CrmService-42c2fe6d.js";const P="crmLeads",C=d("crmLeads/data/getLeadsStatistic",async()=>(await I()).data),w=d("crmLeads/data/getLeads",async()=>(await T()).data),f=d("crmContact/data/getContact",async()=>(await q()).data),J=d("crmLeads/data/editLeads",async({leadsId:s,updatedData:a})=>{var e,t;try{return(await E(s,a)).data}catch(r){throw new Error((t=(e=r==null?void 0:r.response)==null?void 0:e.data)==null?void 0:t.message)}}),K=d("crmLeads/data/deleteLeads",async s=>{var a,e;try{return await G(s)}catch(t){throw new Error((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)}}),Q=d("crmLeads/data/createLeads",async s=>{var a,e;try{return(await x(s)).data}catch(t){throw new Error((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)}}),A=d("crmLeads/data/getProduct",async s=>{var a,e;try{const t=await O(s);return console.log({response:t}),t.data}catch(t){throw new Error((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)}}),F=d("crmLeads/data/getSubByIdCategory",async s=>{var a,e;try{return(await z(s)).data}catch(t){throw new Error((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)}}),M=d("crmLeads/data/getCategory",async()=>{var s,a;try{return(await N()).data}catch(e){throw new Error((a=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:a.message)}}),U=d("crmLeads/data/module",async()=>(await k()).data),V=d("tag-category",async({id:s})=>(await m(s)).data);d("crmLeads/data/fetchTag",async({id:s})=>(await m(s)).data);d("crmLeads/data/createTag",async({masterId:s,colorName:a,tagName:e,tagCategoryId:t})=>(await B({colorName:a,tagName:e,masterId:s,tagCategoryId:t})).data);const j={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},R={status:""},_={loading:!1,statisticLoading:!1,leadsList:[],categoryList:[],productList:[],subCategoryList:[],displayedLeadsList:[],statisticData:{},isDialogOpen:!1,tableData:j,filterData:R,drawerOpen:!1,selectedLeads:{},contactList:[],deleteConfirmation:!1},D=b({name:`${P}/state`,initialState:_,reducers:{setTableData:(s,a)=>{var t;const e=(t=s.leadsList)==null?void 0:t.filter(r=>{var o,n;return((o=r.contactData)==null?void 0:o.firstName.toLowerCase().includes(a.payload.query.toLowerCase()))||((n=r.contactData)==null?void 0:n.lastName.toLowerCase().includes(a.payload.query.toLowerCase()))||(r==null?void 0:r.title.toLowerCase().includes(a.payload.query.toLowerCase()))});s.tableData={...a.payload,total:e==null?void 0:e.length},s.displayedLeadsList=e.slice(a.payload.pageSize*(a.payload.pageIndex-1),a.payload.pageSize*a.payload.pageIndex)},setLeadsList:(s,a)=>{s.leadsList=a.payload},setFilterData:(s,a)=>{s.filterData=a.payload},setSelectedLeads:(s,a)=>{s.selectedLeads=a.payload},setDrawerOpen:s=>{s.drawerOpen=!0},setDialogToggle:(s,a)=>{s.isDialogOpen=a.payload},setDrawerClose:s=>{s.drawerOpen=!1},toggleDeleteConfirmation:(s,a)=>{s.deleteConfirmation=a.payload}},extraReducers:s=>{s.addCase(w.fulfilled,(a,e)=>{var r,o,n,c,i,p,g,L;a.leadsList=e.payload.data,a.tableData.total=(o=(r=e.payload)==null?void 0:r.data)==null?void 0:o.length;const t=(c=(n=e.payload)==null?void 0:n.data)==null?void 0:c.filter(l=>{var y,u;return((y=l.contactData)==null?void 0:y.firstName.toLowerCase().includes(a.tableData.query||"".toLowerCase()))||((u=l.contactData)==null?void 0:u.lastName.toLowerCase().includes(a.tableData.query||"".toLowerCase()))||(l==null?void 0:l.title.toLowerCase().includes(a.tableData.query||"".toLowerCase()))});a.displayedLeadsList=t.slice(((i=a==null?void 0:a.tableData)==null?void 0:i.pageSize)*(((p=a==null?void 0:a.tableData)==null?void 0:p.pageIndex)-1),((g=a==null?void 0:a.tableData)==null?void 0:g.pageSize)*((L=a==null?void 0:a.tableData)==null?void 0:L.pageIndex)),a.loading=!1}).addCase(w.pending,a=>{a.loading=!0}).addCase(C.fulfilled,(a,e)=>{a.statisticData=e.payload,a.statisticLoading=!1}).addCase(C.pending,a=>{a.statisticLoading=!0}).addCase(f.fulfilled,(a,e)=>{a.contactList=e.payload.data,a.loading=!1}).addCase(f.pending,a=>{a.loading=!0}).addCase(F.fulfilled,(a,e)=>{a.subCategoryList=e==null?void 0:e.payload.data}).addCase(M.fulfilled,(a,e)=>{a.categoryList=e==null?void 0:e.payload.data}).addCase(A.fulfilled,(a,e)=>{a.productList=e==null?void 0:e.payload.data})}}),{setTableData:W,setLeadsList:X,setFilterData:Y,setSelectedLeads:Z,setDrawerOpen:aa,setDrawerClose:ea,setDialogToggle:sa,toggleDeleteConfirmation:ta}=D.actions,$=D.reducer,ra=h({data:$}),da=S;export{w as a,f as b,V as c,K as d,J as e,U as f,C as g,Q as h,M as i,Z as j,sa as k,W as l,aa as m,ra as r,ea as s,ta as t,da as u};
