import{r as q,au as ne,x as oe,am as g,an as ie,ao as le,ap as ce,a as ue,j as p}from"./index-5b083722.js";import{F as de,a as pe,c as k,d as j}from"./formik.esm-ca71b2a3.js";import"./Alert-02445582.js";import"./index-4c1fa5e5.js";import"./Badge-3cabc902.js";import{B as W}from"./Button-f1066bd7.js";import"./Calendar-ebf2d3b6.js";import"./Card-90f8ec69.js";import"./index-f0eb9061.js";import"./index-15ca79f1.js";import"./Dialog-5dd7ece1.js";import"./Drawer-a551faf1.js";import"./index-0e58897c.js";import"./toString-981652f6.js";import{I as me}from"./Input-48a3f72c.js";import"./index-dd3cb046.js";import"./index-b09fd56f.js";import"./index-0fd37ad7.js";import"./toast-6a0b7cb5.js";import"./Pagination-a6fcbfa4.js";import"./Progress-f8bc0fe1.js";import"./index-6d78d8ac.js";import"./RangeCalendar-baaf2850.js";import"./ScrollBar-4be37f27.js";import"./index-b665f1fe.js";import{S as fe}from"./Select-356b8b96.js";import"./Skeleton-cb576037.js";import"./index-9a196290.js";import"./Switcher-93fd8b6f.js";import"./index-2563f7cd.js";import"./index-e60138cc.js";import"./Tag-ae955d4e.js";import"./index-562c2113.js";import"./index-d72af9ba.js";import"./Tooltip-25cec1e2.js";import"./Upload-3bc63f23.js";import{c as he,d as ve}from"./index.esm-48411fb0.js";import{z as ye,A as ge,h as Ce,g as be,B as we,m as Oe,n as U,o as De}from"./CrmService-98616c23.js";var $={};(function(n){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var s=N(q),d=h(ne);function h(t){return t&&t.__esModule?t:{default:t}}function v(){if(typeof WeakMap!="function")return null;var t=new WeakMap;return v=function(){return t},t}function N(t){if(t&&t.__esModule)return t;if(t===null||C(t)!=="object"&&typeof t!="function")return{default:t};var r=v();if(r&&r.has(t))return r.get(t);var a={},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if(Object.prototype.hasOwnProperty.call(t,o)){var i=e?Object.getOwnPropertyDescriptor(t,o):null;i&&(i.get||i.set)?Object.defineProperty(a,o,i):a[o]=t[o]}return a.default=t,r&&r.set(t,a),a}function C(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?C=function(a){return typeof a}:C=function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},C(t)}function y(){return y=Object.assign||function(t){for(var r=1;r<arguments.length;r++){var a=arguments[r];for(var e in a)Object.prototype.hasOwnProperty.call(a,e)&&(t[e]=a[e])}return t},y.apply(this,arguments)}function b(t,r){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var e=Object.getOwnPropertySymbols(t);r&&(e=e.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),a.push.apply(a,e)}return a}function w(t){for(var r=1;r<arguments.length;r++){var a=arguments[r]!=null?arguments[r]:{};r%2?b(a,!0).forEach(function(e){l(t,e,a[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):b(a).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))})}return t}function l(t,r,a){return r in t?Object.defineProperty(t,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[r]=a,t}function x(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}function T(t,r){for(var a=0;a<r.length;a++){var e=r[a];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function H(t,r,a){return r&&T(t.prototype,r),a&&T(t,a),t}function J(t,r){return r&&(C(r)==="object"||typeof r=="function")?r:E(t)}function S(t){return S=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},S(t)}function E(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function K(t,r){if(typeof r!="function"&&r!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(r&&r.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),r&&P(t,r)}function P(t,r){return P=Object.setPrototypeOf||function(e,o){return e.__proto__=o,e},P(t,r)}var M="Select...",R=function(t){K(r,t);function r(a){var e;return x(this,r),e=J(this,S(r).call(this,a)),e.state={selected:e.parseValue(a.value,a.options)||{label:typeof a.placeholder>"u"?M:a.placeholder,value:""},isOpen:!1},e.dropdownRef=(0,s.createRef)(),e.mounted=!0,e.handleDocumentClick=e.handleDocumentClick.bind(E(e)),e.fireChangeEvent=e.fireChangeEvent.bind(E(e)),e}return H(r,[{key:"componentDidUpdate",value:function(e){if(this.props.value!==e.value)if(this.props.value){var o=this.parseValue(this.props.value,this.props.options);o!==this.state.selected&&this.setState({selected:o})}else this.setState({selected:{label:typeof this.props.placeholder>"u"?M:this.props.placeholder,value:""}})}},{key:"componentDidMount",value:function(){document.addEventListener("click",this.handleDocumentClick,!1),document.addEventListener("touchend",this.handleDocumentClick,!1)}},{key:"componentWillUnmount",value:function(){this.mounted=!1,document.removeEventListener("click",this.handleDocumentClick,!1),document.removeEventListener("touchend",this.handleDocumentClick,!1)}},{key:"handleMouseDown",value:function(e){this.props.onFocus&&typeof this.props.onFocus=="function"&&this.props.onFocus(this.state.isOpen),!(e.type==="mousedown"&&e.button!==0)&&(e.stopPropagation(),e.preventDefault(),this.props.disabled||this.setState({isOpen:!this.state.isOpen}))}},{key:"parseValue",value:function(e,o){var i;if(typeof e=="string")for(var c=0,m=o.length;c<m;c++)if(o[c].type==="group"){var u=o[c].items.filter(function(f){return f.value===e});u.length&&(i=u[0])}else typeof o[c].value<"u"&&o[c].value===e&&(i=o[c]);return i||e}},{key:"setValue",value:function(e,o){var i={selected:{value:e,label:o},isOpen:!1};this.fireChangeEvent(i),this.setState(i)}},{key:"fireChangeEvent",value:function(e){e.selected!==this.state.selected&&this.props.onChange&&this.props.onChange(e.selected)}},{key:"renderOption",value:function(e){var o,i=e.value;typeof i>"u"&&(i=e.label||e);var c=e.label||e.value||e,m=i===this.state.selected.value||i===this.state.selected,u=(o={},l(o,"".concat(this.props.baseClassName,"-option"),!0),l(o,e.className,!!e.className),l(o,"is-selected",m),o),f=(0,d.default)(u),O=Object.keys(e.data||{}).reduce(function(D,_){return w({},D,l({},"data-".concat(_),e.data[_]))},{});return s.default.createElement("div",y({key:i,className:f,onMouseDown:this.setValue.bind(this,i,c),onClick:this.setValue.bind(this,i,c),role:"option","aria-selected":m?"true":"false"},O),c)}},{key:"buildMenu",value:function(){var e=this,o=this.props,i=o.options,c=o.baseClassName,m=i.map(function(u){if(u.type==="group"){var f=s.default.createElement("div",{className:"".concat(c,"-title")},u.name),O=u.items.map(function(D){return e.renderOption(D)});return s.default.createElement("div",{className:"".concat(c,"-group"),key:u.name,role:"listbox",tabIndex:"-1"},f,O)}else return e.renderOption(u)});return m.length?m:s.default.createElement("div",{className:"".concat(c,"-noresults")},"No options found")}},{key:"handleDocumentClick",value:function(e){this.mounted&&(this.dropdownRef.current.contains(e.target)||this.state.isOpen&&this.setState({isOpen:!1}))}},{key:"isValueSelected",value:function(){return typeof this.state.selected=="string"||this.state.selected.value!==""}},{key:"render",value:function(){var e,o,i,c,m,u=this.props,f=u.baseClassName,O=u.controlClassName,D=u.placeholderClassName,_=u.menuClassName,L=u.arrowClassName,F=u.arrowClosed,V=u.arrowOpen,A=u.className,I=this.props.disabled?"Dropdown-disabled":"",X=typeof this.state.selected=="string"?this.state.selected:this.state.selected.label,Y=(0,d.default)((e={},l(e,"".concat(f,"-root"),!0),l(e,A,!!A),l(e,"is-open",this.state.isOpen),e)),Z=(0,d.default)((o={},l(o,"".concat(f,"-control"),!0),l(o,O,!!O),l(o,I,!!I),o)),ee=(0,d.default)((i={},l(i,"".concat(f,"-placeholder"),!0),l(i,D,!!D),l(i,"is-selected",this.isValueSelected()),i)),te=(0,d.default)((c={},l(c,"".concat(f,"-menu"),!0),l(c,_,!!_),c)),ae=(0,d.default)((m={},l(m,"".concat(f,"-arrow"),!0),l(m,L,!!L),m)),re=s.default.createElement("div",{className:ee},X),se=this.state.isOpen?s.default.createElement("div",{className:te,"aria-expanded":"true"},this.buildMenu()):null;return s.default.createElement("div",{ref:this.dropdownRef,className:Y},s.default.createElement("div",{className:Z,onMouseDown:this.handleMouseDown.bind(this),onTouchEnd:this.handleMouseDown.bind(this),"aria-haspopup":"listbox"},re,s.default.createElement("div",{className:"".concat(f,"-arrow-wrapper")},V&&F?this.state.isOpen?V:F:s.default.createElement("span",{className:ae}))),se)}}]),r}(s.Component);R.defaultProps={baseClassName:"Dropdown"};var Q=R;n.default=Q})($);const ht=oe($),_e="crmCustomers",z=g("crmCustomers/data/getCustomerStatistic",async()=>(await ye()).data),G=g("crmCustomers/data/getCustomers",async()=>(await ge()).data),vt=g("crmCustomers/data/editCustomer",async({customerId:n,updatedData:s})=>(await Ce(n,s)).data),yt=g("crmCustomers/data/deleteCustomer",async n=>await be(n)),gt=g("crmCustomers/data/createCustomer",async n=>(await we(n)).data),Ct=g("crmCustomers/data/module",async()=>{const n=await Oe();return console.log(n.data,"response"),n.data}),bt=g("tag-category",async({id:n})=>{const s=await U(n);return console.log(s.data,"Getting Data"),s.data});g("crmCustomers/data/fetchTag",async({id:n})=>(await U(n)).data);const Ne=g("crmCustomers/data/createTag",async({masterId:n,colorName:s,tagName:d,tagCategoryId:h})=>(await De({colorName:s,tagName:d,masterId:n,tagCategoryId:h})).data),xe={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},Se={status:""},Ee={loading:!1,statisticLoading:!1,customerList:[],statisticData:{},tableData:xe,filterData:Se,drawerOpen:!1,selectedCustomer:{}},B=ie({name:`${_e}/state`,initialState:Ee,reducers:{setTableData:(n,s)=>{n.tableData=s.payload},setCustomerList:(n,s)=>{n.customerList=s.payload},setFilterData:(n,s)=>{n.filterData=s.payload},setSelectedCustomer:(n,s)=>{n.selectedCustomer=s.payload},setDrawerOpen:n=>{n.drawerOpen=!0},setDrawerClose:n=>{n.drawerOpen=!1}},extraReducers:n=>{n.addCase(G.fulfilled,(s,d)=>{s.customerList=d.payload.data,s.loading=!1}).addCase(G.pending,s=>{s.loading=!0}).addCase(z.fulfilled,(s,d)=>{s.statisticData=d.payload,s.statisticLoading=!1}).addCase(z.pending,s=>{s.statisticLoading=!0})}}),{setTableData:wt,setCustomerList:Ot,setFilterData:Dt,setSelectedCustomer:_t,setDrawerOpen:Nt,setDrawerClose:xt}=B.actions,Pe=B.reducer,St=le({data:Pe}),Et=ce;function Pt(n){return n.map(d=>({type:"group",name:d.categoryName,items:d.tags.map(h=>({value:h.id,label:h.tagName}))}))}function kt(n){return n.map(s=>({value:s.id,label:s.categoryName}))}const ke=({onCancel:n,onSave:s})=>p.jsxs("div",{className:"text-right w-full",children:[p.jsx(W,{size:"sm",className:"mr-2",onClick:n,children:"Cancel"}),p.jsx(W,{size:"sm",variant:"solid",type:"button",onClick:s,children:"Save"})]}),jt=({isOpen:n,onOpenChange:s,categoryList:d,moduleName:h})=>{const v=q.useRef(null),N=ue(),C=async()=>{var y,b,w,l;if(h){const x=h.toString();await N(Ne({masterId:x,tagName:(y=v.current)==null?void 0:y.values.tag,colorName:(b=v.current)==null?void 0:b.values.tagColor,tagCategoryId:(w=v.current)==null?void 0:w.values.category.value})),s(!1),console.log((l=v.current)==null?void 0:l.values)}};return p.jsx("div",{className:`${n?"flex":"hidden"} justify-center items-center top-16 left-0 z-10 bg-white p-4 border border-gray-300 w-full absolute rounded-8`,children:n&&p.jsx(de,{innerRef:v,initialValues:{category:"",tag:"",tagColor:"#808080"},onSubmit:y=>{console.log("values",y," ==== > Here The Value Is Prinitng")},children:({values:y,setFieldValue:b})=>p.jsxs(pe,{children:[p.jsx(p.Fragment,{children:p.jsx(k,{label:"Category",children:p.jsx(j,{type:"text",autoComplete:"off",name:"category",placeholder:"Category",options:d,component:fe,prefix:p.jsx(he,{className:"text-xl"}),onChange:w=>{b("category",w)}})})}),p.jsxs("div",{className:"flex items-center justify-center",children:[p.jsx(k,{label:"Tag",children:p.jsx(j,{type:"text",autoComplete:"off",name:"tag",placeholder:"Additional Tag Name",component:me,prefix:p.jsx(ve,{className:"text-xl"})})}),p.jsx(k,{children:p.jsx(j,{type:"color",name:"tagColor",className:"w-8 ml-2 p-2 rounded-full h-8 mt-6"})})]}),p.jsx(ke,{onCancel:()=>s(!1),onSave:C})]})})})};export{jt as A,ht as D,_t as a,wt as b,Nt as c,yt as d,Dt as e,z as f,G as g,Ct as h,bt as i,kt as j,vt as k,gt as l,St as r,xt as s,Pt as t,Et as u};
