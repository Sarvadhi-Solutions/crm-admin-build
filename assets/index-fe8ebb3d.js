import{al as d,am as L,an as u,ao as C}from"./index-59d5b448.js";import{g as m,c as w,h as f,i as D,j as h,k as S,l as b,m as T,n as I,o as E,p as g,q as G}from"./CrmService-a82a4f3a.js";const x="crmLeads",c=d("crmLeads/data/getLeadsStatistic",async()=>(await m()).data),i=d("crmLeads/data/getLeads",async()=>(await w()).data),p=d("crmContact/data/getContact",async()=>(await f()).data),N=d("crmLeads/data/editLeads",async({leadsId:s,updatedData:a})=>{var e,t;try{return(await D(s,a)).data}catch(r){throw new Error((t=(e=r==null?void 0:r.response)==null?void 0:e.data)==null?void 0:t.message)}}),j=d("crmLeads/data/deleteLeads",async s=>{var a,e;try{return await h(s)}catch(t){throw new Error((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)}}),R=d("crmLeads/data/createLeads",async s=>{var a,e;try{return(await S(s)).data}catch(t){throw new Error((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)}}),O=d("crmLeads/data/getProduct",async s=>{var a,e;try{const t=await b(s);return console.log({response:t}),t.data}catch(t){throw new Error((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)}}),q=d("crmLeads/data/getSubByIdCategory",async s=>{var a,e;try{return(await T(s)).data}catch(t){throw new Error((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)}}),z=d("crmLeads/data/getCategory",async()=>{var s,a;try{return(await I()).data}catch(e){throw new Error((a=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:a.message)}}),_=d("crmLeads/data/module",async()=>(await E()).data),$=d("tag-category",async({id:s})=>(await g(s)).data);d("crmLeads/data/fetchTag",async({id:s})=>(await g(s)).data);d("crmLeads/data/createTag",async({masterId:s,colorName:a,tagName:e,tagCategoryId:t})=>(await G({colorName:a,tagName:e,masterId:s,tagCategoryId:t})).data);const k={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},B={status:""},P={loading:!1,statisticLoading:!1,leadsList:[],categoryList:[],productList:[],subCategoryList:[],displayedLeadsList:[],statisticData:{},isDialogOpen:!1,tableData:k,filterData:B,drawerOpen:!1,selectedLeads:{},contactList:[],deleteConfirmation:!1},y=L({name:`${x}/state`,initialState:P,reducers:{setTableData:(s,a)=>{const e=s.leadsList.filter(t=>{var r,o;return((r=t.contactData)==null?void 0:r.firstName.toLowerCase().includes(a.payload.query.toLowerCase()))||((o=t.contactData)==null?void 0:o.lastName.toLowerCase().includes(a.payload.query.toLowerCase()))||(t==null?void 0:t.title.toLowerCase().includes(a.payload.query.toLowerCase()))});s.tableData={...a.payload,total:e==null?void 0:e.length},s.displayedLeadsList=e.slice(a.payload.pageSize*(a.payload.pageIndex-1),a.payload.pageSize*a.payload.pageIndex)},setLeadsList:(s,a)=>{s.leadsList=a.payload},setFilterData:(s,a)=>{s.filterData=a.payload},setSelectedLeads:(s,a)=>{s.selectedLeads=a.payload},setDrawerOpen:s=>{s.drawerOpen=!0},setDialogToggle:(s,a)=>{s.isDialogOpen=a.payload},setDrawerClose:s=>{s.drawerOpen=!1},toggleDeleteConfirmation:(s,a)=>{s.deleteConfirmation=a.payload}},extraReducers:s=>{s.addCase(i.fulfilled,(a,e)=>{var t,r,o,n,l;a.leadsList=e.payload.data,a.tableData.total=(t=e.payload.data)==null?void 0:t.length,a.displayedLeadsList=e.payload.data.slice(((r=a==null?void 0:a.tableData)==null?void 0:r.pageSize)*(((o=a==null?void 0:a.tableData)==null?void 0:o.pageIndex)-1),((n=a==null?void 0:a.tableData)==null?void 0:n.pageSize)*((l=a==null?void 0:a.tableData)==null?void 0:l.pageIndex)),a.loading=!1}).addCase(i.pending,a=>{a.loading=!0}).addCase(c.fulfilled,(a,e)=>{a.statisticData=e.payload,a.statisticLoading=!1}).addCase(c.pending,a=>{a.statisticLoading=!0}).addCase(p.fulfilled,(a,e)=>{a.contactList=e.payload.data,a.loading=!1}).addCase(p.pending,a=>{a.loading=!0}).addCase(q.fulfilled,(a,e)=>{a.subCategoryList=e==null?void 0:e.payload.data}).addCase(z.fulfilled,(a,e)=>{a.categoryList=e==null?void 0:e.payload.data}).addCase(O.fulfilled,(a,e)=>{a.productList=e==null?void 0:e.payload.data})}}),{setTableData:v,setLeadsList:H,setFilterData:J,setSelectedLeads:K,setDrawerOpen:Q,setDrawerClose:U,setDialogToggle:V,toggleDeleteConfirmation:W}=y.actions,A=y.reducer,X=u({data:A}),Y=C;export{c as a,p as b,$ as c,j as d,N as e,_ as f,i as g,R as h,z as i,K as j,V as k,v as l,Q as m,X as r,U as s,W as t,Y as u};
