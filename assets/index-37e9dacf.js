import{a as w,r as m,j as e,ai as ie,ar as ne}from"./index-21d7ce34.js";import{A as le}from"./AdaptableCard-1403a507.js";import{D as ce}from"./DataTable-2fc93372.js";import{u as j,a as me,f as de,b as pe,e as xe,g as R,s as U,c as ue,d as _,h as M,i as G,j as he,k as J,l as fe,r as ge}from"./index-48d84ab5.js";import{u as Q}from"./useThemeClass-103b190c.js";import{B as O}from"./Button-6c3081fd.js";import{D as je}from"./Drawer-08bde54d.js";import{T as W}from"./index-cfa1d7b1.js";import{u as Ce,c as d,d as p,F as be,a as Ne,b as ye}from"./formik.esm-b31c216f.js";import{c as we,a as y,b as ve}from"./index.esm-078c9db1.js";import{I as x}from"./Input-b18c5be2.js";import{A as X}from"./index-60ecab9e.js";import{U as De}from"./Upload-a60754e4.js";import{I as ke,a6 as Se,a7 as Ie,a8 as K,z as Te,B as Fe,d as Ae,a9 as Le}from"./index.esm-3f5f076a.js";import{A as P}from"./index.esm-74216463.js";import{a as Re,T as qe,b as A}from"./index.esm-1004ce28.js";import{D as H,A as Ee,t as Me,c as Oe}from"./AdditionalTag-ee745a24.js";/* empty css              */import{B as ze,a as Be,b as Ue,c as Ke}from"./index.esm-a8cf6609.js";import{c as L}from"./cloneDeep-c49c3d8a.js";import{d as Pe}from"./debounce-4303ffbd.js";import{S as He,c as $e}from"./Select-6e523134.js";import{B as Y}from"./Badge-0547788a.js";import{C as Ve}from"./Card-c016d7e4.js";import{M as Ze}from"./MediaSkeleton-caa70ad7.js";import{N as _e}from"./react-number-format.es-4ce1f76b.js";import"./index-83ec9673.js";import"./index.esm-b042e3c5.js";import"./Pagination-d1806156.js";import"./index-0bf67457.js";import"./_Uint8Array-00b9b100.js";import"./_MapCache-e6bfd31d.js";import"./Views-aa9d3067.js";import"./_baseIsEqual-06f63cf1.js";import"./get-db5a0269.js";import"./toString-839cbc0d.js";import"./TableRowSkeleton-e0a9e899.js";import"./Skeleton-5f2460b7.js";import"./index-dfd66886.js";import"./CrmService-ca976601.js";import"./context-ff20449e.js";import"./index-e63aba64.js";import"./CloseButton-8f19e7bd.js";import"./useControllableState-3f0dec55.js";import"./index-99dab15c.js";import"./isNil-e652d611.js";import"./useMergeRef-788c4cb0.js";import"./Tooltip-1a8549c9.js";import"./usePopper-50e8ad5a.js";import"./index.esm-4dac136d.js";import"./toast-60e590e4.js";import"./useTimeout-c424fd3c.js";import"./StatusIcon-cb41def8.js";import"./chainedFunction-070f832c.js";import"./Alert-bd43990b.js";import"./Calendar-d76733e5.js";import"./index-d0bd679a.js";import"./useRootClose-aa5c19cb.js";import"./RangeCalendar-b8d72020.js";import"./TimeInput-53379264.js";import"./useUniqueId-18384f8e.js";import"./useDidUpdate-d17bf275.js";import"./Dialog-fcbd4cee.js";import"./index-cbaf419c.js";import"./useUncertainRef-1f87b20a.js";import"./index-a936af3e.js";import"./index-5f8b7824.js";import"./index-24a2595e.js";import"./Progress-1f726e4f.js";import"./index-489c77b3.js";import"./ScrollBar-83d9acc4.js";import"./index-97d1b97f.js";import"./index-de8563c1.js";import"./mapCloneElement-18ca430e.js";import"./Switcher-25855834.js";import"./Tag-49702b6e.js";import"./index-f9e4d97b.js";import"./index-c82bc72a.js";import"./_getPrototype-2575ec81.js";import"./toConsumableArray-26f6508e.js";import"./objectWithoutPropertiesLoose-df62547b.js";import"./floating-ui.dom-bef9cea3.js";const Ge=r=>{const{touched:a,errors:t}=r,o=w(),[i,n]=m.useState(!1),[l,c]=m.useState(!1),[C,h]=m.useState([]),[f,T]=m.useState([]),v=()=>{n(!i),c(!1)},[z,B]=m.useState([]);m.useEffect(()=>{(async()=>{try{const{payload:g}=await o(me()),S=g.data.map(N=>({value:N.id,label:N.companyName}));B(S)}catch(g){console.error("Error fetching company data:",g)}})()},[o]);const[s,b]=m.useState("");m.useEffect(()=>{(async()=>{var g,S;try{const{payload:N}=await o(de()),F=(g=N==null?void 0:N.data)==null?void 0:g.find(I=>(I==null?void 0:I.moduleName)==="contacts");if(b(F.id),F){const{payload:I}=await o(pe({id:(S=F==null?void 0:F.id)==null?void 0:S.toString()})),oe=Me(I.data),re=Oe(I.data);T(re),h(oe)}}catch(N){console.error("Error fetching module data:",N)}})()},[o]);const q=j(u=>u.crmContact.data.selectedContact),[E,D]=m.useState(q?q.tags||[]:[]),k=Ce(),se=u=>{D(u);const g=[u.value];k.setFieldValue("tagId",g)};return e.jsxs(e.Fragment,{children:[e.jsx(d,{invalid:t.upload&&a.upload,errorMessage:t.upload,children:e.jsx(p,{name:"img",children:({field:u,form:g})=>{const S=u.value?{src:u.value}:{};return e.jsx("div",{className:"flex justify-center",children:e.jsx(De,{className:"cursor-pointer",showList:!1,uploadLimit:1,onChange:N=>g.setFieldValue(u.name,URL.createObjectURL(N[0])),onFileRemove:N=>g.setFieldValue(u.name,URL.createObjectURL(N[0])),children:e.jsx(X,{className:"border-2 border-white dark:border-gray-800 shadow-lg",size:100,shape:"circle",icon:e.jsx(ke,{}),...S})})})}})}),e.jsx(d,{label:"Name",invalid:t.name&&a.name,errorMessage:t.name,children:e.jsx(p,{type:"text",autoComplete:"off",name:"name",placeholder:"Name",component:x,prefix:e.jsx(Se,{className:"text-xl"})})}),e.jsx(d,{label:"First Name",invalid:t.firstName&&a.firstName,errorMessage:t.firstName,children:e.jsx(p,{type:"text",autoComplete:"off",name:"firstName",placeholder:"First Name",component:x,prefix:e.jsx(Ie,{className:"text-xl"})})}),e.jsx(d,{label:"Last Name",invalid:t.lastName&&a.lastName,errorMessage:t.lastName,children:e.jsx(p,{type:"text",autoComplete:"off",name:"lastName",placeholder:"Last Name",component:x,prefix:e.jsx(K,{className:"text-xl"})})}),e.jsx(d,{label:"Title",invalid:t.title&&a.title,errorMessage:t.title,children:e.jsx(p,{type:"text",autoComplete:"off",name:"title",placeholder:"Title",component:x,prefix:e.jsx(K,{className:"text-xl"})})}),e.jsx(d,{label:"Description",invalid:t.description&&a.description,errorMessage:t.description,children:e.jsx(p,{type:"text",autoComplete:"off",name:"description",placeholder:"Description",component:x,prefix:e.jsx(Re,{className:"text-xl"})})}),e.jsx(d,{label:"Contact Number",invalid:t.contactNumber&&a.contactNumber,errorMessage:t.contactNumber,children:e.jsx(p,{type:"text",autoComplete:"off",name:"contactNumber",placeholder:"Contact Number",component:x,prefix:e.jsx(P,{className:"text-xl"})})}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(d,{label:"Tag",children:e.jsxs("div",{style:{position:"relative"},children:[e.jsx(p,{name:"tagId",component:H,options:C,placeholder:"Select a Tag",value:k.initialValues.tagName,onChange:se}),e.jsx(qe,{style:{position:"absolute",right:"10px",top:"10px",border:"none",background:"#FFF"},className:"text-xl",onClick:()=>{v(),c(!0)}})]})}),e.jsx(Ee,{isOpen:i,categoryList:f,moduleName:s,onOpenChange:u=>n(u)})]}),e.jsx(d,{label:"Email",invalid:t.email&&a.email,errorMessage:t.email,children:e.jsx(p,{type:"text",autoComplete:"off",name:"email",placeholder:"Email",component:x,prefix:e.jsx(A,{className:"text-xl"})})}),e.jsx(d,{label:"Address",invalid:t.address&&a.address,errorMessage:t.address,children:e.jsx(p,{type:"text",autoComplete:"off",name:"address",placeholder:"Address",component:x,prefix:e.jsx(A,{className:"text-xl"})})}),e.jsx(d,{label:"Company Name",children:e.jsx(p,{type:"text",autoComplete:"off",name:"companyName",placeholder:"Company Name",options:z,value:k.initialValues.companyName,component:H,prefix:e.jsx(P,{className:"text-xl"}),onChange:u=>{const g=u.value;k.setFieldValue("companiesId",g)}})}),e.jsx(d,{label:"Position",invalid:t.position&&a.position,errorMessage:t.position,children:e.jsx(p,{type:"text",autoComplete:"off",name:"position",placeholder:"Position",component:x,prefix:e.jsx(A,{className:"text-xl"})})}),e.jsx(d,{label:"Source",invalid:t.source&&a.source,errorMessage:t.source,children:e.jsx(p,{type:"text",autoComplete:"off",name:"source",placeholder:"Source",component:x,prefix:e.jsx(A,{className:"text-xl"})})}),e.jsx(d,{label:"Notes",invalid:t.notes&&a.notes,errorMessage:t.notes,children:e.jsx(p,{type:"text",autoComplete:"off",name:"notes",placeholder:"Notes",component:x,prefix:e.jsx(A,{className:"text-xl"})})})]})},Je=r=>{const{touched:a,errors:t}=r;return e.jsxs(e.Fragment,{children:[e.jsx(d,{label:"Facebook link",invalid:t.facebook&&a.facebook,errorMessage:t.facebook,children:e.jsx(p,{type:"text",autoComplete:"off",name:"facebook",placeholder:"URL",component:x,prefix:e.jsx(ze,{className:"text-xl text-[#1773ea]"})})}),e.jsx(d,{label:"Twitter link",invalid:t.twitter&&a.twitter,errorMessage:t.twitter,children:e.jsx(p,{type:"text",autoComplete:"off",name:"twitter",placeholder:"URL",component:x,prefix:e.jsx(Be,{className:"text-xl text-[#1da1f3]"})})}),e.jsx(d,{label:"Pinterest link",invalid:t.pinterest&&a.pinterest,errorMessage:t.pinterest,children:e.jsx(p,{type:"text",autoComplete:"off",name:"pinterest",placeholder:"URL",component:x,prefix:e.jsx(Ue,{className:"text-xl text-[#df0018]"})})}),e.jsx(d,{label:"LinkedIn link",invalid:t.linkedIn&&a.linkedIn,errorMessage:t.linkedIn,children:e.jsx(p,{type:"text",autoComplete:"off",name:"linkedIn",placeholder:"URL",component:x,prefix:e.jsx(Ke,{className:"text-xl text-[#0077b5]"})})})]})},Qe=we().shape({name:y().required("Name is required"),firstName:y().required("First Name is required"),lastName:y().required("Last Name is required"),title:y().required("Title is required"),contactNumber:y().typeError("Contact must be a number").required("Contact is required"),email:y().matches(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i,"Invalid email").required("Email is required"),address:y().required("Address is required"),companiesId:y(),position:y().required("Position is required"),source:y().required("Source is required"),description:y().required("Description Is Required"),notes:y(),tagId:ve()}),{TabNav:We,TabList:Xe,TabContent:$}=W,ee=m.forwardRef((r,a)=>{var n,l,c,C;const t=j(h=>h.crmContact.data.selectedContact);console.log(t,"++++");const o=!!t.id;console.log(o,"Editing Done");const i=w();return e.jsx(be,{innerRef:a,initialValues:{name:(t==null?void 0:t.name)||"",firstName:(t==null?void 0:t.firstName)||"",lastName:(t==null?void 0:t.lastName)||"",title:(t==null?void 0:t.title)||"",contactNumber:(t==null?void 0:t.contactNumber)||"",companyName:((n=t==null?void 0:t.company)==null?void 0:n.companyName)||"",tagName:((c=(l=t==null?void 0:t.tags)==null?void 0:l[0])==null?void 0:c.tagName)||"",email:(t==null?void 0:t.email)||"",address:(t==null?void 0:t.address)||"",companiesId:(t==null?void 0:t.companiesId)||null,position:(t==null?void 0:t.position)||"",source:(t==null?void 0:t.source)||"",description:(t==null?void 0:t.description)||"",notes:(t==null?void 0:t.notes)||"",tagId:((C=t==null?void 0:t.tags)==null?void 0:C.map(h=>h.id))||[]},validationSchema:Qe,onSubmit:async(h,{setSubmitting:f})=>{const{colorName:T,...v}=h;console.log(T),o===!0?(await i(xe({contactId:(t==null?void 0:t.id)||"",updatedData:v})),await i(R()),await i(U())):(await i(ue(v)),await i(R()),await i(U())),f(!1)},children:({touched:h,errors:f})=>e.jsx(Ne,{children:e.jsx(ye,{children:e.jsxs(W,{defaultValue:"personalInfo",children:[e.jsx(Xe,{children:e.jsx(We,{value:"personalInfo",children:"Custometer Detail"})}),e.jsxs("div",{className:"p-6",children:[e.jsx($,{value:"personalInfo",children:e.jsx(Ge,{touched:h,errors:f})}),e.jsx($,{value:"social",children:e.jsx(Je,{touched:h,errors:f})})]})]})})})})});ee.displayName="ContactForm";const te=m.forwardRef((r,a)=>{w();const t=j(n=>n.crmContact.data.selectedContact),o=j(n=>n.crmContact.data.contactList);console.log(o,"Here Is The Data");const i=async n=>{try{console.log("Edited Content Change")}catch(l){console.error("Error updating contact:",l)}};return e.jsx(ee,{ref:a,contact:t,onFormSubmit:i})});te.displayName="ContactEditContent";const Ye=({onSaveClick:r,onCancel:a})=>e.jsxs("div",{className:"text-right w-full",children:[e.jsx(O,{size:"sm",className:"mr-2",onClick:a,children:"Cancel"}),e.jsx(O,{size:"sm",variant:"solid",onClick:r,children:"Save"})]}),et=()=>{const r=w(),a=j(n=>n.crmContact.data.drawerOpen),t=()=>{r(U()),r(_({}))},o=m.useRef(null),i=()=>{var n,l;console.log("formSubmit function called",(n=o.current)==null?void 0:n.values),(l=o.current)==null||l.submitForm()};return e.jsx(je,{isOpen:a,closable:!1,bodyClass:"p-0",footer:e.jsx(Ye,{onCancel:t,onSaveClick:i}),onClose:t,onRequestClose:t,children:e.jsx(te,{ref:o})})},tt=({row:r})=>{const{textTheme:a}=Q(),t=w(),o=()=>{t(G()),t(_(r))};return e.jsx("div",{className:`${a} cursor-pointer select-none font-semibold`,onClick:o,children:"Edit"})},at=({row:r})=>{const{textTheme:a}=Q(),t=w(),o=async()=>{console.log(r,"Bhai Agaya"),await t(he(r.id)),await t(R())};return e.jsx("div",{className:`${a} cursor-pointer select-none font-semibold text-red-500`,onClick:o,children:"Delete"})},st=()=>{const r=w(),a=j(s=>s.crmContact.data.contactList);console.log(a,"Araha hai bhai ");const t=j(s=>s.crmContact.data.loading),o=j(s=>s.crmContact.data.filterData),{pageIndex:i,pageSize:n,sort:l,query:c,total:C}=j(s=>s.crmContact.data.tableData),h=m.useCallback(()=>{r(R())},[r]);m.useEffect(()=>{h()},[h,i,n,l,o]);const f=m.useMemo(()=>({pageIndex:i,pageSize:n,sort:l,query:c,total:C}),[i,n,l,c,C]),T=m.useMemo(()=>[{header:"Name",accessorKey:"name",cell:s=>s.row.original.name,width:"200px !important"},{header:"firstName",accessorKey:"firstName",cell:s=>s.row.original.firstName,width:300},{header:"lastName",accessorKey:"lastName",cell:s=>s.row.original.lastName,width:200},{header:"title",accessorKey:"title",cell:s=>s.row.original.title,width:200},{header:"description",accessorKey:"description",cell:s=>s.row.original.description,width:200},{header:"contactNumber",accessorKey:"contactNumber",cell:s=>s.row.original.contactNumber,width:200},{header:"Tag Name",accessorKey:"tagName",width:200,cell:s=>{const q=(s.row.original.tags||[]).map(E=>{const D=E.colorName||"#000000",k={backgroundColor:`rgba(${parseInt(D.slice(1,3),16)}, ${parseInt(D.slice(3,5),16)}, ${parseInt(D.slice(5,7),16)}, 0.2)`,color:D,padding:"4px 4px",borderRadius:"4px",marginRight:"4px",marginBottom:"4px"};return e.jsx("div",{style:k,children:E.tagName},E.id)});return e.jsx("div",{children:q})}},{header:"email",accessorKey:"email",cell:s=>s.row.original.email,width:200},{header:"address",accessorKey:"address",cell:s=>s.row.original.address,width:200},{header:"Company Name",accessorKey:"companyName",cell:s=>s.row.original.company?s.row.original.company.companyName:"",width:200},{header:"position",accessorKey:"position",cell:s=>s.row.original.position,width:200},{header:"source",accessorKey:"source",cell:s=>s.row.original.source,width:200},{header:"Notes",accessorKey:"notes",cell:s=>s.row.original.notes,width:200},{header:"Edit",id:"action",cell:s=>e.jsx(tt,{row:s.row.original})},{header:"Delete",id:"action",cell:s=>e.jsx(at,{row:s.row.original})}],[]),v=s=>{const b=L(f);b.pageIndex=s,r(M(b))},z=s=>{const b=L(f);b.pageSize=Number(s),b.pageIndex=1,r(M(b))},B=s=>{const b=L(f);b.sort=s,r(M(b))};return e.jsxs("div",{children:[e.jsx(ce,{columns:T,data:a,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},loading:t,pagingData:{total:f.total,pageIndex:f.pageIndex,pageSize:f.pageSize},onPaginationChange:v,onSelectChange:z,onSort:B}),e.jsx(et,{})]})},ae=m.forwardRef((r,a)=>{const{onInputChange:t}=r,o=Pe(i,500);function i(l){t==null||t(l)}const n=l=>{o(l.target.value)};return e.jsx(x,{ref:a,className:"max-w-md md:w-52 mb-4",size:"sm",placeholder:"Search",prefix:e.jsx(Te,{className:"text-lg"}),onChange:n})});ae.displayName="ContactTableSearch";const{Control:ot}=$e,V=[{value:"",label:"All",color:"bg-gray-500"},{value:"active",label:"Active",color:"bg-emerald-500"},{value:"blocked",label:"Blocked",color:"bg-red-500"}],rt=({innerProps:r,label:a,data:t,isSelected:o})=>e.jsxs("div",{className:`flex items-center justify-between p-2 cursor-pointer ${o?"bg-gray-100 dark:bg-gray-500":"hover:bg-gray-50 dark:hover:bg-gray-600"}`,...r,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{innerClass:t.color}),e.jsx("span",{children:a})]}),o&&e.jsx(Fe,{className:"text-emerald-500 text-xl"})]}),it=({children:r,...a})=>{const t=a.getValue()[0];return e.jsxs(ot,{...a,children:[t&&e.jsx(Y,{className:"ltr:ml-4 rtl:mr-4",innerClass:t.color}),r]})},nt=()=>{const r=w(),{status:a}=j(o=>o.crmContact.data.filterData),t=o=>{r(J({status:o==null?void 0:o.value}))};return e.jsx(He,{options:V,size:"sm",className:"mb-4 min-w-[130px]",components:{Option:rt,Control:it},value:V.filter(o=>o.value===a),onChange:t})},lt=()=>{const r=w(),a=m.useRef(null),t=j(c=>c.crmContact.data.tableData),o=c=>{const C=L(t);C.query=c,C.pageIndex=1,typeof c=="string"&&c.length>1&&i(C),typeof c=="string"&&c.length===0&&i(C)},i=c=>{r(M(c)),r(R())},n=()=>{const c=L(t);c.query="",a.current&&(a.current.value=""),r(J({status:""})),i(c)},l=()=>{r(G())};return e.jsxs("div",{className:"md:flex items-center justify-between",children:[e.jsxs("div",{className:"md:flex items-center gap-4",children:[e.jsx(ae,{ref:a,onInputChange:o}),e.jsx(nt,{})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(O,{size:"sm",className:"me-2",onClick:n,children:"Clear All"}),e.jsx(O,{size:"sm",onClick:l,children:"Add New"})]})]})},Z=r=>{const{icon:a,avatarClass:t,label:o,value:i,loading:n}=r,l=55;return e.jsx(Ve,{bordered:!0,children:e.jsx(ie,{loading:n,customLoader:e.jsx(Ze,{avatarProps:{className:"rounded",width:l,height:l}}),children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(X,{className:t,size:l,icon:a}),e.jsxs("div",{children:[e.jsx("span",{children:o}),e.jsx("h3",{children:e.jsx(_e,{thousandSeparator:!0,displayType:"text",value:i})})]})]})})})})},ct=()=>{const r=w(),a=j(o=>o.crmContact.data.statisticData);console.log(a.totalContact,"Nahi araha hai Hai Bhai");const t=j(o=>o.crmContact.data.statisticLoading);return m.useEffect(()=>{r(fe())},[]),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 mb-6",children:[e.jsx(Z,{icon:e.jsx(Ae,{}),avatarClass:"!bg-indigo-600",label:"Total Contact",value:a.totalContacts,growthRate:a==null?void 0:a.totalContacts,loading:t}),e.jsx(Z,{icon:e.jsx(Le,{}),avatarClass:"!bg-blue-500",label:"New Contact",value:a.newContacts,growthRate:a.newContacts,loading:t})]})};ne("crmContact",ge);const mt=()=>e.jsxs(e.Fragment,{children:[e.jsx(ct,{}),e.jsxs(le,{bodyClass:"h-full",children:[e.jsx(lt,{}),e.jsx(st,{})]})]}),Ba=mt;export{Ba as default};
