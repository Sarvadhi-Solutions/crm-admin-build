import{a as w,r as m,j as e,ai as ie,ar as ne}from"./index-7a16719d.js";import{A as le}from"./AdaptableCard-13b794a2.js";import{D as ce}from"./DataTable-8d28e201.js";import{u as C,a as me,f as de,b as pe,e as ue,g as R,s as U,c as xe,d as _,h as O,i as G,j as he,k as J,l as fe,r as ge}from"./index-2172888d.js";import{u as Q}from"./useThemeClass-fd0ad3b7.js";import{B as z}from"./Button-796af526.js";import{D as Ce}from"./Drawer-8ba2eb60.js";import{T as W}from"./index-63d9e088.js";import{u as je,c as d,d as p,F as be,a as Ne,b as ye}from"./formik.esm-e41f31d6.js";import{c as we,a as y,f as ve,b as De}from"./index.esm-d14b6227.js";import{I as u}from"./Input-67ca38c6.js";import{A as X}from"./index-a6767bf5.js";import{U as Se}from"./Upload-43f1cdd5.js";import{I as ke,a6 as Ie,a7 as Te,a8 as K,z as Fe,B as Ae,d as Le,a9 as Re}from"./index.esm-a0bff864.js";import{A as V}from"./index.esm-377c755d.js";import{a as qe,T as Ee,b as A}from"./index.esm-a9630cba.js";import{D as $,A as Me,t as Oe,c as ze}from"./AdditionalTag-d9d972e5.js";/* empty css              */import{B as Be,a as Ue,b as Ke,c as Ve}from"./index.esm-1010dceb.js";import{c as L}from"./cloneDeep-b8051bc5.js";import{C as $e}from"./Card-1701bbfb.js";import"./Views-6f74b325.js";import{B as Y}from"./Badge-1281613d.js";import"./chart.constant-5281a9f6.js";import"./chart.config-58aa9b75.js";import{C as Pe}from"./ConfirmDialog-eba886ee.js";import"./GrowShrinkTag-37fffd2e.js";import"./Skeleton-37e417fd.js";import"./react-tooltip.min-a9924b1b.js";import"./RichTextEditor-5911068e.js";import"./SegmentItemOption-7241e2fb.js";import"./SvgIcon-453c12ee.js";import"./Tooltip-d9375ea6.js";import{d as He}from"./debounce-581daf1a.js";import{S as Ze,c as _e}from"./Select-9b097dd7.js";import{M as Ge}from"./MediaSkeleton-be71f6da.js";import{N as Je}from"./react-number-format.es-51238e39.js";import"./index-0e21c6e2.js";import"./index.esm-5d9ef8bc.js";import"./Pagination-48201899.js";import"./index-b0ca69aa.js";import"./_Uint8Array-cc34f89d.js";import"./_MapCache-4c25b116.js";import"./_baseIsEqual-2f7f19c2.js";import"./get-d062fc7e.js";import"./toString-8f2f6138.js";import"./TableRowSkeleton-7731763d.js";import"./index-f8af83e9.js";import"./CrmService-a924234d.js";import"./context-0b7be94f.js";import"./index-d79d31fc.js";import"./CloseButton-a0a179ae.js";import"./useControllableState-a386f254.js";import"./index-7ccc27ab.js";import"./isNil-e31eb1ef.js";import"./useMergeRef-788c4cb0.js";import"./index.esm-4e1ebe60.js";import"./toast-88b8cde7.js";import"./useTimeout-322537e2.js";import"./StatusIcon-d7c666ad.js";import"./chainedFunction-070f832c.js";import"./Alert-30cff1b8.js";import"./Calendar-d980fa99.js";import"./index-a27a5065.js";import"./useRootClose-846e7f72.js";import"./usePopper-f1e01f1f.js";import"./RangeCalendar-5a8bf6cb.js";import"./TimeInput-f92c5fbf.js";import"./useUniqueId-8e6b0c76.js";import"./useDidUpdate-c40d1f95.js";import"./Dialog-6329901c.js";import"./index-c8ec40dc.js";import"./useUncertainRef-cc932849.js";import"./index-8ce6c613.js";import"./index-4b73696b.js";import"./index-2891c22c.js";import"./Progress-eccc530b.js";import"./index-ec94b59a.js";import"./ScrollBar-c40790ee.js";import"./index-f369fb39.js";import"./index-ad91be40.js";import"./mapCloneElement-cd5ba71d.js";import"./Switcher-9edb53af.js";import"./Tag-35e609cf.js";import"./index-a7fd7ac6.js";import"./index-1fd6ab15.js";import"./_getPrototype-af9a5f7c.js";import"./floating-ui.dom-bef9cea3.js";import"./toConsumableArray-f36ee3dc.js";import"./objectWithoutPropertiesLoose-df62547b.js";const Qe=o=>{const{touched:a,errors:t}=o,r=w(),[i,n]=m.useState(!1),[l,c]=m.useState(!1),[j,h]=m.useState([]),[f,T]=m.useState([]),q=()=>{n(!i),c(!1)},[v,B]=m.useState([]);m.useEffect(()=>{(async()=>{try{const{payload:g}=await r(me()),k=g.data.map(N=>({value:N.id,label:N.companyName}));B(k)}catch(g){console.error("Error fetching company data:",g)}})()},[r]);const[s,b]=m.useState("");m.useEffect(()=>{(async()=>{var g,k;try{const{payload:N}=await r(de()),F=(g=N==null?void 0:N.data)==null?void 0:g.find(I=>(I==null?void 0:I.moduleName)==="contacts");if(b(F.id),F){const{payload:I}=await r(pe({id:(k=F==null?void 0:F.id)==null?void 0:k.toString()})),oe=Oe(I.data),re=ze(I.data);T(re),h(oe)}}catch(N){console.error("Error fetching module data:",N)}})()},[r]);const E=C(x=>x.crmContact.data.selectedContact),[M,D]=m.useState(E?E.tags||[]:[]),S=je(),se=x=>{D(x);const g=[x.value];S.setFieldValue("tagId",g)};return e.jsxs(e.Fragment,{children:[e.jsx(d,{invalid:t.upload&&a.upload,errorMessage:t.upload,children:e.jsx(p,{name:"img",children:({field:x,form:g})=>{const k=x.value?{src:x.value}:{};return e.jsx("div",{className:"flex justify-center",children:e.jsx(Se,{className:"cursor-pointer",showList:!1,uploadLimit:1,onChange:N=>g.setFieldValue(x.name,URL.createObjectURL(N[0])),onFileRemove:N=>g.setFieldValue(x.name,URL.createObjectURL(N[0])),children:e.jsx(X,{className:"border-2 border-white dark:border-gray-800 shadow-lg",size:100,shape:"circle",icon:e.jsx(ke,{}),...k})})})}})}),e.jsx(d,{label:"Name",invalid:t.name&&a.name,errorMessage:t.name,children:e.jsx(p,{type:"text",autoComplete:"off",name:"name",placeholder:"Name",component:u,prefix:e.jsx(Ie,{className:"text-xl"})})}),e.jsx(d,{label:"First Name",invalid:t.firstName&&a.firstName,errorMessage:t.firstName,children:e.jsx(p,{type:"text",autoComplete:"off",name:"firstName",placeholder:"First Name",component:u,prefix:e.jsx(Te,{className:"text-xl"})})}),e.jsx(d,{label:"Last Name",invalid:t.lastName&&a.lastName,errorMessage:t.lastName,children:e.jsx(p,{type:"text",autoComplete:"off",name:"lastName",placeholder:"Last Name",component:u,prefix:e.jsx(K,{className:"text-xl"})})}),e.jsx(d,{label:"Title",invalid:t.title&&a.title,errorMessage:t.title,children:e.jsx(p,{type:"text",autoComplete:"off",name:"title",placeholder:"Title",component:u,prefix:e.jsx(K,{className:"text-xl"})})}),e.jsx(d,{label:"Description",invalid:t.description&&a.description,errorMessage:t.description,children:e.jsx(p,{type:"text",autoComplete:"off",name:"description",placeholder:"Description",component:u,prefix:e.jsx(qe,{className:"text-xl"})})}),e.jsx(d,{label:"Contact Number",invalid:t.contactNumber&&a.contactNumber,errorMessage:t.contactNumber,children:e.jsx(p,{type:"text",autoComplete:"off",name:"contactNumber",placeholder:"Contact Number",component:u,prefix:e.jsx(V,{className:"text-xl"})})}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(d,{label:"Tag",children:e.jsxs("div",{style:{position:"relative"},children:[e.jsx(p,{name:"tagId",component:$,options:j,placeholder:"Select a Tag",value:S.initialValues.tagName,onChange:se}),e.jsx(Ee,{style:{position:"absolute",right:"10px",top:"10px",border:"none",background:"#FFF"},className:"text-xl",onClick:()=>{q(),c(!0)}})]})}),e.jsx(Me,{isOpen:i,categoryList:f,moduleName:s,onOpenChange:x=>n(x)})]}),e.jsx(d,{label:"Email",invalid:t.email&&a.email,errorMessage:t.email,children:e.jsx(p,{type:"text",autoComplete:"off",name:"email",placeholder:"Email",component:u,prefix:e.jsx(A,{className:"text-xl"})})}),e.jsx(d,{label:"Address",invalid:t.address&&a.address,errorMessage:t.address,children:e.jsx(p,{type:"text",autoComplete:"off",name:"address",placeholder:"Address",component:u,prefix:e.jsx(A,{className:"text-xl"})})}),e.jsx(d,{label:"Company Name",children:e.jsx(p,{type:"text",autoComplete:"off",name:"companyName",placeholder:"Company Name",options:v,value:S.initialValues.companyName,component:$,prefix:e.jsx(V,{className:"text-xl"}),onChange:x=>{const g=x.value;S.setFieldValue("companiesId",g)}})}),e.jsx(d,{label:"Position",invalid:t.position&&a.position,errorMessage:t.position,children:e.jsx(p,{type:"text",autoComplete:"off",name:"position",placeholder:"Position",component:u,prefix:e.jsx(A,{className:"text-xl"})})}),e.jsx(d,{label:"Source",invalid:t.source&&a.source,errorMessage:t.source,children:e.jsx(p,{type:"text",autoComplete:"off",name:"source",placeholder:"Source",component:u,prefix:e.jsx(A,{className:"text-xl"})})}),e.jsx(d,{label:"Notes",invalid:t.notes&&a.notes,errorMessage:t.notes,children:e.jsx(p,{type:"text",autoComplete:"off",name:"notes",placeholder:"Notes",component:u,prefix:e.jsx(A,{className:"text-xl"})})})]})},We=o=>{const{touched:a,errors:t}=o;return e.jsxs(e.Fragment,{children:[e.jsx(d,{label:"Facebook link",invalid:t.facebook&&a.facebook,errorMessage:t.facebook,children:e.jsx(p,{type:"text",autoComplete:"off",name:"facebook",placeholder:"URL",component:u,prefix:e.jsx(Be,{className:"text-xl text-[#1773ea]"})})}),e.jsx(d,{label:"Twitter link",invalid:t.twitter&&a.twitter,errorMessage:t.twitter,children:e.jsx(p,{type:"text",autoComplete:"off",name:"twitter",placeholder:"URL",component:u,prefix:e.jsx(Ue,{className:"text-xl text-[#1da1f3]"})})}),e.jsx(d,{label:"Pinterest link",invalid:t.pinterest&&a.pinterest,errorMessage:t.pinterest,children:e.jsx(p,{type:"text",autoComplete:"off",name:"pinterest",placeholder:"URL",component:u,prefix:e.jsx(Ke,{className:"text-xl text-[#df0018]"})})}),e.jsx(d,{label:"LinkedIn link",invalid:t.linkedIn&&a.linkedIn,errorMessage:t.linkedIn,children:e.jsx(p,{type:"text",autoComplete:"off",name:"linkedIn",placeholder:"URL",component:u,prefix:e.jsx(Ve,{className:"text-xl text-[#0077b5]"})})})]})},Xe=we().shape({name:y().required("Name is required"),firstName:y().required("First Name is required"),lastName:y().required("Last Name is required"),title:y().required("Title is required"),contactNumber:ve().typeError("Contact must be a number").required("Contact is required").test("is-number","Contact must be a number",o=>!isNaN(o)).test("is-ten-digits"," Contact must be exactly 10 digits",o=>{if(o){const a=Number(o);return/^\d{10}$/.test(a.toString())}return!0}).test("is-not-more-than-ten-digits","Contact must not exceed 10 digits",o=>o?Number(o).toString().length<=10:!0),email:y().matches(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i,"Invalid email").required("Email is required"),address:y().required("Address is required"),companiesId:y(),position:y().required("Position is required"),source:y().required("Source is required"),description:y().required("Description Is Required"),notes:y(),tagId:De()}),{TabNav:Ye,TabList:et,TabContent:P}=W,ee=m.forwardRef((o,a)=>{var n,l,c,j;const t=C(h=>h.crmContact.data.selectedContact);console.log(t,"++++");const r=!!t.id;console.log(r,"Editing Done");const i=w();return e.jsx(be,{innerRef:a,initialValues:{name:(t==null?void 0:t.name)||"",firstName:(t==null?void 0:t.firstName)||"",lastName:(t==null?void 0:t.lastName)||"",title:(t==null?void 0:t.title)||"",contactNumber:(t==null?void 0:t.contactNumber)||"",companyName:((n=t==null?void 0:t.company)==null?void 0:n.companyName)||"",tagName:((c=(l=t==null?void 0:t.tags)==null?void 0:l[0])==null?void 0:c.tagName)||"",email:(t==null?void 0:t.email)||"",address:(t==null?void 0:t.address)||"",companiesId:(t==null?void 0:t.companiesId)||null,position:(t==null?void 0:t.position)||"",source:(t==null?void 0:t.source)||"",description:(t==null?void 0:t.description)||"",notes:(t==null?void 0:t.notes)||"",tagId:((j=t==null?void 0:t.tags)==null?void 0:j.map(h=>h.id))||[]},validationSchema:Xe,onSubmit:async(h,{setSubmitting:f})=>{const{colorName:T,tagName:q,...v}=h;console.log(T),r===!0?(await i(ue({contactId:(t==null?void 0:t.id)||"",updatedData:v})),await i(R()),await i(U())):(await i(xe(v)),await i(R()),await i(U())),f(!1)},children:({touched:h,errors:f})=>e.jsx(Ne,{children:e.jsx(ye,{children:e.jsxs(W,{defaultValue:"personalInfo",children:[e.jsx(et,{children:e.jsx(Ye,{value:"personalInfo",children:"Custometer Detail"})}),e.jsxs("div",{className:"p-6",children:[e.jsx(P,{value:"personalInfo",children:e.jsx(Qe,{touched:h,errors:f})}),e.jsx(P,{value:"social",children:e.jsx(We,{touched:h,errors:f})})]})]})})})})});ee.displayName="ContactForm";const te=m.forwardRef((o,a)=>{w();const t=C(n=>n.crmContact.data.selectedContact),r=C(n=>n.crmContact.data.contactList);console.log(r,"Here Is The Data");const i=async n=>{try{console.log("Edited Content Change")}catch(l){console.error("Error updating contact:",l)}};return e.jsx(ee,{ref:a,contact:t,onFormSubmit:i})});te.displayName="ContactEditContent";const tt=({onSaveClick:o,onCancel:a})=>e.jsxs("div",{className:"text-right w-full",children:[e.jsx(z,{size:"sm",className:"mr-2",onClick:a,children:"Cancel"}),e.jsx(z,{size:"sm",variant:"solid",onClick:o,children:"Save"})]}),at=()=>{const o=w(),a=C(n=>n.crmContact.data.drawerOpen),t=()=>{o(U()),o(_({}))},r=m.useRef(null),i=()=>{var n,l;console.log("formSubmit function called",(n=r.current)==null?void 0:n.values),(l=r.current)==null||l.submitForm()};return e.jsx(Ce,{isOpen:a,closable:!1,bodyClass:"p-0",footer:e.jsx(tt,{onCancel:t,onSaveClick:i}),onClose:t,onRequestClose:t,children:e.jsx(te,{ref:r})})},st=({row:o})=>{const{textTheme:a}=Q(),t=w(),r=()=>{t(G()),t(_(o))};return e.jsx("div",{className:`${a} cursor-pointer select-none font-semibold`,onClick:r,children:"Edit"})},ot=({row:o})=>{const{textTheme:a}=Q(),t=w(),[r,i]=m.useState(!1),n=async()=>{i(!0)},l=async()=>{await t(he(o.id)),i(!1),await t(R())},c=()=>{i(!1)};return e.jsxs("div",{children:[e.jsx("div",{className:`${a} cursor-pointer select-none font-semibold text-red-500`,onClick:n,children:"Delete"}),r&&e.jsx(Pe,{type:"danger",title:"Confirm Deletion",isOpen:r,onCancel:c,onConfirm:l,children:"Are you sure you want to delete this item?"})]})},rt=()=>{const o=w(),a=C(s=>s.crmContact.data.contactList);console.log(a,"Araha hai bhai ");const t=C(s=>s.crmContact.data.loading),r=C(s=>s.crmContact.data.filterData),{pageIndex:i,pageSize:n,sort:l,query:c,total:j}=C(s=>s.crmContact.data.tableData),h=m.useCallback(()=>{o(R())},[o]);m.useEffect(()=>{h()},[h,i,n,l,r]);const f=m.useMemo(()=>({pageIndex:i,pageSize:n,sort:l,query:c,total:j}),[i,n,l,c,j]),T=m.useMemo(()=>[{header:"Name",accessorKey:"name",cell:s=>s.row.original.name,width:"200px !important"},{header:"firstName",accessorKey:"firstName",cell:s=>s.row.original.firstName,width:300},{header:"lastName",accessorKey:"lastName",cell:s=>s.row.original.lastName,width:200},{header:"title",accessorKey:"title",cell:s=>s.row.original.title,width:200},{header:"description",accessorKey:"description",cell:s=>s.row.original.description,width:200},{header:"contactNumber",accessorKey:"contactNumber",cell:s=>s.row.original.contactNumber,width:200},{header:"Tag Name",accessorKey:"tagName",width:200,cell:s=>{const E=(s.row.original.tags||[]).map(M=>{const D=M.colorName||"#000000",S={backgroundColor:`rgba(${parseInt(D.slice(1,3),16)}, ${parseInt(D.slice(3,5),16)}, ${parseInt(D.slice(5,7),16)}, 0.2)`,color:D,padding:"4px 4px",borderRadius:"4px",marginRight:"4px",marginBottom:"4px"};return e.jsx("div",{style:S,children:M.tagName},M.id)});return e.jsx("div",{children:E})}},{header:"email",accessorKey:"email",cell:s=>s.row.original.email,width:200},{header:"address",accessorKey:"address",cell:s=>s.row.original.address,width:200},{header:"Company Name",accessorKey:"companyName",cell:s=>s.row.original.company?s.row.original.company.companyName:"",width:200},{header:"position",accessorKey:"position",cell:s=>s.row.original.position,width:200},{header:"source",accessorKey:"source",cell:s=>s.row.original.source,width:200},{header:"Notes",accessorKey:"notes",cell:s=>s.row.original.notes,width:200},{header:"Edit",id:"action",cell:s=>e.jsx(st,{row:s.row.original})},{header:"Delete",id:"action",cell:s=>e.jsx(ot,{row:s.row.original})}],[]),q=s=>{const b=L(f);b.pageIndex=s,o(O(b))},v=s=>{const b=L(f);b.pageSize=Number(s),b.pageIndex=1,o(O(b))},B=s=>{const b=L(f);b.sort=s,o(O(b))};return e.jsxs("div",{children:[e.jsx(ce,{columns:T,data:a,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},loading:t,pagingData:{total:f.total,pageIndex:f.pageIndex,pageSize:f.pageSize},onPaginationChange:q,onSelectChange:v,onSort:B}),e.jsx(at,{})]})},ae=m.forwardRef((o,a)=>{const{onInputChange:t}=o,r=He(i,500);function i(l){t==null||t(l)}const n=l=>{r(l.target.value)};return e.jsx(u,{ref:a,className:"max-w-md md:w-52 mb-4",size:"sm",placeholder:"Search",prefix:e.jsx(Fe,{className:"text-lg"}),onChange:n})});ae.displayName="ContactTableSearch";const{Control:it}=_e,H=[{value:"",label:"All",color:"bg-gray-500"},{value:"active",label:"Active",color:"bg-emerald-500"},{value:"blocked",label:"Blocked",color:"bg-red-500"}],nt=({innerProps:o,label:a,data:t,isSelected:r})=>e.jsxs("div",{className:`flex items-center justify-between p-2 cursor-pointer ${r?"bg-gray-100 dark:bg-gray-500":"hover:bg-gray-50 dark:hover:bg-gray-600"}`,...o,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Y,{innerClass:t.color}),e.jsx("span",{children:a})]}),r&&e.jsx(Ae,{className:"text-emerald-500 text-xl"})]}),lt=({children:o,...a})=>{const t=a.getValue()[0];return e.jsxs(it,{...a,children:[t&&e.jsx(Y,{className:"ltr:ml-4 rtl:mr-4",innerClass:t.color}),o]})},ct=()=>{const o=w(),{status:a}=C(r=>r.crmContact.data.filterData),t=r=>{o(J({status:r==null?void 0:r.value}))};return e.jsx(Ze,{options:H,size:"sm",className:"mb-4 min-w-[130px]",components:{Option:nt,Control:lt},value:H.filter(r=>r.value===a),onChange:t})},mt=()=>{const o=w(),a=m.useRef(null),t=C(c=>c.crmContact.data.tableData),r=c=>{const j=L(t);j.query=c,j.pageIndex=1,typeof c=="string"&&c.length>1&&i(j),typeof c=="string"&&c.length===0&&i(j)},i=c=>{o(O(c)),o(R())},n=()=>{const c=L(t);c.query="",a.current&&(a.current.value=""),o(J({status:""})),i(c)},l=()=>{o(G())};return e.jsxs("div",{className:"md:flex items-center justify-between",children:[e.jsxs("div",{className:"md:flex items-center gap-4",children:[e.jsx(ae,{ref:a,onInputChange:r}),e.jsx(ct,{})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(z,{size:"sm",className:"me-2",onClick:n,children:"Clear All"}),e.jsx(z,{size:"sm",onClick:l,children:"Add New"})]})]})},Z=o=>{const{icon:a,avatarClass:t,label:r,value:i,loading:n}=o,l=55;return e.jsx($e,{bordered:!0,children:e.jsx(ie,{loading:n,customLoader:e.jsx(Ge,{avatarProps:{className:"rounded",width:l,height:l}}),children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(X,{className:t,size:l,icon:a}),e.jsxs("div",{children:[e.jsx("span",{children:r}),e.jsx("h3",{children:e.jsx(Je,{thousandSeparator:!0,displayType:"text",value:i})})]})]})})})})},dt=()=>{const o=w(),a=C(r=>r.crmContact.data.statisticData);console.log(a.totalContact,"Nahi araha hai Hai Bhai");const t=C(r=>r.crmContact.data.statisticLoading);return m.useEffect(()=>{o(fe())},[]),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 mb-6",children:[e.jsx(Z,{icon:e.jsx(Le,{}),avatarClass:"!bg-indigo-600",label:"Total Contact",value:a.totalContacts,growthRate:a==null?void 0:a.totalContacts,loading:t}),e.jsx(Z,{icon:e.jsx(Re,{}),avatarClass:"!bg-blue-500",label:"New Contact",value:a.newContacts,growthRate:a.newContacts,loading:t})]})};ne("crmContact",ge);const pt=()=>e.jsxs(e.Fragment,{children:[e.jsx(dt,{}),e.jsxs(le,{bodyClass:"h-full",children:[e.jsx(mt,{}),e.jsx(rt,{})]})]}),Ja=pt;export{Ja as default};
