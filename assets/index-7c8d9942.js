import{al as r,am as m,an as w,ao as f}from"./index-63e2e8ff.js";import{g as D,c as h,h as S,i as b,j as T,k as I,l as E,m as G,n as x,o as O,p as u,q}from"./CrmService-5cf7bda2.js";const z="crmLeads",g=r("crmLeads/data/getLeadsStatistic",async()=>(await D()).data),y=r("crmLeads/data/getLeads",async()=>(await h()).data),L=r("crmContact/data/getContact",async()=>(await S()).data),_=r("crmLeads/data/editLeads",async({leadsId:s,updatedData:a})=>{var e,t;try{return(await b(s,a)).data}catch(d){throw new Error((t=(e=d==null?void 0:d.response)==null?void 0:e.data)==null?void 0:t.message)}}),$=r("crmLeads/data/deleteLeads",async s=>{var a,e;try{return await T(s)}catch(t){throw new Error((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)}}),v=r("crmLeads/data/createLeads",async s=>{var a,e;try{return(await I(s)).data}catch(t){throw new Error((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)}}),k=r("crmLeads/data/getProduct",async s=>{var a,e;try{const t=await E(s);return console.log({response:t}),t.data}catch(t){throw new Error((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)}}),B=r("crmLeads/data/getSubByIdCategory",async s=>{var a,e;try{return(await G(s)).data}catch(t){throw new Error((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)}}),P=r("crmLeads/data/getCategory",async()=>{var s,a;try{return(await x()).data}catch(e){throw new Error((a=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:a.message)}}),H=r("crmLeads/data/module",async()=>(await O()).data),J=r("tag-category",async({id:s})=>(await u(s)).data);r("crmLeads/data/fetchTag",async({id:s})=>(await u(s)).data);r("crmLeads/data/createTag",async({masterId:s,colorName:a,tagName:e,tagCategoryId:t})=>(await q({colorName:a,tagName:e,masterId:s,tagCategoryId:t})).data);const A={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},F={status:""},M={loading:!1,statisticLoading:!1,leadsList:[],categoryList:[],productList:[],subCategoryList:[],displayedLeadsList:[],statisticData:{},isDialogOpen:!1,tableData:A,filterData:F,drawerOpen:!1,selectedLeads:{},contactList:[],deleteConfirmation:!1},C=m({name:`${z}/state`,initialState:M,reducers:{setTableData:(s,a)=>{var t;const e=(t=s.leadsList)==null?void 0:t.filter(d=>{var o,n;return((o=d.contactData)==null?void 0:o.firstName.toLowerCase().includes(a.payload.query.toLowerCase()))||((n=d.contactData)==null?void 0:n.lastName.toLowerCase().includes(a.payload.query.toLowerCase()))||(d==null?void 0:d.title.toLowerCase().includes(a.payload.query.toLowerCase()))});s.tableData={...a.payload,total:e==null?void 0:e.length},s.displayedLeadsList=e.slice(a.payload.pageSize*(a.payload.pageIndex-1),a.payload.pageSize*a.payload.pageIndex)},setLeadsList:(s,a)=>{s.leadsList=a.payload},setFilterData:(s,a)=>{s.filterData=a.payload},setSelectedLeads:(s,a)=>{s.selectedLeads=a.payload},setDrawerOpen:s=>{s.drawerOpen=!0},setDialogToggle:(s,a)=>{s.isDialogOpen=a.payload},setDrawerClose:s=>{s.drawerOpen=!1},toggleDeleteConfirmation:(s,a)=>{s.deleteConfirmation=a.payload}},extraReducers:s=>{s.addCase(y.fulfilled,(a,e)=>{var t,d,o,n,l,c,i,p;a.leadsList=e.payload.data,a.tableData.total=(d=(t=e.payload)==null?void 0:t.data)==null?void 0:d.length,a.displayedLeadsList=(p=(o=e.payload)==null?void 0:o.data)==null?void 0:p.slice(((n=a==null?void 0:a.tableData)==null?void 0:n.pageSize)*(((l=a==null?void 0:a.tableData)==null?void 0:l.pageIndex)-1),((c=a==null?void 0:a.tableData)==null?void 0:c.pageSize)*((i=a==null?void 0:a.tableData)==null?void 0:i.pageIndex)),a.loading=!1}).addCase(y.pending,a=>{a.loading=!0}).addCase(g.fulfilled,(a,e)=>{a.statisticData=e.payload,a.statisticLoading=!1}).addCase(g.pending,a=>{a.statisticLoading=!0}).addCase(L.fulfilled,(a,e)=>{a.contactList=e.payload.data,a.loading=!1}).addCase(L.pending,a=>{a.loading=!0}).addCase(B.fulfilled,(a,e)=>{a.subCategoryList=e==null?void 0:e.payload.data}).addCase(P.fulfilled,(a,e)=>{a.categoryList=e==null?void 0:e.payload.data}).addCase(k.fulfilled,(a,e)=>{a.productList=e==null?void 0:e.payload.data})}}),{setTableData:K,setLeadsList:Q,setFilterData:U,setSelectedLeads:V,setDrawerOpen:W,setDrawerClose:X,setDialogToggle:Y,toggleDeleteConfirmation:Z}=C.actions,N=C.reducer,aa=w({data:N}),ea=f;export{y as a,L as b,J as c,$ as d,_ as e,H as f,g,v as h,P as i,V as j,Y as k,K as l,W as m,aa as r,X as s,Z as t,ea as u};
