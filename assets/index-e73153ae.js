import{a as k,j as e,r as C,ap as ce,aq as le}from"./index-847ef4f8.js";import{A as de}from"./AdaptableCard-f7b8f466.js";import{F as K}from"./FormDesription-83e0bc4e.js";import{D as me}from"./DataTable-bb61d519.js";import{T as pe}from"./TagsList-a0d374e4.js";import{T as O}from"./TextTruncate-0d10a3b6.js";import{u as W}from"./checkEditUpdate-a9898587.js";import{u as ue}from"./useThemeClass-606c5d8c.js";import{c as Z}from"./cloneDeep-f66e195c.js";import{N as xe,O as he,P as ge,b as fe}from"./index.esm-487b51fd.js";import{u as j,t as V,d as Ce,g as P,a as Y,b as je,c as Ne,e as be,f as ye,h as ve,i as Ie,j as we,k as ee,l as Se,m as De,n as te,s as B,o as R,p as ae,r as Te}from"./index-f8f58b88.js";import{t as _,N as G}from"./toast-f5c3f24c.js";import{C as Fe}from"./ConfirmDialog-a1ed4092.js";import{B as U}from"./Button-b74cc268.js";import{D as Ae}from"./Drawer-7bdb186b.js";import{a as v,F as Me}from"./FormItem-6caba9dc.js";import{T as se}from"./index-4eb372a0.js";import{u as ze,b as D,F as Ee,a as ke}from"./formik.esm-bebe3698.js";import{c as Le,a as S,e as qe}from"./index.esm-2dd52620.js";import{I as T}from"./Input-07dbb44b.js";/* empty css              */import{T as Re,e as Oe}from"./index.esm-571653ad.js";import"./Alert-ee5a8060.js";import"./index-3c06be8e.js";import"./Badge-23f456f8.js";import"./RangeCalendar-0bcee289.js";import"./Card-7a58c886.js";import"./index-9702d4b4.js";import"./index-260f8e0a.js";import"./Dialog-c1236e17.js";import"./index-c7f7da88.js";import"./toString-271e4441.js";import"./index-76b04bca.js";import"./index-4292c0e7.js";import"./index-938b8073.js";import"./Pagination-9c369e6e.js";import"./Progress-abdfc0bf.js";import"./index-629e5bc6.js";import"./ScrollBar-9a2baaea.js";import"./index-dbe4178c.js";import{S as $}from"./Select-ed97c876.js";import"./Skeleton-4ba1ecfc.js";import"./index-44b26318.js";import"./Switcher-71827c71.js";import"./index-c1eb621b.js";import"./Tag-b8e15ca0.js";import"./index-cbb9775c.js";import"./index-0ac64fa5.js";import{T as H}from"./Tooltip-a237a4da.js";import"./Upload-1ad29e1a.js";import{t as $e}from"./tagAndCategory-228f57e7.js";import{B as Ke}from"./index.esm-9468e820.js";import{F as Be}from"./index.esm-f7cc78ab.js";import{F as J}from"./index.esm-ffd85e31.js";import{G as Q}from"./index.esm-5a6f277b.js";import{M as We}from"./index.esm-822fb83f.js";import{C as Ze}from"./react-select-creatable.esm-d83748f5.js";import{B as X}from"./index.esm-99723bc7.js";import{a as Pe}from"./index.esm-5d2c37a3.js";import{d as He}from"./debounce-ce12bd0b.js";import"./index-8ad565f1.js";import"./moment-fbc5633a.js";import"./_MapCache-9e036a1f.js";import"./Views-5cd95793.js";import"./_getPrototype-c37a8692.js";import"./CrmService-c8ab1850.js";import"./useTimeout-7eccd8b6.js";import"./CloseButton-d22d6eb9.js";import"./StatusIcon-5a5a985f.js";import"./chainedFunction-070f832c.js";import"./index-93a3d3d0.js";import"./index-5449d842.js";import"./useControllableState-d474fa8c.js";import"./isNil-4ae3346e.js";import"./get-263abd7f.js";import"./useMergeRef-788c4cb0.js";import"./_baseIsEqual-24c667bd.js";import"./useRootClose-d8f8a4cc.js";import"./usePopper-efd79584.js";import"./TimeInput-81e6befe.js";import"./useUniqueId-7dc066bc.js";import"./useDidUpdate-482439ac.js";import"./useUncertainRef-4977c77f.js";import"./slicedToArray-505afcc1.js";import"./objectWithoutProperties-8809bfcf.js";import"./toConsumableArray-621896fa.js";import"./floating-ui.dom-4bc0055b.js";import"./mapCloneElement-f7b6b3e0.js";import"./index.esm-b4dcee25.js";const Ve=()=>{const o=k(),n=j(l=>l.crmContact.data.deleteConfirmation),t=j(l=>l.crmContact.data.selectedContact),c=()=>{o(V(!1))},u=async()=>{var i,g,f;o(V(!1));const l=await o(Ce(t==null?void 0:t.id));(i=l==null?void 0:l.payload)!=null&&i.success?_.push(e.jsx(G,{title:"Successfuly Deleted",type:"success",duration:2500,children:(g=l==null?void 0:l.payload)==null?void 0:g.message}),{placement:"top-end"}):_.push(e.jsx(G,{title:"Something Went Wrong !!!",type:"danger",duration:2500,children:(f=l==null?void 0:l.error)==null?void 0:f.message}),{placement:"top-end"}),await o(P()),await o(Y())};return e.jsx(Fe,{isOpen:n,type:"danger",title:"Delete Contact",confirmButtonColor:"red-600",onClose:c,onRequestClose:c,onCancel:c,onConfirm:u,children:e.jsx("p",{children:"Are you sure you want to delete this Contact? All record related to this contact will be deleted as well. This action cannot be undone."})})},_e=o=>{const{touched:n,errors:t,values:c,setFieldValue:u,customFieldData:l}=o,i=k(),[g,f]=C.useState([]),[I,F]=C.useState(null),w=j(a=>{var s;return(s=a.crmContact.data)==null?void 0:s.customField});console.log("customField",w),j(a=>a.crmContact.data.contactList);const x=j(a=>a.crmContact.data.companyList),d=j(a=>a.crmContact.data.sources),m=j(a=>a.crmContact.data.states);j(a=>a.crmContact.data.cities);const b=C.useMemo(()=>x==null?void 0:x.map(a=>({value:a.id,label:a.companyName})),[x]),A=C.useMemo(()=>m==null?void 0:m.map(a=>({value:a.id,label:a.stateName})),[m]),M=C.useMemo(()=>{var s;const a=m==null?void 0:m.find(N=>N.id===c.stateId);return((s=a==null?void 0:a.cities)==null?void 0:s.map(N=>({value:N.id,label:N.cityName})))||[]},[m,I]),L=C.useMemo(()=>d==null?void 0:d.map(s=>({label:s.sources,value:s.id})),[d]),q={display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"};C.useEffect(()=>{(async()=>{var s,N;try{const{payload:y}=await i(ve()),z=(s=y==null?void 0:y.data)==null?void 0:s.find(E=>(E==null?void 0:E.moduleName)==="contacts");if(z){const{payload:E}=await i(Ie({id:(N=z==null?void 0:z.id)==null?void 0:N.toString()})),ie=$e(E==null?void 0:E.data);f(ie)}}catch(y){console.error("Error fetching module data:",y)}})(),i(je()),i(Ne()),i(be()),i(ye())},[i]);const h=ze(),r=a=>{h.setFieldValue("tagId",a)},p=async(a,s)=>{const N={sources:a==null?void 0:a.label};switch(s.action){case"create-option":await i(we(N)),await i(ee());break;case"select-option":u("sourceId",a);break;case"clear":u("sourceId",null);break}};return e.jsxs(e.Fragment,{children:[e.jsx(K,{title:"Contact Basic Information",desc:"",className:"mb-2"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(v,{label:"First Name *",invalid:t.firstName&&n.firstName,errorMessage:t.firstName,children:e.jsx(D,{type:"text",autoComplete:"off",name:"firstName",placeholder:"First Name",component:T,prefix:e.jsx(J,{className:"text-xl"})})})}),e.jsx("div",{className:"col-span-1",children:e.jsx(v,{label:"Last Name *",invalid:t.lastName&&n.lastName,errorMessage:t.lastName,children:e.jsx(D,{type:"text",autoComplete:"off",name:"lastName",placeholder:"Last Name",component:T,prefix:e.jsx(J,{className:"text-xl"})})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(v,{label:"Email *",invalid:t.email&&n.email,errorMessage:t.email,children:e.jsx(D,{type:"text",autoComplete:"off",name:"email",placeholder:"Email",component:T,prefix:e.jsx(xe,{className:"text-xl"})})})}),e.jsx("div",{className:"col-span-1",children:e.jsx(v,{label:"Contact Number *",invalid:t.contactNumber&&n.contactNumber,errorMessage:t.contactNumber,children:e.jsx(D,{type:"tel",autoComplete:"off",name:"contactNumber",placeholder:"Contact Number",component:T,prefix:e.jsx(Ke,{className:"text-xl"})})})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsx("div",{className:"col-span-1",children:e.jsx(v,{label:"Title",invalid:t.title&&n.title,errorMessage:t.title,children:e.jsx(D,{type:"text",autoComplete:"off",name:"title",placeholder:"Title",component:T,prefix:e.jsx(We,{className:"text-xl"})})})})}),e.jsx(v,{label:"Notes",invalid:t.description&&n.description,errorMessage:t.description,children:e.jsx(D,{textArea:!0,type:"text",autoComplete:"off",name:"description",placeholder:"Notes",component:T,prefix:e.jsx(Re,{className:"text-xl"})})}),e.jsx(K,{title:"Address",desc:"",className:"mb-2"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(v,{label:"Address",invalid:t.address&&n.address,errorMessage:t.address,children:e.jsx(D,{type:"text",autoComplete:"off",name:"address",placeholder:"Address",component:T,prefix:e.jsx(Be,{className:"text-xl"})})})}),e.jsx("div",{className:"col-span-1",children:e.jsx("div",{className:"col-span-1",children:e.jsx(v,{label:"State",invalid:t.stateId&&n.stateId,errorMessage:t.stateId,children:e.jsx($,{name:"stateId",placeholder:"Select State",options:A,id:"stateId",value:A==null?void 0:A.find(a=>(a==null?void 0:a.value)==(c==null?void 0:c.stateId)),onChange:a=>{const s=a.value;c.stateId!==s&&u("cityId",""),u("stateId",s||""),F(s)}})})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx("div",{className:"col-span-1",children:e.jsx(v,{label:"City",invalid:t.cityId&&n.cityId,errorMessage:t.cityId,children:e.jsx($,{name:"cityId",placeholder:"Select City",options:M,id:"cityId",value:(M==null?void 0:M.find(a=>(a==null?void 0:a.value)===(c==null?void 0:c.cityId)))||{value:"",label:"Select City"},onChange:a=>{const s=a.value;s!==c.cityId&&u("cityId",s||"")}})})})}),e.jsx("div",{className:"col-span-1",children:e.jsx("div",{style:{position:"relative"},children:e.jsx("div",{className:"col-span-1",children:e.jsx(v,{label:"ZipCode",invalid:t.zipcode&&n.zipcode,errorMessage:t.zipcode,children:e.jsx(D,{type:"text",autoComplete:"off",name:"zipcode",placeholder:"ZipCode",component:T,prefix:e.jsx(Oe,{className:"text-xl"})})})})})})]}),e.jsx(K,{title:"Contact Others Details",desc:"",className:"mb-2"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(v,{label:"Company Name",invalid:t.companiesId&&n.companiesId,errorMessage:t.companiesId,children:e.jsx($,{name:"companiesId",placeholder:"Company Name",options:b,id:"companiesId",value:b==null?void 0:b.find(a=>(a==null?void 0:a.value)==(c==null?void 0:c.companiesId)),onChange:a=>{const s=a.value;u("companiesId",s||"")}})})}),e.jsx("div",{className:"col-span-1",children:e.jsx(v,{label:"Source",invalid:t.source&&n.source,errorMessage:t.source,children:e.jsx(D,{isClearable:!0,type:"text",autoComplete:"off",name:"sourceId",placeholder:"Source",component:$,componentAs:Ze,options:L,prefix:e.jsx(Q,{className:"text-xl"}),onChange:p})})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsx("div",{className:"col-span-1",children:e.jsx(v,{label:"Tag",children:e.jsx(D,{isClearable:!0,isMulti:!0,type:"text",autoComplete:"off",name:"tagId",placeholder:"Select tags",component:$,options:g,prefix:e.jsx(Q,{className:"text-xl"}),closeMenuOnSelect:!1,onChange:r})})})}),(w==null?void 0:w.length)>0?e.jsxs(e.Fragment,{children:[e.jsx(K,{title:"Additional Details",desc:"",className:"mb-2"}),e.jsx("div",{style:q,children:w==null?void 0:w.map(a=>e.jsx("div",{children:e.jsx(v,{label:a==null?void 0:a.label,children:a.inputType==="textArea"?e.jsx(D,{textArea:!0,type:"text",autoComplete:"off",name:a.name,placeholder:a==null?void 0:a.label,defaultValue:a==null?void 0:a.defaultValue,component:T,prefix:e.jsx(X,{className:"text-xl"})}):e.jsx(D,{type:a.inputType,autoComplete:"off",name:a.name,placeholder:a==null?void 0:a.label,defaultValue:a==null?void 0:a.defaultValue,component:T,prefix:e.jsx(X,{className:"text-xl"})})})},a.id))})]}):null]})},Ge=Le().shape({firstName:S().required("First Name is required"),lastName:S().required("Last Name is required"),title:S(),contactNumber:S().typeError("Contact must be a number").required("Contact is required").test("is-number","Contact must be a number",o=>!isNaN(o)).test("is-ten-digits","Contact must be exactly 10 digits",o=>{if(o){const n=Number(o);return/^\d{10}$/.test(n.toString())}return!0}).test("is-ten-digits","Contact number cannot start with 0",o=>o?!o.startsWith("0"):!0),email:S().matches(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i,"Invalid email").required("Email is required"),address:S(),stateId:S(),cityId:S(),zipcode:S().test("is-number","ZipCode must be a number",o=>!(o&&isNaN(Number(o)))).test("is-six-digits","ZipCode must be exactly 6 digits",o=>!(o&&o.length!==6)),companiesId:S().nullable(),companyName:S(),source:S().nullable(),description:S(),tagId:qe()}),{TabNav:Ue,TabList:Je,TabContent:Qe}=se,oe=C.forwardRef((o,n)=>{var g,f,I,F,w;const t=j(x=>{var d,m;return(m=(d=x.crmContact)==null?void 0:d.data)==null?void 0:m.selectedContact}),c=j(x=>{var d,m;return(m=(d=x.crmContact)==null?void 0:d.data)==null?void 0:m.sources}),u=C.useMemo(()=>c.map(d=>({label:d.sources,value:d.id})),[c]),l=!!t.id,i=k();return e.jsx(Ee,{innerRef:n,initialValues:{firstName:(t==null?void 0:t.firstName)||"",lastName:(t==null?void 0:t.lastName)||"",title:(t==null?void 0:t.title)||"",email:(t==null?void 0:t.email)||"",contactNumber:(t==null?void 0:t.contactNumber)||"",description:(t==null?void 0:t.description)||"",companyName:((g=t==null?void 0:t.company)==null?void 0:g.companyName)||"",sourceId:t!=null&&t.sourceId?u.find(x=>x.value===(t==null?void 0:t.sourceId)):null,address:(t==null?void 0:t.address)||"",stateId:(t==null?void 0:t.stateId)||"",cityId:(t==null?void 0:t.cityId)||"",zipcode:(t==null?void 0:t.zipcode)||"",tagName:((I=(f=t==null?void 0:t.tags)==null?void 0:f[0])==null?void 0:I.tagName)||"",tagId:((F=t==null?void 0:t.tags)==null?void 0:F.map(x=>({label:x.tagName,value:x.id})))||[],companiesId:(t==null?void 0:t.companiesId)||"",...(w=t==null?void 0:t.contactFields)==null?void 0:w.reduce((x,d)=>{var m,b;return(m=d==null?void 0:d.customKey)!=null&&m.name&&d.value&&(x[(b=d==null?void 0:d.customKey)==null?void 0:b.name]=d.value||""),x},{})},validationSchema:Ge,onSubmit:async(x,{setSubmitting:d})=>{var m,b,A,M,L,q,h;try{const{tagName:r,...p}=x;console.log({values:x});const a={...p,sourceId:(m=p==null?void 0:p.sourceId)==null?void 0:m.value,tagId:p==null?void 0:p.tagId.map(E=>E.value)};console.log({payload:a});const s=l?await i(Se({contactId:(t==null?void 0:t.id)||"",updatedData:a})):await i(De(a)),N=(b=s==null?void 0:s.payload)!=null&&b.success?"Successfully Added":"Something went wrong !!!",y=(A=s==null?void 0:s.payload)!=null&&A.success?"success":"danger",z=(M=s==null?void 0:s.payload)!=null&&M.success?(L=s==null?void 0:s.payload)==null?void 0:L.message:(q=s==null?void 0:s.error)==null?void 0:q.message;_.push(e.jsx(G,{title:N,type:y,duration:2500,children:z}),{placement:"top-end"}),(h=s==null?void 0:s.payload)!=null&&h.success&&i(te()),await i(P()),await i(Y())}catch(r){console.error(r)}finally{d(!1)}},children:({touched:x,errors:d,values:m,setFieldValue:b})=>e.jsx(ke,{children:e.jsx(Me,{children:e.jsxs(se,{defaultValue:"personalInfo",children:[e.jsx(Je,{children:e.jsx(Ue,{value:"personalInfo",children:"Contact Details"})}),e.jsx("div",{className:"p-6",children:e.jsx(Qe,{value:"personalInfo",children:e.jsx(_e,{touched:x,errors:d,values:m,setFieldValue:b})})})]})})})})});oe.displayName="ContactForm";const re=C.forwardRef((o,n)=>{k();const t=j(u=>{var l,i;return(i=(l=u.crmContact)==null?void 0:l.data)==null?void 0:i.selectedContact});j(u=>u.crmContact.data.contactList);const c=async u=>{};return e.jsx(oe,{ref:n,contact:t,onFormSubmit:c})});re.displayName="ContactEditContent";const Xe=({onSaveClick:o,onCancel:n})=>e.jsxs("div",{className:"text-right w-full",children:[e.jsx(U,{size:"sm",className:"mr-2",onClick:n,children:"Cancel"}),e.jsx(U,{size:"sm",variant:"solid",onClick:o,children:"Save"})]}),Ye=()=>{const o=k(),[n,t]=C.useState(window.innerWidth/2),c=j(f=>{var I,F;return(F=(I=f.crmContact)==null?void 0:I.data)==null?void 0:F.drawerOpen}),u=()=>{o(te()),o(B({}))},l=C.useRef(null),i=()=>{var f,I;console.log("formSubmit function called",(f=l.current)==null?void 0:f.values),(I=l.current)==null||I.submitForm()},g=()=>{t(window.innerWidth/2)};return C.useEffect(()=>(window.addEventListener("resize",g),()=>{window.removeEventListener("resize",g)}),[]),e.jsx(Ae,{isOpen:c,closable:!1,bodyClass:"p-0",width:n,footer:e.jsx(Xe,{onCancel:u,onSaveClick:i}),onClose:u,onRequestClose:u,children:e.jsx(re,{ref:l})})},et=()=>{const o=k(),n=j(h=>h.crmContact.data.displayedContactList),t=j(h=>h.crmContact.data.tableData),c=W("contacts","canModify"),u=W("contacts","canDelete"),l=W("contacts","canView"),i=j(h=>h.crmContact.data.loading),g=ce(),{pageIndex:f,pageSize:I,sort:F,query:w,total:x}=j(h=>h.crmContact.data.tableData),d=C.useCallback(()=>{o(P()),o(ee())},[o]);C.useEffect(()=>(d(),()=>{window.location.pathname.includes("contact")||o(R({...t,query:""}))}),[d]);const m=C.useMemo(()=>({pageIndex:f,pageSize:I,sort:F,query:w,total:x}),[f,I,F,w,x]),b=({row:h})=>{const r=k();ue();const p=()=>{r(ae()),r(B(h))},a=async()=>{r(B(h)),r(V(!0))},s=()=>{r(B(h));const N=`/app/crm/contact-details/${h.id}`;g(N)};return e.jsxs("div",{className:"flex text-base items-center",children:[c&&e.jsx("span",{className:"cursor-pointer hover:text-indigo-500 circle items-center",onClick:p,children:e.jsx(he,{})}),u&&e.jsx("span",{className:"cursor-pointer hover:text-red-500 circle mx-1 items-center",onClick:a,children:e.jsx(ge,{})}),l&&e.jsx("span",{className:"cursor-pointer hover:text-green-500 circle items-center text-lg",onClick:s,children:e.jsx(Pe,{})})]})},A=C.useMemo(()=>[{header:"Action",id:"action",cell:r=>e.jsx(b,{row:r.row.original})},{header:"Name",accessorKey:"firstName",cell:r=>{const{firstName:p,lastName:a}=r.row.original,s=`${p} ${a}`;return e.jsx(H,{title:s,children:e.jsx(O,{text:s,maxLength:15})},s)}},{header:"email",accessorKey:"email",cell:r=>r.row.original.email},{header:"Number",accessorKey:"contactNumber",cell:r=>r.row.original.contactNumber},{header:"source",accessorKey:"sourceId",cell:r=>{var a,s,N,y;const p=(s=(a=r.row.original)==null?void 0:a.source)!=null&&s.sources?(y=(N=r.row.original)==null?void 0:N.source)==null?void 0:y.sources:"-";return e.jsx(O,{text:p,maxLength:15})}},{header:"Tags",accessorKey:"tagName",cell:r=>{const p=r.row.original.tags;return p!=null&&p.length>0?e.jsx(pe,{tags:p}):"-"}},{header:"Title",accessorKey:"title",cell:r=>{const p=r.row.original.title?r.row.original.title:"-";return e.jsx(H,{title:p,children:e.jsx(O,{text:p,maxLength:15})},p)}},{header:"Company",accessorKey:"companyName",cell:r=>{const p=r.row.original.company?r.row.original.company.companyName:"-";return e.jsx(O,{text:p,maxLength:15})}},{header:"Address",accessorKey:"address",cell:r=>{const{address:p,cityData:a,stateData:s,zipcode:N}=r.row.original,y=[p,a==null?void 0:a.cityName,s==null?void 0:s.stateName,N].filter(z=>z!=null).join(" ");return e.jsx(H,{title:y||"-",children:e.jsx(O,{text:y||"-",maxLength:20})},y)}}],[c,u]),M=h=>{const r=Z(m);r.pageIndex=h,o(R(r))},L=h=>{const r=Z(m);r.pageSize=Number(h),r.pageIndex=1,o(R(r))},q=h=>{const r=Z(m);r.sort=h,o(R(r))};return e.jsxs("div",{children:[e.jsx(me,{columns:A,data:n,loading:i,pagingData:{total:m.total,pageIndex:m.pageIndex,pageSize:m.pageSize},onPaginationChange:M,onSelectChange:L,onSort:q}),e.jsx(Ye,{}),e.jsx(Ve,{})]})},ne=C.forwardRef((o,n)=>{const{onInputChange:t}=o,c=He(u,500);function u(i){t==null||t(i)}const l=i=>{c(i.target.value)};return e.jsx(T,{ref:n,className:"max-w-md md:w-56 mb-4",size:"sm",placeholder:"Search by name or email",prefix:e.jsx(fe,{className:"text-lg"}),onChange:l})});ne.displayName="ContactTableSearch";const tt=()=>{const o=k(),n=C.useRef(null),t=j(g=>g.crmContact.data.tableData),c=W("contacts","canCreate"),u=g=>{const f=Z(t);f.query=g,f.pageIndex=1,typeof g=="string"&&g.length>1&&l(f),typeof g=="string"&&g.length===0&&l(f)},l=g=>{o(g?R(g):P())},i=()=>{o(ae()),o(B({}))};return C.useEffect(()=>{n.current&&(n.current.value=t.query||"",o(R(t)))},[t==null?void 0:t.query]),e.jsxs("div",{className:"md:flex items-center justify-between",children:[e.jsx("div",{className:"md:flex items-center gap-4",children:e.jsx(ne,{ref:n,onInputChange:u})}),e.jsx("div",{className:"mb-4",children:c&&e.jsx(U,{size:"sm",onClick:i,children:"Add New"})})]})};le("crmContact",Te);const at=()=>{const o=j(n=>n.crmContact.data.tableData);return e.jsx(e.Fragment,{children:e.jsxs(de,{bodyClass:"h-full",children:[e.jsx(K,{title:`Contacts (${(o==null?void 0:o.total)||0})`,desc:"",className:"mb-2"}),e.jsx(tt,{}),e.jsx(et,{})]})})},Oa=at;export{Oa as default};
