import{r as u,j as e,v as P}from"./index-c4854441.js";import{I as c}from"./Input-6e1fc018.js";import{B as v}from"./Button-01aee70f.js";import{C as R}from"./index-199241b3.js";import{F as M,a as l}from"./FormItem-f088ddbb.js";import{A as $}from"./Alert-c43b1341.js";import{P as U}from"./PasswordInput-2ad30556.js";import{A as S}from"./ActionLink-4fa58ded.js";import{u as V}from"./useTimeOutMessage-647e499d.js";import{F,a as I,b as n}from"./formik.esm-20e607de.js";import{c as E,a as f,d as T,f as B}from"./index.esm-6307d99d.js";import{t as Z,N as G}from"./toast-f5971c5e.js";import"./index-7f0011a9.js";import"./Badge-ab812656.js";import"./RangeCalendar-60cea8df.js";import"./Card-694d2290.js";import"./index-4960ea6a.js";import{D as L}from"./Dialog-1a78eb06.js";import"./Drawer-459fd2f8.js";import"./index-516e2d91.js";import"./toString-9f124ebf.js";import"./index-b9e48651.js";import"./index-69125dab.js";import"./index-337c98e1.js";import"./Pagination-91f29835.js";import"./Progress-1eb48ff9.js";import"./index-6afc7114.js";import"./ScrollBar-7a627a75.js";import"./index-fee22201.js";import{S as W}from"./Select-a3dcfbd9.js";import"./Skeleton-7820a1d7.js";import"./index-1b4d8032.js";import"./Switcher-9b266edd.js";import"./index-2a967f86.js";import"./index-2020af5b.js";import"./Tag-ca3c125e.js";import"./index-954fdf33.js";import"./index-b126a36b.js";import"./Tooltip-ff9677e2.js";import"./Upload-1e5004d3.js";import{a as H,b as Y}from"./SuperAdminServices-bbdca497.js";import{c as _,A as J}from"./index.esm-f9d2499d.js";import{a as K}from"./index.esm-626783fa.js";import{a as Q}from"./index.esm-f80fcb5d.js";import{O as X}from"./index.esm-600eab3e.js";import{b as ee}from"./index.esm-0fb454c4.js";import{T as ae}from"./index.esm-2b0e6c07.js";import"./Views-a7a22f5b.js";import"./chart.constant-33f94cf9.js";import"./chart.config-3e4495ec.js";import"./DataTable-c212c69f.js";import"./GrowShrinkTag-b6ec35ba.js";import"./react-tooltip.min-5a60ee3f.js";import"./RichTextEditor-a1431fa0.js";import"./SegmentItemOption-e39e8725.js";import{S as te}from"./StickyFooter-1a0a2368.js";import"./SvgIcon-7439607c.js";const ie=E().shape({organizationName:f().required("Organization Name Required"),industry:f().required("Industry Required"),contact:T().typeError("Contact must be a number").required("Contact is required").test("is-number","Contact must be a number",o=>!isNaN(o)).test("is-ten-digits"," Contact must be exactly 10 digits",o=>{if(o){const p=Number(o);return/^\d{10}$/.test(p.toString())}return!0}).test("is-not-more-than-ten-digits","Contact must not exceed 10 digits",o=>o?Number(o).toString().length<=10:!0),email:f().matches(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i,"Invalid email").required("Email is required")}),A=u.forwardRef((o,p)=>{const{closeDialog:j}=o,[y,h]=u.useState(!1),b=async s=>{h(!0);const a=await H(s);console.log(a),h(!1),j()};return e.jsx(F,{innerRef:p,initialValues:{organizationName:"",industry:"",contact:null,website:"",numberOfEmployees:null,notes:"",email:""},validationSchema:ie,onSubmit:async(s,{setSubmitting:a})=>{await b(s),a(!1)},children:({touched:s,errors:a,values:N,setFieldValue:z})=>e.jsxs(I,{children:[e.jsx(M,{children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 ",children:e.jsxs("div",{className:"lg:col-span-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(l,{label:"Organization Name*",invalid:a.organizationName&&s.organizationName,errorMessage:a.organizationName,children:e.jsx(n,{type:"text",autoComplete:"off",name:"organizationName",placeholder:"Organization Name",component:c,prefix:e.jsx(Q,{className:"text-xl"})})})}),e.jsx("div",{className:"col-span-1",children:e.jsx(l,{label:"Industry*",invalid:a.industry&&s.industry,errorMessage:a.industry,children:e.jsx(n,{type:"text",autoComplete:"off",name:"industry",value:N.industry,placeholder:"Organization Industry",component:c,prefix:e.jsx(K,{className:"text-xl"})})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(l,{label:"Contact*",invalid:a.contact&&s.contact,errorMessage:a.contact,children:e.jsx(n,{type:"number",autoComplete:"off",name:"contact",placeholder:"Contact",component:c,prefix:e.jsx(ae,{className:"text-xl"})})})}),e.jsx("div",{className:"col-span-1",children:e.jsx(l,{label:"Email*",invalid:a.email&&s.email,errorMessage:a.email,children:e.jsx(n,{type:"text",autoComplete:"off",name:"email",placeholder:"Email",component:c,prefix:e.jsx(X,{className:"text-xl"})})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(l,{label:"Website",invalid:a.website&&s.website,errorMessage:a.website,children:e.jsx(n,{type:"text",autoComplete:"off",name:"website",placeholder:"Website",component:c,prefix:e.jsx(ee,{className:"text-xl"})})})}),e.jsx("div",{className:"col-span-1",children:e.jsx(l,{label:"Number Of Employees",invalid:a.numberOfEmployees&&s.numberOfEmployees,errorMessage:a.numberOfEmployees,children:e.jsx(n,{type:"number",autoComplete:"off",name:"numberOfEmployees",placeholder:"Number Of Employees",component:c,prefix:e.jsx(_,{className:"text-xl"})})})})]}),e.jsx(l,{label:"Description",labelClass:"!justify-start",invalid:a.notes&&s.notes,errorMessage:a.notes,children:e.jsx(n,{textArea:!0,type:"text",autoComplete:"off",name:"notes",placeholder:"Description",component:c})})]})})}),e.jsx(te,{className:"flex items-center justify-end py-2",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"md:flex items-center",children:[e.jsx(v,{size:"sm",className:"ltr:mr-3 rtl:ml-3",type:"button",onClick:j,children:"Cancel"}),e.jsx(v,{size:"sm",type:"submit",variant:"solid",icon:e.jsx(J,{}),loading:y,children:"Save"})]})})]})})});A.displayName="OrganizationForm";const se=E().shape({email:f().required("Please enter your user name"),password:f().required("Please enter your password"),rememberMe:B()}),ma=o=>{const{disableSubmit:p=!1,className:j,forgotPasswordUrl:y="/forgot-password",signUpUrl:h="/sign-up"}=o,[b,s]=V(),[a,N]=u.useState([]),[z,O]=u.useState(!1),{signIn:k}=P(),q=async(t,i)=>{const{email:d,password:x,organization:r}=t;console.log({organization:r}),i(!0);const g={email:d,password:x};r!=null&&r.value&&(g.organization=r.value);const m=await k(g);(m==null?void 0:m.status)==="failed"&&Z.push(e.jsx(G,{title:"Sign in failed",type:"danger",duration:2500,children:m==null?void 0:m.message}),{placement:"top-end"}),i(!1)},D=async()=>{var i,d,x,r,g;const t=await Y();if((i=t==null?void 0:t.data)!=null&&i.data&&((x=(d=t==null?void 0:t.data)==null?void 0:d.data)!=null&&x.length)){const m=(g=(r=t==null?void 0:t.data)==null?void 0:r.data)==null?void 0:g.map(w=>({label:w.organizationName,value:w.id}));console.log(m),N(m)}};u.useEffect(()=>{D()},[]);const C=()=>{O(!1)};return e.jsxs("div",{className:j,children:[b&&e.jsx($,{showIcon:!0,className:"mb-4",type:"danger",children:e.jsx(e.Fragment,{children:b})}),e.jsx(F,{initialValues:{email:"",password:"",organization:"",rememberMe:!0},validationSchema:se,onSubmit:(t,{setSubmitting:i})=>{p?i(!1):q(t,i)},children:({touched:t,errors:i,isSubmitting:d,setFieldValue:x})=>e.jsx(I,{children:e.jsxs(M,{children:[e.jsx(l,{label:"User Name",invalid:i.email&&t.email,errorMessage:i.email,children:e.jsx(n,{type:"text",autoComplete:"off",name:"email",placeholder:"User Name",component:c})}),e.jsx(l,{label:"Password",invalid:i.password&&t.password,errorMessage:i.password,children:e.jsx(n,{autoComplete:"off",name:"password",placeholder:"Password",component:U})}),e.jsx(l,{label:"Organization",invalid:i.organization&&t.organization,errorMessage:i.organization,children:e.jsx(n,{autoComplete:"off",name:"organization",placeholder:"Organization",component:W,options:a,onChange:r=>{x("organization",r)}})}),e.jsxs("div",{className:"flex justify-between mb-6",children:[e.jsx(n,{className:"mb-0",name:"rememberMe",component:R,children:"Remember Me"}),e.jsx(S,{to:y,children:"Forgot Password?"})]}),e.jsx(v,{block:!0,loading:d,variant:"solid",type:"submit",children:d?"Signing in...":"Sign In"}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsxs("span",{children:["Don't have an account yet?"," "]}),e.jsx(S,{to:h,children:"Sign up"})]})]})})}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsxs("span",{children:["Onboard your organization"," "]}),e.jsx("button",{onClick:()=>{O(!0)},children:e.jsx("span",{className:"text-indigo-700",children:"Onboarding..."})})]}),e.jsxs(L,{isOpen:z,onClose:C,children:[e.jsx("h5",{className:"mb-4",children:"Register Your Organization"}),e.jsx(A,{closeDialog:C})]})]})};export{ma as S};
