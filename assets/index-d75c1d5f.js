import{al as I,am as K,an as V,ao as W,r as g,j as e,a as N,aq as B}from"./index-4fc5ac15.js";import{e as G,f as Q,g as J,h as X}from"./SuperAdminServices-20dca273.js";import{B as T}from"./Button-7cd7d853.js";import{c as A}from"./cloneDeep-715f167a.js";import{I as S}from"./Input-3854a622.js";import{b as Y,O as ee,P as ae,Q as se}from"./index.esm-4a8db888.js";import{d as re}from"./debounce-cd228677.js";import{D as te}from"./DataTable-814cf5c6.js";import{u as ie}from"./useThemeClass-9af86e8e.js";import"./Alert-7075f24d.js";import"./index-ade064c2.js";import"./Badge-19df83fb.js";import"./RangeCalendar-5dd6ce1b.js";import"./Card-a6171fd9.js";import"./index-2e6c9811.js";import"./index-f81c3042.js";import"./Dialog-5d93bc0a.js";import{D as oe}from"./Drawer-8dc2fd43.js";import"./index-3903fc17.js";import{F as le,a as C}from"./FormItem-e8ff9726.js";import"./toString-73aeebea.js";import"./index-d3c2681a.js";import"./index-99b428ba.js";import"./index-8ced4f1f.js";import{t as ne,N as me}from"./toast-b752ab56.js";import"./Pagination-1e482b61.js";import"./Progress-352773c6.js";import"./index-5dc9acd3.js";import"./ScrollBar-abdf3e1e.js";import"./index-1ece77e8.js";import"./Select-9180a255.js";import"./Skeleton-cef4628a.js";import"./index-5597ebd0.js";import"./Switcher-900c0698.js";import"./index-829995d1.js";import"./index-dbee2c90.js";import"./Tag-4b3b0483.js";import"./index-e5b54797.js";import"./index-534786cf.js";import"./Tooltip-56ad0384.js";import"./Upload-fe7ae2cb.js";import{F as pe,a as de,b as U}from"./formik.esm-7fc98ee2.js";import{a as R}from"./index.esm-10421fc2.js";import{o as ce}from"./index.esm-3573a53a.js";import{c as E,a as h}from"./index.esm-4c38c838.js";import{A as ue}from"./AdaptableCard-1a3c680d.js";import"./Views-63244708.js";import"./chart.constant-abefb831.js";import"./chart.config-099ad096.js";import"./GrowShrinkTag-093ec060.js";import"./react-tooltip.min-5552979b.js";import"./RichTextEditor-21962299.js";import"./SegmentItemOption-32fcaaa1.js";import"./SvgIcon-cd84e0c4.js";import{F as ge}from"./FormDesription-3c355ebc.js";import"./_MapCache-dfc091e9.js";import"./_getPrototype-20c9b4ef.js";import"./isNil-fa9ab935.js";import"./get-a17bfffb.js";import"./index-ec319dcf.js";import"./useTimeout-a3a009a3.js";import"./CloseButton-f8a68d34.js";import"./StatusIcon-8eee481a.js";import"./useMergeRef-788c4cb0.js";import"./useControllableState-74f1ae93.js";import"./_baseIsEqual-049acdee.js";import"./useRootClose-4eeaabec.js";import"./usePopper-eba58dea.js";import"./TimeInput-a955edd7.js";import"./useUniqueId-f42ae95b.js";import"./useDidUpdate-2beb4a11.js";import"./index-c0cd6553.js";import"./useUncertainRef-41ed3c8c.js";import"./index-e53d26a4.js";import"./chainedFunction-070f832c.js";import"./slicedToArray-a75daa7f.js";import"./objectWithoutProperties-8809bfcf.js";import"./toConsumableArray-b436f755.js";import"./floating-ui.dom-bef9cea3.js";import"./mapCloneElement-08e14627.js";import"./index.esm-e8eb3d5a.js";import"./index.esm-e8f8cad7.js";import"./index.esm-6e8bde72.js";const he="superSuperUsers",j=I("superSuperUsers/data/getSuperUsers",async()=>(await G()).data),xe=I("superSuperUsers/data/editSuperUser",async({id:s,updatedData:a})=>{var t,r;try{return(await Q(s,a)).data}catch(i){throw new Error((r=(t=i==null?void 0:i.response)==null?void 0:t.data)==null?void 0:r.message)}});I("superSuperUsers/data/deleteSuperUser",async s=>{var a,t;try{return await J(s)}catch(r){throw new Error((t=(a=r==null?void 0:r.response)==null?void 0:a.data)==null?void 0:t.message)}});const fe=I("superSuperUsers/data/createSuperUser",async s=>{var a,t;try{return(await X(s)).data}catch(r){throw new Error((t=(a=r==null?void 0:r.response)==null?void 0:a.data)==null?void 0:t.message)}}),Se={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},Ne={SuperUserData:[],loading:!1,isDialogOpen:!1,selectedSuperUser:{},deleteConfirmation:!1,dialogMode:"Add",tableData:Se,displayedSuperUsersList:[]},O=K({name:`${he}/state`,initialState:Ne,reducers:{setTableData:(s,a)=>{var r;s.tableData=a.payload;const t=(r=s.SuperUserData)==null?void 0:r.filter(i=>i.firstName.toLowerCase().includes(a.payload.query.toLowerCase()));s.displayedSuperUsersList=t.slice(a.payload.pageSize*(a.payload.pageIndex-1),a.payload.pageSize*a.payload.pageIndex)},setSelectedSuperUser:(s,a)=>{s.selectedSuperUser=a.payload},setDialogToggle:(s,a)=>{s.isDialogOpen=a.payload},toggleDeleteConfirmation:(s,a)=>{s.deleteConfirmation=a.payload},setDialogMode:(s,a)=>{s.dialogMode=a.payload}},extraReducers:s=>{s.addCase(j.fulfilled,(a,t)=>{var r,i,m,o,d,c,p,u;a.SuperUserData=t.payload.data,a.tableData.total=(i=(r=t.payload)==null?void 0:r.data)==null?void 0:i.length,a.displayedSuperUsersList=(u=(m=t.payload)==null?void 0:m.data)==null?void 0:u.slice(((o=a==null?void 0:a.tableData)==null?void 0:o.pageSize)*(((d=a==null?void 0:a.tableData)==null?void 0:d.pageIndex)-1),((c=a==null?void 0:a.tableData)==null?void 0:c.pageSize)*((p=a==null?void 0:a.tableData)==null?void 0:p.pageIndex)),a.loading=!1}).addCase(j.pending,a=>{a.loading=!0})}}),{setDialogToggle:z,setDialogMode:k,setSelectedSuperUser:q,toggleDeleteConfirmation:je,setTableData:v}=O.actions,be=O.reducer,ye=V({data:be}),x=W,L=g.forwardRef((s,a)=>{const{onInputChange:t}=s,r=re(i,500);function i(o){t==null||t(o)}const m=o=>{r(o.target.value)};return e.jsx(S,{ref:a,className:"max-w-lg md:w-52 mb-4",size:"md",placeholder:"Search by user name",prefix:e.jsx(Y,{className:"text-lg"}),onChange:m})});L.displayName="OrganizationTableSearch";const we=()=>{const s=N(),a=g.useRef(null),t=x(m=>m.superSuperUsers.data.tableData),r=m=>{const o=A(t);o.query=m,o.pageIndex=1,typeof m=="string"&&m.length>1&&i(o),typeof m=="string"&&m.length===0&&i(o)},i=m=>{s(m?v(m):j())};return e.jsxs("div",{className:"md:flex items-center justify-between",children:[e.jsx("div",{className:"md:flex items-center gap-4",children:e.jsx(L,{ref:a,onInputChange:r})}),e.jsx("div",{className:"mb-4",children:e.jsx(T,{size:"sm",onClick:()=>{s(z(!0)),s(k("Add"))},children:"Add New"})})]})},De=E().shape({firstName:h().required("FirstName Is Required"),lastName:h().required("LastName Is Required"),email:h().matches(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i,"Invalid email").required("Email is required"),password:h().min(6,"Password must be at least 6 characters").matches(/^(?=.*[A-Z])(?=.*\d)(?=.*[!@#$%^&*()_+])[A-Za-z\d!@#$%^&*()_+]+$/,"6+ characters, uppercase, number, & special character.").required("Password is required")}),Ce=E().shape({firstName:h().required("FirstName Is Required"),lastName:h().required("LastName Is Required"),email:h().matches(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i,"Invalid email").required("Email is required")}),$=g.forwardRef((s,a)=>{const t=N(),r=x(o=>o.superSuperUsers.data.dialogMode),i=x(o=>o.superSuperUsers.data.selectedSuperUser),m=async(o,d,c)=>{var y,w,D;const p=await t(o==="Add"?fe(d):xe({id:c==null?void 0:c.id,updatedData:d}));let u="",f="",b="danger";(y=p==null?void 0:p.payload)!=null&&y.success?(u="Successfully Added",f=(w=p==null?void 0:p.payload)==null?void 0:w.message,b="success"):(u="Something went wrong !!!",f=(D=p==null?void 0:p.error)==null?void 0:D.message),ne.push(e.jsx(me,{title:u,type:b,duration:2500,children:f}),{placement:"top-end"}),t(z(!1)),t(j())};return e.jsx(pe,{innerRef:a,initialValues:{firstName:(i==null?void 0:i.firstName)||"",lastName:(i==null?void 0:i.lastName)||"",email:(i==null?void 0:i.email)||""},validationSchema:r==="Add"?De:Ce,onSubmit:async(o,{setSubmitting:d})=>{r==="Add"?await m("Add",o,null):await m("Edit",o,i),d(!1)},children:({touched:o,errors:d,values:c,setFieldValue:p})=>e.jsx(de,{children:e.jsx(le,{children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 ",children:e.jsxs("div",{className:"lg:col-span-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(C,{label:"FirstName Name*",invalid:d.firstName&&o.firstName,errorMessage:d.firstName,children:e.jsx(U,{type:"text",autoComplete:"off",name:"firstName",placeholder:"First Name",component:S,prefix:e.jsx(R,{className:"text-xl"})})})}),e.jsx("div",{className:"col-span-1",children:e.jsx(C,{label:"Last Name*",invalid:d.lastName&&o.lastName,errorMessage:d.lastName,children:e.jsx(U,{type:"text",autoComplete:"off",name:"lastName",placeholder:"Last Name",component:S,prefix:e.jsx(R,{className:"text-xl"})})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(C,{label:"Email*",invalid:d.email&&o.email,errorMessage:d.email,children:e.jsx(U,{type:"text",autoComplete:"off",name:"email",placeholder:"Email",component:S,prefix:e.jsx(ee,{className:"text-xl"})})})}),r==="Add"?e.jsx("div",{className:"col-span-1",children:e.jsx(C,{label:"Password*",invalid:d.password&&o.password,errorMessage:d.password,children:e.jsx(U,{type:"text",autoComplete:"off",name:"password",placeholder:"Password",component:S,prefix:e.jsx(ce,{className:"text-xl"})})})}):null]})]})})})})})});$.displayName="SuperUserForm";const Ue=({onSaveClick:s,onCancel:a})=>e.jsxs("div",{className:"text-right w-full",children:[e.jsx(T,{size:"sm",className:"mr-2",onClick:a,children:"Cancel"}),e.jsx(T,{size:"sm",variant:"solid",onClick:s,children:"Save"})]}),Ae=()=>{const s=N(),a=x(l=>l.superSuperUsers.data.loading),{pageIndex:t,pageSize:r,sort:i,query:m,total:o}=x(l=>l.superSuperUsers.data.tableData),d=x(l=>l.superSuperUsers.data.displayedSuperUsersList);console.log({data:d});const c=({row:l})=>{const n=N(),{textTheme:Z}=ie(),_=()=>{n(q(l)),n(z(!0)),n(k("Edit"))};l!=null&&l.isActive;const H=async()=>{await n(q(l)),n(je(!0))};return e.jsxs("div",{className:"flex text-base items-center",children:[e.jsx("span",{className:`cursor-pointer hover:${Z} circle items-center`,onClick:_,children:e.jsx(ae,{})}),e.jsx("span",{className:"cursor-pointer hover:text-red-500 mx-1 circle items-center",onClick:H,children:e.jsx(se,{})})]})},p=g.useMemo(()=>({pageIndex:t,pageSize:r,sort:i,query:m,total:o}),[t,r,i,m,o]),u=g.useMemo(()=>[{header:"Action",id:"action",cell:n=>e.jsx(c,{row:n.row.original})},{header:"First Name",accessorKey:"firstName",cell:n=>n.row.original.firstName},{header:"Last Name",accessorKey:"lastName",cell:n=>n.row.original.lastName},{header:"email",accessorKey:"email",cell:n=>n.row.original.email}],[]),f=l=>{const n=A(p);n.pageIndex=l,s(v(n))},b=l=>{const n=A(p);n.pageSize=Number(l),n.pageIndex=1,s(v(n))},y=l=>{const n=A(p);n.sort=l,s(v(n))},w=x(l=>l.superSuperUsers.data.isDialogOpen),[D,ze]=g.useState(window.innerWidth/2),F=()=>{s(z(!1)),s(q({}))},M=g.useRef(null),P=()=>{var l;(l=M.current)==null||l.submitForm()};return e.jsxs("div",{children:[e.jsx(te,{columns:u,data:d,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},loading:a,pagingData:{total:p.total,pageIndex:p.pageIndex,pageSize:p.pageSize},onPaginationChange:f,onSelectChange:b,onSort:y}),e.jsx(oe,{isOpen:w,closable:!1,bodyClass:"p-0",width:D,footer:e.jsx(Ue,{onCancel:F,onSaveClick:P}),onClose:F,onRequestClose:F,children:e.jsxs("div",{className:"m-4",children:[e.jsx("h5",{children:"SuperUsers"}),e.jsx("p",{className:"mb-6",children:"Section to config the organizations attribute"}),e.jsx($,{ref:M})]})})]})};B("superSuperUsers",ye);const ve=()=>{const s=N();return g.useEffect(()=>{s(j())},[s]),e.jsx(e.Fragment,{children:e.jsxs(ue,{bodyClass:"h-full",children:[e.jsx(ge,{title:"SuperUsers",desc:"",className:"mb-2"}),e.jsx(we,{}),e.jsx(Ae,{})]})})},is=ve;export{is as default};
