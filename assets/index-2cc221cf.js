import{am as b,an as q,ao as B,ap as H,a as j,r as u,j as r,c as k,as as U,aq as V,ar as Q}from"./index-04de45f1.js";import{T as K}from"./index-d856057f.js";import{A as G}from"./AdaptableCard-b66d711f.js";import{c as Y}from"./CryptoService-72acd4e3.js";import{c as h}from"./cloneDeep-9e3b0d5b.js";import{A as _}from"./index-d960fe16.js";import{D as M}from"./DataTable-26a56396.js";import{B as J}from"./Button-c014eb4a.js";import{g as N}from"./GrowShrinkTag-5be02b36.js";import{N as x}from"./react-number-format.es-042f37c4.js";import{D as W}from"./Dialog-94528cff.js";import{T as X,P as Z}from"./ProceedTrade-0585b3d3.js";import{i as T}from"./Views-9d427d6f.js";import{I as D}from"./Input-177911dc.js";import{z as ee}from"./index.esm-dece01db.js";import{d as oe}from"./debounce-72f24c40.js";import"./useControllableState-517757cf.js";import"./Card-5dadf163.js";import"./_Uint8Array-51fedccd.js";import"./_MapCache-593c8f28.js";import"./_getPrototype-c53c6c29.js";import"./useMergeRef-788c4cb0.js";import"./Tooltip-8263a1ca.js";import"./usePopper-301f1b7b.js";import"./index.esm-86efb1ff.js";import"./index-5206a52a.js";import"./index-f4f40370.js";import"./index.esm-bec52084.js";import"./Pagination-d7bd87b8.js";import"./Select-8dd681ec.js";import"./toConsumableArray-c4879a90.js";import"./objectWithoutPropertiesLoose-df62547b.js";import"./floating-ui.dom-bef9cea3.js";import"./get-e02c019e.js";import"./toString-85ae3482.js";import"./context-3f43d22b.js";import"./index-746fa18b.js";import"./_baseIsEqual-aab3701d.js";import"./TableRowSkeleton-b8809059.js";import"./Skeleton-74d23b60.js";import"./index-57d63c42.js";import"./Tag-b89b8728.js";import"./index-ce7a2c9a.js";import"./CloseButton-c81f3a7a.js";import"./index-0dfb4b3d.js";import"./formik.esm-21613a47.js";import"./Badge-fd219ce7.js";import"./chart.constant-ce23b755.js";import"./chart.config-801963e0.js";import"./FormNumericInput-134f815d.js";import"./react-tooltip.min-ff89f0ec.js";import"./RichTextEditor-2eafc1a6.js";import"./SegmentItemOption-e4cb4a99.js";import"./useThemeClass-d6175223.js";import"./SvgIcon-5bee4d5c.js";import"./index.esm-7ed3d02a.js";import"./isNil-2d09164b.js";const z="cryptoMarket",C=b(z+"/getMarketData",async t=>(await Y(t)).data),F={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},re={loading:!0,marketData:[],tableData:F,selectedTab:"all",tradeDialogOpen:!1,selectedRow:{}},R=q({name:`${z}/state`,initialState:re,reducers:{setSelectedTab:(t,a)=>{t.selectedTab=a.payload},setTableData:(t,a)=>{t.tableData=a.payload},setMarketData:(t,a)=>{t.marketData=a.payload},toggleTradeDialog:(t,a)=>{t.tradeDialogOpen=a.payload},setSelectedRow:(t,a)=>{t.selectedRow=a.payload}},extraReducers:t=>{t.addCase(C.fulfilled,(a,s)=>{a.loading=!1,a.tableData.total=s.payload.total,a.marketData=s.payload.data}).addCase(C.pending,a=>{a.loading=!0})}}),{setSelectedTab:se,setTableData:d,setMarketData:te,toggleTradeDialog:A,setSelectedRow:P}=R.actions,ae=R.reducer,ne=B({data:ae}),y=H,I=({row:t})=>{const a=j(),s=u.useCallback(()=>{a(A(!0)),a(P(t))},[a,t]);return r.jsx("div",{className:"ltr:text-right rtl:text-left",children:r.jsx(J,{size:"sm",onClick:s,children:"Trade"})})},ce=({data:t,loading:a,tableData:s})=>{const n=j(),i=u.useMemo(()=>[{header:"Name",accessorKey:"name",cell:o=>{const{img:e,symbol:l,name:w}=o.row.original;return r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(_,{src:e,size:"sm",className:"!bg-transparent"}),r.jsx("span",{className:"font-bold heading-text",children:l}),r.jsx("span",{children:w})]})}},{header:"Price",accessorKey:"price",cell:o=>{const e=o.row.original;return r.jsx(x,{displayType:"text",value:(Math.round(e.price*100)/100).toFixed(2),suffix:" USD",thousandSeparator:!0})}},{header:"24h Change",accessorKey:"change",cell:o=>{const{change:e}=o.row.original;return r.jsxs("span",{className:k("font-semibold",N(e,"text")),children:[e>0&&"+",e,"%"]})}},{header:"24h Volumn",accessorKey:"volumn",cell:o=>{const{volumn:e}=o.row.original;return r.jsxs("span",{children:[e,"M"]})}},{header:"Market Cap",accessorKey:"marketCap",cell:o=>{const{marketCap:e}=o.row.original;return r.jsxs("span",{children:["$",e,"M"]})}},{header:"",id:"action",cell:o=>{const e=o.row.original;return r.jsx(I,{row:e})}}],[]),c=o=>{const e=h(s);e.pageIndex=o,n(d(e))},g=o=>{const e=h(s);e.pageSize=Number(o),e.pageIndex=1,n(d(e))},p=o=>{const e=h(s);e.sort=o,n(d(e))};return r.jsx(M,{columns:i,data:t,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28,className:"rounded-md"},loading:a,pagingData:{total:s==null?void 0:s.total,pageIndex:s==null?void 0:s.pageIndex,pageSize:s==null?void 0:s.pageSize},onPaginationChange:c,onSelectChange:g,onSort:p})},ie=({data:t,loading:a,tableData:s})=>{const n=U(),i=u.useMemo(()=>[{header:"Name",accessorKey:"name",cell:o=>{const{name:e}=o.row.original;return r.jsx("span",{className:"font-bold heading-text",children:e})}},{header:"Price",accessorKey:"price",cell:o=>{const e=o.row.original;return r.jsxs("span",{children:[r.jsx(x,{displayType:"text",value:(Math.round(e.amount*100)/100).toFixed(2),thousandSeparator:!0}),r.jsx("span",{children:" / "}),r.jsx(x,{displayType:"text",value:(Math.round(e.price*100)/100).toFixed(2),prefix:"$",thousandSeparator:!0})]})}},{header:"24h Change",accessorKey:"change",cell:o=>{const{change:e}=o.row.original;return r.jsxs("span",{className:k("font-semibold",N(e,"text")),children:[e>0&&"+",e,"%"]})}},{header:"24h High /24h Low",accessorKey:"high",cell:o=>{const{high:e,low:l}=o.row.original;return r.jsxs("span",{children:[e," / ",l]})}},{header:"24h Volumn",accessorKey:"volumn",cell:o=>{const{volumn:e}=o.row.original;return r.jsx(x,{displayType:"text",value:(Math.round(e*100)/100).toFixed(2),thousandSeparator:!0})}},{header:"24h Turnover",accessorKey:"turnOver",cell:o=>{const{turnOver:e}=o.row.original;return r.jsxs("span",{children:["$",e,"M"]})}},{header:"",id:"action",cell:o=>{const e=o.row.original;return r.jsx(I,{row:e})}}],[]),c=o=>{const e=h(s);e.pageIndex=o,n(d(e))},g=o=>{const e=h(s);e.pageSize=Number(o),e.pageIndex=1,n(d(e))},p=o=>{const e=h(s);e.sort=o,n(d(e))};return r.jsx(M,{columns:i,data:t,loading:a,pagingData:{total:s==null?void 0:s.total,pageIndex:s==null?void 0:s.pageIndex,pageSize:s==null?void 0:s.pageSize},onPaginationChange:c,onSelectChange:g,onSort:p})},le=({data:t,loading:a,tableData:s})=>{const n=j(),i=u.useMemo(()=>[{header:"Name",accessorKey:"name",cell:o=>{const{name:e}=o.row.original;return r.jsx("span",{className:"font-bold heading-text",children:e})}},{header:"Price",accessorKey:"price",cell:o=>{const e=o.row.original;return r.jsxs("span",{children:[r.jsx(x,{displayType:"text",value:(Math.round(e.amount*100)/100).toFixed(2),thousandSeparator:!0}),r.jsx("span",{children:" / "}),r.jsx(x,{displayType:"text",value:(Math.round(e.price*100)/100).toFixed(2),prefix:"$",thousandSeparator:!0})]})}},{header:"24h Change",accessorKey:"change",cell:o=>{const{change:e}=o.row.original;return r.jsxs("span",{className:k("font-semibold",N(e,"text")),children:[e>0&&"+",e,"%"]})}},{header:"24h High /24h Low",accessorKey:"high",cell:o=>{const{high:e,low:l}=o.row.original;return r.jsxs("span",{children:[e," / ",l]})}},{header:"24h Volumn",accessorKey:"volumn",cell:o=>{const{volumn:e}=o.row.original;return r.jsx(x,{displayType:"text",value:(Math.round(e*100)/100).toFixed(2),thousandSeparator:!0})}},{header:"",id:"action",cell:o=>{const e=o.row.original;return r.jsx(I,{row:e})}}],[]),c=o=>{const e=h(s);e.pageIndex=o,n(d(e))},g=o=>{const e=h(s);e.pageSize=Number(o),e.pageIndex=1,n(d(e))},p=o=>{const e=h(s);e.sort=o,n(d(e))};return r.jsx(M,{columns:i,data:t,loading:a,pagingData:{total:s==null?void 0:s.total,pageIndex:s==null?void 0:s.pageIndex,pageSize:s==null?void 0:s.pageSize},onPaginationChange:c,onSelectChange:g,onSort:p})},de=()=>{const t=j(),a=V(),s=y(m=>m.cryptoMarket.data.tradeDialogOpen),n=y(m=>m.cryptoMarket.data.selectedRow),[i,c]=u.useState({}),[g,p]=u.useState(!1),[o,e]=u.useState(""),l=()=>{t(A(!1)),setTimeout(()=>{t(P({})),c({}),p(!1),e("")},500)},w=(m,f,$)=>{f(!0),setTimeout(()=>{c({...m,type:$}),p(!1),e("")},500)},O=()=>{p(!0),setTimeout(()=>{e("SUCCESS")},1e3)},L=m=>{l(),m&&a("/app/crypto/wallets")};return r.jsxs(W,{isOpen:s,closable:!o,width:400,onRequestClose:l,onClose:l,children:[r.jsxs("h5",{className:"mb-4",children:[T(i)&&!o&&`Trade ${n.symbol}`,!T(i)&&!o&&"Order preview"]}),T(i)?r.jsx(X,{amount:n.price,symbol:n.symbol,onBuy:(m,f)=>w(m,f,"BUY"),onSell:(m,f)=>w(m,f,"SELL")}):r.jsx(Z,{loading:g,status:o,onConfirm:O,onDone:L,...i})]})},E=u.forwardRef(({onInputChange:t},a)=>{const s=oe(n,500);function n(c){t==null||t(c)}const i=c=>{s(c.target.value)};return r.jsx(D,{ref:a,className:"lg:w-52",size:"sm",placeholder:"Search",prefix:r.jsx(ee,{className:"text-lg"}),onChange:i})});E.displayName="QueryInput";Q("cryptoMarket",ne);const{TabNav:S,TabList:pe,TabContent:v}=K,me=()=>{const t=j(),a=u.useRef(null),s=y(e=>e.cryptoMarket.data.marketData),n=y(e=>e.cryptoMarket.data.loading),i=y(e=>e.cryptoMarket.data.selectedTab),c=y(e=>e.cryptoMarket.data.tableData);u.useEffect(()=>{g()},[t,i,c]);const g=()=>{t(C({tab:i,...c}))},p=e=>{t(te([])),t(se(e)),t(d(F))},o=e=>{const l=h(c);l.query=e,l.pageIndex=1,typeof e=="string"&&e.length>1&&t(d(l)),typeof e=="string"&&e.length===0&&t(d(l))};return r.jsxs(r.Fragment,{children:[r.jsx(G,{children:r.jsxs(K,{value:i,variant:"pill",onChange:p,children:[r.jsxs("div",{className:"flex lg:items-center justify-between flex-col lg:flex-row gap-4",children:[r.jsxs(pe,{children:[r.jsx(S,{value:"all",children:"All"}),r.jsx(S,{value:"spot",children:"Spot"}),r.jsx(S,{value:"futures",children:"Futures"})]}),r.jsx(E,{ref:a,onInputChange:o})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx(v,{value:"all",children:r.jsx(ce,{data:s,loading:n,tableData:c})}),r.jsx(v,{value:"spot",children:r.jsx(ie,{data:s,loading:n,tableData:c})}),r.jsx(v,{value:"futures",children:r.jsx(le,{data:s,loading:n,tableData:c})})]})]})}),r.jsx(de,{})]})},yo=me;export{yo as default};
