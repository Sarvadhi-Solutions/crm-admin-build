import{r as m,j as t,a as G,a3 as Q,au as Ee,av as bt,aw as K,p as Ct,al as Et,ah as Dt,aq as Nt}from"./index-f0c7b593.js";import{A as kt}from"./AdaptableCard-af2a9d2e.js";import{u as b,a as he,g as J,e as st,s as it,b as re,f as Le,p as Se,c as be,h as Pe,t as $e,d as Mt,i as wt,j as It,k as rt,l as ot,m as Vt,n as Me,o as At,q as Ft,v as Xe,w as Rt,x as Lt,r as Pt}from"./index-4b96ad31.js";import{B as le}from"./Button-7f5aeb19.js";import{c as Te}from"./cloneDeep-a7f8bdaf.js";import{I as Y}from"./Input-b0936f40.js";import{b as $t,T as Ne,Q as qt,O as Ot,P as _t,o as Ut,M as zt,C as Wt}from"./index.esm-e5bc54ff.js";import{d as Ht}from"./debounce-cfdc19d0.js";import{u as ke}from"./checkEditUpdate-a8d8ed64.js";import{D as Yt}from"./DataTable-b0d71643.js";import"./Alert-6365923a.js";import{A as Gt}from"./index-e46ae74f.js";import"./Badge-eb9394bd.js";import"./RangeCalendar-4446a681.js";import{C as Bt}from"./Card-d2bb7bb1.js";import"./index-3454c4af.js";import"./index-7fb568e6.js";import{D as Ue}from"./Dialog-863f25dc.js";import{D as Kt}from"./Drawer-3213f845.js";import"./index-096ca5d8.js";import{F as ze,a as _}from"./FormItem-39c4f499.js";import"./toString-15315b0c.js";import"./index-cae4e5da.js";import"./index-cd4a639d.js";import"./index-e9f2e738.js";import{t as ce,N as de}from"./toast-98ab077b.js";import"./Pagination-4451079e.js";import"./Progress-c215b6a7.js";import"./index-aa5943b4.js";import"./ScrollBar-af66e651.js";import"./index-2d35600c.js";import{m as Qt,d as Xt,S as ge}from"./Select-20b819a9.js";import"./Skeleton-3fb87948.js";import"./index-681acbb6.js";import"./Switcher-52adaf57.js";import"./index-b0e56b87.js";import{T as lt}from"./index-0fbd5995.js";import{T as Jt}from"./Tag-c0e1c031.js";import"./index-11547d1a.js";import"./index-ff0fc04f.js";import{T as Ae}from"./Tooltip-c002e367.js";import{U as Zt}from"./Upload-652ef9c2.js";import{S as ea}from"./StatusCapsule-288d7471.js";import{T as ta}from"./TagsList-b3e5bee2.js";import{T as Fe}from"./TextTruncate-a320edf5.js";import{u as aa}from"./useThemeClass-a90261c9.js";import{h as na}from"./moment-fbc5633a.js";import{b as We,A as ct,a as sa}from"./index.esm-08433e05.js";import{a as ia}from"./index.esm-6d11550f.js";import{d as ra}from"./index.esm-648d214b.js";import{i as oa}from"./Views-f075be69.js";import"./chart.constant-02b58366.js";import"./GrowShrinkTag-527a2d3f.js";import"./react-tooltip.min-71b0b431.js";import"./RichTextEditor-5416da31.js";import"./SegmentItemOption-59370a59.js";import{S as dt}from"./StickyFooter-e5abd172.js";import"./SvgIcon-586bfa82.js";import{F as He,a as Ye,b as H,u as la}from"./formik.esm-251b655f.js";import{c as Ie,a as F,e as ut}from"./index.esm-36ab1692.js";import{D as ca}from"./DoubleSidedImage-a268599d.js";import{C as da}from"./ConfirmDialog-a2f5c181.js";/* empty css              */import{G as Je}from"./index.esm-e9a42a23.js";import{a as mt,_ as xe}from"./objectWithoutProperties-8809bfcf.js";import{_ as Z}from"./toConsumableArray-4b0cd007.js";import{_ as qe}from"./slicedToArray-4d193841.js";import{_ as pt}from"./inheritsLoose-fdcaa94a.js";import{g as ua}from"./index-ce046e2b.js";import{M as Ze,t as ye,a as et,p as tt}from"./helper-64c17a1c.js";import{B as at}from"./index.esm-b8b882c0.js";import{F as ma}from"./FormDesription-d6834b2f.js";import{u as ft}from"./useGetModule-0613f8e4.js";import{D as pa}from"./DynamicDropDown-021caa73.js";import{S as fa}from"./Status-a803e133.js";import{M as ha}from"./MediaSkeleton-3f77a65b.js";import{N as xa}from"./react-number-format.es-558e8b89.js";import"./CrmService-dbe6e33f.js";import"./index-fc80bde3.js";import"./_MapCache-0e9047d5.js";import"./_getPrototype-0af54c7c.js";import"./isNil-f2b7492f.js";import"./get-f1462f52.js";import"./index-d3141ad9.js";import"./useTimeout-dc84f5ca.js";import"./CloseButton-0049a26a.js";import"./StatusIcon-ee78f8c3.js";import"./useMergeRef-788c4cb0.js";import"./useControllableState-2e915fdc.js";import"./_baseIsEqual-cd068756.js";import"./useRootClose-30d78bea.js";import"./usePopper-a15905d1.js";import"./TimeInput-3420c0cd.js";import"./useUniqueId-b4c9cc1b.js";import"./useDidUpdate-99adc2ba.js";import"./index-3b8a3b80.js";import"./useUncertainRef-d24e847b.js";import"./index-18282a3b.js";import"./chainedFunction-070f832c.js";import"./floating-ui.dom-4bc0055b.js";import"./mapCloneElement-4930eeca.js";import"./index.esm-7aedf532.js";import"./index.esm-6eb7bfab.js";import"./index.esm-cdcdcd5a.js";const ht=m.forwardRef((c,s)=>{const{onInputChange:e}=c,o=Ht(a,500);function a(r){e==null||e(r)}const n=r=>{o(r.target.value)};return t.jsx(Y,{ref:s,className:"max-w-md md:w-52 mb-4",size:"sm",placeholder:"Search by title",prefix:t.jsx($t,{className:"text-lg"}),onChange:n})});ht.displayName="TasksTableSearch";const ga=()=>{const c=G(),s=m.useRef(null),e=b(l=>l.crmTasks.data.tableData),o=ke("tasks","canCreate"),a=l=>{const d=Te(e);d.query=l,d.pageIndex=1,typeof l=="string"&&l.length>1&&n(d),typeof l=="string"&&l.length===0&&n(d)},n=l=>{c(l?he(l):J())},r=()=>{c(st()),c(it("Add")),c(re({}))};return m.useEffect(()=>{s.current&&(s.current.value=e.query||"",c(he(e)))},[e==null?void 0:e.query]),t.jsxs("div",{className:"md:flex items-center justify-between",children:[t.jsx("div",{className:"md:flex items-center gap-4",children:t.jsx(ht,{ref:s,onInputChange:a})}),t.jsx("div",{className:"mb-4",children:o&&t.jsx(le,{size:"sm",onClick:r,children:"Add New"})})]})},xt=m.forwardRef((c,s)=>{const e=G(),o=b(g=>g.crmTasks.data.followUPConfirmation),a=b(g=>{var x,j;return(j=(x=g.crmTasks)==null?void 0:x.data)==null?void 0:j.selectedTask}),n=b(g=>g.crmTasks.data.loading),r=()=>{e(Le(!1))},l=Ie().shape({descriptions:F().required("Notes is required")}),d=async g=>{var C,R,V;const x=await e(Se({taskId:a==null?void 0:a.id,data:g})),j=(C=x==null?void 0:x.payload)!=null&&C.success?{title:"Successfully Updated",type:"success",message:(R=x==null?void 0:x.payload)==null?void 0:R.message}:{title:"Something Went Wrong !!!",type:"danger",message:(V=x==null?void 0:x.error)==null?void 0:V.message};ce.push(t.jsx(de,{title:j.title,type:j==null?void 0:j.type,duration:2500,children:j.message}),{placement:"top-end"}),await e(J()),await e(be()),await e(Le(!1))};return t.jsxs(Ue,{isOpen:o,onClose:r,children:[t.jsx("h5",{className:"mb-4",children:"Follow Up"}),t.jsx(He,{innerRef:s,initialValues:{descriptions:"",nextDateTime:""},validationSchema:l,onSubmit:async(g,{setSubmitting:x})=>{const j={completionStatus:"completed",descriptions:g.descriptions};g!=null&&g.nextDateTime&&(j.nextDateTime=g.nextDateTime),await d(j),x(!1)},children:({touched:g,errors:x,values:j,setFieldValue:C})=>t.jsxs(Ye,{children:[t.jsxs(ze,{children:[t.jsx(_,{label:"Next Follow-Up Date and Time",invalid:x.nextDateTime&&g.nextDateTime,errorMessage:x.nextDateTime,children:t.jsx(H,{type:"dateTime-local",autoComplete:"off",name:"nextDateTime",placeholder:"Select Next Follow-Up Date and Time",component:Y,prefix:t.jsx(Ne,{className:"text-xl"})})}),t.jsx(_,{label:"Notes",invalid:x.descriptions&&g.descriptions,errorMessage:x.descriptions,children:t.jsx(H,{textArea:!0,type:"text",autoComplete:"off",name:"descriptions",placeholder:"Notes",component:Y,prefix:t.jsx(We,{className:"text-xl"})})})]}),t.jsx(dt,{className:"flex items-center justify-end py-2",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"md:flex items-center",children:[t.jsx(le,{size:"sm",className:"ltr:mr-3 rtl:ml-3",type:"button",onClick:r,children:"Cancel"}),t.jsx(le,{size:"sm",type:"submit",variant:"solid",icon:t.jsx(ct,{}),loading:n,children:"Save"})]})})]})})]})});xt.displayName="FollowUpTaskConfirmation";const gt=m.forwardRef((c,s)=>{const e=G(),[o,a]=m.useState(""),[n,r]=m.useState(""),l=b(N=>N.crmTasks.data.quotationConfirmation),d=b(N=>{var p,h;return(h=(p=N.crmTasks)==null?void 0:p.data)==null?void 0:h.selectedTask}),g=b(N=>N.crmTasks.data.loading),x=()=>{e(Pe(!1)),a("")},j=Ie().shape({descriptions:F().required("Notes is required")}),C=async N=>{var v,T,M;const p=await e(Se({taskId:d==null?void 0:d.id,data:N})),h=(v=p==null?void 0:p.payload)!=null&&v.success?{title:"Successfully Updated",type:"success",message:(T=p==null?void 0:p.payload)==null?void 0:T.message}:{title:"Something Went Wrong !!!",type:"danger",message:(M=p==null?void 0:p.error)==null?void 0:M.message};ce.push(t.jsx(de,{title:h.title,type:h==null?void 0:h.type,duration:2500,children:h.message}),{placement:"top-end"}),await e(J()),await e(be()),await e(Pe(!1)),a("")},R=N=>{let p=!0;const h=["image/png","image/jpeg","image/jpeg","image/webp","image/gif","application/pdf","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/csv","text/plain","text/html","application/xml","application/json","application/zip","application/x-rar-compressed"],v=1e7;if(N)for(const T of N)h.includes(T.type)||(p="Please upload a .jpeg, .png, or .pdf file!"),T.size>=v&&(console.log(T.size),p="Uploaded file cannot be larger than 10MB!");return p},V=(N,p,h)=>{const v="1-img-0",T=h.length-1,M=new FileReader,E=h[T];M.onload=()=>{const P=M.result,I={id:v,name:E.name,img:P};r(E.type),a(E.name),p("attachments",I)},M.readAsDataURL(E)};return t.jsxs(Ue,{isOpen:l,onClose:x,children:[t.jsx("h5",{className:"mb-4",children:"Quotation"}),t.jsx(He,{innerRef:s,initialValues:{descriptions:"",attachments:""},validationSchema:j,onSubmit:async(N,{setSubmitting:p})=>{var v,T;const h={completionStatus:"completed",descriptions:N.descriptions};(v=N.attachments)!=null&&v.img&&(h.attachments=(T=N.attachments)==null?void 0:T.img,h.fileType=n),await C(h),p(!1)},children:({field:N,form:p,touched:h,errors:v,values:T,setFieldValue:M})=>t.jsxs(Ye,{children:[t.jsxs(ze,{children:[t.jsx(_,{label:"Upload File",children:t.jsx(Zt,{draggable:!0,className:"min-h-fit",beforeUpload:R,showList:!1,onChange:E=>V(p,M,E),children:t.jsxs("div",{className:"max-w-full flex flex-col px-4 py-2 justify-center items-center",children:[t.jsx(ca,{src:"/img/others/upload.png",darkModeSrc:"/img/others/upload-dark.png"}),t.jsx("p",{className:"font-semibold",children:o?t.jsxs("span",{className:"text-gray-800 dark:text-white",children:["Selected file ",o]}):t.jsxs(t.Fragment,{children:[t.jsxs("span",{className:"text-gray-800 dark:text-white",children:["Drop your image here, or"," "]}),t.jsx("span",{className:"text-blue-500",children:"browse"})]})}),t.jsx("p",{className:"mt-1 opacity-60 dark:text-white",children:"Support: jpeg, png, pdf"})]})})}),t.jsx(_,{label:"Notes",invalid:v.descriptions&&h.descriptions,errorMessage:v.descriptions,children:t.jsx(H,{textArea:!0,type:"text",autoComplete:"off",name:"descriptions",placeholder:"Notes",component:Y,prefix:t.jsx(We,{className:"text-xl"})})})]}),t.jsx(dt,{className:"flex items-center justify-end py-2",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"md:flex items-center",children:[t.jsx(le,{size:"sm",className:"ltr:mr-3 rtl:ml-3",type:"button",onClick:x,children:"Cancel"}),t.jsx(le,{size:"sm",type:"submit",variant:"solid",icon:t.jsx(ct,{}),loading:g,children:"Save"})]})})]})})]})});gt.displayName="QuotationTaskConfirmation";const ya=()=>{const c=G(),s=b(n=>n.crmTasks.data.deleteConfirmation),e=b(n=>{var r,l;return(l=(r=n.crmTasks)==null?void 0:r.data)==null?void 0:l.selectedTask}),o=()=>{c($e(!1))},a=async()=>{var r,l,d;c($e(!1));const n=await c(Mt(e.id));await c(J()),(r=n==null?void 0:n.payload)!=null&&r.success?ce.push(t.jsx(de,{title:"Successfuly Deleted",type:"success",duration:2500,children:(l=n==null?void 0:n.payload)==null?void 0:l.message}),{placement:"top-end"}):ce.push(t.jsx(de,{title:"Something Went Wrong !!!",type:"danger",duration:2500,children:(d=n==null?void 0:n.error)==null?void 0:d.message}),{placement:"top-end"}),await c(be())};return t.jsx(da,{isOpen:s,type:"danger",title:"Delete Task",confirmButtonColor:"red-600",onClose:o,onRequestClose:o,onCancel:o,onConfirm:a,children:t.jsx("p",{children:"Are you sure you want to delete this Task? All record related to this task will be deleted as well. This action cannot be undone."})})},nt={disabled:!1},we=Q.createContext(null);var va=function(s){return s.scrollTop},ve="unmounted",se="exited",ie="entering",fe="entered",Oe="exiting",X=function(c){pt(s,c);function s(o,a){var n;n=c.call(this,o,a)||this;var r=a,l=r&&!r.isMounting?o.enter:o.appear,d;return n.appearStatus=null,o.in?l?(d=se,n.appearStatus=ie):d=fe:o.unmountOnExit||o.mountOnEnter?d=ve:d=se,n.state={status:d},n.nextCallback=null,n}s.getDerivedStateFromProps=function(a,n){var r=a.in;return r&&n.status===ve?{status:se}:null};var e=s.prototype;return e.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},e.componentDidUpdate=function(a){var n=null;if(a!==this.props){var r=this.state.status;this.props.in?r!==ie&&r!==fe&&(n=ie):(r===ie||r===fe)&&(n=Oe)}this.updateStatus(!1,n)},e.componentWillUnmount=function(){this.cancelNextCallback()},e.getTimeouts=function(){var a=this.props.timeout,n,r,l;return n=r=l=a,a!=null&&typeof a!="number"&&(n=a.exit,r=a.enter,l=a.appear!==void 0?a.appear:r),{exit:n,enter:r,appear:l}},e.updateStatus=function(a,n){if(a===void 0&&(a=!1),n!==null)if(this.cancelNextCallback(),n===ie){if(this.props.unmountOnExit||this.props.mountOnEnter){var r=this.props.nodeRef?this.props.nodeRef.current:Ee.findDOMNode(this);r&&va(r)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===se&&this.setState({status:ve})},e.performEnter=function(a){var n=this,r=this.props.enter,l=this.context?this.context.isMounting:a,d=this.props.nodeRef?[l]:[Ee.findDOMNode(this),l],g=d[0],x=d[1],j=this.getTimeouts(),C=l?j.appear:j.enter;if(!a&&!r||nt.disabled){this.safeSetState({status:fe},function(){n.props.onEntered(g)});return}this.props.onEnter(g,x),this.safeSetState({status:ie},function(){n.props.onEntering(g,x),n.onTransitionEnd(C,function(){n.safeSetState({status:fe},function(){n.props.onEntered(g,x)})})})},e.performExit=function(){var a=this,n=this.props.exit,r=this.getTimeouts(),l=this.props.nodeRef?void 0:Ee.findDOMNode(this);if(!n||nt.disabled){this.safeSetState({status:se},function(){a.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:Oe},function(){a.props.onExiting(l),a.onTransitionEnd(r.exit,function(){a.safeSetState({status:se},function(){a.props.onExited(l)})})})},e.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},e.safeSetState=function(a,n){n=this.setNextCallback(n),this.setState(a,n)},e.setNextCallback=function(a){var n=this,r=!0;return this.nextCallback=function(l){r&&(r=!1,n.nextCallback=null,a(l))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},e.onTransitionEnd=function(a,n){this.setNextCallback(n);var r=this.props.nodeRef?this.props.nodeRef.current:Ee.findDOMNode(this),l=a==null&&!this.props.addEndListener;if(!r||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],g=d[0],x=d[1];this.props.addEndListener(g,x)}a!=null&&setTimeout(this.nextCallback,a)},e.render=function(){var a=this.state.status;if(a===ve)return null;var n=this.props,r=n.children;n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef;var l=mt(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Q.createElement(we.Provider,{value:null},typeof r=="function"?r(a,l):Q.cloneElement(Q.Children.only(r),l))},s}(Q.Component);X.contextType=we;X.propTypes={};function pe(){}X.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:pe,onEntering:pe,onEntered:pe,onExit:pe,onExiting:pe,onExited:pe};X.UNMOUNTED=ve;X.EXITED=se;X.ENTERING=ie;X.ENTERED=fe;X.EXITING=Oe;const yt=X;function Ge(c,s){var e=function(n){return s&&m.isValidElement(n)?s(n):n},o=Object.create(null);return c&&m.Children.map(c,function(a){return a}).forEach(function(a){o[a.key]=e(a)}),o}function ja(c,s){c=c||{},s=s||{};function e(x){return x in s?s[x]:c[x]}var o=Object.create(null),a=[];for(var n in c)n in s?a.length&&(o[n]=a,a=[]):a.push(n);var r,l={};for(var d in s){if(o[d])for(r=0;r<o[d].length;r++){var g=o[d][r];l[o[d][r]]=e(g)}l[d]=e(d)}for(r=0;r<a.length;r++)l[a[r]]=e(a[r]);return l}function oe(c,s,e){return e[s]!=null?e[s]:c.props[s]}function Ta(c,s){return Ge(c.children,function(e){return m.cloneElement(e,{onExited:s.bind(null,e),in:!0,appear:oe(e,"appear",c),enter:oe(e,"enter",c),exit:oe(e,"exit",c)})})}function Sa(c,s,e){var o=Ge(c.children),a=ja(s,o);return Object.keys(a).forEach(function(n){var r=a[n];if(m.isValidElement(r)){var l=n in s,d=n in o,g=s[n],x=m.isValidElement(g)&&!g.props.in;d&&(!l||x)?a[n]=m.cloneElement(r,{onExited:e.bind(null,r),in:!0,exit:oe(r,"exit",c),enter:oe(r,"enter",c)}):!d&&l&&!x?a[n]=m.cloneElement(r,{in:!1}):d&&l&&m.isValidElement(g)&&(a[n]=m.cloneElement(r,{onExited:e.bind(null,r),in:g.props.in,exit:oe(r,"exit",c),enter:oe(r,"enter",c)}))}}),a}var ba=Object.values||function(c){return Object.keys(c).map(function(s){return c[s]})},Ca={component:"div",childFactory:function(s){return s}},Be=function(c){pt(s,c);function s(o,a){var n;n=c.call(this,o,a)||this;var r=n.handleExited.bind(bt(n));return n.state={contextValue:{isMounting:!0},handleExited:r,firstRender:!0},n}var e=s.prototype;return e.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},e.componentWillUnmount=function(){this.mounted=!1},s.getDerivedStateFromProps=function(a,n){var r=n.children,l=n.handleExited,d=n.firstRender;return{children:d?Ta(a,l):Sa(a,r,l),firstRender:!1}},e.handleExited=function(a,n){var r=Ge(this.props.children);a.key in r||(a.props.onExited&&a.props.onExited(n),this.mounted&&this.setState(function(l){var d=Z({},l.children);return delete d[a.key],{children:d}}))},e.render=function(){var a=this.props,n=a.component,r=a.childFactory,l=mt(a,["component","childFactory"]),d=this.state.contextValue,g=ba(this.state.children).map(r);return delete l.appear,delete l.enter,delete l.exit,n===null?Q.createElement(we.Provider,{value:d},g):Q.createElement(we.Provider,{value:d},Q.createElement(n,l,g))},s}(Q.Component);Be.propTypes={};Be.defaultProps=Ca;const vt=Be;var Ea=["in","onExited","appear","enter","exit"],Da=function(s){return function(e){e.in,e.onExited,e.appear,e.enter,e.exit;var o=xe(e,Ea);return m.createElement(s,o)}},Na=Da,ka=["component","duration","in","onExited"],jt=function(s){var e=s.component,o=s.duration,a=o===void 0?1:o,n=s.in;s.onExited;var r=xe(s,ka),l=m.useRef(null),d={entering:{opacity:0},entered:{opacity:1,transition:"opacity ".concat(a,"ms")},exiting:{opacity:0},exited:{opacity:0}};return m.createElement(yt,{mountOnEnter:!0,unmountOnExit:!0,in:n,timeout:a,nodeRef:l},function(g){var x={style:K({},d[g]),ref:l};return m.createElement(e,Z({innerProps:x},r))})},_e=260,Ma=function(s){var e=s.children,o=s.in,a=s.onExited,n=m.useRef(null),r=m.useState("auto"),l=qe(r,2),d=l[0],g=l[1];m.useEffect(function(){var j=n.current;if(j){var C=window.requestAnimationFrame(function(){return g(j.getBoundingClientRect().width)});return function(){return window.cancelAnimationFrame(C)}}},[]);var x=function(C){switch(C){default:return{width:d};case"exiting":return{width:0,transition:"width ".concat(_e,"ms ease-out")};case"exited":return{width:0}}};return m.createElement(yt,{enter:!1,mountOnEnter:!0,unmountOnExit:!0,in:o,onExited:function(){var C=n.current;C&&(a==null||a(C))},timeout:_e,nodeRef:n},function(j){return m.createElement("div",{ref:n,style:K({overflow:"hidden",whiteSpace:"nowrap"},x(j))},e)})},wa=["in","onExited"],Ia=function(s){return function(e){var o=e.in,a=e.onExited,n=xe(e,wa);return m.createElement(Ma,{in:o,onExited:a},m.createElement(s,Z({cropWithEllipsis:o},n)))}},Va=Ia,Aa=function(s){return function(e){return m.createElement(jt,Z({component:s,duration:e.isMulti?_e:1},e))}},Fa=Aa,Ra=function(s){return function(e){return m.createElement(jt,Z({component:s},e))}},La=Ra,Pa=["component"],$a=["children"],qa=function(s){return function(e){return e.isMulti?m.createElement(Oa,Z({component:s},e)):m.createElement(vt,Z({component:s},e))}},Oa=function(s){var e=s.component,o=xe(s,Pa),a=_a(o);return m.createElement(vt,Z({component:e},a))},_a=function(s){var e=s.children,o=xe(s,$a),a=o.isMulti,n=o.hasValue,r=o.innerProps,l=o.selectProps,d=l.components,g=l.controlShouldRenderValue,x=m.useState(a&&g&&n),j=qe(x,2),C=j[0],R=j[1],V=m.useState(!1),N=qe(V,2),p=N[0],h=N[1];m.useEffect(function(){n&&!C&&R(!0)},[n,C]),m.useEffect(function(){p&&!n&&C&&R(!1),h(!1)},[p,n,C]);var v=function(){return h(!0)},T=function(I){if(a&&m.isValidElement(I)){if(I.type===d.MultiValue)return m.cloneElement(I,{onExited:v});if(I.type===d.Placeholder&&C)return null}return I},M=K(K({},r),{},{style:K(K({},r==null?void 0:r.style),{},{display:a&&n||C?"flex":"grid"})}),E=K(K({},o),{},{innerProps:M,children:m.Children.toArray(e).map(T)});return E},Ua=qa,za=["Input","MultiValue","Placeholder","SingleValue","ValueContainer"],Tt=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Xt({components:s}),o=e.Input,a=e.MultiValue,n=e.Placeholder,r=e.SingleValue,l=e.ValueContainer,d=xe(e,za);return K({Input:Na(o),MultiValue:Va(a),Placeholder:Fa(n),SingleValue:La(r),ValueContainer:Ua(l)},d)},Ce=Tt();Ce.Input;Ce.MultiValue;Ce.Placeholder;Ce.SingleValue;Ce.ValueContainer;var Wa=Qt(Tt);const je=[],De=[],Ha=c=>{var S,A,U,L;const{touched:s,errors:e,setFieldValue:o,values:a}=c,n=G();m.useState(!1),m.useState(!1);const[r,l]=m.useState(null),[d,g]=m.useState(null),[x,j]=m.useState(""),[C,R]=m.useState(""),[V,N]=m.useState([]),[p,h]=m.useState(!1),v=b(i=>{var z;return(z=i.crmTasks.data.customField)==null?void 0:z.data});b(i=>i.crmTasks.data.tasksList);const[T,M]=m.useState(""),E=m.useRef(null),P={display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"};m.useEffect(()=>{const i=new Date,z=i.getFullYear(),k=(i.getMonth()+1).toString().padStart(2,"0"),$=i.getDate().toString().padStart(2,"0"),w=i.getHours().toString().padStart(2,"0"),q=i.getMinutes().toString().padStart(2,"0"),O=`${z}-${k}-${$}T${w}:${q}`;j(O),E.current&&E.current.addEventListener("input",B)},[]);const{getModule:I}=ft();m.useEffect(()=>{const i=async()=>{var k,$;try{const{payload:w}=await n(rt()),q=(k=w==null?void 0:w.data)==null?void 0:k.find(O=>(O==null?void 0:O.moduleName)==="tasks");if(M(q.id),l(a==null?void 0:a.module),g(a==null?void 0:a.type),R(a==null?void 0:a.nextDateTime),q){const{payload:O}=await n(ot({id:($=q==null?void 0:q.id)==null?void 0:$.toString()}));N(O==null?void 0:O.data)}}catch(w){console.error("Error fetching module data:",w)}};(async()=>{const k=await I("tasks");await n(wt()),await n(It(k)),await n(ua()),await i()})()},[n]);const B=()=>{E.current.value<x&&(E.current.value=x)};b(i=>{var z,k;return(k=(z=i.crmTasks)==null?void 0:z.data)==null?void 0:k.selectedTask});const ee=b(i=>i.crmTasks.data.drawerMode),D=la(),te=async(i,z)=>{await D.setFieldValue(`tagId_${z}`,i),h(!p)},ae=Wa(),ne=b(i=>i.crmTasks.data.usersList);je.length=0,ne==null||ne.forEach(i=>{je.push({label:`${i==null?void 0:i.firstName} ${i==null?void 0:i.lastName}`,value:i.id})});const ue=i=>{l(i.value),o("module",i==null?void 0:i.value),i!=null&&i.value&&ye[i==null?void 0:i.value][0]&&d&&(D.setFieldValue("type",ye[i==null?void 0:i.value][0]),u(ye[i==null?void 0:i.value][0])),R("")},u=i=>{o("type",i==null?void 0:i.value),g(i.value)},f=b(i=>i.crmTasks.data.leadsList);De.length=0,f==null||f.forEach(i=>{De.push({value:i.id,label:i.title})});const y=async()=>{const i=new Set;V==null||V.forEach(k=>{a&&a[`tagId_${k.id}`]&&a[`tagId_${k.id}`].length&&a[`tagId_${k.id}`].map(w=>w.value).forEach(w=>{i.add(w)})});const z=[...i];await D.setFieldValue("tagId",z)};return m.useMemo(()=>{y()},[p,V]),t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("div",{className:"col-span-1",children:t.jsx(_,{label:"Module",invalid:e.module&&s.module,errorMessage:e.module,children:t.jsx(H,{type:"text",autoComplete:"off",name:"module",placeholder:"Module",component:ge,options:Ze,value:(S=Ze)==null?void 0:S.find(i=>(i==null?void 0:i.value)==(a==null?void 0:a.module)),prefix:t.jsx(Je,{className:"text-xl"}),onChange:ue})})}),t.jsx("div",{className:"col-span-1",children:t.jsx(_,{label:"Type",invalid:e.type&&s.type,errorMessage:e.type,children:t.jsx(H,{type:"text",autoComplete:"off",name:"type",placeholder:"Type",component:ge,options:ye[r]||[],value:(A=ye[r])==null?void 0:A.find(i=>(i==null?void 0:i.value)==(a==null?void 0:a.type)),prefix:t.jsx(Je,{className:"text-xl"}),onChange:u})})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d==="followup"||d==="delivery"||d==="meeting"?t.jsx("div",{className:"col-span-1",children:t.jsx(_,{label:(U=et[d])==null?void 0:U.label,invalid:e.nextDateTime&&s.nextDateTime,errorMessage:e.nextDateTime,children:t.jsx(H,{ref:E,type:"dateTime-local",autoComplete:"off",name:"nextDateTime",placeholder:(L=et[d])==null?void 0:L.placeholder,component:Y,prefix:t.jsx(Ne,{className:"text-xl"}),value:a.nextDateTime,min:x,onChange:i=>{R(i.target.value),o("nextDateTime",i.target.value)}})})}):null,d==="delivery"&&t.jsx("div",{className:"col-span-1",children:t.jsx(_,{label:"Delivery Address",invalid:e.address&&s.address,errorMessage:e.address,children:t.jsx(H,{type:"text",autoComplete:"off",name:"address",placeholder:"Delivery Address",component:Y,prefix:t.jsx(Ne,{className:"text-xl"})})})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("div",{className:"col-span-1",children:t.jsx(_,{label:"Title *",invalid:e.title&&s.title,errorMessage:e.title,children:t.jsx(H,{type:"text",autoComplete:"off",name:"title",placeholder:"Title",component:Y,prefix:t.jsx(qt,{className:"text-xl"})})})}),t.jsx("div",{className:"col-span-1",children:t.jsx(_,{label:"Due Date *",invalid:e.dueDate&&s.dueDate,errorMessage:e.dueDate,children:t.jsx(H,{isDisabled:ee==="Edit",type:"dateTime-local",autoComplete:"off",name:"dueDate",component:Y,prefix:t.jsx(Ne,{className:"text-xl"}),min:x})})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("div",{className:"col-span-1",children:t.jsx(_,{label:"Priority *",invalid:e.priority&&s.priority,errorMessage:e.priority,children:t.jsx(ge,{name:"priority",id:"priority",components:ae,value:tt.find(i=>(i==null?void 0:i.value)===(a==null?void 0:a.priority)),options:tt,onChange:i=>{o("priority",i.value||"")}})})}),t.jsx("div",{className:"col-span-1",children:t.jsx(_,{label:"Assigned To",invalid:e.assignedTo&&s.assignedTo,errorMessage:e.assignedTo,children:t.jsx(ge,{name:"assignedTo",id:"assignedTo",value:je.find(i=>(i==null?void 0:i.value)===(a==null?void 0:a.assignedTo)),options:je,onChange:i=>{o("assignedTo",i.value||"")}})})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.jsx("div",{className:"col-span-1",children:t.jsx(_,{label:"Connected Lead",invalid:e.connectedLead&&s.connectedLead,errorMessage:e.connectedLead,children:t.jsx(ge,{name:"connectedLead",id:"connectedLead",value:De.find(i=>(i==null?void 0:i.value)===(a==null?void 0:a.connectedLead)),options:De,onChange:i=>{o("connectedLead",i.value||"")}})})})}),t.jsx(_,{label:"Notes",invalid:e.descriptions&&s.descriptions,errorMessage:e.descriptions,children:t.jsx(H,{textArea:!0,type:"text",autoComplete:"off",name:"descriptions",placeholder:"Notes",component:Y,prefix:t.jsx(We,{className:"text-xl"})})}),t.jsx(pa,{data:V,handleTagChange:te}),(v==null?void 0:v.length)>0?t.jsxs(t.Fragment,{children:[t.jsx(ma,{title:"Additional Details",desc:"",className:"mb-2"}),t.jsx("div",{style:P,children:v==null?void 0:v.map(i=>t.jsx("div",{children:t.jsx(_,{label:i==null?void 0:i.label,children:i.inputType==="textArea"?t.jsx(H,{textArea:!0,type:"text",autoComplete:"off",name:i.name,placeholder:i==null?void 0:i.label,defaultValue:i.defaultValue,component:Y,prefix:t.jsx(at,{className:"text-xl"})}):t.jsx(H,{type:i.inputType,autoComplete:"off",name:i.name,placeholder:i==null?void 0:i.label,defaultValue:i.defaultValue,component:Y,prefix:t.jsx(at,{className:"text-xl"})})})},i.id))})]}):null]})},Ya=Ie().shape({title:F().required("Title is Required"),module:F(),type:F(),tagId:ut(),connectedLead:F(),descriptions:F(),priority:F().oneOf(["none","low","medium","high"]).required("Priority is required"),nextDateTime:F().test("date-required","Date is required",function(c){const s=this.parent.type;return!((s==="followup"||s==="delivery"||s==="meeting")&&!c)})}),Ga=Ie().shape({module:F(),type:F(),nextDateTime:F().test("date-required","Date is required",function(c){const s=this.parent.type;return!((s==="followup"||s==="delivery"||s==="meeting")&&!c)}),address:F().test("Address is Require","Delivery Address is Require",function(c){return!(this.parent.type==="delivery"&&!c)}),title:F().required("Title is required"),dueDate:F().required("Due Date is required"),tagId:ut(),connectedLead:F(),descriptions:F(),assignedTo:F().test("is-valid-user","Invalid user selected",function(c){return this.parent.assignedTo&&this.parent.assignedTo.length>0?!!je.find(s=>s.value==c):!0}),priority:F().oneOf(["none","low","medium","high"]).required("Priority is required")}),{TabNav:Ba,TabList:Ka,TabContent:Qa}=lt,Ke=m.forwardRef((c,s)=>{var j,C,R,V,N;const e=b(p=>{var h,v;return(v=(h=p.crmTasks)==null?void 0:h.data)==null?void 0:v.selectedTask}),o=b(p=>{var h;return(h=p.crmTasks.data.customField)==null?void 0:h.data}),a=b(p=>p.crmTasks.data.drawerMode),n=G();(j=e==null?void 0:e.tags)==null||j.reduce((p,h)=>(p[`tagId_${h.id}`]=[],p),{});const r=m.useMemo(()=>{var p;return(p=e==null?void 0:e.tags)==null?void 0:p.reduce((h,v)=>{const T=v.tagCategoryId;return h[`tagId_${T}`]||(h[`tagId_${T}`]=[]),h[`tagId_${T}`].push({label:v.tagName,value:v.id}),h},{})},[e.tags]);function l(p){if(!p)return"";const h=p.split("T");if(h.length!==2)return"";const v=h[0],T=h[1].slice(0,5);return`${v}T${T}`}const d=p=>{const h=new Date(p);if(isNaN(h.getTime()))return"";const v=h.getFullYear(),T=(h.getMonth()+1).toString().padStart(2,"0"),M=h.getDate().toString().padStart(2,"0"),E=h.getHours().toString().padStart(2,"0"),P=h.getMinutes().toString().padStart(2,"0");return`${v}-${T}-${M} ${E}:${P}`},g=async(p,h)=>{var ue,u,f,y,S,A,U;const{colorName:v,tagName:T,dueDate:M,nextDateTime:E,...P}=p,I=o.reduce((L,i)=>(L[i.name]=p[i.name],L),{}),B=d(M),ee=d(E);let D,te,ae;if(a==="Add")D=await n(Vt({dueDate:B,nextDateTime:ee,...P,...I,tagId:p==null?void 0:p.tagId,...r})),te="Successfully Added",ae="Something went wrong !!!",(ue=D==null?void 0:D.payload)!=null&&ue.success&&n(Me());else{const L={...P,tagId:p==null?void 0:p.tagId,...r};ee&&(L.nextDateTime=ee),D=await n(Se({taskId:e==null?void 0:e.id,data:L})),te="Successfully Updated",ae="Something went wrong !!!",(u=D==null?void 0:D.payload)!=null&&u.success&&n(Me())}const ne=(f=D==null?void 0:D.payload)!=null&&f.success?"success":"danger";ce.push(t.jsx(de,{title:(y=D==null?void 0:D.payload)!=null&&y.success?te:ae,type:ne,duration:2500,children:(S=D==null?void 0:D.payload)!=null&&S.success?(A=D==null?void 0:D.payload)==null?void 0:A.message:(U=D==null?void 0:D.error)==null?void 0:U.message}),{placement:"top-end"}),await n(J()),await n(be()),h(!1)},x=m.useMemo(()=>o==null?void 0:o.reduce((h,v)=>{var M;const T=(M=e==null?void 0:e.taskFields)==null?void 0:M.find(E=>(E==null?void 0:E.name)===(v==null?void 0:v.name));return h[v==null?void 0:v.name]=T?T==null?void 0:T.value:v!=null&&v.defaultValue?v==null?void 0:v.defaultValue:"",h},{}),[o]);return t.jsx(He,{innerRef:s,initialValues:{module:(e==null?void 0:e.module)||"",type:(e==null?void 0:e.type)||"",nextDateTime:l(e==null?void 0:e.nextDateTime)||"",title:(e==null?void 0:e.title)||"",address:(e==null?void 0:e.address)||"",connectedLead:(e==null?void 0:e.connectedLead)||"",dueDate:l(e==null?void 0:e.dueDate)||"",descriptions:(e==null?void 0:e.descriptions)||"",tagId:((C=e==null?void 0:e.tags)==null?void 0:C.map(p=>({label:p.tagName,value:p.id})))||[],tagName:((V=(R=e==null?void 0:e.tags)==null?void 0:R[0])==null?void 0:V.tagName)||"",priority:(e==null?void 0:e.priority)||"",assignedTo:((N=e==null?void 0:e.assignedToData)==null?void 0:N.id)||"",colorName:e!=null&&e.tags&&(e==null?void 0:e.tags.length)>0?e==null?void 0:e.tags[0].colorName:"",...x,...r},validationSchema:a==="Edit"?Ya:Ga,onSubmit:async(p,{setSubmitting:h})=>{await g(p,h)},children:({touched:p,errors:h,setFieldValue:v,values:T})=>t.jsx(Ye,{children:t.jsx(ze,{children:t.jsxs(lt,{defaultValue:"taskDetails",children:[t.jsx(Ka,{children:t.jsx(Ba,{value:"taskDetails",children:"Tasks details"})}),t.jsx("div",{className:"p-6",children:t.jsx(Qa,{value:"taskDetails",children:t.jsx(Ha,{touched:p,errors:h,values:T,setFieldValue:v})})})]})})})})});Ke.displayName="TasksForm";const St=m.forwardRef((c,s)=>{const e=G(),o=b(l=>{var d,g;return(g=(d=l.crmTasks)==null?void 0:d.data)==null?void 0:g.selectedTask}),a=b(l=>l.crmTasks.data.tasksList),{id:n}=o,r=l=>{const{name:d,birthday:g,email:x,img:j,location:C,title:R,phoneNumber:V,facebook:N,twitter:p,pinterest:h,linkedIn:v}=l,T={name:d,email:x,img:j},M={location:C,title:R,birthday:Ct(g).format("DD/MM/YYYY"),phoneNumber:V,facebook:N,twitter:p,pinterest:h,linkedIn:v};let E=Te(a),P={};E=E.map(I=>(I.id===n&&(I={...I,...T},I.personalInfo={...I.personalInfo,...M},P=I),I)),oa(P)||e(Se(P)),e(Me()),e(At(E))};return t.jsx(Ke,{ref:s,tasks:o,onFormSubmit:r})});St.displayName="TasksEditContent";const Xa=({onSaveClick:c,onCancel:s})=>t.jsxs("div",{className:"text-right w-full",children:[t.jsx(le,{size:"sm",className:"mr-2",onClick:s,children:"Cancel"}),t.jsx(le,{size:"sm",variant:"solid",onClick:c,children:"Save"})]}),Ja=()=>{const c=G(),s=b(d=>d.crmTasks.data.drawerOpen);b(d=>d.crmTasks.data.drawerMode),b(d=>{var g,x;return(x=(g=d.crmTasks)==null?void 0:g.data)==null?void 0:x.selectedTask});const[e,o]=m.useState(window.innerWidth/2),a=()=>{c(Me()),c(re({}))},n=m.useRef(null),r=async()=>{var d;(d=n.current)==null||d.submitForm()};m.useEffect(()=>(window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}),[]);const l=()=>{o(window.innerWidth/2)};return t.jsx(Kt,{isOpen:s,closable:!1,bodyClass:"p-0",width:e,footer:t.jsx(Xa,{onCancel:a,onSaveClick:r}),onClose:a,onRequestClose:a,children:t.jsx(St,{ref:n})})},Za=()=>{const c=G(),s=b(u=>u.crmTasks.data.displayedTasksList),[e,o]=m.useState([]),[a,n]=m.useState([]),r=b(u=>u.crmTasks.data.loading),l=b(u=>{var f,y;return(y=(f=u==null?void 0:u.crmLeads)==null?void 0:f.data)==null?void 0:y.isDialogOpen});b(u=>u.crmTasks.data.filterData);const d=b(u=>u.crmTasks.data.tableData),g=ke("tasks","canDelete"),x=ke("tasks","canModify"),j=ke("tasks","canView"),C=Et(),{getModule:R}=ft(),[V,N]=m.useState(null);m.useEffect(()=>{c(Ft(V))},[V]);const[p,h]=m.useState("");m.useEffect(()=>{(async()=>{var f;try{const y=await R("tasks"),S=await c(Rt(y));n((f=S==null?void 0:S.payload)==null?void 0:f.data)}catch(y){console.error("Error fetching module data:",y)}})()},[]);const{pageIndex:v,pageSize:T,sort:M,query:E,total:P}=b(u=>u.crmTasks.data.tableData),I=m.useCallback(()=>{ee(),c(J())},[c]);m.useEffect(()=>(I(),()=>{window.location.pathname.includes("task")||c(he({...d,query:""}))}),[I]);const B=m.useMemo(()=>({pageIndex:v,pageSize:T,sort:M,query:E,total:P}),[v,T,M,E,P]),ee=async()=>{var u,f;try{const{payload:y}=await c(rt()),S=(u=y==null?void 0:y.data)==null?void 0:u.find(A=>(A==null?void 0:A.moduleName)==="tasks");if(S){const{payload:A}=await c(ot({id:(f=S==null?void 0:S.id)==null?void 0:f.toString()}));o(A==null?void 0:A.data)}}catch(y){console.error("Error fetching module data:",y)}},D=({row:u})=>{const f=G();aa();const y=()=>{f(st()),f(re(u)),f(it("Edit"))},S=()=>{var k;N((k=u==null?void 0:u.taskStatus)==null?void 0:k.id)},A=async()=>{await f(re(u)),f($e(!0))},U=async()=>{await f(re(u));const k=`/app/crm/task-details/${u.id}`;C(k)},L=async k=>{var O,W,me;const $={completionStatus:k},w=await f(Se({taskId:u==null?void 0:u.id,data:$})),q=(O=w==null?void 0:w.payload)!=null&&O.success?{title:"Successfully Updated",type:"success",message:(W=w==null?void 0:w.payload)==null?void 0:W.message}:{title:"Something Went Wrong !!!",type:"danger",message:(me=w==null?void 0:w.error)==null?void 0:me.message};ce.push(t.jsx(de,{title:q.title,type:q==null?void 0:q.type,duration:2500,children:q.message}),{placement:"top-end"}),await f(J())},i=async()=>{if(u!=null&&u.type)switch(await f(re(u)),u==null?void 0:u.type){case"followup":f(Le(!0));break;case"quotation":f(Pe(!0));break;default:L("completed");break}else L("completed")},z=async(k,$)=>{var w,q,O;if(($==null?void 0:$.statusName)==="completed")h($==null?void 0:$.id),f(re(k)),f(Xe(!0));else{const W=await f(Lt({taskId:k==null?void 0:k.id,updatedData:{completionStatus:$==null?void 0:$.id}}));let me="",Ve="",Qe="danger";(w=W==null?void 0:W.payload)!=null&&w.success?(me="Successfully Added",Ve=(q=W==null?void 0:W.payload)==null?void 0:q.message,Qe="success"):(me="Something went wrong !!!",Ve=(O=W==null?void 0:W.error)==null?void 0:O.message),ce.push(t.jsx(de,{title:me,type:Qe,duration:2500,children:Ve}),{placement:"top-end"})}await f(J())};return t.jsxs("div",{className:"flex text-base items-center",onClick:S,children:[x&&a&&t.jsx(fa,{statusList:a,module:"tasks",row:u,orgStatus:u==null?void 0:u.taskStatus,handleStatusChange:z}),x&&t.jsx("button",{disabled:(u==null?void 0:u.completionStatus)==="completed",className:`cursor-pointer circle items-center ${(u==null?void 0:u.completionStatus)==="completed"?"!cursor-not-allowed":"cursor-pointer hover:text-indigo-500"}`,onClick:y,children:t.jsx(Ot,{})}),g&&t.jsx("span",{className:"cursor-pointer hover:text-red-500 circle  mx-1 items-center",onClick:A,children:t.jsx(_t,{})}),j&&t.jsx("span",{className:"cursor-pointer  hover:text-green-500 circle items-center text-lg",onClick:U,children:t.jsx(sa,{})}),x&&t.jsx(Ae,{title:"Move To In Progress",children:t.jsx("button",{disabled:(u==null?void 0:u.completionStatus)!=="pending",className:`cursor-pointer mx-1 circle items-center ${(u==null?void 0:u.completionStatus)!=="pending"?"!cursor-not-allowed":"cursor-pointer hover:text-amber-500"}`,onClick:()=>L("inProgress"),children:t.jsx(ra,{})})},u.id+"inprogress"),x&&t.jsx(Ae,{title:"Move To Complete",children:t.jsx("button",{disabled:(u==null?void 0:u.completionStatus)==="completed",className:`cursor-pointer circle items-center ${(u==null?void 0:u.completionStatus)==="completed"?"!cursor-not-allowed":"cursor-pointer hover:text-emerald-500"}`,onClick:i,children:t.jsx(ia,{})})},u.id+"complete")]})},te=m.useMemo(()=>{const u=[{header:"Action",id:"action",cell:f=>t.jsx(D,{row:f.row.original})},{header:"Title",accessorKey:"title",cell:f=>{const y=f.row.original.title;return t.jsx(Ae,{title:y,children:t.jsx(Fe,{text:y,maxLength:20})},y)}},{header:"Due Date",accessorKey:"dueDate",cell:f=>{var y;return na((y=f.row.original)==null?void 0:y.dueDate).format("DD MMMM YYYY")}},{header:"priority",accessorKey:"priority",cell:f=>{const y=f.row.original.priority;return t.jsx(ea,{status:y})}},{header:"module",accessorKey:"module",cell:f=>{var S;const y=(S=f.row.original)==null?void 0:S.module;return y?t.jsx(Fe,{text:y,maxLength:20}):"-"}},{header:"type",accessorKey:"type",cell:f=>{var S;const y=(S=f.row.original)==null?void 0:S.type;return y?t.jsx(Fe,{text:y,maxLength:20}):"-"}},{header:"Assigned to",accessorKey:"assignedTo",cell:f=>{const{firstName:y,lastName:S}=f.row.original.assignedToData||{};return y&&S?`${y} ${S}`:"-"}},{header:"Connected lead",accessorKey:"connectedLead",cell:f=>{var S;const y=f.row.original||{};return y!=null&&y.leadModel?`${(S=y==null?void 0:y.leadModel)==null?void 0:S.title}`:"-"}},{header:"Status",accessorKey:"status",cell:f=>{var A,U,L;const y=f.row.original,S={backgroundColor:`${((A=y==null?void 0:y.taskStatus)==null?void 0:A.colorCode)||"red"}10`};return t.jsx(t.Fragment,{children:t.jsx(Jt,{style:S,className:"border-0 rounded",children:t.jsx("p",{style:{color:((U=y==null?void 0:y.taskStatus)==null?void 0:U.colorCode)||"red"},children:(L=y==null?void 0:y.taskStatus)==null?void 0:L.statusName})})})}}];return e.map((f,y)=>{const S={header:f.categoryName,id:f.id,accessorKey:"tagCategory.categoryName",cell:A=>{var L;const U=(L=A.row.original.tags)==null?void 0:L.filter(i=>(i==null?void 0:i.tagCategoryId)===f.id);return U&&U.length?t.jsx(ta,{tags:U}):"-"}};u.splice(y+5,0,S)}),u},[x,g,e]),ae=u=>{const f=Te(B);f.pageIndex=u,c(he(f))},ne=u=>{const f=Te(B);f.pageSize=Number(u),f.pageIndex=1,c(he(f))},ue=u=>{const f=Te(B);f.sort=u,c(he(f))};return t.jsxs("div",{children:[t.jsx(Yt,{columns:te,data:s,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},loading:r,pagingData:{total:B.total,pageIndex:B.pageIndex,pageSize:B.pageSize},onPaginationChange:ae,onSelectChange:ne,onSort:ue}),t.jsx(Ja,{}),t.jsx(gt,{}),t.jsx(xt,{}),t.jsx(ya,{}),t.jsxs(Ue,{isOpen:l,onClose:()=>c(Xe(!1)),children:[t.jsx("h5",{className:"mb-4",children:"Enter Reason"}),t.jsx(Ke,{id:p})]})]})},Re=c=>{const{icon:s,avatarClass:e,label:o,value:a,growthRate:n,loading:r}=c,l=55;return t.jsx(Bt,{bordered:!0,children:t.jsx(Dt,{loading:r,customLoader:t.jsx(ha,{avatarProps:{className:"rounded",width:l,height:l}}),children:t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(Gt,{className:e,size:l,icon:s}),t.jsxs("div",{children:[t.jsx("span",{children:o}),t.jsx("h3",{children:t.jsx(xa,{thousandSeparator:!0,displayType:"text",value:a})})]})]})})})})},en=()=>{const c=G(),s=b(o=>o.crmTasks.data.statisticData),e=b(o=>o.crmTasks.data.statisticLoading);return m.useEffect(()=>{c(be())},[]),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 mb-6",children:[t.jsx(Re,{icon:t.jsx(Ut,{}),avatarClass:"!bg-indigo-600",label:"Total Tasks",value:s==null?void 0:s.totalTasks,loading:e}),t.jsx(Re,{icon:t.jsx(zt,{}),avatarClass:"!bg-blue-500",label:"Completed Tasks",value:s==null?void 0:s.completedTasks,loading:e}),t.jsx(Re,{icon:t.jsx(Wt,{}),avatarClass:"!bg-emerald-500",label:"This Week's New Tasks",value:s==null?void 0:s.newTasks,loading:e})]})};Nt("crmTasks",Pt);const tn=()=>t.jsxs(t.Fragment,{children:[t.jsx(en,{}),t.jsxs(kt,{bodyClass:"h-full",children:[t.jsx(ga,{}),t.jsx(Za,{})]})]}),Zs=tn;export{Zs as default};
