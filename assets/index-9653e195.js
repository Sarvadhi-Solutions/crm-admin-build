import{a as L,j as e,r as C,ap as ce,aq as le}from"./index-d1f55000.js";import{A as de}from"./AdaptableCard-ab6c1eb8.js";import{F as K}from"./FormDesription-7a3deeb5.js";import{D as me}from"./DataTable-6737e455.js";import{T as pe}from"./TagsList-7225eb34.js";import{T as R}from"./TextTruncate-b56f7760.js";import{u as Z}from"./checkEditUpdate-39f4f887.js";import{u as ue}from"./useThemeClass-29fe42de.js";import{c as P}from"./cloneDeep-94f873f1.js";import{N as xe,O as he,P as ge,b as fe}from"./index.esm-a7f57555.js";import{u as j,t as V,d as Ce,g as H,a as Y,b as je,c as Ne,e as be,f as ye,h as ve,i as we,j as Ie,k as ee,l as Se,m as De,n as te,s as B,o as O,p as ae,r as Te}from"./index-15fd7d39.js";import{t as _,N as G}from"./toast-4a408eff.js";import{C as Fe}from"./ConfirmDialog-de2c7ae2.js";import{B as U}from"./Button-d10f25dd.js";import{D as Ae}from"./Drawer-0c18a381.js";import{a as y,F as Me}from"./FormItem-4075ccd4.js";import{T as se}from"./index-fdd0fce8.js";import{u as ze,b as S,F as Ee,a as Le}from"./formik.esm-70843db0.js";import{c as ke,a as I,e as qe}from"./index.esm-fc3e89e2.js";import{I as T}from"./Input-40502faa.js";/* empty css              */import{T as Re,e as Oe}from"./index.esm-2bfefe62.js";import"./Alert-bc2bbe67.js";import"./index-ac5acc09.js";import"./Badge-2e560773.js";import"./RangeCalendar-d43d05d7.js";import"./Card-b6647cdf.js";import"./index-b157f735.js";import"./index-2f8e95cb.js";import"./Dialog-012b8945.js";import"./index-d072efef.js";import"./toString-7b4f9ac7.js";import"./index-6b0c2b51.js";import"./index-7c8f45e7.js";import"./index-a10acbe3.js";import"./Pagination-ee6d6f94.js";import"./Progress-f11fb579.js";import"./index-0f803cf5.js";import"./ScrollBar-d7d05f7c.js";import"./index-ce20e2d5.js";import{S as $}from"./Select-9e04c31f.js";import"./Skeleton-046fff23.js";import"./index-073298ad.js";import"./Switcher-ffa768b6.js";import"./index-354e9a00.js";import"./Tag-68df4337.js";import"./index-2efca1fd.js";import"./index-8e63d0e1.js";import{T as W}from"./Tooltip-e416896b.js";import"./Upload-6df85b8e.js";import{t as $e}from"./tagAndCategory-228f57e7.js";import{B as Ke}from"./index.esm-5a580c59.js";import{F as Be}from"./index.esm-5c3c1ac6.js";import{F as J}from"./index.esm-2eb75053.js";import{G as Q}from"./index.esm-466fde38.js";import{M as We}from"./index.esm-ca9eb9a7.js";import{C as Ze}from"./react-select-creatable.esm-3da66ecc.js";import{B as X}from"./index.esm-d41773c8.js";import{a as Pe}from"./index.esm-d0a6da84.js";import{d as He}from"./debounce-675f126f.js";import"./index-56369f77.js";import"./_MapCache-cbdf92c8.js";import"./Views-27dec28c.js";import"./_getPrototype-30a92b72.js";import"./CrmService-3f0fa95f.js";import"./useTimeout-8ae64f40.js";import"./CloseButton-865c8503.js";import"./StatusIcon-e78efbe0.js";import"./chainedFunction-070f832c.js";import"./index-e8290e1f.js";import"./index-5744fde1.js";import"./useControllableState-2d8f7630.js";import"./isNil-a1b43ef7.js";import"./get-3fbe7aa4.js";import"./useMergeRef-788c4cb0.js";import"./_baseIsEqual-cd9e2cb0.js";import"./useRootClose-0334f01a.js";import"./usePopper-e4ac4eb1.js";import"./TimeInput-75c92f6e.js";import"./useUniqueId-68699ef9.js";import"./useDidUpdate-f8015a0a.js";import"./useUncertainRef-b4892a52.js";import"./slicedToArray-db6cc43d.js";import"./objectWithoutProperties-8809bfcf.js";import"./toConsumableArray-9938cdfc.js";import"./floating-ui.dom-bef9cea3.js";import"./mapCloneElement-52c7d464.js";import"./index.esm-7beb0e22.js";const Ve=()=>{const o=L(),n=j(d=>d.crmContact.data.deleteConfirmation),t=j(d=>d.crmContact.data.selectedContact),l=()=>{o(V(!1))},m=async()=>{var c,h,f;o(V(!1));const d=await o(Ce(t==null?void 0:t.id));(c=d==null?void 0:d.payload)!=null&&c.success?_.push(e.jsx(G,{title:"Successfuly Deleted",type:"success",duration:2500,children:(h=d==null?void 0:d.payload)==null?void 0:h.message}),{placement:"top-end"}):_.push(e.jsx(G,{title:"Something Went Wrong !!!",type:"danger",duration:2500,children:(f=d==null?void 0:d.error)==null?void 0:f.message}),{placement:"top-end"}),await o(H()),await o(Y())};return e.jsx(Fe,{isOpen:n,type:"danger",title:"Delete Contact",confirmButtonColor:"red-600",onClose:l,onRequestClose:l,onCancel:l,onConfirm:m,children:e.jsx("p",{children:"Are you sure you want to delete this Contact? All record related to this contact will be deleted as well. This action cannot be undone."})})},_e=o=>{const{touched:n,errors:t,values:l,setFieldValue:m,customFieldData:d}=o,c=L(),[h,f]=C.useState([]),[v,F]=C.useState(null),w=j(a=>{var s;return(s=a.crmContact.data)==null?void 0:s.customField});console.log("customField",w),j(a=>a.crmContact.data.contactList);const u=j(a=>a.crmContact.data.companyList),g=j(a=>a.crmContact.data.sources),p=j(a=>a.crmContact.data.states);j(a=>a.crmContact.data.cities);const D=C.useMemo(()=>u==null?void 0:u.map(a=>({value:a.id,label:a.companyName})),[u]),A=C.useMemo(()=>p==null?void 0:p.map(a=>({value:a.id,label:a.stateName})),[p]),M=C.useMemo(()=>{var s;const a=p==null?void 0:p.find(N=>N.id===l.stateId);return((s=a==null?void 0:a.cities)==null?void 0:s.map(N=>({value:N.id,label:N.cityName})))||[]},[p,v]),k=C.useMemo(()=>g==null?void 0:g.map(s=>({label:s.sources,value:s.id})),[g]),q={display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"};C.useEffect(()=>{(async()=>{var s,N;try{const{payload:b}=await c(ve()),z=(s=b==null?void 0:b.data)==null?void 0:s.find(E=>(E==null?void 0:E.moduleName)==="contacts");if(z){const{payload:E}=await c(we({id:(N=z==null?void 0:z.id)==null?void 0:N.toString()})),ie=$e(E==null?void 0:E.data);f(ie)}}catch(b){console.error("Error fetching module data:",b)}})(),c(je()),c(Ne()),c(be()),c(ye())},[c]);const x=ze(),r=a=>{x.setFieldValue("tagId",a)},i=async(a,s)=>{const N={sources:a==null?void 0:a.label};switch(s.action){case"create-option":await c(Ie(N)),await c(ee());break;case"select-option":m("sourceId",a);break;case"clear":m("sourceId",null);break}};return e.jsxs(e.Fragment,{children:[e.jsx(K,{title:"Contact Basic Information",desc:"",className:"mb-2"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(y,{label:"First Name *",invalid:t.firstName&&n.firstName,errorMessage:t.firstName,children:e.jsx(S,{type:"text",autoComplete:"off",name:"firstName",placeholder:"First Name",component:T,prefix:e.jsx(J,{className:"text-xl"})})})}),e.jsx("div",{className:"col-span-1",children:e.jsx(y,{label:"Last Name *",invalid:t.lastName&&n.lastName,errorMessage:t.lastName,children:e.jsx(S,{type:"text",autoComplete:"off",name:"lastName",placeholder:"Last Name",component:T,prefix:e.jsx(J,{className:"text-xl"})})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(y,{label:"Email *",invalid:t.email&&n.email,errorMessage:t.email,children:e.jsx(S,{type:"text",autoComplete:"off",name:"email",placeholder:"Email",component:T,prefix:e.jsx(xe,{className:"text-xl"})})})}),e.jsx("div",{className:"col-span-1",children:e.jsx(y,{label:"Contact Number *",invalid:t.contactNumber&&n.contactNumber,errorMessage:t.contactNumber,children:e.jsx(S,{type:"tel",autoComplete:"off",name:"contactNumber",placeholder:"Contact Number",component:T,prefix:e.jsx(Ke,{className:"text-xl"})})})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsx("div",{className:"col-span-1",children:e.jsx(y,{label:"Title",invalid:t.title&&n.title,errorMessage:t.title,children:e.jsx(S,{type:"text",autoComplete:"off",name:"title",placeholder:"Title",component:T,prefix:e.jsx(We,{className:"text-xl"})})})})}),e.jsx(y,{label:"Notes",invalid:t.description&&n.description,errorMessage:t.description,children:e.jsx(S,{textArea:!0,type:"text",autoComplete:"off",name:"description",placeholder:"Notes",component:T,prefix:e.jsx(Re,{className:"text-xl"})})}),e.jsx(K,{title:"Address",desc:"",className:"mb-2"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(y,{label:"Address",invalid:t.address&&n.address,errorMessage:t.address,children:e.jsx(S,{type:"text",autoComplete:"off",name:"address",placeholder:"Address",component:T,prefix:e.jsx(Be,{className:"text-xl"})})})}),e.jsx("div",{className:"col-span-1",children:e.jsx("div",{className:"col-span-1",children:e.jsx(y,{label:"State",invalid:t.stateId&&n.stateId,errorMessage:t.stateId,children:e.jsx($,{name:"stateId",placeholder:"Select State",options:A,id:"stateId",value:A==null?void 0:A.find(a=>(a==null?void 0:a.value)==(l==null?void 0:l.stateId)),onChange:a=>{const s=a.value;l.stateId!==s&&m("cityId",""),m("stateId",s||""),F(s)}})})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx("div",{className:"col-span-1",children:e.jsx(y,{label:"City",invalid:t.cityId&&n.cityId,errorMessage:t.cityId,children:e.jsx($,{name:"cityId",placeholder:"Select City",options:M,id:"cityId",value:(M==null?void 0:M.find(a=>(a==null?void 0:a.value)===(l==null?void 0:l.cityId)))||{value:"",label:"Select City"},onChange:a=>{const s=a.value;s!==l.cityId&&m("cityId",s||"")}})})})}),e.jsx("div",{className:"col-span-1",children:e.jsx("div",{style:{position:"relative"},children:e.jsx("div",{className:"col-span-1",children:e.jsx(y,{label:"ZipCode",invalid:t.zipcode&&n.zipcode,errorMessage:t.zipcode,children:e.jsx(S,{type:"text",autoComplete:"off",name:"zipcode",placeholder:"ZipCode",component:T,prefix:e.jsx(Oe,{className:"text-xl"})})})})})})]}),e.jsx(K,{title:"Contact Others Details",desc:"",className:"mb-2"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(y,{label:"Company Name",invalid:t.companiesId&&n.companiesId,errorMessage:t.companiesId,children:e.jsx($,{name:"companiesId",placeholder:"Company Name",options:D,id:"companiesId",value:D==null?void 0:D.find(a=>(a==null?void 0:a.value)==(l==null?void 0:l.companiesId)),onChange:a=>{const s=a.value;m("companiesId",s||"")}})})}),e.jsx("div",{className:"col-span-1",children:e.jsx(y,{label:"Source",invalid:t.source&&n.source,errorMessage:t.source,children:e.jsx(S,{isClearable:!0,type:"text",autoComplete:"off",name:"sourceId",placeholder:"Source",component:$,componentAs:Ze,options:k,prefix:e.jsx(Q,{className:"text-xl"}),onChange:i})})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsx("div",{className:"col-span-1",children:e.jsx(y,{label:"Tag",children:e.jsx(S,{isClearable:!0,isMulti:!0,type:"text",autoComplete:"off",name:"tagId",placeholder:"Select tags",component:$,options:h,prefix:e.jsx(Q,{className:"text-xl"}),closeMenuOnSelect:!1,onChange:r})})})}),(w==null?void 0:w.length)>0?e.jsxs(e.Fragment,{children:[e.jsx(K,{title:"Additional Details",desc:"",className:"mb-2"}),e.jsx("div",{style:q,children:w==null?void 0:w.map(a=>e.jsx("div",{children:e.jsx(y,{label:a==null?void 0:a.label,children:a.inputType==="textArea"?e.jsx(S,{textArea:!0,type:"text",autoComplete:"off",name:a.name,placeholder:a==null?void 0:a.label,defaultValue:a==null?void 0:a.defaultValue,component:T,prefix:e.jsx(X,{className:"text-xl"})}):e.jsx(S,{type:a.inputType,autoComplete:"off",name:a.name,placeholder:a==null?void 0:a.label,defaultValue:a==null?void 0:a.defaultValue,component:T,prefix:e.jsx(X,{className:"text-xl"})})})},a.id))})]}):null]})},Ge=ke().shape({firstName:I().required("First Name is required"),lastName:I().required("Last Name is required"),title:I(),contactNumber:I().typeError("Contact must be a number").required("Contact is required").test("is-number","Contact must be a number",o=>!isNaN(o)).test("is-ten-digits","Contact must be exactly 10 digits",o=>{if(o){const n=Number(o);return/^\d{10}$/.test(n.toString())}return!0}).test("is-ten-digits","Contact number cannot start with 0",o=>o?!o.startsWith("0"):!0),email:I().matches(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i,"Invalid email").required("Email is required"),address:I(),stateId:I(),cityId:I(),zipcode:I().test("is-number","ZipCode must be a number",o=>!(o&&isNaN(Number(o)))).test("is-six-digits","ZipCode must be exactly 6 digits",o=>!(o&&o.length!==6)),companiesId:I().nullable(),companyName:I(),source:I().nullable(),description:I(),tagId:qe()}),{TabNav:Ue,TabList:Je,TabContent:Qe}=se,oe=C.forwardRef((o,n)=>{var h,f,v,F,w;const t=j(u=>{var g,p;return(p=(g=u.crmContact)==null?void 0:g.data)==null?void 0:p.selectedContact}),l=j(u=>{var g,p;return(p=(g=u.crmContact)==null?void 0:g.data)==null?void 0:p.sources}),m=C.useMemo(()=>l.map(g=>({label:g.sources,value:g.id})),[l]),d=!!t.id,c=L();return e.jsx(Ee,{innerRef:n,initialValues:{firstName:(t==null?void 0:t.firstName)||"",lastName:(t==null?void 0:t.lastName)||"",title:(t==null?void 0:t.title)||"",email:(t==null?void 0:t.email)||"",contactNumber:(t==null?void 0:t.contactNumber)||"",description:(t==null?void 0:t.description)||"",companyName:((h=t==null?void 0:t.company)==null?void 0:h.companyName)||"",sourceId:t!=null&&t.sourceId?m.find(u=>u.value===(t==null?void 0:t.sourceId)):null,address:(t==null?void 0:t.address)||"",stateId:(t==null?void 0:t.stateId)||"",cityId:(t==null?void 0:t.cityId)||"",zipcode:(t==null?void 0:t.zipcode)||"",tagName:((v=(f=t==null?void 0:t.tags)==null?void 0:f[0])==null?void 0:v.tagName)||"",tagId:((F=t==null?void 0:t.tags)==null?void 0:F.map(u=>({label:u.tagName,value:u.id})))||[],companiesId:(t==null?void 0:t.companiesId)||"",...(w=t==null?void 0:t.contactFields)==null?void 0:w.reduce((u,g)=>(u[g.customKey.name]=g.value||"",u),{})},validationSchema:Ge,onSubmit:async(u,{setSubmitting:g})=>{var p,D,A,M,k,q,x;try{const{tagName:r,...i}=u;console.log({values:u});const a={...i,sourceId:(p=i==null?void 0:i.sourceId)==null?void 0:p.value,tagId:i==null?void 0:i.tagId.map(E=>E.value)};console.log({payload:a});const s=d?await c(Se({contactId:(t==null?void 0:t.id)||"",updatedData:a})):await c(De(a)),N=(D=s==null?void 0:s.payload)!=null&&D.success?"Successfully Added":"Something went wrong !!!",b=(A=s==null?void 0:s.payload)!=null&&A.success?"success":"danger",z=(M=s==null?void 0:s.payload)!=null&&M.success?(k=s==null?void 0:s.payload)==null?void 0:k.message:(q=s==null?void 0:s.error)==null?void 0:q.message;_.push(e.jsx(G,{title:N,type:b,duration:2500,children:z}),{placement:"top-end"}),(x=s==null?void 0:s.payload)!=null&&x.success&&c(te()),await c(H()),await c(Y())}catch(r){console.error(r)}finally{g(!1)}},children:({touched:u,errors:g,values:p,setFieldValue:D})=>e.jsx(Le,{children:e.jsx(Me,{children:e.jsxs(se,{defaultValue:"personalInfo",children:[e.jsx(Je,{children:e.jsx(Ue,{value:"personalInfo",children:"Contact Details"})}),e.jsx("div",{className:"p-6",children:e.jsx(Qe,{value:"personalInfo",children:e.jsx(_e,{touched:u,errors:g,values:p,setFieldValue:D})})})]})})})})});oe.displayName="ContactForm";const re=C.forwardRef((o,n)=>{L();const t=j(m=>{var d,c;return(c=(d=m.crmContact)==null?void 0:d.data)==null?void 0:c.selectedContact});j(m=>m.crmContact.data.contactList);const l=async m=>{};return e.jsx(oe,{ref:n,contact:t,onFormSubmit:l})});re.displayName="ContactEditContent";const Xe=({onSaveClick:o,onCancel:n})=>e.jsxs("div",{className:"text-right w-full",children:[e.jsx(U,{size:"sm",className:"mr-2",onClick:n,children:"Cancel"}),e.jsx(U,{size:"sm",variant:"solid",onClick:o,children:"Save"})]}),Ye=()=>{const o=L(),[n,t]=C.useState(window.innerWidth/2),l=j(f=>{var v,F;return(F=(v=f.crmContact)==null?void 0:v.data)==null?void 0:F.drawerOpen}),m=()=>{o(te()),o(B({}))},d=C.useRef(null),c=()=>{var f,v;console.log("formSubmit function called",(f=d.current)==null?void 0:f.values),(v=d.current)==null||v.submitForm()},h=()=>{t(window.innerWidth/2)};return C.useEffect(()=>(window.addEventListener("resize",h),()=>{window.removeEventListener("resize",h)}),[]),e.jsx(Ae,{isOpen:l,closable:!1,bodyClass:"p-0",width:n,footer:e.jsx(Xe,{onCancel:m,onSaveClick:c}),onClose:m,onRequestClose:m,children:e.jsx(re,{ref:d})})},et=()=>{const o=L(),n=j(x=>x.crmContact.data.displayedContactList),t=j(x=>x.crmContact.data.tableData),l=Z("contacts","canModify"),m=Z("contacts","canDelete"),d=Z("contacts","canView"),c=j(x=>x.crmContact.data.loading),h=ce(),{pageIndex:f,pageSize:v,sort:F,query:w,total:u}=j(x=>x.crmContact.data.tableData),g=C.useCallback(()=>{o(H()),o(ee())},[o]);C.useEffect(()=>(g(),()=>{window.location.pathname.includes("contact")||o(O({...t,query:""}))}),[g]);const p=C.useMemo(()=>({pageIndex:f,pageSize:v,sort:F,query:w,total:u}),[f,v,F,w,u]),D=({row:x})=>{const r=L();ue();const i=()=>{r(ae()),r(B(x))},a=async()=>{r(B(x)),r(V(!0))},s=()=>{r(B(x));const N=`/app/crm/contact-details/${x.id}`;h(N)};return e.jsxs("div",{className:"flex text-base items-center",children:[l&&e.jsx("span",{className:"cursor-pointer hover:text-indigo-500 circle items-center",onClick:i,children:e.jsx(he,{})}),m&&e.jsx("span",{className:"cursor-pointer hover:text-red-500 circle mx-1 items-center",onClick:a,children:e.jsx(ge,{})}),d&&e.jsx("span",{className:"cursor-pointer hover:text-green-500 circle items-center text-lg",onClick:s,children:e.jsx(Pe,{})})]})},A=C.useMemo(()=>[{header:"Action",id:"action",cell:r=>e.jsx(D,{row:r.row.original})},{header:"Name",accessorKey:"firstName",cell:r=>{const{firstName:i,lastName:a}=r.row.original,s=`${i} ${a}`;return e.jsx(W,{title:s,children:e.jsx(R,{text:s,maxLength:15})},s)}},{header:"email",accessorKey:"email",cell:r=>r.row.original.email},{header:"Number",accessorKey:"contactNumber",cell:r=>r.row.original.contactNumber},{header:"source",accessorKey:"sourceId",cell:r=>{var a,s,N,b;const i=(s=(a=r.row.original)==null?void 0:a.source)!=null&&s.sources?(b=(N=r.row.original)==null?void 0:N.source)==null?void 0:b.sources:"-";return e.jsx(R,{text:i,maxLength:15})}},{header:"Tags",accessorKey:"tagName",cell:r=>{const i=r.row.original.tags;return i!=null&&i.length>0?e.jsx(pe,{tags:i}):"-"}},{header:"Title",accessorKey:"title",cell:r=>{const i=r.row.original.title?r.row.original.title:"-";return e.jsx(W,{title:i,children:e.jsx(R,{text:i,maxLength:15})},i)}},{header:"Company",accessorKey:"companyName",cell:r=>{const i=r.row.original.company?r.row.original.company.companyName:"-";return e.jsx(R,{text:i,maxLength:15})}},{header:"Address",accessorKey:"address",cell:r=>{const{address:i,cityData:a,stateData:s,zipcode:N}=r.row.original,b=[i,a==null?void 0:a.cityName,s==null?void 0:s.stateName,N].filter(z=>z!=null).join(" ");return e.jsx(W,{title:b||"-",children:e.jsx(R,{text:b||"-",maxLength:20})},b)}},{header:"Notes",accessorKey:"description",cell:r=>{const i=r.row.original.description?r.row.original.description:"-";return e.jsx(W,{title:i,children:e.jsx(R,{text:i,maxLength:20})},i)}}],[l,m]),M=x=>{const r=P(p);r.pageIndex=x,o(O(r))},k=x=>{const r=P(p);r.pageSize=Number(x),r.pageIndex=1,o(O(r))},q=x=>{const r=P(p);r.sort=x,o(O(r))};return e.jsxs("div",{children:[e.jsx(me,{columns:A,data:n,loading:c,pagingData:{total:p.total,pageIndex:p.pageIndex,pageSize:p.pageSize},onPaginationChange:M,onSelectChange:k,onSort:q}),e.jsx(Ye,{}),e.jsx(Ve,{})]})},ne=C.forwardRef((o,n)=>{const{onInputChange:t}=o,l=He(m,500);function m(c){t==null||t(c)}const d=c=>{l(c.target.value)};return e.jsx(T,{ref:n,className:"max-w-md md:w-56 mb-4",size:"sm",placeholder:"Search by name or email",prefix:e.jsx(fe,{className:"text-lg"}),onChange:d})});ne.displayName="ContactTableSearch";const tt=()=>{const o=L(),n=C.useRef(null),t=j(h=>h.crmContact.data.tableData),l=Z("contacts","canCreate"),m=h=>{const f=P(t);f.query=h,f.pageIndex=1,typeof h=="string"&&h.length>1&&d(f),typeof h=="string"&&h.length===0&&d(f)},d=h=>{o(h?O(h):H())},c=()=>{o(ae()),o(B({}))};return C.useEffect(()=>{n.current&&(n.current.value=t.query||"",o(O(t)))},[t==null?void 0:t.query]),e.jsxs("div",{className:"md:flex items-center justify-between",children:[e.jsx("div",{className:"md:flex items-center gap-4",children:e.jsx(ne,{ref:n,onInputChange:m})}),e.jsx("div",{className:"mb-4",children:l&&e.jsx(U,{size:"sm",onClick:c,children:"Add New"})})]})};le("crmContact",Te);const at=()=>{const o=j(n=>n.crmContact.data.tableData);return e.jsx(e.Fragment,{children:e.jsxs(de,{bodyClass:"h-full",children:[e.jsx(K,{title:`Contacts (${(o==null?void 0:o.total)||0})`,desc:"",className:"mb-2"}),e.jsx(tt,{}),e.jsx(et,{})]})})},Ra=at;export{Ra as default};
