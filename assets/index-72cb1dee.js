import{am as o,an as S,aU as m,ao as h,ap as L}from"./index-e9e80fad.js";import{P as R,m as b,Q as k,R as x,S as E,T as F,U as I,V as T,W as q,X as G,Y as B,t as M,v as f,Z as z,w as N}from"./CrmService-dcc529f1.js";const O="crmContact",y=o("crmContact/data/getContactStatistic",async()=>(await R()).data),w=o("crmContact/data/getContact",async()=>(await b()).data),v=o("crmContact/data/getSource",async()=>(await k()).data),A=o("crmContact/data/getStates",async()=>(await x()).data),P=o("crmContact/data/getCities",async()=>(await E()).data),Z=o("crmContact/data/createSource",async e=>{var a,t;try{return(await F(e)).data}catch(s){throw new Error((t=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:t.message)}}),g=o("crmCompany/data/getCompany",async()=>(await I()).data),_=o("crmContact/data/editContact",async({contactId:e,updatedData:a})=>{var t,s;try{return(await T(e,a)).data}catch(n){throw new Error((s=(t=n==null?void 0:n.response)==null?void 0:t.data)==null?void 0:s.message)}}),$=o("crmContact/data/deleteBulkContacts",async e=>{var a,t;try{return await q(e)}catch(s){throw new Error((t=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:t.message)}}),H=o("crmContact/data/deleteContact",async e=>{var a,t;try{return await G(e)}catch(s){throw new Error((t=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:t.message)}}),J=o("crmContact/data/createContact",async e=>{var a,t;try{return(await B(e)).data}catch(s){throw new Error((t=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:t.message)}}),K=o("crmContact/data/module",async()=>{var e,a;try{return(await M()).data}catch(t){throw new Error((a=(e=t==null?void 0:t.response)==null?void 0:e.data)==null?void 0:a.message)}}),aa=o("tag-category",async({id:e})=>{var a,t;try{return(await f(e)).data}catch(s){throw new Error((t=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:t.message)}}),U=o("crmContact/data/getCustomField",async e=>(await z(e)).data);o("crmContact/data/fetchTag",async({id:e})=>{var a,t;try{return(await f(e)).data}catch(s){throw new Error((t=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:t.message)}});o("crmContact/data/createTag",async({masterId:e,colorName:a,tagName:t,tagCategoryId:s})=>(await N({colorName:a,tagName:t,masterId:e,tagCategoryId:s})).data);const j={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},Q={status:""},V={loading:!1,sources:[],statisticLoading:!1,contactList:[],displayedContactList:[],companyList:[],customField:[],states:[],columns:[],cities:[],statisticData:{},tableData:j,filterData:Q,drawerOpen:!1,selectedContact:{},deleteConfirmation:!1,selectedRows:[],deleteMode:"",uncheckedCheckBox:{}},D=S({name:`${O}/state`,initialState:V,reducers:{setTableData:(e,a)=>{var s;e.tableData=a.payload;const t=(s=e.contactList)==null?void 0:s.filter(n=>n.firstName.toLowerCase().includes(a.payload.query.toLowerCase())||n.lastName.toLowerCase().includes(a.payload.query.toLowerCase())||n.email.toLowerCase().includes(a.payload.query.toLowerCase()));e.tableData={...a.payload,total:t==null?void 0:t.length},e.displayedContactList=t.slice(a.payload.pageSize*(a.payload.pageIndex-1),a.payload.pageSize*a.payload.pageIndex)},setContactList:(e,a)=>{e.contactList=a.payload},setFilterData:(e,a)=>{e.filterData=a.payload},setSelectedContact:(e,a)=>{e.selectedContact=a.payload},setSelectedRows:(e,a)=>{e.selectedRows=a.payload},setCheckBox:(e,a)=>{e.uncheckedCheckBox=a.payload},addRowItem:(e,{payload:a})=>{const t=m(e);t.selectedRows.includes(a)||(e.selectedRows=[...t.selectedRows,...a])},removeRowItem:(e,{payload:a})=>{const t=m(e);t.selectedRows.includes(a)&&(e.selectedRows=t.selectedRows.filter(s=>s!==a))},setDrawerOpen:e=>{e.drawerOpen=!0},setDrawerClose:e=>{e.drawerOpen=!1},setDeleteMode:(e,a)=>{e.deleteMode=a.payload},toggleDeleteConfirmation:(e,a)=>{e.deleteConfirmation=a.payload}},extraReducers:e=>{e.addCase(w.fulfilled,(a,t)=>{var n,r,d,l,i,p,C,u;a.contactList=t.payload.data,a.tableData.total=(r=(n=t.payload)==null?void 0:n.data)==null?void 0:r.length;const s=(l=(d=t.payload)==null?void 0:d.data)==null?void 0:l.filter(c=>c.firstName.toLowerCase().includes(a.tableData.query||"".toLowerCase())||c.lastName.toLowerCase().includes(a.tableData.query||"".toLowerCase())||c.email.toLowerCase().includes(a.tableData.query||"".toLowerCase()));a.displayedContactList=s.slice(((i=a==null?void 0:a.tableData)==null?void 0:i.pageSize)*(((p=a==null?void 0:a.tableData)==null?void 0:p.pageIndex)-1),((C=a==null?void 0:a.tableData)==null?void 0:C.pageSize)*((u=a==null?void 0:a.tableData)==null?void 0:u.pageIndex)),a.loading=!1}).addCase(w.pending,a=>{a.loading=!0}).addCase(y.fulfilled,(a,t)=>{a.statisticData=t.payload,a.statisticLoading=!1}).addCase(U.fulfilled,(a,t)=>{a.customField=t.payload.data,console.log(a.customField,"customField"),a.loading=!1}).addCase(y.pending,a=>{a.statisticLoading=!0}).addCase(g.fulfilled,(a,t)=>{a.companyList=t.payload.data,a.loading=!1}).addCase(g.pending,a=>{a.loading=!0}).addCase(v.fulfilled,(a,t)=>{a.sources=t.payload.data}).addCase(A.fulfilled,(a,t)=>{a.states=t.payload.data}).addCase(P.fulfilled,(a,t)=>{a.cities=t.payload.data})}}),{setCheckBox:ea,setTableData:ta,setContactList:sa,setFilterData:oa,setSelectedContact:na,setDrawerOpen:ca,setDrawerClose:ra,setSelectedRows:da,setDeleteMode:la,addRowItem:ia,removeRowItem:pa,toggleDeleteConfirmation:Ca}=D.actions,W=D.reducer,ua=h({data:W}),ma=L;export{aa as a,$ as b,la as c,H as d,da as e,K as f,w as g,y as h,g as i,A as j,U as k,P as l,Z as m,v as n,_ as o,J as p,ra as q,ta as r,na as s,Ca as t,ma as u,ia as v,pa as w,ca as x,ua as y};
