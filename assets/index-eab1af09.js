import{am as j,an as b,ao as f,ap as D,j as t,aq as C,ar as w,a as T,r as N,ai as S}from"./index-a75c2214.js";import{a as k}from"./CrmService-4f2387c5.js";import{C as g}from"./Card-f8be7cf5.js";import{A as n}from"./index-3aa09f20.js";import{F as y,a as v,b as L,c as R}from"./index.esm-9c831d2e.js";import{B as A}from"./Button-13333fa1.js";import{T as h}from"./index-00cb4b16.js";import{S as z}from"./StatusCapsule-ec8d66eb.js";import{T as B}from"./TagsList-0056b07b.js";import{T as l}from"./TextTruncate-4ddafa66.js";import{c as E,u as F,f as p,g as H}from"./index-55fec6a8.js";import"./useMergeRef-788c4cb0.js";import"./Tooltip-b12e8e28.js";import"./usePopper-c93af6af.js";import"./Views-10f1927c.js";import"./index.esm-d6edb43c.js";import"./index-6d61f856.js";import"./context-e419e330.js";import"./index.esm-6e5dfffa.js";import"./Alert-a3186a3f.js";import"./useTimeout-af422490.js";import"./index.esm-ba9f59e9.js";import"./CloseButton-aa3449ba.js";import"./StatusIcon-7df21d38.js";import"./Badge-03bb3502.js";import"./Calendar-527cd69e.js";import"./useControllableState-974d6e74.js";import"./index-4e44d9bc.js";import"./cloneDeep-88274fc4.js";import"./_Uint8Array-d074a65a.js";import"./_MapCache-876ac592.js";import"./_getPrototype-42ea40f8.js";import"./_baseIsEqual-e85234c7.js";import"./get-de137b47.js";import"./toString-a311c7f9.js";import"./index-28e44be9.js";import"./Input-8164dacf.js";import"./isNil-92cba2d7.js";import"./useRootClose-481198be.js";import"./RangeCalendar-e6435c7c.js";import"./TimeInput-a7dbe6f6.js";import"./useUniqueId-88c0f361.js";import"./useDidUpdate-9629db24.js";import"./Dialog-093c796b.js";import"./index-60763994.js";import"./Drawer-4be8ac77.js";import"./index-04ed9e3c.js";import"./useUncertainRef-46d98c81.js";import"./chainedFunction-070f832c.js";import"./index-24cfecab.js";import"./FormItem-e7510cc7.js";import"./index-d65d54e7.js";import"./index-ce1976e4.js";import"./toast-9ba48d0f.js";import"./Pagination-d83ae71e.js";import"./Progress-17d38890.js";import"./index-63ca2c3a.js";import"./ScrollBar-da9f6718.js";import"./index-916893a5.js";import"./Select-e3c4e091.js";import"./slicedToArray-fb2022e5.js";import"./objectWithoutProperties-8e2777d0.js";import"./objectWithoutPropertiesLoose-4f48578a.js";import"./extends-98964cd2.js";import"./toConsumableArray-d3906663.js";import"./floating-ui.dom-bef9cea3.js";import"./Skeleton-d2cdaf3e.js";import"./index-191a7578.js";import"./mapCloneElement-24483c5b.js";import"./Switcher-5b991065.js";import"./index-1e228cad.js";import"./Tag-9c9d82f1.js";import"./index-4c7d26f9.js";import"./index-3499d56e.js";import"./Upload-b697435a.js";import"./index.esm-35d9794d.js";const M="crmDashboard",d=j("crmDashboard/data/dashboard",async()=>(await k()).data),I={loading:!0,dashboardData:{}},V=b({name:`${M}/state`,initialState:I,reducers:{},extraReducers:a=>{a.addCase(d.fulfilled,(r,o)=>{r.dashboardData=o.payload.crmDashboardData,r.loading=!1}).addCase(d.pending,r=>{r.loading=!0})}}),$=V.reducer,q=f({data:$}),x=D,G=({type:a})=>{switch(a){case"newLeads":return t.jsx(n,{size:55,className:"bg-indigo-100 text-indigo-600 dark:bg-indigo-500/20 dark:text-indigo-100",icon:t.jsx(R,{})});case"company":return t.jsx(n,{size:55,className:"bg-cyan-100 text-cyan-600 dark:bg-cyan-500/20 dark:text-cyan-100",icon:t.jsx(L,{})});case"clients":return t.jsx(n,{size:55,className:"bg-emerald-100 text-emerald-600 dark:bg-emerald-500/20 dark:text-emerald-100",icon:t.jsx(v,{})});case"task":return t.jsx(n,{size:55,className:"bg-amber-100 text-amber-600 dark:bg-amber-500/20 dark:text-amber-100",icon:t.jsx(y,{})});default:return t.jsx("div",{})}},_=({data:a={}})=>t.jsx(g,{children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(G,{type:a.key}),t.jsx("div",{children:t.jsxs("div",{className:"flex gap-1.5 items-end mb-2",children:[t.jsx("h3",{className:"font-bold leading-none",children:a.value}),t.jsx("p",{className:"font-semibold",children:a.label})]})})]})}),J=({data:a=[]})=>t.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-4 gap-4",children:a.map(r=>t.jsx(_,{data:r},r.key))}),{Tr:u,Td:K,TBody:O,THead:P,Th:Q}=h,i=E(),U=[i.accessor("associatedContact",{header:"Associated Contact",cell:a=>a.row.original.contactData.name}),i.accessor("details",{header:"Details",cell:a=>{const r=a.row.original;return t.jsx(l,{text:r.details,maxLength:30})}}),i.accessor("status",{header:"Status",cell:a=>{const r=a.row.original;return t.jsx(z,{status:r.status})}}),i.accessor("tags",{header:"Tags",cell:a=>{const r=a.row.original;return t.jsx(B,{tags:r.tags})}}),i.accessor("notes",{header:"Notes",cell:a=>{const r=a.row.original.notes;return t.jsx(l,{text:r,maxLength:30})}})],W=({data:a=[],className:r})=>{const o=C(),c=F({data:a,columns:U,getCoreRowModel:H()}),m=()=>{o("/app/crm/leads")};return t.jsxs(g,{className:r,children:[t.jsxs("div",{className:"flex items-center justify-between mb-4",children:[t.jsx("h4",{children:"Leads"}),t.jsx(A,{size:"sm",onClick:m,children:"View All Leads"})]}),t.jsxs(h,{children:[t.jsx(P,{children:c.getHeaderGroups().map(e=>t.jsx(u,{children:e.headers.map(s=>t.jsx(Q,{colSpan:s.colSpan,children:p(s.column.columnDef.header,s.getContext())},s.id))},e.id))}),t.jsx(O,{children:c.getRowModel().rows.map(e=>t.jsx(u,{children:e.getVisibleCells().map(s=>t.jsx(K,{children:p(s.column.columnDef.cell,s.getContext())},s.id))},e.id))})]})]})};w("crmDashboard",q);const X=()=>{const a=T(),{statisticData:r,recentLeadsData:o}=x(e=>e.crmDashboard.data.dashboardData),c=x(e=>e.crmDashboard.data.loading);N.useEffect(()=>{m()},[]);const m=()=>{a(d())};return t.jsx("div",{className:"flex flex-col gap-4 h-full",children:t.jsxs(S,{loading:c,children:[t.jsx(J,{data:r}),t.jsx(W,{data:o})]})})},Da=X;export{Da as default};
