import{r as p,j as t,a as L,a3 as U,av as ve,aw as pt,ax as O,p as mt,al as ft,ah as ht,aq as xt}from"./index-c2c71b67.js";import{A as gt}from"./AdaptableCard-6d79530e.js";import{u as E,a as re,g as te,e as Be,s as Ke,b as oe,f as we,p as he,c as xe,h as Ve,t as Ie,d as vt,i as yt,j as jt,k as Tt,l as bt,m as Ct,n as be,o as St,r as Et}from"./index-a6e0ae3c.js";import{B as ae}from"./Button-9c5fa51c.js";import{c as fe}from"./cloneDeep-a5d9ba9c.js";import{I as P}from"./Input-a6235faa.js";import{b as Dt,T as je,Q as Nt,O as kt,P as Mt,o as wt,M as Vt,C as It}from"./index.esm-854b309f.js";import{d as At}from"./debounce-637992e6.js";import{u as Te}from"./checkEditUpdate-2ca4f052.js";import{D as Ft}from"./DataTable-4690dba1.js";import"./Alert-94df1fc7.js";import{A as Rt}from"./index-5345338d.js";import"./Badge-71fe7402.js";import"./RangeCalendar-06da6a52.js";import{C as Pt}from"./Card-641c7c13.js";import"./index-0f7a857e.js";import"./index-bbb04099.js";import{D as Qe}from"./Dialog-8f81a119.js";import{D as Lt}from"./Drawer-0edf5e5c.js";import"./index-fda7dfb7.js";import{F as Pe,a as I}from"./FormItem-78a020e3.js";import"./toString-ac4075ef.js";import"./index-ca17498b.js";import"./index-947dfc66.js";import"./index-a0374824.js";import{t as le,N as ce}from"./toast-1c7e88ac.js";import"./Pagination-6dddef69.js";import"./Progress-81b53781.js";import"./index-72a612d1.js";import"./ScrollBar-d6546e5a.js";import"./index-d0a572c6.js";import{m as $t,d as qt,S as ne}from"./Select-dd041f61.js";import"./Skeleton-39c0e07a.js";import"./index-e001e4a3.js";import"./Switcher-9ef30d94.js";import"./index-e96a00fb.js";import{T as Xe}from"./index-fc3c3276.js";import"./Tag-869b174a.js";import"./index-5c6007d6.js";import"./index-7308ebe4.js";import{T as De}from"./Tooltip-008854ca.js";import{U as Ot}from"./Upload-0425926a.js";import{S as ze}from"./StatusCapsule-aa0c9105.js";import{T as Ut}from"./TagsList-adcae7d4.js";import{T as Ne}from"./TextTruncate-489ee756.js";import{u as zt}from"./useThemeClass-ae6a3c06.js";import{h as Wt}from"./moment-fbc5633a.js";import{b as Le,A as Je,a as _t}from"./index.esm-12277f3c.js";import{a as Ht}from"./index.esm-c995c007.js";import{d as Yt}from"./index.esm-1126eabc.js";import{i as Gt}from"./Views-3e469d6a.js";import"./chart.constant-d85b92fc.js";import"./GrowShrinkTag-45e3cf24.js";import"./react-tooltip.min-90a97092.js";import"./RichTextEditor-7aef3904.js";import"./SegmentItemOption-841378e4.js";import{S as Ze}from"./StickyFooter-ce9b6766.js";import"./SvgIcon-426e05f5.js";import{F as $e,a as qe,b as A,u as Bt}from"./formik.esm-25f04447.js";import{c as Se,a as M,e as et}from"./index.esm-3f39c77b.js";import{D as Kt}from"./DoubleSidedImage-febab13f.js";import{C as Qt}from"./ConfirmDialog-59dfb946.js";import{t as Xt}from"./tagAndCategory-228f57e7.js";/* empty css              */import{G as ke}from"./index.esm-cd15adfa.js";import{a as tt,_ as de}from"./objectWithoutProperties-8809bfcf.js";import{_ as Y}from"./toConsumableArray-c30e1148.js";import{_ as Ae}from"./slicedToArray-3c0066d1.js";import{_ as at}from"./inheritsLoose-21556459.js";import{g as Jt}from"./index-9b4d3b80.js";import{M as We,t as ue,a as _e,p as He}from"./helper-64c17a1c.js";import{B as Ye}from"./index.esm-c38f034a.js";import{F as Zt}from"./FormDesription-9c8d40da.js";import{M as ea}from"./MediaSkeleton-f845c2ce.js";import{N as ta}from"./react-number-format.es-b278bec5.js";import"./CrmService-15d11bcd.js";import"./index-68c1908e.js";import"./_MapCache-2e280b6f.js";import"./_getPrototype-6c543eab.js";import"./isNil-d22b3e6c.js";import"./get-bbcb2570.js";import"./index-9c27e09f.js";import"./useTimeout-a89b02a4.js";import"./CloseButton-3657ddf2.js";import"./StatusIcon-5eed5f69.js";import"./useMergeRef-788c4cb0.js";import"./useControllableState-a30d7084.js";import"./_baseIsEqual-10de66da.js";import"./useRootClose-29c37326.js";import"./usePopper-2b474c15.js";import"./TimeInput-b943a20d.js";import"./useUniqueId-63f75720.js";import"./useDidUpdate-787bd063.js";import"./index-6f0a636b.js";import"./useUncertainRef-be3b54b9.js";import"./index-ccd45f27.js";import"./chainedFunction-070f832c.js";import"./floating-ui.dom-4bc0055b.js";import"./mapCloneElement-a58d49ea.js";import"./index.esm-ab028e22.js";import"./index.esm-95d05b2b.js";import"./index.esm-c710ec86.js";const nt=p.forwardRef((c,s)=>{const{onInputChange:e}=c,o=At(n,500);function n(i){e==null||e(i)}const a=i=>{o(i.target.value)};return t.jsx(P,{ref:s,className:"max-w-md md:w-52 mb-4",size:"sm",placeholder:"Search by title",prefix:t.jsx(Dt,{className:"text-lg"}),onChange:a})});nt.displayName="TasksTableSearch";const aa=()=>{const c=L(),s=p.useRef(null),e=E(l=>l.crmTasks.data.tableData),o=Te("tasks","canCreate"),n=l=>{const d=fe(e);d.query=l,d.pageIndex=1,typeof l=="string"&&l.length>1&&a(d),typeof l=="string"&&l.length===0&&a(d)},a=l=>{c(l?re(l):te())},i=()=>{c(Be()),c(Ke("Add")),c(oe({}))};return p.useEffect(()=>{s.current&&(s.current.value=e.query||"",c(re(e)))},[e==null?void 0:e.query]),t.jsxs("div",{className:"md:flex items-center justify-between",children:[t.jsx("div",{className:"md:flex items-center gap-4",children:t.jsx(nt,{ref:s,onInputChange:n})}),t.jsx("div",{className:"mb-4",children:o&&t.jsx(ae,{size:"sm",onClick:i,children:"Add New"})})]})},st=p.forwardRef((c,s)=>{const e=L(),o=E(h=>h.crmTasks.data.followUPConfirmation),n=E(h=>{var x,T;return(T=(x=h.crmTasks)==null?void 0:x.data)==null?void 0:T.selectedTask}),a=E(h=>h.crmTasks.data.loading),i=()=>{e(we(!1))},l=Se().shape({descriptions:M().required("Notes is required")}),d=async h=>{var S,k,v;const x=await e(he({taskId:n==null?void 0:n.id,data:h})),T=(S=x==null?void 0:x.payload)!=null&&S.success?{title:"Successfully Updated",type:"success",message:(k=x==null?void 0:x.payload)==null?void 0:k.message}:{title:"Something Went Wrong !!!",type:"danger",message:(v=x==null?void 0:x.error)==null?void 0:v.message};le.push(t.jsx(ce,{title:T.title,type:T==null?void 0:T.type,duration:2500,children:T.message}),{placement:"top-end"}),await e(te()),await e(xe()),await e(we(!1))};return t.jsxs(Qe,{isOpen:o,onClose:i,children:[t.jsx("h5",{className:"mb-4",children:"Follow Up"}),t.jsx($e,{innerRef:s,initialValues:{descriptions:"",nextDateTime:""},validationSchema:l,onSubmit:async(h,{setSubmitting:x})=>{const T={completionStatus:"completed",descriptions:h.descriptions};h!=null&&h.nextDateTime&&(T.nextDateTime=h.nextDateTime),await d(T),x(!1)},children:({touched:h,errors:x,values:T,setFieldValue:S})=>t.jsxs(qe,{children:[t.jsxs(Pe,{children:[t.jsx(I,{label:"Next Follow-Up Date and Time",invalid:x.nextDateTime&&h.nextDateTime,errorMessage:x.nextDateTime,children:t.jsx(A,{type:"dateTime-local",autoComplete:"off",name:"nextDateTime",placeholder:"Select Next Follow-Up Date and Time",component:P,prefix:t.jsx(je,{className:"text-xl"})})}),t.jsx(I,{label:"Notes",invalid:x.descriptions&&h.descriptions,errorMessage:x.descriptions,children:t.jsx(A,{textArea:!0,type:"text",autoComplete:"off",name:"descriptions",placeholder:"Notes",component:P,prefix:t.jsx(Le,{className:"text-xl"})})})]}),t.jsx(Ze,{className:"flex items-center justify-end py-2",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"md:flex items-center",children:[t.jsx(ae,{size:"sm",className:"ltr:mr-3 rtl:ml-3",type:"button",onClick:i,children:"Cancel"}),t.jsx(ae,{size:"sm",type:"submit",variant:"solid",icon:t.jsx(Je,{}),loading:a,children:"Save"})]})})]})})]})});st.displayName="FollowUpTaskConfirmation";const it=p.forwardRef((c,s)=>{const e=L(),[o,n]=p.useState(""),[a,i]=p.useState(""),l=E(g=>g.crmTasks.data.quotationConfirmation),d=E(g=>{var m,j;return(j=(m=g.crmTasks)==null?void 0:m.data)==null?void 0:j.selectedTask}),h=E(g=>g.crmTasks.data.loading),x=()=>{e(Ve(!1)),n("")},T=Se().shape({descriptions:M().required("Notes is required")}),S=async g=>{var D,C,u;const m=await e(he({taskId:d==null?void 0:d.id,data:g})),j=(D=m==null?void 0:m.payload)!=null&&D.success?{title:"Successfully Updated",type:"success",message:(C=m==null?void 0:m.payload)==null?void 0:C.message}:{title:"Something Went Wrong !!!",type:"danger",message:(u=m==null?void 0:m.error)==null?void 0:u.message};le.push(t.jsx(ce,{title:j.title,type:j==null?void 0:j.type,duration:2500,children:j.message}),{placement:"top-end"}),await e(te()),await e(xe()),await e(Ve(!1)),n("")},k=g=>{let m=!0;const j=["image/png","image/jpeg","image/jpeg","image/webp","image/gif","application/pdf","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/csv","text/plain","text/html","application/xml","application/json","application/zip","application/x-rar-compressed"],D=1e7;if(g)for(const C of g)j.includes(C.type)||(m="Please upload a .jpeg, .png, or .pdf file!"),C.size>=D&&(console.log(C.size),m="Uploaded file cannot be larger than 10MB!");return m},v=(g,m,j)=>{const D="1-img-0",C=j.length-1,u=new FileReader,f=j[C];u.onload=()=>{const y=u.result,b={id:D,name:f.name,img:y};i(f.type),n(f.name),m("attachments",b)},u.readAsDataURL(f)};return t.jsxs(Qe,{isOpen:l,onClose:x,children:[t.jsx("h5",{className:"mb-4",children:"Quotation"}),t.jsx($e,{innerRef:s,initialValues:{descriptions:"",attachments:""},validationSchema:T,onSubmit:async(g,{setSubmitting:m})=>{var D,C;const j={completionStatus:"completed",descriptions:g.descriptions};(D=g.attachments)!=null&&D.img&&(j.attachments=(C=g.attachments)==null?void 0:C.img,j.fileType=a),await S(j),m(!1)},children:({field:g,form:m,touched:j,errors:D,values:C,setFieldValue:u})=>t.jsxs(qe,{children:[t.jsxs(Pe,{children:[t.jsx(I,{label:"Upload File",children:t.jsx(Ot,{draggable:!0,className:"min-h-fit",beforeUpload:k,showList:!1,onChange:f=>v(m,u,f),children:t.jsxs("div",{className:"max-w-full flex flex-col px-4 py-2 justify-center items-center",children:[t.jsx(Kt,{src:"/img/others/upload.png",darkModeSrc:"/img/others/upload-dark.png"}),t.jsx("p",{className:"font-semibold",children:o?t.jsxs("span",{className:"text-gray-800 dark:text-white",children:["Selected file ",o]}):t.jsxs(t.Fragment,{children:[t.jsxs("span",{className:"text-gray-800 dark:text-white",children:["Drop your image here, or"," "]}),t.jsx("span",{className:"text-blue-500",children:"browse"})]})}),t.jsx("p",{className:"mt-1 opacity-60 dark:text-white",children:"Support: jpeg, png, pdf"})]})})}),t.jsx(I,{label:"Notes",invalid:D.descriptions&&j.descriptions,errorMessage:D.descriptions,children:t.jsx(A,{textArea:!0,type:"text",autoComplete:"off",name:"descriptions",placeholder:"Notes",component:P,prefix:t.jsx(Le,{className:"text-xl"})})})]}),t.jsx(Ze,{className:"flex items-center justify-end py-2",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"md:flex items-center",children:[t.jsx(ae,{size:"sm",className:"ltr:mr-3 rtl:ml-3",type:"button",onClick:x,children:"Cancel"}),t.jsx(ae,{size:"sm",type:"submit",variant:"solid",icon:t.jsx(Je,{}),loading:h,children:"Save"})]})})]})})]})});it.displayName="QuotationTaskConfirmation";const na=()=>{const c=L(),s=E(a=>a.crmTasks.data.deleteConfirmation),e=E(a=>{var i,l;return(l=(i=a.crmTasks)==null?void 0:i.data)==null?void 0:l.selectedTask}),o=()=>{c(Ie(!1))},n=async()=>{var i,l,d;c(Ie(!1));const a=await c(vt(e.id));await c(te()),(i=a==null?void 0:a.payload)!=null&&i.success?le.push(t.jsx(ce,{title:"Successfuly Deleted",type:"success",duration:2500,children:(l=a==null?void 0:a.payload)==null?void 0:l.message}),{placement:"top-end"}):le.push(t.jsx(ce,{title:"Something Went Wrong !!!",type:"danger",duration:2500,children:(d=a==null?void 0:a.error)==null?void 0:d.message}),{placement:"top-end"}),await c(xe())};return t.jsx(Qt,{isOpen:s,type:"danger",title:"Delete Task",confirmButtonColor:"red-600",onClose:o,onRequestClose:o,onCancel:o,onConfirm:n,children:t.jsx("p",{children:"Are you sure you want to delete this Task? All record related to this task will be deleted as well. This action cannot be undone."})})},Ge={disabled:!1},Ce=U.createContext(null);var sa=function(s){return s.scrollTop},pe="unmounted",J="exited",Z="entering",ie="entered",Fe="exiting",z=function(c){at(s,c);function s(o,n){var a;a=c.call(this,o,n)||this;var i=n,l=i&&!i.isMounting?o.enter:o.appear,d;return a.appearStatus=null,o.in?l?(d=J,a.appearStatus=Z):d=ie:o.unmountOnExit||o.mountOnEnter?d=pe:d=J,a.state={status:d},a.nextCallback=null,a}s.getDerivedStateFromProps=function(n,a){var i=n.in;return i&&a.status===pe?{status:J}:null};var e=s.prototype;return e.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},e.componentDidUpdate=function(n){var a=null;if(n!==this.props){var i=this.state.status;this.props.in?i!==Z&&i!==ie&&(a=Z):(i===Z||i===ie)&&(a=Fe)}this.updateStatus(!1,a)},e.componentWillUnmount=function(){this.cancelNextCallback()},e.getTimeouts=function(){var n=this.props.timeout,a,i,l;return a=i=l=n,n!=null&&typeof n!="number"&&(a=n.exit,i=n.enter,l=n.appear!==void 0?n.appear:i),{exit:a,enter:i,appear:l}},e.updateStatus=function(n,a){if(n===void 0&&(n=!1),a!==null)if(this.cancelNextCallback(),a===Z){if(this.props.unmountOnExit||this.props.mountOnEnter){var i=this.props.nodeRef?this.props.nodeRef.current:ve.findDOMNode(this);i&&sa(i)}this.performEnter(n)}else this.performExit();else this.props.unmountOnExit&&this.state.status===J&&this.setState({status:pe})},e.performEnter=function(n){var a=this,i=this.props.enter,l=this.context?this.context.isMounting:n,d=this.props.nodeRef?[l]:[ve.findDOMNode(this),l],h=d[0],x=d[1],T=this.getTimeouts(),S=l?T.appear:T.enter;if(!n&&!i||Ge.disabled){this.safeSetState({status:ie},function(){a.props.onEntered(h)});return}this.props.onEnter(h,x),this.safeSetState({status:Z},function(){a.props.onEntering(h,x),a.onTransitionEnd(S,function(){a.safeSetState({status:ie},function(){a.props.onEntered(h,x)})})})},e.performExit=function(){var n=this,a=this.props.exit,i=this.getTimeouts(),l=this.props.nodeRef?void 0:ve.findDOMNode(this);if(!a||Ge.disabled){this.safeSetState({status:J},function(){n.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:Fe},function(){n.props.onExiting(l),n.onTransitionEnd(i.exit,function(){n.safeSetState({status:J},function(){n.props.onExited(l)})})})},e.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},e.safeSetState=function(n,a){a=this.setNextCallback(a),this.setState(n,a)},e.setNextCallback=function(n){var a=this,i=!0;return this.nextCallback=function(l){i&&(i=!1,a.nextCallback=null,n(l))},this.nextCallback.cancel=function(){i=!1},this.nextCallback},e.onTransitionEnd=function(n,a){this.setNextCallback(a);var i=this.props.nodeRef?this.props.nodeRef.current:ve.findDOMNode(this),l=n==null&&!this.props.addEndListener;if(!i||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[i,this.nextCallback],h=d[0],x=d[1];this.props.addEndListener(h,x)}n!=null&&setTimeout(this.nextCallback,n)},e.render=function(){var n=this.state.status;if(n===pe)return null;var a=this.props,i=a.children;a.in,a.mountOnEnter,a.unmountOnExit,a.appear,a.enter,a.exit,a.timeout,a.addEndListener,a.onEnter,a.onEntering,a.onEntered,a.onExit,a.onExiting,a.onExited,a.nodeRef;var l=tt(a,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return U.createElement(Ce.Provider,{value:null},typeof i=="function"?i(n,l):U.cloneElement(U.Children.only(i),l))},s}(U.Component);z.contextType=Ce;z.propTypes={};function se(){}z.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:se,onEntering:se,onEntered:se,onExit:se,onExiting:se,onExited:se};z.UNMOUNTED=pe;z.EXITED=J;z.ENTERING=Z;z.ENTERED=ie;z.EXITING=Fe;const rt=z;function Oe(c,s){var e=function(a){return s&&p.isValidElement(a)?s(a):a},o=Object.create(null);return c&&p.Children.map(c,function(n){return n}).forEach(function(n){o[n.key]=e(n)}),o}function ia(c,s){c=c||{},s=s||{};function e(x){return x in s?s[x]:c[x]}var o=Object.create(null),n=[];for(var a in c)a in s?n.length&&(o[a]=n,n=[]):n.push(a);var i,l={};for(var d in s){if(o[d])for(i=0;i<o[d].length;i++){var h=o[d][i];l[o[d][i]]=e(h)}l[d]=e(d)}for(i=0;i<n.length;i++)l[n[i]]=e(n[i]);return l}function ee(c,s,e){return e[s]!=null?e[s]:c.props[s]}function ra(c,s){return Oe(c.children,function(e){return p.cloneElement(e,{onExited:s.bind(null,e),in:!0,appear:ee(e,"appear",c),enter:ee(e,"enter",c),exit:ee(e,"exit",c)})})}function oa(c,s,e){var o=Oe(c.children),n=ia(s,o);return Object.keys(n).forEach(function(a){var i=n[a];if(p.isValidElement(i)){var l=a in s,d=a in o,h=s[a],x=p.isValidElement(h)&&!h.props.in;d&&(!l||x)?n[a]=p.cloneElement(i,{onExited:e.bind(null,i),in:!0,exit:ee(i,"exit",c),enter:ee(i,"enter",c)}):!d&&l&&!x?n[a]=p.cloneElement(i,{in:!1}):d&&l&&p.isValidElement(h)&&(n[a]=p.cloneElement(i,{onExited:e.bind(null,i),in:h.props.in,exit:ee(i,"exit",c),enter:ee(i,"enter",c)}))}}),n}var la=Object.values||function(c){return Object.keys(c).map(function(s){return c[s]})},ca={component:"div",childFactory:function(s){return s}},Ue=function(c){at(s,c);function s(o,n){var a;a=c.call(this,o,n)||this;var i=a.handleExited.bind(pt(a));return a.state={contextValue:{isMounting:!0},handleExited:i,firstRender:!0},a}var e=s.prototype;return e.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},e.componentWillUnmount=function(){this.mounted=!1},s.getDerivedStateFromProps=function(n,a){var i=a.children,l=a.handleExited,d=a.firstRender;return{children:d?ra(n,l):oa(n,i,l),firstRender:!1}},e.handleExited=function(n,a){var i=Oe(this.props.children);n.key in i||(n.props.onExited&&n.props.onExited(a),this.mounted&&this.setState(function(l){var d=Y({},l.children);return delete d[n.key],{children:d}}))},e.render=function(){var n=this.props,a=n.component,i=n.childFactory,l=tt(n,["component","childFactory"]),d=this.state.contextValue,h=la(this.state.children).map(i);return delete l.appear,delete l.enter,delete l.exit,a===null?U.createElement(Ce.Provider,{value:d},h):U.createElement(Ce.Provider,{value:d},U.createElement(a,l,h))},s}(U.Component);Ue.propTypes={};Ue.defaultProps=ca;const ot=Ue;var da=["in","onExited","appear","enter","exit"],ua=function(s){return function(e){e.in,e.onExited,e.appear,e.enter,e.exit;var o=de(e,da);return p.createElement(s,o)}},pa=ua,ma=["component","duration","in","onExited"],lt=function(s){var e=s.component,o=s.duration,n=o===void 0?1:o,a=s.in;s.onExited;var i=de(s,ma),l=p.useRef(null),d={entering:{opacity:0},entered:{opacity:1,transition:"opacity ".concat(n,"ms")},exiting:{opacity:0},exited:{opacity:0}};return p.createElement(rt,{mountOnEnter:!0,unmountOnExit:!0,in:a,timeout:n,nodeRef:l},function(h){var x={style:O({},d[h]),ref:l};return p.createElement(e,Y({innerProps:x},i))})},Re=260,fa=function(s){var e=s.children,o=s.in,n=s.onExited,a=p.useRef(null),i=p.useState("auto"),l=Ae(i,2),d=l[0],h=l[1];p.useEffect(function(){var T=a.current;if(T){var S=window.requestAnimationFrame(function(){return h(T.getBoundingClientRect().width)});return function(){return window.cancelAnimationFrame(S)}}},[]);var x=function(S){switch(S){default:return{width:d};case"exiting":return{width:0,transition:"width ".concat(Re,"ms ease-out")};case"exited":return{width:0}}};return p.createElement(rt,{enter:!1,mountOnEnter:!0,unmountOnExit:!0,in:o,onExited:function(){var S=a.current;S&&(n==null||n(S))},timeout:Re,nodeRef:a},function(T){return p.createElement("div",{ref:a,style:O({overflow:"hidden",whiteSpace:"nowrap"},x(T))},e)})},ha=["in","onExited"],xa=function(s){return function(e){var o=e.in,n=e.onExited,a=de(e,ha);return p.createElement(fa,{in:o,onExited:n},p.createElement(s,Y({cropWithEllipsis:o},a)))}},ga=xa,va=function(s){return function(e){return p.createElement(lt,Y({component:s,duration:e.isMulti?Re:1},e))}},ya=va,ja=function(s){return function(e){return p.createElement(lt,Y({component:s},e))}},Ta=ja,ba=["component"],Ca=["children"],Sa=function(s){return function(e){return e.isMulti?p.createElement(Ea,Y({component:s},e)):p.createElement(ot,Y({component:s},e))}},Ea=function(s){var e=s.component,o=de(s,ba),n=Da(o);return p.createElement(ot,Y({component:e},n))},Da=function(s){var e=s.children,o=de(s,Ca),n=o.isMulti,a=o.hasValue,i=o.innerProps,l=o.selectProps,d=l.components,h=l.controlShouldRenderValue,x=p.useState(n&&h&&a),T=Ae(x,2),S=T[0],k=T[1],v=p.useState(!1),g=Ae(v,2),m=g[0],j=g[1];p.useEffect(function(){a&&!S&&k(!0)},[a,S]),p.useEffect(function(){m&&!a&&S&&k(!1),j(!1)},[m,a,S]);var D=function(){return j(!0)},C=function(b){if(n&&p.isValidElement(b)){if(b.type===d.MultiValue)return p.cloneElement(b,{onExited:D});if(b.type===d.Placeholder&&S)return null}return b},u=O(O({},i),{},{style:O(O({},i==null?void 0:i.style),{},{display:n&&a||S?"flex":"grid"})}),f=O(O({},o),{},{innerProps:u,children:p.Children.toArray(e).map(C)});return f},Na=Sa,ka=["Input","MultiValue","Placeholder","SingleValue","ValueContainer"],ct=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=qt({components:s}),o=e.Input,n=e.MultiValue,a=e.Placeholder,i=e.SingleValue,l=e.ValueContainer,d=de(e,ka);return O({Input:pa(o),MultiValue:ga(n),Placeholder:ya(a),SingleValue:Ta(i),ValueContainer:Na(l)},d)},ge=ct();ge.Input;ge.MultiValue;ge.Placeholder;ge.SingleValue;ge.ValueContainer;var Ma=$t(ct);const me=[],ye=[],wa=c=>{var R,W,_,H;const{touched:s,errors:e,setFieldValue:o,values:n}=c,a=L();p.useState(!1),p.useState(!1);const[i,l]=p.useState(null),[d,h]=p.useState(null),[x,T]=p.useState(""),[S,k]=p.useState(""),[v,g]=p.useState([]),m=E(r=>{var w;return(w=r.crmTasks.data.customField)==null?void 0:w.data});E(r=>r.crmTasks.data.tasksList);const[j,D]=p.useState(""),C=p.useRef(null),u={display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"};p.useEffect(()=>{const r=new Date,w=r.getFullYear(),F=(r.getMonth()+1).toString().padStart(2,"0"),K=r.getDate().toString().padStart(2,"0"),Q=r.getHours().toString().padStart(2,"0"),X=r.getMinutes().toString().padStart(2,"0"),Ee=`${w}-${F}-${K}T${Q}:${X}`;T(Ee),C.current&&C.current.addEventListener("input",f)},[]),p.useEffect(()=>{const r=async()=>{var w,F;try{const{payload:K}=await a(Tt()),Q=(w=K==null?void 0:K.data)==null?void 0:w.find(X=>(X==null?void 0:X.moduleName)==="tasks");if(D(Q.id),l(n==null?void 0:n.module),h(n==null?void 0:n.type),k(n==null?void 0:n.nextDateTime),Q){const{payload:X}=await a(bt({id:(F=Q==null?void 0:Q.id)==null?void 0:F.toString()})),Ee=Xt(X.data);g(Ee)}}catch(K){console.error("Error fetching module data:",K)}};a(yt()),a(jt()),a(Jt()),r()},[a]);const f=()=>{C.current.value<x&&(C.current.value=x)};E(r=>{var w,F;return(F=(w=r.crmTasks)==null?void 0:w.data)==null?void 0:F.selectedTask});const y=E(r=>r.crmTasks.data.drawerMode),b=Bt(),N=r=>{b.setFieldValue("tagId",r)},$=Ma(),q=E(r=>r.crmTasks.data.usersList);me.length=0,q==null||q.forEach(r=>{me.push({label:`${r==null?void 0:r.firstName} ${r==null?void 0:r.lastName}`,value:r.id})});const G=r=>{l(r.value),o("module",r==null?void 0:r.value),r!=null&&r.value&&ue[r==null?void 0:r.value][0]&&d&&(b.setFieldValue("type",ue[r==null?void 0:r.value][0]),B(ue[r==null?void 0:r.value][0])),k("")},B=r=>{o("type",r==null?void 0:r.value),h(r.value)},V=E(r=>r.crmTasks.data.leadsList);return ye.length=0,V==null||V.forEach(r=>{ye.push({value:r.id,label:r.title})}),t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("div",{className:"col-span-1",children:t.jsx(I,{label:"Module",invalid:e.module&&s.module,errorMessage:e.module,children:t.jsx(A,{type:"text",autoComplete:"off",name:"module",placeholder:"Module",component:ne,options:We,value:(R=We)==null?void 0:R.find(r=>(r==null?void 0:r.value)==(n==null?void 0:n.module)),prefix:t.jsx(ke,{className:"text-xl"}),onChange:G})})}),t.jsx("div",{className:"col-span-1",children:t.jsx(I,{label:"Type",invalid:e.type&&s.type,errorMessage:e.type,children:t.jsx(A,{type:"text",autoComplete:"off",name:"type",placeholder:"Type",component:ne,options:ue[i]||[],value:(W=ue[i])==null?void 0:W.find(r=>(r==null?void 0:r.value)==(n==null?void 0:n.type)),prefix:t.jsx(ke,{className:"text-xl"}),onChange:B})})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d==="followup"||d==="delivery"||d==="meeting"?t.jsx("div",{className:"col-span-1",children:t.jsx(I,{label:(_=_e[d])==null?void 0:_.label,invalid:e.nextDateTime&&s.nextDateTime,errorMessage:e.nextDateTime,children:t.jsx(A,{ref:C,type:"dateTime-local",autoComplete:"off",name:"nextDateTime",placeholder:(H=_e[d])==null?void 0:H.placeholder,component:P,prefix:t.jsx(je,{className:"text-xl"}),value:n.nextDateTime,min:x,onChange:r=>{k(r.target.value),o("nextDateTime",r.target.value)}})})}):null,d==="delivery"&&t.jsx("div",{className:"col-span-1",children:t.jsx(I,{label:"Delivery Address",invalid:e.address&&s.address,errorMessage:e.address,children:t.jsx(A,{type:"text",autoComplete:"off",name:"address",placeholder:"Delivery Address",component:P,prefix:t.jsx(je,{className:"text-xl"})})})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("div",{className:"col-span-1",children:t.jsx(I,{label:"Title *",invalid:e.title&&s.title,errorMessage:e.title,children:t.jsx(A,{type:"text",autoComplete:"off",name:"title",placeholder:"Title",component:P,prefix:t.jsx(Nt,{className:"text-xl"})})})}),t.jsx("div",{className:"col-span-1",children:t.jsx(I,{label:"Due Date *",invalid:e.dueDate&&s.dueDate,errorMessage:e.dueDate,children:t.jsx(A,{isDisabled:y==="Edit",type:"dateTime-local",autoComplete:"off",name:"dueDate",component:P,prefix:t.jsx(je,{className:"text-xl"}),min:x})})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("div",{className:"col-span-1",children:t.jsx(I,{label:"Priority *",invalid:e.priority&&s.priority,errorMessage:e.priority,children:t.jsx(ne,{name:"priority",id:"priority",components:$,value:He.find(r=>(r==null?void 0:r.value)===(n==null?void 0:n.priority)),options:He,onChange:r=>{o("priority",r.value||"")}})})}),t.jsx("div",{className:"col-span-1",children:t.jsx(I,{label:"Assigned To",invalid:e.assignedTo&&s.assignedTo,errorMessage:e.assignedTo,children:t.jsx(ne,{name:"assignedTo",id:"assignedTo",value:me.find(r=>(r==null?void 0:r.value)===(n==null?void 0:n.assignedTo)),options:me,onChange:r=>{o("assignedTo",r.value||"")}})})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("div",{className:"col-span-1",children:t.jsx(I,{label:"Connected Lead",invalid:e.connectedLead&&s.connectedLead,errorMessage:e.connectedLead,children:t.jsx(ne,{name:"connectedLead",id:"connectedLead",value:ye.find(r=>(r==null?void 0:r.value)===(n==null?void 0:n.connectedLead)),options:ye,onChange:r=>{o("connectedLead",r.value||"")}})})}),t.jsx("div",{className:"col-span-1",children:t.jsx(I,{label:"Tag",children:t.jsx(A,{isClearable:!0,isMulti:!0,type:"text",autoComplete:"off",name:"tagId",placeholder:"Select tags",component:ne,options:v,prefix:t.jsx(ke,{className:"text-xl"}),closeMenuOnSelect:!1,onChange:N})})})]}),t.jsx(I,{label:"Notes",invalid:e.descriptions&&s.descriptions,errorMessage:e.descriptions,children:t.jsx(A,{textArea:!0,type:"text",autoComplete:"off",name:"descriptions",placeholder:"Notes",component:P,prefix:t.jsx(Le,{className:"text-xl"})})}),(m==null?void 0:m.length)>0?t.jsxs(t.Fragment,{children:[t.jsx(Zt,{title:"Additional Details",desc:"",className:"mb-2"}),t.jsx("div",{style:u,children:m==null?void 0:m.map(r=>t.jsx("div",{children:t.jsx(I,{label:r==null?void 0:r.label,children:r.inputType==="textArea"?t.jsx(A,{textArea:!0,type:"text",autoComplete:"off",name:r.name,placeholder:r==null?void 0:r.label,defaultValue:r.defaultValue,component:P,prefix:t.jsx(Ye,{className:"text-xl"})}):t.jsx(A,{type:r.inputType,autoComplete:"off",name:r.name,placeholder:r==null?void 0:r.label,defaultValue:r.defaultValue,component:P,prefix:t.jsx(Ye,{className:"text-xl"})})})},r.id))})]}):null]})},Va=Se().shape({title:M().required("Title is Required"),module:M(),type:M(),tagId:et(),connectedLead:M(),descriptions:M(),priority:M().oneOf(["none","low","medium","high"]).required("Priority is required"),nextDateTime:M().test("date-required","Date is required",function(c){const s=this.parent.type;return!((s==="followup"||s==="delivery"||s==="meeting")&&!c)})}),Ia=Se().shape({module:M(),type:M(),nextDateTime:M().test("date-required","Date is required",function(c){const s=this.parent.type;return!((s==="followup"||s==="delivery"||s==="meeting")&&!c)}),address:M().test("Address is Require","Delivery Address is Require",function(c){return!(this.parent.type==="delivery"&&!c)}),title:M().required("Title is required"),dueDate:M().required("Due Date is required"),tagId:et(),connectedLead:M(),descriptions:M(),assignedTo:M().test("is-valid-user","Invalid user selected",function(c){return this.parent.assignedTo&&this.parent.assignedTo.length>0?!!me.find(s=>s.value==c):!0}),priority:M().oneOf(["none","low","medium","high"]).required("Priority is required")}),{TabNav:Aa,TabList:Fa,TabContent:Ra}=Xe,dt=p.forwardRef((c,s)=>{var x,T,S,k;const e=E(v=>{var g,m;return(m=(g=v.crmTasks)==null?void 0:g.data)==null?void 0:m.selectedTask}),o=E(v=>{var g;return(g=v.crmTasks.data.customField)==null?void 0:g.data}),n=E(v=>v.crmTasks.data.drawerMode),a=L();function i(v){if(!v)return"";const g=v.split("T");if(g.length!==2)return"";const m=g[0],j=g[1].slice(0,5);return`${m}T${j}`}const l=v=>{const g=new Date(v);if(isNaN(g.getTime()))return"";const m=g.getFullYear(),j=(g.getMonth()+1).toString().padStart(2,"0"),D=g.getDate().toString().padStart(2,"0"),C=g.getHours().toString().padStart(2,"0"),u=g.getMinutes().toString().padStart(2,"0");return`${m}-${j}-${D} ${C}:${u}`},d=async(v,g)=>{var B,V,R,W,_,H,r;const{colorName:m,tagName:j,dueDate:D,nextDateTime:C,...u}=v,f=o.reduce((w,F)=>(w[F.name]=v[F.name],w),{}),y=l(D),b=l(C);let N,$,q;if(n==="Add")N=await a(Ct({dueDate:y,nextDateTime:b,...u,...f,tagId:v==null?void 0:v.tagId.map(w=>w.value)})),$="Successfully Added",q="Something went wrong !!!",(B=N==null?void 0:N.payload)!=null&&B.success&&a(be());else{const w={...u,tagId:v==null?void 0:v.tagId.map(F=>F.value)};b&&(w.nextDateTime=b),N=await a(he({taskId:e==null?void 0:e.id,data:w})),$="Successfully Updated",q="Something went wrong !!!",(V=N==null?void 0:N.payload)!=null&&V.success&&a(be())}const G=(R=N==null?void 0:N.payload)!=null&&R.success?"success":"danger";le.push(t.jsx(ce,{title:(W=N==null?void 0:N.payload)!=null&&W.success?$:q,type:G,duration:2500,children:(_=N==null?void 0:N.payload)!=null&&_.success?(H=N==null?void 0:N.payload)==null?void 0:H.message:(r=N==null?void 0:N.error)==null?void 0:r.message}),{placement:"top-end"}),await a(te()),await a(xe()),g(!1)},h=p.useMemo(()=>o==null?void 0:o.reduce((g,m)=>{var D;const j=(D=e==null?void 0:e.taskFields)==null?void 0:D.find(C=>(C==null?void 0:C.name)===(m==null?void 0:m.name));return g[m==null?void 0:m.name]=j?j==null?void 0:j.value:m!=null&&m.defaultValue?m==null?void 0:m.defaultValue:"",g},{}),[o]);return t.jsx($e,{innerRef:s,initialValues:{module:(e==null?void 0:e.module)||"",type:(e==null?void 0:e.type)||"",nextDateTime:i(e==null?void 0:e.nextDateTime)||"",title:(e==null?void 0:e.title)||"",address:(e==null?void 0:e.address)||"",connectedLead:(e==null?void 0:e.connectedLead)||"",dueDate:i(e==null?void 0:e.dueDate)||"",descriptions:(e==null?void 0:e.descriptions)||"",tagId:((x=e==null?void 0:e.tags)==null?void 0:x.map(v=>({label:v.tagName,value:v.id})))||[],tagName:((S=(T=e==null?void 0:e.tags)==null?void 0:T[0])==null?void 0:S.tagName)||"",priority:(e==null?void 0:e.priority)||"",assignedTo:((k=e==null?void 0:e.assignedToData)==null?void 0:k.id)||"",colorName:e!=null&&e.tags&&(e==null?void 0:e.tags.length)>0?e==null?void 0:e.tags[0].colorName:"",...h},validationSchema:n==="Edit"?Va:Ia,onSubmit:async(v,{setSubmitting:g})=>{await d(v,g)},children:({touched:v,errors:g,setFieldValue:m,values:j})=>t.jsx(qe,{children:t.jsx(Pe,{children:t.jsxs(Xe,{defaultValue:"taskDetails",children:[t.jsx(Fa,{children:t.jsx(Aa,{value:"taskDetails",children:"Tasks details"})}),t.jsx("div",{className:"p-6",children:t.jsx(Ra,{value:"taskDetails",children:t.jsx(wa,{touched:v,errors:g,values:j,setFieldValue:m})})})]})})})})});dt.displayName="TasksForm";const ut=p.forwardRef((c,s)=>{const e=L(),o=E(l=>{var d,h;return(h=(d=l.crmTasks)==null?void 0:d.data)==null?void 0:h.selectedTask}),n=E(l=>l.crmTasks.data.tasksList),{id:a}=o,i=l=>{const{name:d,birthday:h,email:x,img:T,location:S,title:k,phoneNumber:v,facebook:g,twitter:m,pinterest:j,linkedIn:D}=l,C={name:d,email:x,img:T},u={location:S,title:k,birthday:mt(h).format("DD/MM/YYYY"),phoneNumber:v,facebook:g,twitter:m,pinterest:j,linkedIn:D};let f=fe(n),y={};f=f.map(b=>(b.id===a&&(b={...b,...C},b.personalInfo={...b.personalInfo,...u},y=b),b)),Gt(y)||e(he(y)),e(be()),e(St(f))};return t.jsx(dt,{ref:s,tasks:o,onFormSubmit:i})});ut.displayName="TasksEditContent";const Pa=({onSaveClick:c,onCancel:s})=>t.jsxs("div",{className:"text-right w-full",children:[t.jsx(ae,{size:"sm",className:"mr-2",onClick:s,children:"Cancel"}),t.jsx(ae,{size:"sm",variant:"solid",onClick:c,children:"Save"})]}),La=()=>{const c=L(),s=E(d=>d.crmTasks.data.drawerOpen);E(d=>d.crmTasks.data.drawerMode),E(d=>{var h,x;return(x=(h=d.crmTasks)==null?void 0:h.data)==null?void 0:x.selectedTask});const[e,o]=p.useState(window.innerWidth/2),n=()=>{c(be()),c(oe({}))},a=p.useRef(null),i=async()=>{var d;(d=a.current)==null||d.submitForm()};p.useEffect(()=>(window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}),[]);const l=()=>{o(window.innerWidth/2)};return t.jsx(Lt,{isOpen:s,closable:!1,bodyClass:"p-0",width:e,footer:t.jsx(Pa,{onCancel:n,onSaveClick:i}),onClose:n,onRequestClose:n,children:t.jsx(ut,{ref:a})})},$a=()=>{const c=L(),s=E(u=>u.crmTasks.data.displayedTasksList),e=E(u=>u.crmTasks.data.loading);E(u=>u.crmTasks.data.filterData);const o=E(u=>u.crmTasks.data.tableData),n=Te("tasks","canDelete"),a=Te("tasks","canModify"),i=Te("tasks","canView"),l=ft(),{pageIndex:d,pageSize:h,sort:x,query:T,total:S}=E(u=>u.crmTasks.data.tableData),k=p.useCallback(()=>{c(te())},[c]);p.useEffect(()=>(k(),()=>{window.location.pathname.includes("task")||c(re({...o,query:""}))}),[k]);const v=p.useMemo(()=>({pageIndex:d,pageSize:h,sort:x,query:T,total:S}),[d,h,x,T,S]),g=({row:u})=>{const f=L();zt();const y=()=>{f(Be()),f(oe(u)),f(Ke("Edit"))},b=async()=>{await f(oe(u)),f(Ie(!0))},N=async()=>{await f(oe(u));const G=`/app/crm/task-details/${u.id}`;l(G)},$=async G=>{var W,_,H;const B={completionStatus:G},V=await f(he({taskId:u==null?void 0:u.id,data:B})),R=(W=V==null?void 0:V.payload)!=null&&W.success?{title:"Successfully Updated",type:"success",message:(_=V==null?void 0:V.payload)==null?void 0:_.message}:{title:"Something Went Wrong !!!",type:"danger",message:(H=V==null?void 0:V.error)==null?void 0:H.message};le.push(t.jsx(ce,{title:R.title,type:R==null?void 0:R.type,duration:2500,children:R.message}),{placement:"top-end"}),await f(te())},q=async()=>{if(u!=null&&u.type)switch(await f(oe(u)),u==null?void 0:u.type){case"followup":f(we(!0));break;case"quotation":f(Ve(!0));break;default:$("completed");break}else $("completed")};return t.jsxs("div",{className:"flex text-base items-center",children:[a&&t.jsx("button",{disabled:(u==null?void 0:u.completionStatus)==="completed",className:`cursor-pointer circle items-center ${(u==null?void 0:u.completionStatus)==="completed"?"!cursor-not-allowed":"cursor-pointer hover:text-indigo-500"}`,onClick:y,children:t.jsx(kt,{})}),n&&t.jsx("span",{className:"cursor-pointer hover:text-red-500 circle  mx-1 items-center",onClick:b,children:t.jsx(Mt,{})}),i&&t.jsx("span",{className:"cursor-pointer  hover:text-green-500 circle items-center text-lg",onClick:N,children:t.jsx(_t,{})}),a&&t.jsx(De,{title:"Move To In Progress",children:t.jsx("button",{disabled:(u==null?void 0:u.completionStatus)!=="pending",className:`cursor-pointer mx-1 circle items-center ${(u==null?void 0:u.completionStatus)!=="pending"?"!cursor-not-allowed":"cursor-pointer hover:text-amber-500"}`,onClick:()=>$("inProgress"),children:t.jsx(Yt,{})})},u.id+"inprogress"),a&&t.jsx(De,{title:"Move To Complete",children:t.jsx("button",{disabled:(u==null?void 0:u.completionStatus)==="completed",className:`cursor-pointer circle items-center ${(u==null?void 0:u.completionStatus)==="completed"?"!cursor-not-allowed":"cursor-pointer hover:text-emerald-500"}`,onClick:q,children:t.jsx(Ht,{})})},u.id+"complete")]})},m=p.useMemo(()=>[{header:"Action",id:"action",cell:f=>t.jsx(g,{row:f.row.original})},{header:"Title",accessorKey:"title",cell:f=>{const y=f.row.original.title;return t.jsx(De,{title:y,children:t.jsx(Ne,{text:y,maxLength:20})},y)}},{header:"Due Date",accessorKey:"dueDate",cell:f=>{var y;return Wt((y=f.row.original)==null?void 0:y.dueDate).format("DD MMMM YYYY")}},{header:"priority",accessorKey:"priority",cell:f=>{const y=f.row.original.priority;return t.jsx(ze,{status:y})}},{header:"module",accessorKey:"module",cell:f=>{var b;const y=(b=f.row.original)==null?void 0:b.module;return y?t.jsx(Ne,{text:y,maxLength:20}):"-"}},{header:"type",accessorKey:"type",cell:f=>{var b;const y=(b=f.row.original)==null?void 0:b.type;return y?t.jsx(Ne,{text:y,maxLength:20}):"-"}},{header:"Assigned to",accessorKey:"assignedTo",cell:f=>{const{firstName:y,lastName:b}=f.row.original.assignedToData||{};return y&&b?`${y} ${b}`:"-"}},{header:"Connected lead",accessorKey:"connectedLead",cell:f=>{var b;const y=f.row.original||{};return y!=null&&y.leadModel?`${(b=y==null?void 0:y.leadModel)==null?void 0:b.title}`:"-"}},{header:"Status",accessorKey:"completionStatus",cell:f=>{const y=f.row.original.completionStatus;return t.jsx(ze,{status:y})}},{header:"Tag Name",accessorKey:"tagName",cell:f=>{const y=f.row.original.tags||[];return y.length===0?"-":t.jsx(Ut,{tags:y})}}],[a,n]),j=u=>{const f=fe(v);f.pageIndex=u,c(re(f))},D=u=>{const f=fe(v);f.pageSize=Number(u),f.pageIndex=1,c(re(f))},C=u=>{const f=fe(v);f.sort=u,c(re(f))};return t.jsxs("div",{children:[t.jsx(Ft,{columns:m,data:s,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},loading:e,pagingData:{total:v.total,pageIndex:v.pageIndex,pageSize:v.pageSize},onPaginationChange:j,onSelectChange:D,onSort:C}),t.jsx(La,{}),t.jsx(it,{}),t.jsx(st,{}),t.jsx(na,{})]})},Me=c=>{const{icon:s,avatarClass:e,label:o,value:n,growthRate:a,loading:i}=c,l=55;return t.jsx(Pt,{bordered:!0,children:t.jsx(ht,{loading:i,customLoader:t.jsx(ea,{avatarProps:{className:"rounded",width:l,height:l}}),children:t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(Rt,{className:e,size:l,icon:s}),t.jsxs("div",{children:[t.jsx("span",{children:o}),t.jsx("h3",{children:t.jsx(ta,{thousandSeparator:!0,displayType:"text",value:n})})]})]})})})})},qa=()=>{const c=L(),s=E(o=>o.crmTasks.data.statisticData),e=E(o=>o.crmTasks.data.statisticLoading);return p.useEffect(()=>{c(xe())},[]),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 mb-6",children:[t.jsx(Me,{icon:t.jsx(wt,{}),avatarClass:"!bg-indigo-600",label:"Total Tasks",value:s==null?void 0:s.totalTasks,loading:e}),t.jsx(Me,{icon:t.jsx(Vt,{}),avatarClass:"!bg-blue-500",label:"Completed Tasks",value:s==null?void 0:s.completedTasks,loading:e}),t.jsx(Me,{icon:t.jsx(It,{}),avatarClass:"!bg-emerald-500",label:"This Week's New Tasks",value:s==null?void 0:s.newTasks,loading:e})]})};xt("crmTasks",Et);const Oa=()=>t.jsxs(t.Fragment,{children:[t.jsx(qa,{}),t.jsxs(gt,{bodyClass:"h-full",children:[t.jsx(aa,{}),t.jsx($a,{})]})]}),Ps=Oa;export{Ps as default};
