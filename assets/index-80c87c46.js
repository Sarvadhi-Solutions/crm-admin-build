import{r as u,a as g,j as e,ai as K,ar as H}from"./index-5b083722.js";import{A as L}from"./AdaptableCard-96bc8e59.js";import{D as q}from"./DataTable-3a401118.js";import{u as m,s as M,a as S,g as N,b,c as D,d as P,e as k,f as U,r as G}from"./AdditionalTag-2c0a87d5.js";import{u as A}from"./useThemeClass-a72d650b.js";import{B as j}from"./Button-f1066bd7.js";import{D as V}from"./Drawer-a551faf1.js";import{C as _}from"./CustomerForm-c77b3569.js";import{c as x}from"./cloneDeep-966052d2.js";import{I as J}from"./Input-48a3f72c.js";import{z as Q,B as W,d as X,a7 as Y,r as Z}from"./index.esm-577c3d7b.js";import{d as ee}from"./debounce-f64d09e7.js";import{S as te,c as se}from"./Select-356b8b96.js";import{B as T}from"./Badge-3cabc902.js";import{C as re}from"./Card-90f8ec69.js";import{A as oe}from"./index-4c1fa5e5.js";import{M as ae}from"./MediaSkeleton-1dbcebc2.js";import{N as ie}from"./react-number-format.es-918493e5.js";import"./index-2563f7cd.js";import"./index.esm-10704a6d.js";import"./Pagination-a6fcbfa4.js";import"./index-f0eb9061.js";import"./_Uint8Array-3568a2c8.js";import"./_MapCache-79b01de9.js";import"./Views-2896b481.js";import"./_baseIsEqual-ce991c11.js";import"./get-752f7dea.js";import"./toString-981652f6.js";import"./TableRowSkeleton-4018ceb2.js";import"./Skeleton-cb576037.js";import"./index-c70c47e8.js";import"./formik.esm-ca71b2a3.js";import"./context-6fe9373e.js";import"./index-3898d2cc.js";import"./Alert-02445582.js";import"./useTimeout-e6d0b381.js";import"./CloseButton-d9cd3bbc.js";import"./StatusIcon-e0b5cde3.js";import"./Calendar-ebf2d3b6.js";import"./useControllableState-60589411.js";import"./index-15ca79f1.js";import"./useMergeRef-788c4cb0.js";import"./useRootClose-bfd7b4dd.js";import"./usePopper-a11bdbe9.js";import"./RangeCalendar-baaf2850.js";import"./TimeInput-069dac51.js";import"./useUniqueId-7aeed284.js";import"./useDidUpdate-f47f5e27.js";import"./Dialog-5dd7ece1.js";import"./index-f8748c0d.js";import"./index-0e58897c.js";import"./useUncertainRef-a9591e46.js";import"./isNil-416a1774.js";import"./chainedFunction-070f832c.js";import"./index-0fd37ad7.js";import"./index-dd3cb046.js";import"./index-b09fd56f.js";import"./toast-6a0b7cb5.js";import"./Progress-f8bc0fe1.js";import"./index-6d78d8ac.js";import"./ScrollBar-4be37f27.js";import"./index-b665f1fe.js";import"./index-9a196290.js";import"./mapCloneElement-61eaeae6.js";import"./Switcher-93fd8b6f.js";import"./index-e60138cc.js";import"./Tag-ae955d4e.js";import"./index-562c2113.js";import"./index-d72af9ba.js";import"./Tooltip-25cec1e2.js";import"./index.esm-2966f74b.js";import"./Upload-3bc63f23.js";import"./index.esm-28b84125.js";import"./index.esm-48411fb0.js";import"./CrmService-98616c23.js";import"./index.esm-7fc76d40.js";import"./index.esm-9459b8e1.js";/* empty css              */import"./_getPrototype-6d07ecf6.js";import"./toConsumableArray-d895a881.js";import"./objectWithoutPropertiesLoose-df62547b.js";import"./floating-ui.dom-bef9cea3.js";const I=u.forwardRef((s,t)=>{g();const r=m(n=>n.crmCustomers.data.selectedCustomer);m(n=>n.crmCustomers.data.customerList);const o=async n=>{};return e.jsx(_,{ref:t,customer:r,onFormSubmit:o})});I.displayName="CustomerEditContent";const ne=({onSaveClick:s,onCancel:t})=>e.jsxs("div",{className:"text-right w-full",children:[e.jsx(j,{size:"sm",className:"mr-2",onClick:t,children:"Cancel"}),e.jsx(j,{size:"sm",variant:"solid",onClick:s,children:"Save"})]}),le=()=>{const s=g(),t=m(c=>c.crmCustomers.data.drawerOpen),r=()=>{s(M()),s(S({}))},o=u.useRef(null),n=()=>{var c,l;console.log("formSubmit function called",(c=o.current)==null?void 0:c.values),(l=o.current)==null||l.submitForm()};return e.jsx(V,{isOpen:t,closable:!1,bodyClass:"p-0",footer:e.jsx(ne,{onCancel:r,onSaveClick:n}),onClose:r,onRequestClose:r,children:e.jsx(I,{ref:o})})},ce=({row:s})=>{const{textTheme:t}=A(),r=g(),o=()=>{r(D()),r(S(s))};return e.jsx("div",{className:`${t} cursor-pointer select-none font-semibold`,onClick:o,children:"Edit"})},me=({row:s})=>{const{textTheme:t}=A(),r=g(),o=async()=>{console.log(s,"Bhai Agaya"),await r(P(s.id)),await r(N())};return e.jsx("div",{className:`${t} cursor-pointer select-none font-semibold`,onClick:o,children:"Delete"})},de=()=>{const s=g(),t=m(a=>a.crmCustomers.data.customerList),r=m(a=>a.crmCustomers.data.loading),o=m(a=>a.crmCustomers.data.filterData),{pageIndex:n,pageSize:c,sort:l,query:i,total:d}=m(a=>a.crmCustomers.data.tableData),h=u.useCallback(()=>{s(N())},[s]);u.useEffect(()=>{h()},[h,n,c,l,o]);const C=u.useMemo(()=>({pageIndex:n,pageSize:c,sort:l,query:i,total:d}),[n,c,l,i,d]),z=u.useMemo(()=>[{header:"Customer Name",accessorKey:"clientName",cell:a=>a.row.original.clientName,width:200},{header:"Contact Number",accessorKey:"contactInfo",cell:a=>a.row.original.contactInfo,width:200},{header:"Address",accessorKey:"address",cell:a=>a.row.original.address,width:200},{header:"Billing Details",accessorKey:"billingDetails",cell:a=>a.row.original.billingDetails,width:200},{header:"History",accessorKey:"history",cell:a=>a.row.original.history,width:200},{header:"Notes",accessorKey:"notes",cell:a=>a.row.original.notes,width:200},{header:"Tag Name",accessorKey:"tagName",width:200,cell:a=>{const B=(a.row.original.tags||[]).map(w=>{const f=w.colorName||"#000000",$={backgroundColor:`rgba(${parseInt(f.slice(1,3),16)}, ${parseInt(f.slice(3,5),16)}, ${parseInt(f.slice(5,7),16)}, 0.2)`,color:f,padding:"4px 8px",borderRadius:"4px",marginRight:"4px",marginBottom:"4px"};return e.jsx("div",{style:$,children:w.tagName},w.id)});return e.jsx("div",{children:B})}},{header:"Edit",id:"action",cell:a=>e.jsx(ce,{row:a.row.original})},{header:"Delete",id:"action",cell:a=>e.jsx(me,{row:a.row.original})}],[]),E=a=>{const p=x(C);p.pageIndex=a,s(b(p))},F=a=>{const p=x(C);p.pageSize=Number(a),p.pageIndex=1,s(b(p))},O=a=>{const p=x(C);p.sort=a,s(b(p))};return e.jsxs("div",{children:[e.jsx(q,{columns:z,data:t,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},loading:r,pagingData:{total:C.total,pageIndex:C.pageIndex,pageSize:C.pageSize},onPaginationChange:E,onSelectChange:F,onSort:O}),e.jsx(le,{})]})},R=u.forwardRef((s,t)=>{const{onInputChange:r}=s,o=ee(n,500);function n(l){r==null||r(l)}const c=l=>{o(l.target.value)};return e.jsx(J,{ref:t,className:"max-w-md md:w-52 mb-4",size:"sm",placeholder:"Search",prefix:e.jsx(Q,{className:"text-lg"}),onChange:c})});R.displayName="CustomerTableSearch";const{Control:pe}=se,y=[{value:"",label:"All",color:"bg-gray-500"},{value:"active",label:"Active",color:"bg-emerald-500"},{value:"blocked",label:"Blocked",color:"bg-red-500"}],ue=({innerProps:s,label:t,data:r,isSelected:o})=>e.jsxs("div",{className:`flex items-center justify-between p-2 cursor-pointer ${o?"bg-gray-100 dark:bg-gray-500":"hover:bg-gray-50 dark:hover:bg-gray-600"}`,...s,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(T,{innerClass:r.color}),e.jsx("span",{children:t})]}),o&&e.jsx(W,{className:"text-emerald-500 text-xl"})]}),ge=({children:s,...t})=>{const r=t.getValue()[0];return e.jsxs(pe,{...t,children:[r&&e.jsx(T,{className:"ltr:ml-4 rtl:mr-4",innerClass:r.color}),s]})},he=()=>{const s=g(),{status:t}=m(o=>o.crmCustomers.data.filterData),r=o=>{s(k({status:o==null?void 0:o.value}))};return e.jsx(te,{options:y,size:"sm",className:"mb-4 min-w-[130px]",components:{Option:ue,Control:ge},value:y.filter(o=>o.value===t),onChange:r})},Ce=()=>{const s=g(),t=u.useRef(null),r=m(i=>i.crmCustomers.data.tableData),o=i=>{const d=x(r);d.query=i,d.pageIndex=1,typeof i=="string"&&i.length>1&&n(d),typeof i=="string"&&i.length===0&&n(d)},n=i=>{s(b(i)),s(N())},c=()=>{const i=x(r);i.query="",t.current&&(t.current.value=""),s(k({status:""})),n(i)},l=()=>{s(D())};return e.jsxs("div",{className:"md:flex items-center justify-between",children:[e.jsxs("div",{className:"md:flex items-center gap-4",children:[e.jsx(R,{ref:t,onInputChange:o}),e.jsx(he,{})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(j,{size:"sm",className:"me-2",onClick:c,children:"Clear All"}),e.jsx(j,{size:"sm",onClick:l,children:"Add New"})]})]})},v=s=>{const{icon:t,avatarClass:r,label:o,value:n,growthRate:c,loading:l}=s,i=55;return e.jsx(re,{bordered:!0,children:e.jsx(K,{loading:l,customLoader:e.jsx(ae,{avatarProps:{className:"rounded",width:i,height:i}}),children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(oe,{className:r,size:i,icon:t}),e.jsxs("div",{children:[e.jsx("span",{children:o}),e.jsx("h3",{children:e.jsx(ie,{thousandSeparator:!0,displayType:"text",value:n})})]})]})})})})},xe=()=>{var o,n,c,l,i,d;const s=g(),t=m(h=>h.crmCustomers.data.statisticData),r=m(h=>h.crmCustomers.data.statisticLoading);return u.useEffect(()=>{s(U())},[]),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 mb-6",children:[e.jsx(v,{icon:e.jsx(X,{}),avatarClass:"!bg-indigo-600",label:"Total Customers",value:(o=t==null?void 0:t.totalCustomers)==null?void 0:o.value,growthRate:(n=t==null?void 0:t.totalCustomers)==null?void 0:n.growShrink,loading:r}),e.jsx(v,{icon:e.jsx(Y,{}),avatarClass:"!bg-blue-500",label:"Active Customers",value:(c=t==null?void 0:t.activeCustomers)==null?void 0:c.value,growthRate:(l=t==null?void 0:t.activeCustomers)==null?void 0:l.growShrink,loading:r}),e.jsx(v,{icon:e.jsx(Z,{}),avatarClass:"!bg-emerald-500",label:"New Customers",value:(i=t==null?void 0:t.newCustomers)==null?void 0:i.value,growthRate:(d=t==null?void 0:t.newCustomers)==null?void 0:d.growShrink,loading:r})]})};H("crmCustomers",G);const fe=()=>e.jsxs(e.Fragment,{children:[e.jsx(xe,{}),e.jsxs(L,{bodyClass:"h-full",children:[e.jsx(Ce,{}),e.jsx(de,{})]})]}),_t=fe;export{_t as default};
