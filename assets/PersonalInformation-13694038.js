import{a as F,r as j,j as e}from"./index-8f180057.js";import"./Alert-26b93c15.js";import"./index-50da1f05.js";import"./Badge-da9b4bac.js";import{B as w}from"./Button-9a124664.js";import"./RangeCalendar-4f882c48.js";import"./Card-c08b3dc7.js";import"./index-467c57d1.js";import"./index-f90d0a46.js";import"./Dialog-00762d81.js";import"./Drawer-9e2f40a2.js";import"./index-57f971c2.js";import{F as q,a as p}from"./FormItem-6da989b2.js";import"./toString-6546c1f5.js";import{I as g}from"./Input-80948cc5.js";import{I as V}from"./index-c14dd8b2.js";import"./index-7419ce87.js";import"./index-8db80fc8.js";import{t as O}from"./toast-d4a23693.js";import"./Pagination-02ddc899.js";import"./Progress-4aad2981.js";import"./index-f1c49e5c.js";import"./ScrollBar-cc732ada.js";import"./index-5c4aebcf.js";import{S as h,c as A}from"./Select-b8e32f8a.js";import"./Skeleton-a652bf9f.js";import"./index-3ad4fd06.js";import"./Switcher-b15fc15a.js";import"./index-68091566.js";import"./index-19730294.js";import"./Tag-f078f978.js";import"./index-04594492.js";import"./index-f2e93cf2.js";import"./Tooltip-c46cdf61.js";import"./Upload-5d1aec4a.js";import{c as N}from"./countries.constant-5369f7df.js";import{F as E,a as M,b as l}from"./formik.esm-23c950a3.js";import{N as P}from"./react-number-format.es-8632b3a3.js";import{c as R,a as c}from"./index.esm-f2cf7456.js";import{u as $,g as k}from"./index-6dde7db2.js";import{C as D}from"./react-select-creatable.esm-e6c61a69.js";import{j as B}from"./index-8fcdd113.js";import"./useTimeout-6ce9cc18.js";import"./index.esm-d559b7a8.js";import"./CloseButton-f457d2a5.js";import"./StatusIcon-af9b884d.js";import"./Views-0f0dd1b0.js";import"./useMergeRef-788c4cb0.js";import"./useControllableState-a20a08a7.js";import"./cloneDeep-1f39f070.js";import"./_MapCache-c801105a.js";import"./_getPrototype-6ef2344b.js";import"./_baseIsEqual-f757163a.js";import"./get-49349d76.js";import"./useRootClose-849d9b9c.js";import"./usePopper-4f231cdc.js";import"./TimeInput-a4c2e8c8.js";import"./useUniqueId-b6b18158.js";import"./useDidUpdate-6bcd31b9.js";import"./index-21bd03ca.js";import"./useUncertainRef-cd8eb299.js";import"./isNil-7f5c5bc3.js";import"./index-56b40026.js";import"./chainedFunction-070f832c.js";import"./slicedToArray-4e770983.js";import"./objectWithoutProperties-8809bfcf.js";import"./toConsumableArray-10fd47e9.js";import"./floating-ui.dom-4bc0055b.js";import"./mapCloneElement-4d24a9a7.js";import"./index.esm-7da1e9bd.js";import"./index.esm-047fe164.js";import"./index.esm-e628df3b.js";import"./AdaptableCard-4ed28de0.js";import"./useThemeClass-fedd2393.js";import"./AccountServices-11482fa9.js";import"./CrmService-4ead0dba.js";const S=[{label:"01 ~ 09 members",value:"01~09"},{label:"10 ~ 29 members",value:"10~29"},{label:"30 ~ 49 members",value:"30~49"},{label:"50 ~ 99 members",value:"50~99"},{label:"100+",value:"100+"}],{SingleValue:W}=A,G=i=>e.jsx(g,{...i,value:i.field.value}),L=({onValueChange:i,...o})=>e.jsx(P,{customInput:g,type:"text",autoComplete:"off",onValueChange:i,...o}),T=({innerProps:i,data:o,isSelected:b})=>e.jsx("div",{className:`cursor-pointer flex items-center justify-between p-2 ${b?"bg-gray-100 dark:bg-gray-500":"hover:bg-gray-50 dark:hover:bg-gray-600"}`,...i,children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{children:["(",o.value,") ",o.dialCode]})})}),H=i=>{const o=i.getValue()[0];return e.jsx(W,{...i,children:o&&e.jsx("span",{children:o.dialCode})})},J=R().shape({organizationName:c().required("Name is Required"),email:c().email("Invalid email").required("Email Required"),industry:c().required("Industry is Required"),contact:c().typeError("Contact must be a number").required("Contact is required").test("is-number","Contact must be a number",i=>!isNaN(i)).test("is-ten-digits","Contact must be exactly 10 digits",i=>{if(i){const o=Number(i);return/^\d{10}$/.test(o.toString())}return!0}).test("is-ten-digits","Contact number cannot start with 0",i=>i?!i.startsWith("0"):!0),organizationSize:c().required("Please select your organization size"),dialCode:c().required("Please select dialCode")}),ft=({data:i={logo:"",industry:"",organizationName:"",email:"",website:"",dialCode:"",contact:"",organizationSize:""},onNextChange:o,currentStepStatus:b})=>{const f=$(m=>{var a,t;return(t=(a=m.crmAccountDetailForm)==null?void 0:a.data)==null?void 0:t.industryList}),x=F(),y=j.useCallback(async()=>{await x(k())},[x]),z=j.useMemo(()=>f==null?void 0:f.map(a=>({label:a.industryName,value:a.id})),[f]);j.useEffect(()=>{y()},[y]);const I=async(m,a)=>{var s,n,v,C;const t=await x(B(m));let d="",u="",r="danger";(s=t==null?void 0:t.payload)!=null&&s.success?(d="Successfully Added",u=(n=t==null?void 0:t.payload)==null?void 0:n.message,r="success",o==null||o(m,"personalInformation",a)):(d="Something went wrong !!!",u=(v=t==null?void 0:t.error)==null?void 0:v.message),(C=t==null?void 0:t.payload)!=null&&C.success&&(o==null||o(m,"personalInformation",a)),O.push(e.jsx(Notification,{title:d,type:r,duration:2500,children:u}),{placement:"top-end"}),a(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"mb-2",children:"Organization Information"}),e.jsx("p",{children:"Basic information for opening an organization"})]}),e.jsx(E,{initialValues:i,enableReinitialize:!0,validationSchema:J,onSubmit:(m,{setSubmitting:a})=>{a(!0),setTimeout(()=>{I(m,a)},1e3)},children:({values:m,touched:a,errors:t,isSubmitting:d,setFieldValue:u})=>e.jsx(M,{children:e.jsxs(q,{children:[e.jsxs("div",{className:"md:grid grid-cols-2 gap-4",children:[e.jsx(p,{label:"Name of Organization",invalid:t.organizationName&&a.organizationName,errorMessage:t.organizationName,children:e.jsx(l,{type:"text",autoComplete:"off",name:"organizationName",placeholder:"Organization Name",component:g})}),e.jsx(p,{label:"Industry",invalid:t.industry&&a.industry,errorMessage:t.industry,children:e.jsx(l,{isClearable:!0,type:"text",autoComplete:"off",name:"industry",placeholder:"industry",value:z.find(r=>(r==null?void 0:r.value)===(m==null?void 0:m.industry)),component:h,componentAs:D,options:z,onChange:r=>{u("industry",r.value||"")}})})]}),e.jsx(p,{label:"Website",children:e.jsx(l,{type:"text",autoComplete:"off",name:"website",placeholder:"Website",component:g})}),e.jsx(p,{label:"Size of your organization",invalid:t.organizationSize&&a.organizationSize,errorMessage:t.organizationSize,children:e.jsx(l,{name:"organizationSize",children:({field:r,form:s})=>e.jsx(h,{placeholder:"Organization Size...",field:r,form:s,options:S,value:S.filter(n=>n.value===m.organizationSize),onChange:n=>s.setFieldValue(r.name,n==null?void 0:n.value)})})}),e.jsx(p,{label:"Email",invalid:t.email&&a.email,errorMessage:t.email,children:e.jsx(l,{type:"email",autoComplete:"off",name:"email",placeholder:"Email",component:g})}),e.jsx("div",{className:"md:grid grid-cols-2 gap-4",children:e.jsx(p,{label:"Phone Number",invalid:t.dialCode&&a.dialCode||t.contact&&a.contact,errorMessage:t.contact,children:e.jsxs(V,{children:[e.jsx(l,{name:"dialCode",children:({field:r,form:s})=>e.jsx(h,{className:"min-w-[130px]",placeholder:"Dial Code",components:{Option:T,SingleValue:H},field:r,form:s,options:N,value:N.filter(n=>n.value===m.dialCode),onChange:n=>s.setFieldValue(r.name,n==null?void 0:n.value)})}),e.jsx(l,{name:"contact",children:({field:r,form:s})=>e.jsx(L,{form:s,field:r,customInput:G,placeholder:"Phone Number",onValueChange:n=>{s.setFieldValue(r.name,n.value)}})})]})})}),e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx(w,{loading:d,variant:"solid",type:"submit",children:b==="complete"?"Save":"Next"})})]})})})]})};export{ft as default};
