import{al as r,am as p,an as g,ao as u}from"./index-7b0349c6.js";import{s as k,t as y,u as i,g as T,v as m,w as f,o as w,p as l,q as C}from"./CrmService-d23a3034.js";import{g as L}from"./index-e86caf15.js";import{g as D}from"./index-2143c245.js";const S="crmTasks",o=r("crmTasks/data/getTasksStatistic",async()=>(await k()).data),n=r("crmTasks/data/getTasks",async()=>(await y()).data);r("crmTasks/data/editTask",async({taskId:s,updatedData:a})=>(await i(s,a)).data);const h=r("crmLeads/data/getLeads",async()=>(await T()).data),q=r("crmTasks/data/deleteTask",async s=>{var a,e;try{return(await m(s)).data}catch(t){throw new Error((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)}}),z=r("crmTasks/data/putTasks",async({taskId:s,data:a})=>{var e,t;try{return(await i(s,a)).data}catch(d){throw new Error((t=(e=d==null?void 0:d.response)==null?void 0:e.data)==null?void 0:t.message)}}),F=r("crmTasks/data/createTasks",async s=>{var a,e;try{return(await f(s)).data}catch(t){throw new Error((e=(a=t==null?void 0:t.response)==null?void 0:a.data)==null?void 0:e.message)}}),U=r("crmTasks/data/module",async()=>(await w()).data),R=r("tag-category",async({id:s})=>(await l(s)).data);r("crmTasks/data/fetchTag",async({id:s})=>(await l(s)).data);r("crmTasks/data/createTag",async({masterId:s,colorName:a,tagName:e,tagCategoryId:t})=>(await C({colorName:a,tagName:e,masterId:s,tagCategoryId:t})).data);const b={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},M={status:""},x={loading:!1,statisticLoading:!1,tasksList:[],displayedTasksList:[],statisticData:{},tableData:b,filterData:M,drawerOpen:!1,selectedTask:{},usersList:[],contactsList:[],leadsList:[],drawerMode:"Add",deleteConfirmation:!1},c=p({name:`${S}/state`,initialState:x,reducers:{setTableData:(s,a)=>{s.tableData=a.payload;const e=s.tasksList.filter(t=>t.title.toLowerCase().includes(a.payload.query.toLowerCase()));s.displayedTasksList=e.slice(a.payload.pageSize*(a.payload.pageIndex-1),a.payload.pageSize*a.payload.pageIndex)},setTasksList:(s,a)=>{s.tasksList=a.payload},setUsersList:(s,a)=>{s.usersList=a.payload},setContactsList:(s,a)=>{s.usersList=a.payload},setFilterData:(s,a)=>{s.filterData=a.payload},setSelectedTask:(s,a)=>{s.selectedTask=a.payload},setDrawerOpen:s=>{s.drawerOpen=!0},setDrawerClose:s=>{s.drawerOpen=!1},setDrawerMode:(s,a)=>{s.drawerMode=a.payload},toggleDeleteConfirmation:(s,a)=>{s.deleteConfirmation=a.payload}},extraReducers:s=>{s.addCase(n.fulfilled,(a,e)=>{a.tasksList=e.payload.data,a.tableData.total=e.payload.data.length,a.displayedTasksList=e.payload.data.slice(0,10),a.loading=!1}).addCase(D.fulfilled,(a,e)=>{a.usersList=e.payload.data,a.loading=!1}).addCase(L.fulfilled,(a,e)=>{a.contactsList=e.payload.data,a.loading=!1}).addCase(n.pending,a=>{a.loading=!0}).addCase(o.fulfilled,(a,e)=>{a.statisticData=e.payload,a.statisticLoading=!1}).addCase(h.fulfilled,(a,e)=>{a.leadsList=e.payload.data,a.loading=!1}).addCase(o.pending,a=>{a.statisticLoading=!0})}}),{setTableData:j,setTasksList:v,setFilterData:N,setSelectedTask:P,setDrawerOpen:_,setDrawerClose:$,setContactsList:B,setDrawerMode:H,setUsersList:J,toggleDeleteConfirmation:K}=c.actions,E=c.reducer,Q=g({data:E}),V=u;export{j as a,_ as b,o as c,q as d,h as e,U as f,n as g,R as h,F as i,$ as j,v as k,P as l,z as p,Q as r,H as s,K as t,V as u};
