import{al as o,am as D,an as L,ao as S}from"./index-e30b2821.js";import{C as h,h as b,D as E,E as G,F as q,G as T,H as x,I,J as z,K as N,o as O,p as w,q as F}from"./CrmService-42c2fe6d.js";const k="crmContact",u=o("crmContact/data/getContactStatistic",async()=>(await h()).data),g=o("crmContact/data/getContact",async()=>(await b()).data),A=o("crmContact/data/getSource",async()=>{const e=await E();return console.log({response:e}),e.data}),M=o("crmContact/data/getStates",async()=>{const e=await G();return console.log({response:e}),e.data}),R=o("crmContact/data/getCities",async()=>{const e=await q();return console.log({response:e}),e.data}),$=o("crmContact/data/createSource",async e=>{var a,t;try{return(await T(e)).data}catch(s){throw new Error((t=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:t.message)}}),m=o("crmCompany/data/getCompany",async()=>(await x()).data),v=o("crmContact/data/editContact",async({contactId:e,updatedData:a})=>{var t,s;try{return(await I(e,a)).data}catch(n){throw new Error((s=(t=n==null?void 0:n.response)==null?void 0:t.data)==null?void 0:s.message)}}),B=o("crmContact/data/deleteContact",async e=>{var a,t;try{return await z(e)}catch(s){throw new Error((t=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:t.message)}}),Q=o("crmContact/data/createContact",async e=>{var a,t;try{return(await N(e)).data}catch(s){throw new Error((t=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:t.message)}}),U=o("crmContact/data/module",async()=>{var e,a;try{return(await O()).data}catch(t){throw new Error((a=(e=t==null?void 0:t.response)==null?void 0:e.data)==null?void 0:a.message)}}),V=o("tag-category",async({id:e})=>{var a,t;try{return(await w(e)).data}catch(s){throw new Error((t=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:t.message)}});o("crmContact/data/fetchTag",async({id:e})=>{var a,t;try{return(await w(e)).data}catch(s){throw new Error((t=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:t.message)}});o("crmContact/data/createTag",async({masterId:e,colorName:a,tagName:t,tagCategoryId:s})=>(await F({colorName:a,tagName:t,masterId:e,tagCategoryId:s})).data);const j={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},H={status:""},J={loading:!1,sources:[],statisticLoading:!1,contactList:[],displayedContactList:[],companyList:[],states:[],cities:[],statisticData:{},tableData:j,filterData:H,drawerOpen:!1,selectedContact:{},deleteConfirmation:!1},f=D({name:`${k}/state`,initialState:J,reducers:{setTableData:(e,a)=>{var s;e.tableData=a.payload;const t=(s=e.contactList)==null?void 0:s.filter(n=>n.firstName.toLowerCase().includes(a.payload.query.toLowerCase())||n.lastName.toLowerCase().includes(a.payload.query.toLowerCase())||n.email.toLowerCase().includes(a.payload.query.toLowerCase()));e.tableData={...a.payload,total:t==null?void 0:t.length},e.displayedContactList=t.slice(a.payload.pageSize*(a.payload.pageIndex-1),a.payload.pageSize*a.payload.pageIndex)},setContactList:(e,a)=>{e.contactList=a.payload},setFilterData:(e,a)=>{e.filterData=a.payload},setSelectedContact:(e,a)=>{e.selectedContact=a.payload},setDrawerOpen:e=>{e.drawerOpen=!0},setDrawerClose:e=>{e.drawerOpen=!1},toggleDeleteConfirmation:(e,a)=>{e.deleteConfirmation=a.payload}},extraReducers:e=>{e.addCase(g.fulfilled,(a,t)=>{var n,c,d,l,i,p,C,y;a.contactList=t.payload.data,a.tableData.total=(c=(n=t.payload)==null?void 0:n.data)==null?void 0:c.length;const s=(l=(d=t.payload)==null?void 0:d.data)==null?void 0:l.filter(r=>r.firstName.toLowerCase().includes(a.tableData.query||"".toLowerCase())||r.lastName.toLowerCase().includes(a.tableData.query||"".toLowerCase())||r.email.toLowerCase().includes(a.tableData.query||"".toLowerCase()));a.displayedContactList=s.slice(((i=a==null?void 0:a.tableData)==null?void 0:i.pageSize)*(((p=a==null?void 0:a.tableData)==null?void 0:p.pageIndex)-1),((C=a==null?void 0:a.tableData)==null?void 0:C.pageSize)*((y=a==null?void 0:a.tableData)==null?void 0:y.pageIndex)),a.loading=!1}).addCase(g.pending,a=>{a.loading=!0}).addCase(u.fulfilled,(a,t)=>{a.statisticData=t.payload,a.statisticLoading=!1}).addCase(u.pending,a=>{a.statisticLoading=!0}).addCase(m.fulfilled,(a,t)=>{a.companyList=t.payload.data,a.loading=!1}).addCase(m.pending,a=>{a.loading=!0}).addCase(A.fulfilled,(a,t)=>{a.sources=t.payload.data}).addCase(M.fulfilled,(a,t)=>{a.states=t.payload.data}).addCase(R.fulfilled,(a,t)=>{a.cities=t.payload.data})}}),{setTableData:W,setContactList:X,setFilterData:Y,setSelectedContact:Z,setDrawerOpen:aa,setDrawerClose:ea,toggleDeleteConfirmation:ta}=f.actions,K=f.reducer,sa=L({data:K}),oa=S;export{u as a,m as b,M as c,B as d,R as e,U as f,g,V as h,$ as i,A as j,v as k,Q as l,ea as m,W as n,aa as o,sa as r,Z as s,ta as t,oa as u};
