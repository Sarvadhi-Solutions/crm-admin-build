import{am as $,B as l,an as O,ao as Y,ap as k,a as C,j as e,aq as B,r as S,ai as A,ar as F}from"./index-04de45f1.js";import{a as H}from"./SalesService-5e3c520f.js";import{D as E}from"./index-688929a7.js";import{B as u}from"./Button-c014eb4a.js";import{am as z}from"./index.esm-dece01db.js";import{C as d}from"./Card-5dadf163.js";import{N as v}from"./react-number-format.es-042f37c4.js";import{G as V}from"./GrowShrinkTag-5be02b36.js";import{C as N}from"./Chart-4c54e4c7.js";import{B as T}from"./Badge-fd219ce7.js";import{C as L}from"./chart.constant-ce23b755.js";import{T as p}from"./index-f4f40370.js";import{u as G}from"./useThemeClass-d6175223.js";import{c as w,u as y,g as M,f as m}from"./index-57d63c42.js";import{A as g}from"./index-d960fe16.js";import{a as q}from"./index.esm-6e78eb06.js";import"./useControllableState-517757cf.js";import"./useMergeRef-788c4cb0.js";import"./Calendar-3ea43322.js";import"./Input-177911dc.js";import"./context-3f43d22b.js";import"./Views-9d427d6f.js";import"./isNil-2d09164b.js";import"./get-e02c019e.js";import"./toString-85ae3482.js";import"./_MapCache-593c8f28.js";import"./useRootClose-9c807e39.js";import"./usePopper-301f1b7b.js";import"./CloseButton-c81f3a7a.js";import"./RangeCalendar-31722222.js";import"./TimeInput-89c18d58.js";import"./useUniqueId-d1553e7a.js";import"./useDidUpdate-be24419c.js";import"./Tag-b89b8728.js";import"./chart.config-801963e0.js";import"./index.esm-bec52084.js";import"./Tooltip-8263a1ca.js";import"./index.esm-86efb1ff.js";import"./index-5206a52a.js";const R="salesDashboard",x=$(R+"/getSalesDashboardData",async()=>(await H()).data),I={startDate:l(l().subtract(3,"month").format("DD-MMM-YYYY, hh:mm A")).unix(),endDate:l(new Date).unix(),loading:!0,dashboardData:{}},P=O({name:`${R}/state`,initialState:I,reducers:{setStartDate:(t,s)=>{t.startDate=s.payload},setEndDate:(t,s)=>{t.endDate=s.payload}},extraReducers:t=>{t.addCase(x.fulfilled,(s,r)=>{s.dashboardData=r.payload,s.loading=!1}).addCase(x.pending,s=>{s.loading=!0})}}),{setStartDate:_,setEndDate:J}=P.actions,K=P.reducer,Q=Y({data:K}),c=k,U="MMM DD, YYYY",{DatePickerRange:W}=E,X=()=>{const t=C(),s=c(n=>n.salesDashboard.data.startDate),r=c(n=>n.salesDashboard.data.endDate),o=n=>{t(_(l(n[0]).unix())),t(J(l(n[1]).unix()))},a=()=>{t(x())};return e.jsxs("div",{className:"lg:flex items-center justify-between mb-4 gap-3",children:[e.jsxs("div",{className:"mb-4 lg:mb-0",children:[e.jsx("h3",{children:"Sales Overview"}),e.jsx("p",{children:"View your current sales & summary"})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-3",children:[e.jsx(W,{value:[l.unix(s).toDate(),l.unix(r).toDate()],inputFormat:U,size:"sm",onChange:o}),e.jsx(u,{size:"sm",icon:e.jsx(z,{}),onClick:a,children:"Filter"})]})]})},h=({data:t={value:0,growShrink:0},label:s,valuePrefix:r,date:o})=>e.jsxs(d,{children:[e.jsx("h6",{className:"font-semibold mb-4 text-sm",children:s}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold",children:e.jsx(v,{thousandSeparator:!0,displayType:"text",value:t.value,prefix:r})}),e.jsxs("p",{children:["vs. 3 months prior to"," ",e.jsx("span",{className:"font-semibold",children:l(o).format("DD MMM")})]})]}),e.jsx(V,{value:t.growShrink,suffix:"%"})]})]}),Z=({data:t={}})=>{const s=c(r=>r.salesDashboard.data.startDate);return e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx(h,{data:t.revenue,valuePrefix:"$",label:"Revenue",date:s}),e.jsx(h,{data:t.orders,label:"Orders",date:s}),e.jsx(h,{data:t.purchases,valuePrefix:"$",label:"Purchases",date:s})]})},ee=({className:t,data:s={}})=>e.jsxs(d,{className:t,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h4",{children:"Sales Report"}),e.jsx(u,{size:"sm",children:"Export Report"})]}),e.jsx(N,{series:s.series,xAxis:s.categories,height:"380px",customOptions:{legend:{show:!1}}})]}),se=({data:t={labels:[],data:[]}})=>e.jsxs(d,{children:[e.jsx("h4",{children:"Categories"}),e.jsx("div",{className:"mt-6",children:t.data.length>0&&e.jsxs(e.Fragment,{children:[e.jsx(N,{donutTitle:`${t.data.reduce((s,r)=>s+r,0)}`,donutText:"Product Sold",series:t.data,customOptions:{labels:t.labels},type:"donut"}),t.data.length===t.labels.length&&e.jsx("div",{className:"mt-6 grid grid-cols-2 gap-4 max-w-[180px] mx-auto",children:t.labels.map((s,r)=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(T,{badgeStyle:{backgroundColor:L[r]}}),e.jsx("span",{className:"font-semibold",children:s})]},s))})]})})]}),{Tr:f,Td:te,TBody:ae,THead:re,Th:oe}=p,j={0:{label:"Paid",dotClass:"bg-emerald-500",textClass:"text-emerald-500"},1:{label:"Pending",dotClass:"bg-amber-500",textClass:"text-amber-500"},2:{label:"Failed",dotClass:"bg-red-500",textClass:"text-red-500"}},le=({row:t})=>{const{textTheme:s}=G(),r=B(),o=S.useCallback(()=>{r(`/app/sales/order-details/${t.id}`)},[r,t]);return e.jsxs("span",{className:`cursor-pointer select-none font-semibold hover:${s}`,onClick:o,children:["#",t.id]})},i=w(),ne=[i.accessor("id",{header:"Order",cell:t=>e.jsx(le,{row:t.row.original})}),i.accessor("status",{header:"Status",cell:t=>{const{status:s}=t.row.original;return e.jsxs("div",{className:"flex items-center",children:[e.jsx(T,{className:j[s].dotClass}),e.jsx("span",{className:`ml-2 rtl:mr-2 capitalize font-semibold ${j[s].textClass}`,children:j[s].label})]})}}),i.accessor("date",{header:"Date",cell:t=>{const s=t.row.original;return e.jsx("span",{children:l.unix(s.date).format("DD/MM/YYYY")})}}),i.accessor("customer",{header:"Customer"}),i.accessor("totalAmount",{header:"Profile Progress",cell:t=>{const{totalAmount:s}=t.row.original;return e.jsx(v,{displayType:"text",value:(Math.round(s*100)/100).toFixed(2),prefix:"$",thousandSeparator:!0})}})],ie=({data:t=[],className:s})=>{const r=y({data:t,columns:ne,getCoreRowModel:M()});return e.jsxs(d,{className:s,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h4",{children:"Latest Orders"}),e.jsx(u,{size:"sm",children:"View Orders"})]}),e.jsxs(p,{children:[e.jsx(re,{children:r.getHeaderGroups().map(o=>e.jsx(f,{children:o.headers.map(a=>e.jsx(oe,{colSpan:a.colSpan,children:m(a.column.columnDef.header,a.getContext())},a.id))},o.id))}),e.jsx(ae,{children:r.getRowModel().rows.map(o=>e.jsx(f,{children:o.getVisibleCells().map(a=>e.jsx(te,{children:m(a.column.columnDef.cell,a.getContext())},a.id))},o.id))})]})]})},{Tr:b,Td:ce,TBody:de,THead:me,Th:xe}=p,ue=({row:t})=>{const s=t.img?e.jsx(g,{src:t.img}):e.jsx(g,{icon:e.jsx(q,{})});return e.jsxs("div",{className:"flex items-center gap-2",children:[s,e.jsx("span",{className:"font-semibold",children:t.name})]})},D=w(),pe=[D.accessor("name",{header:"Product",cell:t=>{const s=t.row.original;return e.jsx(ue,{row:s})}}),D.accessor("sold",{header:"Sold"})],he=({data:t=[],className:s})=>{const r=y({data:t,columns:pe,getCoreRowModel:M()});return e.jsxs(d,{className:s,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h4",{children:"Top Selling"}),e.jsx(u,{size:"sm",children:"View Products"})]}),e.jsxs(p,{children:[e.jsx(me,{children:r.getHeaderGroups().map(o=>e.jsx(b,{children:o.headers.map(a=>e.jsx(xe,{colSpan:a.colSpan,children:m(a.column.columnDef.header,a.getContext())},a.id))},o.id))}),e.jsx(de,{children:r.getRowModel().rows.map(o=>e.jsx(b,{children:o.getVisibleCells().map(a=>e.jsx(ce,{children:m(a.column.columnDef.cell,a.getContext())},a.id))},o.id))})]})]})},je=()=>{const t=C(),s=c(a=>a.salesDashboard.data.dashboardData),r=c(a=>a.salesDashboard.data.loading);S.useEffect(()=>{o()},[]);const o=()=>{t(x())};return e.jsxs(A,{loading:r,children:[e.jsx(Z,{data:s==null?void 0:s.statisticData}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx(ee,{data:s==null?void 0:s.salesReportData,className:"col-span-2"}),e.jsx(se,{data:s==null?void 0:s.salesByCategoriesData})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx(ie,{data:s==null?void 0:s.latestOrderData,className:"lg:col-span-2"}),e.jsx(he,{data:s==null?void 0:s.topProductsData})]})]})};F("salesDashboard",Q);const ge=()=>e.jsxs("div",{className:"flex flex-col gap-4 h-full",children:[e.jsx(X,{}),e.jsx(je,{})]}),as=ge;export{as as default};
