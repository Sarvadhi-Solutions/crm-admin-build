import{am as b,an as q,ao as B,ap as H,a as j,r as u,j as r,c as k,as as U,aq as V,ar as Q}from"./index-6767ac81.js";import{T as K}from"./index-149a53e8.js";import{A as G}from"./AdaptableCard-1cecc9da.js";import{c as Y}from"./CryptoService-d0c8d52e.js";import{c as h}from"./cloneDeep-028f7085.js";import{A as _}from"./index-688b9e70.js";import{D as M}from"./DataTable-7c33a6e6.js";import{B as J}from"./Button-edcd26d9.js";import{g as N}from"./GrowShrinkTag-0b670525.js";import{N as x}from"./react-number-format.es-3a1aae10.js";import{D as W}from"./Dialog-b04dbbb3.js";import{T as X,P as Z}from"./ProceedTrade-a1b84e55.js";import{i as T}from"./Views-e5205a91.js";import{I as D}from"./Input-736c9e0d.js";import{z as ee}from"./index.esm-107f547f.js";import{d as oe}from"./debounce-7fa991f6.js";import"./useControllableState-dba48cec.js";import"./Card-da872ceb.js";import"./_Uint8Array-81109713.js";import"./_MapCache-5db605d8.js";import"./_getPrototype-48c0ebaa.js";import"./useMergeRef-788c4cb0.js";import"./Tooltip-777f9f9c.js";import"./usePopper-ba5004dc.js";import"./index.esm-52ddd804.js";import"./index-fb02f18d.js";import"./index-d5eb49a4.js";import"./index.esm-ad20eb15.js";import"./Pagination-3af44538.js";import"./Select-3d321c37.js";import"./toConsumableArray-af8bf1ee.js";import"./objectWithoutPropertiesLoose-df62547b.js";import"./floating-ui.dom-bef9cea3.js";import"./get-582c28e3.js";import"./toString-5f976032.js";import"./context-cdfa92ed.js";import"./index-5c02b9f9.js";import"./_baseIsEqual-98c979d7.js";import"./TableRowSkeleton-6125f39f.js";import"./Skeleton-f6501194.js";import"./index-43da21b1.js";import"./Tag-28e3c136.js";import"./index-1bb56c96.js";import"./CloseButton-5ef937e0.js";import"./index-5e02ae30.js";import"./formik.esm-35003a33.js";import"./Badge-1f68c9c2.js";import"./chart.constant-2e47b6a1.js";import"./chart.config-93824ccb.js";import"./FormNumericInput-284d07ac.js";import"./react-tooltip.min-c14492bc.js";import"./RichTextEditor-18f54a57.js";import"./SegmentItemOption-f2f2893a.js";import"./useThemeClass-a62e85dc.js";import"./SvgIcon-5b14eca6.js";import"./index.esm-a1939a1a.js";import"./isNil-1a1387e3.js";const z="cryptoMarket",C=b(z+"/getMarketData",async t=>(await Y(t)).data),F={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},re={loading:!0,marketData:[],tableData:F,selectedTab:"all",tradeDialogOpen:!1,selectedRow:{}},R=q({name:`${z}/state`,initialState:re,reducers:{setSelectedTab:(t,a)=>{t.selectedTab=a.payload},setTableData:(t,a)=>{t.tableData=a.payload},setMarketData:(t,a)=>{t.marketData=a.payload},toggleTradeDialog:(t,a)=>{t.tradeDialogOpen=a.payload},setSelectedRow:(t,a)=>{t.selectedRow=a.payload}},extraReducers:t=>{t.addCase(C.fulfilled,(a,s)=>{a.loading=!1,a.tableData.total=s.payload.total,a.marketData=s.payload.data}).addCase(C.pending,a=>{a.loading=!0})}}),{setSelectedTab:se,setTableData:d,setMarketData:te,toggleTradeDialog:A,setSelectedRow:P}=R.actions,ae=R.reducer,ne=B({data:ae}),y=H,I=({row:t})=>{const a=j(),s=u.useCallback(()=>{a(A(!0)),a(P(t))},[a,t]);return r.jsx("div",{className:"ltr:text-right rtl:text-left",children:r.jsx(J,{size:"sm",onClick:s,children:"Trade"})})},ce=({data:t,loading:a,tableData:s})=>{const n=j(),i=u.useMemo(()=>[{header:"Name",accessorKey:"name",cell:o=>{const{img:e,symbol:l,name:w}=o.row.original;return r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(_,{src:e,size:"sm",className:"!bg-transparent"}),r.jsx("span",{className:"font-bold heading-text",children:l}),r.jsx("span",{children:w})]})}},{header:"Price",accessorKey:"price",cell:o=>{const e=o.row.original;return r.jsx(x,{displayType:"text",value:(Math.round(e.price*100)/100).toFixed(2),suffix:" USD",thousandSeparator:!0})}},{header:"24h Change",accessorKey:"change",cell:o=>{const{change:e}=o.row.original;return r.jsxs("span",{className:k("font-semibold",N(e,"text")),children:[e>0&&"+",e,"%"]})}},{header:"24h Volumn",accessorKey:"volumn",cell:o=>{const{volumn:e}=o.row.original;return r.jsxs("span",{children:[e,"M"]})}},{header:"Market Cap",accessorKey:"marketCap",cell:o=>{const{marketCap:e}=o.row.original;return r.jsxs("span",{children:["$",e,"M"]})}},{header:"",id:"action",cell:o=>{const e=o.row.original;return r.jsx(I,{row:e})}}],[]),c=o=>{const e=h(s);e.pageIndex=o,n(d(e))},g=o=>{const e=h(s);e.pageSize=Number(o),e.pageIndex=1,n(d(e))},p=o=>{const e=h(s);e.sort=o,n(d(e))};return r.jsx(M,{columns:i,data:t,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28,className:"rounded-md"},loading:a,pagingData:{total:s==null?void 0:s.total,pageIndex:s==null?void 0:s.pageIndex,pageSize:s==null?void 0:s.pageSize},onPaginationChange:c,onSelectChange:g,onSort:p})},ie=({data:t,loading:a,tableData:s})=>{const n=U(),i=u.useMemo(()=>[{header:"Name",accessorKey:"name",cell:o=>{const{name:e}=o.row.original;return r.jsx("span",{className:"font-bold heading-text",children:e})}},{header:"Price",accessorKey:"price",cell:o=>{const e=o.row.original;return r.jsxs("span",{children:[r.jsx(x,{displayType:"text",value:(Math.round(e.amount*100)/100).toFixed(2),thousandSeparator:!0}),r.jsx("span",{children:" / "}),r.jsx(x,{displayType:"text",value:(Math.round(e.price*100)/100).toFixed(2),prefix:"$",thousandSeparator:!0})]})}},{header:"24h Change",accessorKey:"change",cell:o=>{const{change:e}=o.row.original;return r.jsxs("span",{className:k("font-semibold",N(e,"text")),children:[e>0&&"+",e,"%"]})}},{header:"24h High /24h Low",accessorKey:"high",cell:o=>{const{high:e,low:l}=o.row.original;return r.jsxs("span",{children:[e," / ",l]})}},{header:"24h Volumn",accessorKey:"volumn",cell:o=>{const{volumn:e}=o.row.original;return r.jsx(x,{displayType:"text",value:(Math.round(e*100)/100).toFixed(2),thousandSeparator:!0})}},{header:"24h Turnover",accessorKey:"turnOver",cell:o=>{const{turnOver:e}=o.row.original;return r.jsxs("span",{children:["$",e,"M"]})}},{header:"",id:"action",cell:o=>{const e=o.row.original;return r.jsx(I,{row:e})}}],[]),c=o=>{const e=h(s);e.pageIndex=o,n(d(e))},g=o=>{const e=h(s);e.pageSize=Number(o),e.pageIndex=1,n(d(e))},p=o=>{const e=h(s);e.sort=o,n(d(e))};return r.jsx(M,{columns:i,data:t,loading:a,pagingData:{total:s==null?void 0:s.total,pageIndex:s==null?void 0:s.pageIndex,pageSize:s==null?void 0:s.pageSize},onPaginationChange:c,onSelectChange:g,onSort:p})},le=({data:t,loading:a,tableData:s})=>{const n=j(),i=u.useMemo(()=>[{header:"Name",accessorKey:"name",cell:o=>{const{name:e}=o.row.original;return r.jsx("span",{className:"font-bold heading-text",children:e})}},{header:"Price",accessorKey:"price",cell:o=>{const e=o.row.original;return r.jsxs("span",{children:[r.jsx(x,{displayType:"text",value:(Math.round(e.amount*100)/100).toFixed(2),thousandSeparator:!0}),r.jsx("span",{children:" / "}),r.jsx(x,{displayType:"text",value:(Math.round(e.price*100)/100).toFixed(2),prefix:"$",thousandSeparator:!0})]})}},{header:"24h Change",accessorKey:"change",cell:o=>{const{change:e}=o.row.original;return r.jsxs("span",{className:k("font-semibold",N(e,"text")),children:[e>0&&"+",e,"%"]})}},{header:"24h High /24h Low",accessorKey:"high",cell:o=>{const{high:e,low:l}=o.row.original;return r.jsxs("span",{children:[e," / ",l]})}},{header:"24h Volumn",accessorKey:"volumn",cell:o=>{const{volumn:e}=o.row.original;return r.jsx(x,{displayType:"text",value:(Math.round(e*100)/100).toFixed(2),thousandSeparator:!0})}},{header:"",id:"action",cell:o=>{const e=o.row.original;return r.jsx(I,{row:e})}}],[]),c=o=>{const e=h(s);e.pageIndex=o,n(d(e))},g=o=>{const e=h(s);e.pageSize=Number(o),e.pageIndex=1,n(d(e))},p=o=>{const e=h(s);e.sort=o,n(d(e))};return r.jsx(M,{columns:i,data:t,loading:a,pagingData:{total:s==null?void 0:s.total,pageIndex:s==null?void 0:s.pageIndex,pageSize:s==null?void 0:s.pageSize},onPaginationChange:c,onSelectChange:g,onSort:p})},de=()=>{const t=j(),a=V(),s=y(m=>m.cryptoMarket.data.tradeDialogOpen),n=y(m=>m.cryptoMarket.data.selectedRow),[i,c]=u.useState({}),[g,p]=u.useState(!1),[o,e]=u.useState(""),l=()=>{t(A(!1)),setTimeout(()=>{t(P({})),c({}),p(!1),e("")},500)},w=(m,f,$)=>{f(!0),setTimeout(()=>{c({...m,type:$}),p(!1),e("")},500)},O=()=>{p(!0),setTimeout(()=>{e("SUCCESS")},1e3)},L=m=>{l(),m&&a("/app/crypto/wallets")};return r.jsxs(W,{isOpen:s,closable:!o,width:400,onRequestClose:l,onClose:l,children:[r.jsxs("h5",{className:"mb-4",children:[T(i)&&!o&&`Trade ${n.symbol}`,!T(i)&&!o&&"Order preview"]}),T(i)?r.jsx(X,{amount:n.price,symbol:n.symbol,onBuy:(m,f)=>w(m,f,"BUY"),onSell:(m,f)=>w(m,f,"SELL")}):r.jsx(Z,{loading:g,status:o,onConfirm:O,onDone:L,...i})]})},E=u.forwardRef(({onInputChange:t},a)=>{const s=oe(n,500);function n(c){t==null||t(c)}const i=c=>{s(c.target.value)};return r.jsx(D,{ref:a,className:"lg:w-52",size:"sm",placeholder:"Search",prefix:r.jsx(ee,{className:"text-lg"}),onChange:i})});E.displayName="QueryInput";Q("cryptoMarket",ne);const{TabNav:S,TabList:pe,TabContent:v}=K,me=()=>{const t=j(),a=u.useRef(null),s=y(e=>e.cryptoMarket.data.marketData),n=y(e=>e.cryptoMarket.data.loading),i=y(e=>e.cryptoMarket.data.selectedTab),c=y(e=>e.cryptoMarket.data.tableData);u.useEffect(()=>{g()},[t,i,c]);const g=()=>{t(C({tab:i,...c}))},p=e=>{t(te([])),t(se(e)),t(d(F))},o=e=>{const l=h(c);l.query=e,l.pageIndex=1,typeof e=="string"&&e.length>1&&t(d(l)),typeof e=="string"&&e.length===0&&t(d(l))};return r.jsxs(r.Fragment,{children:[r.jsx(G,{children:r.jsxs(K,{value:i,variant:"pill",onChange:p,children:[r.jsxs("div",{className:"flex lg:items-center justify-between flex-col lg:flex-row gap-4",children:[r.jsxs(pe,{children:[r.jsx(S,{value:"all",children:"All"}),r.jsx(S,{value:"spot",children:"Spot"}),r.jsx(S,{value:"futures",children:"Futures"})]}),r.jsx(E,{ref:a,onInputChange:o})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx(v,{value:"all",children:r.jsx(ce,{data:s,loading:n,tableData:c})}),r.jsx(v,{value:"spot",children:r.jsx(ie,{data:s,loading:n,tableData:c})}),r.jsx(v,{value:"futures",children:r.jsx(le,{data:s,loading:n,tableData:c})})]})]})}),r.jsx(de,{})]})},yo=me;export{yo as default};
