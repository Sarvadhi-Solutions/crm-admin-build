import{a as w,r as j,j as e,ah as Ce,ap as Ne,as as Le,aq as ye}from"./index-c4854441.js";import{A as De}from"./AdaptableCard-c03e443e.js";import{F as ce}from"./FormDesription-6bc517f8.js";import{C as ve}from"./Card-694d2290.js";import{A as we}from"./index-7f0011a9.js";import{M as Se}from"./MediaSkeleton-b6f35d31.js";import{u as x,g as te,t as ee,d as Ie,a as R,b as Te,c as Fe,f as Ae,e as Ee,h as ae,i as ke,s as le,j as Oe,k as O,l as B,m as z,n as de,r as Re}from"./index-53a91c67.js";import{o as Me,N as qe,C as ze,O as Ve,P as Be,Q as $e,b as We}from"./index.esm-600eab3e.js";import{N as Ke}from"./react-number-format.es-cb12468d.js";import{D as Pe}from"./DataTable-c212c69f.js";import{S as He}from"./StatusCapsule-29d0d94f.js";import{T as Ge}from"./TagsList-07470663.js";import{T as M}from"./TextTruncate-2bfa3d6a.js";import{u as _}from"./checkEditUpdate-648010e4.js";import{u as Ue}from"./useThemeClass-58ccaa98.js";import{c as Q}from"./cloneDeep-57418006.js";import{t as $,N as W}from"./toast-f5971c5e.js";import{C as _e}from"./ConfirmDialog-2a50d9e0.js";import{B as K}from"./Button-01aee70f.js";import{D as Qe}from"./Drawer-459fd2f8.js";import{a as I,F as me}from"./FormItem-f088ddbb.js";import{T as ue}from"./index-2020af5b.js";import{u as Je,b as T,F as pe,a as he}from"./formik.esm-20e607de.js";import{c as xe,a as q,d as Xe,e as Ye}from"./index.esm-6307d99d.js";import{I as F}from"./Input-6e1fc018.js";/* empty css              */import"./Alert-c43b1341.js";import"./Badge-ab812656.js";import"./RangeCalendar-60cea8df.js";import"./index-199241b3.js";import"./index-4960ea6a.js";import{D as Ze}from"./Dialog-1a78eb06.js";import"./index-516e2d91.js";import"./toString-9f124ebf.js";import"./index-b9e48651.js";import"./index-69125dab.js";import"./index-337c98e1.js";import"./Pagination-91f29835.js";import"./Progress-1eb48ff9.js";import"./index-6afc7114.js";import"./ScrollBar-7a627a75.js";import"./index-fee22201.js";import{S as ie}from"./Select-a3dcfbd9.js";import"./Skeleton-7820a1d7.js";import"./index-1b4d8032.js";import"./Switcher-9b266edd.js";import"./index-2a967f86.js";import"./Tag-ca3c125e.js";import"./index-954fdf33.js";import"./index-b126a36b.js";import{T as k}from"./Tooltip-ff9677e2.js";import"./Upload-1e5004d3.js";import{t as et}from"./tagAndCategory-228f57e7.js";import{B as tt,a as at}from"./index.esm-40a48121.js";import{G as st}from"./index.esm-f80fcb5d.js";import{M as ot}from"./index.esm-0fb454c4.js";import{T as rt,a as nt}from"./index.esm-c20a7424.js";import{B as it}from"./index.esm-332f043c.js";import{A as ct,a as lt}from"./index.esm-f9d2499d.js";import"./Views-a7a22f5b.js";import"./chart.constant-33f94cf9.js";import"./chart.config-3e4495ec.js";import"./GrowShrinkTag-b6ec35ba.js";import"./react-tooltip.min-5a60ee3f.js";import"./RichTextEditor-a1431fa0.js";import"./SegmentItemOption-e39e8725.js";import{S as dt}from"./StickyFooter-1a0a2368.js";import"./SvgIcon-7439607c.js";import{G as mt}from"./index.esm-4240e112.js";import{s as ut}from"./index-99a7ca48.js";import{d as pt}from"./debounce-af9b1df5.js";import"./useMergeRef-788c4cb0.js";import"./CrmService-2767e679.js";import"./index-706b8eda.js";import"./_MapCache-cce6ed45.js";import"./_getPrototype-37ec97c4.js";import"./useTimeout-52e2a342.js";import"./CloseButton-481ca768.js";import"./StatusIcon-9c6ff3de.js";import"./chainedFunction-070f832c.js";import"./index-12fb9f3c.js";import"./index-611f00f8.js";import"./useControllableState-f590672a.js";import"./isNil-c3c7dc62.js";import"./get-1a41de3d.js";import"./_baseIsEqual-7cb4339e.js";import"./useRootClose-7d26ea3b.js";import"./usePopper-36d997d0.js";import"./TimeInput-028532aa.js";import"./useUniqueId-ef880a97.js";import"./useDidUpdate-d042343d.js";import"./useUncertainRef-3dcc2864.js";import"./slicedToArray-5b2b8266.js";import"./objectWithoutProperties-8809bfcf.js";import"./toConsumableArray-117346ff.js";import"./floating-ui.dom-bef9cea3.js";import"./mapCloneElement-7f5ffe17.js";import"./index.esm-626783fa.js";import"./index.esm-e743b778.js";import"./index-0d06fcfb.js";import"./index-ded1b8d8.js";const Z=o=>{const{icon:n,avatarClass:t,label:u,value:d,loading:c}=o,m=55;return e.jsx(ve,{bordered:!0,children:e.jsx(Ce,{loading:c,customLoader:e.jsx(Se,{avatarProps:{className:"rounded",width:m,height:m}}),children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(we,{className:t,size:m,icon:n}),e.jsxs("div",{children:[e.jsx("span",{children:u}),e.jsx("h3",{children:e.jsx(Ke,{thousandSeparator:!0,displayType:"text",value:d})})]})]})})})})},ht=()=>{const o=w(),n=x(u=>u.crmLeads.data.statisticData),t=x(u=>u.crmLeads.data.statisticLoading);return j.useEffect(()=>{o(te())},[]),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 mb-6",children:[e.jsx(Z,{icon:e.jsx(Me,{}),avatarClass:"!bg-indigo-600",label:"Total Leads",value:n.totalLeads,growthRate:n==null?void 0:n.totalLeads,loading:t}),e.jsx(Z,{icon:e.jsx(qe,{}),avatarClass:"!bg-blue-500",label:"Open Leads",value:n.openLeads,growthRate:n.openLeads,loading:t}),e.jsx(Z,{icon:e.jsx(ze,{}),avatarClass:"!bg-emerald-500",label:"This Week's New Leads",value:n==null?void 0:n.newLeads,growthRate:n==null?void 0:n.newLeads,loading:t})]})},xt=()=>{const o=w(),n=x(c=>c.crmLeads.data.deleteConfirmation),t=x(c=>c.crmLeads.data.selectedLeads),u=()=>{o(ee(!1))},d=async()=>{var m,l,s;o(ee(!1));const c=await o(Ie(t.id));await o(R()),(m=c==null?void 0:c.payload)!=null&&m.success?$.push(e.jsx(W,{title:"Successfuly Deleted",type:"success",duration:2500,children:(l=c==null?void 0:c.payload)==null?void 0:l.message}),{placement:"top-end"}):$.push(e.jsx(W,{title:"Something Went Wrong !!!",type:"danger",duration:2500,children:(s=c==null?void 0:c.error)==null?void 0:s.message}),{placement:"top-end"}),await o(R()),await o(te())};return e.jsx(_e,{isOpen:n,type:"danger",title:"Delete Lead",confirmButtonColor:"red-600",onClose:u,onRequestClose:u,onCancel:u,onConfirm:d,children:e.jsx("p",{children:"Are you sure you want to delete this Lead? All record related to this lead will be deleted as well. This action cannot be undone."})})},V=[],gt=o=>{const{touched:n,errors:t,setFieldValue:u,values:d}=o,c=w(),m=Je(),[l,s]=j.useState(null),[b,h]=j.useState([]),g=x(r=>r.crmLeads.data.contactList);V.length=0;const N=x(r=>{var f;return(f=r.crmLeads.data.customField)==null?void 0:f.data}),L=x(r=>r.crmLeads.data.leadsList);g==null||g.forEach(r=>{V.push({value:r==null?void 0:r.id,label:`${r==null?void 0:r.firstName} ${r==null?void 0:r.lastName}`})});const y=(r,f)=>{u(r,f)};j.useEffect(()=>{const r=async()=>{var f,A;try{const{payload:v}=await c(Ae()),C=(f=v==null?void 0:v.data)==null?void 0:f.find(a=>(a==null?void 0:a.moduleName)==="leads");if(C){const{payload:a}=await c(Ee({id:(A=C==null?void 0:C.id)==null?void 0:A.toString()})),i=et(a.data);h(i)}}catch(v){console.error("Error fetching module data:",v)}};s(d.contactsDataId),r(),c(Te()),c(Fe())},[c]),x(r=>r.crmLeads.data.selectedLeads);const D=r=>{m.setFieldValue("tagId",r)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(I,{label:"Contact Name",invalid:t.contactsDataId&&n.contactsDataId,errorMessage:t.contactsDataId,children:e.jsx(ie,{name:"contactsDataId",placeholder:"Contact Name",options:V,id:"contactsDataId",value:V.find(r=>(r==null?void 0:r.value)===(d==null?void 0:d.contactsDataId)),onChange:r=>{const f=r.value;u("email",""),u("contactNumber",""),s(f),u("contactsDataId",f)}})})}),e.jsx("div",{className:"col-span-1",children:e.jsx(I,{label:"Title*",invalid:t.title&&n.title,errorMessage:t.title,children:e.jsx(T,{type:"text",autoComplete:"off",name:"title",placeholder:"Title",component:F,prefix:e.jsx(ot,{className:"text-xl"})})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[!l&&e.jsx("div",{className:"col-span-1",children:e.jsx(I,{label:"Email*",invalid:t.email&&n.email,errorMessage:t.email,children:e.jsx(T,{type:"text",autoComplete:"off",name:"email",placeholder:"Email",component:F,prefix:e.jsx(Ve,{className:"text-xl"})})})}),!l&&e.jsx("div",{className:"col-span-1",children:e.jsx(I,{label:"Contact Number*",invalid:t.contactNumber&&n.contactNumber,errorMessage:t.contactNumber,children:e.jsx(T,{type:"text",autoComplete:"off",name:"contactNumber",placeholder:"Contact Number",component:F,prefix:e.jsx(tt,{className:"text-xl"})})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(I,{label:"Budget",invalid:t.budget&&n.budget,errorMessage:t.budget,children:e.jsx(T,{type:"number",autoComplete:"off",name:"budget",placeholder:"Budget",component:F,prefix:e.jsx(at,{className:"text-xl"})})})}),e.jsx("div",{className:"col-span-1",children:e.jsx(I,{label:"Tag",children:e.jsx(T,{isClearable:!0,isMulti:!0,type:"text",autoComplete:"off",name:"tagId",placeholder:"Select tags",component:ie,options:b,prefix:e.jsx(st,{className:"text-xl"}),closeMenuOnSelect:!1,onChange:D})})})]}),e.jsx(I,{label:"Notes",invalid:t.notes&&n.notes,errorMessage:t.notes,children:e.jsx(T,{textArea:!0,type:"text",autoComplete:"off",name:"notes",placeholder:"Notes",component:F,prefix:e.jsx(rt,{className:"text-xl"})})}),e.jsx(ce,{title:"Additional Details",desc:"",className:"mb-2"}),N==null?void 0:N.map(r=>{var v;const f=L.find(C=>C==null?void 0:C.leadFields.some(a=>{var i;return((i=a.customKey)==null?void 0:i.name)===r.name})),A=f?(v=f.leadFields.find(C=>{var a;return((a=C.customKey)==null?void 0:a.name)===r.name}))==null?void 0:v.value:"";return console.log("fieldValue",A),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsx("div",{className:"col-span-1",children:e.jsx(I,{label:r==null?void 0:r.name,children:e.jsx(T,{type:"text",autoComplete:"off",name:r.name,placeholder:r==null?void 0:r.name,component:F,prefix:e.jsx(it,{className:"text-xl"}),value:A||"",onChange:C=>y(r.name,C.target.value)})})},r.id)},r.id)})]})},ft=xe().shape({title:q().required("Title is required"),notes:q(),contactNumber:q().test("validateContactNumber","Invalid contact number",function(o){if(!this.parent.contactsDataId){if(!o)return this.createError({message:"Contact is required"});const t=Number(o);if(isNaN(t))return this.createError({message:"Contact must be a number"});if(o.length!==10)return this.createError({message:"Contact must have exactly 10 digits"});if(o.startsWith("0"))return this.createError({message:"Contact number cannot start with 0"})}return!0}),email:q().test("validateEmail","Invalid email",function(o){return this.parent.contactsDataId?!0:!!o||this.createError({message:"Email is required"})}),budget:Xe().test("greaterThanOne","Budget must be greater than 1",o=>o>0).required("Budget is required"),tagId:Ye(),contactsDataId:q().test("is-valid-contact","Invalid contact selected",function(o){return this.parent.contactsDataId&&this.parent.contactsDataId.length>0?!!V.find(n=>n.value===o):!0})}),{TabNav:jt,TabList:bt,TabContent:Ct}=ue,ge=j.forwardRef((o,n)=>{var l;const t=x(s=>s.crmLeads.data.selectedLeads),u=!!t.id;x(s=>{var b;return(b=s.crmLeads.data.customField)==null?void 0:b.data});const d=w(),c=async(s,b,h)=>{var L,y,D,r;const g=(L=s==null?void 0:s.payload)!=null&&L.success?b:"Something went wrong !!!",N=(y=s==null?void 0:s.payload)!=null&&y.success?(D=s==null?void 0:s.payload)==null?void 0:D.message:h;$.push(e.jsx(W,{title:g,type:(r=s==null?void 0:s.payload)!=null&&r.success?"success":"danger",duration:2500,children:N}),{placement:"top-end"})},m=async(s,{setSubmitting:b})=>{try{const h={title:s.title,contactsDataId:s.contactsDataId,email:s.email,contactNumber:s.contactNumber,budget:s.budget.toString(),description:s.notes,tagId:s==null?void 0:s.tagId.map(f=>f.value)},{name:g,tagName:N,...L}=s,y=u?await d(ae({leadsId:(t==null?void 0:t.id)||"",updatedData:h})):await d(ke(h));await c(y,u?"Successfully Updated":"Successfully Added","An error occurred."),d(le()),await Promise.all([d(R()),d(te())])}catch(h){console.error("An error occurred:",h)}finally{b(!1)}};return e.jsx(pe,{innerRef:n,initialValues:{contactsDataId:t.contactsDataId||"",title:(t==null?void 0:t.title)||"",notes:(t==null?void 0:t.description)||"",tagId:((l=t==null?void 0:t.tags)==null?void 0:l.map(s=>({label:s.tagName,value:s.id})))||[],budget:(t==null?void 0:t.budget)||"",contactNumber:(t==null?void 0:t.contactNumber)||"",email:(t==null?void 0:t.email)||""},validationSchema:ft,onSubmit:m,children:({touched:s,errors:b,values:h,setFieldValue:g})=>e.jsx(he,{children:e.jsx(me,{children:e.jsxs(ue,{defaultValue:"leadsInfo",children:[e.jsx(bt,{children:e.jsx(jt,{value:"leadsInfo",children:"Leads Detail"})}),e.jsx("div",{className:"p-6",children:e.jsx(Ct,{value:"leadsInfo",children:e.jsx(gt,{touched:s,errors:b,setFieldValue:g,values:h})})})]})})})})});ge.displayName="LeadsForm";const fe=j.forwardRef((o,n)=>{w();const t=x(d=>d.crmLeads.data.selectedLeads);x(d=>d.crmLeads.data.leadsList);const u=async d=>{};return e.jsx(ge,{ref:n,leads:t,onFormSubmit:u})});fe.displayName="LeadsEditContent";const Nt=({onSaveClick:o,onCancel:n})=>e.jsxs("div",{className:"text-right w-full",children:[e.jsx(K,{size:"sm",className:"mr-2",onClick:n,children:"Cancel"}),e.jsx(K,{size:"sm",variant:"solid",onClick:o,children:"Save"})]}),Lt=()=>{const o=w(),n=x(s=>s.crmLeads.data.drawerOpen),[t,u]=j.useState(window.innerWidth/2),d=()=>{o(le()),o(O({}))},c=j.useRef(null),m=()=>{var s;(s=c.current)==null||s.submitForm()};j.useEffect(()=>(window.addEventListener("resize",l),o(Oe()),()=>{window.removeEventListener("resize",l)}),[]);const l=()=>{u(window.innerWidth/2)};return e.jsx(Qe,{isOpen:n,closable:!1,bodyClass:"p-0",width:t,footer:e.jsx(Nt,{onCancel:d,onSaveClick:m}),onClose:d,onRequestClose:d,children:e.jsx(fe,{ref:c})})},yt=xe().shape({reason:q().required("Reason is required")}),je=j.forwardRef((o,n)=>{const t=w(),u=x(m=>m.crmLeads.data.selectedLeads),d=()=>{t(B(!1))},c=async(m,l,s,b)=>{var y,D,r;const h=await s(ae({leadsId:l==null?void 0:l.id,updatedData:{reason:m.reason,status:m.status}}));let g="",N="",L="danger";(y=h==null?void 0:h.payload)!=null&&y.success?(g="Successfully Added",N=(D=h==null?void 0:h.payload)==null?void 0:D.message,L="success"):(g="Something went wrong !!!",N=(r=h==null?void 0:h.error)==null?void 0:r.message),b.push(e.jsx(W,{title:g,type:L,duration:2500,children:N}),{placement:"top-end"}),s(B(!1)),await s(R())};return e.jsx(pe,{innerRef:n,initialValues:{reason:"",status:"closed_lost"},validationSchema:yt,onSubmit:async(m,{setSubmitting:l})=>{await c(m,u,t,$),l(!1)},children:({touched:m,errors:l,values:s,setFieldValue:b})=>e.jsxs(he,{children:[e.jsx(me,{children:e.jsx(I,{label:"Reason",invalid:l.reason&&m.reason,errorMessage:l.reason,children:e.jsx(T,{type:"text",autoComplete:"off",name:"reason",placeholder:"Reason",component:F,prefix:e.jsx(nt,{className:"text-xl"})})})}),e.jsx(dt,{className:"flex items-center justify-end py-2",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"md:flex items-center",children:[e.jsx(K,{size:"sm",className:"ltr:mr-3 rtl:ml-3",type:"button",onClick:d,children:"Cancel"}),e.jsx(K,{size:"sm",type:"submit",variant:"solid",icon:e.jsx(ct,{}),children:"Save"})]})})]})})});je.displayName="LeadForm";const Dt=()=>{const o=w(),n=x(a=>a.crmLeads.data.displayedLeadsList),t=x(a=>a.crmLeads.data.loading),u=x(a=>a.crmLeads.data.isDialogOpen),d=x(a=>a.crmLeads.data.tableData),{pageIndex:c,pageSize:m,sort:l,query:s,total:b}=x(a=>a.crmLeads.data.tableData),h=j.useCallback(()=>{o(R())},[o]);j.useEffect(()=>(h(),()=>{window.location.pathname.includes("lead")||o(z({...d,query:""}))}),[h]);const g=j.useMemo(()=>({pageIndex:c,pageSize:m,sort:l,query:s,total:b}),[c,m,l,s,b]);x(a=>a.crmLeads.data.selectedLeads);const N=_("leads","canDelete"),L=_("leads","canModify"),y=_("leads","canView"),D=Ne(),r=({row:a})=>{const i=w();Ue();const p=()=>{i(de()),i(O(a))},E=async()=>{await i(O(a)),i(ee(!0))},P=()=>{i(O(a));const J=`/app/crm/lead-details/${a.id}`;D(J)},H=()=>{i(O(a)),i(B(!0))},G=async()=>{await i(O(a)),await U(a==null?void 0:a.id)},U=async J=>{var oe,re,ne;const S=await i(ae({leadsId:J,updatedData:{status:"closed_won"}}));let X="",Y="",se="danger";(oe=S==null?void 0:S.payload)!=null&&oe.success?(X="Successfully Added",Y=(re=S==null?void 0:S.payload)==null?void 0:re.message,se="success"):(X="Something went wrong !!!",Y=(ne=S==null?void 0:S.error)==null?void 0:ne.message),$.push(e.jsx(W,{title:X,type:se,duration:2500,children:Y}),{placement:"top-end"}),i(B(!1)),await i(R())};return e.jsxs("div",{className:"flex text-base items-center",children:[L&&e.jsx("button",{disabled:(a==null?void 0:a.status)!=="open",className:`circle items-center mx-1 ${(a==null?void 0:a.status)!=="open"?"!cursor-not-allowed":"cursor-pointer hover:text-indigo-500"}`,onClick:p,children:e.jsx(Be,{})}),N&&e.jsx("span",{className:"cursor-pointer hover:text-red-500 circle items-center",onClick:E,children:e.jsx($e,{})}),y&&e.jsx("span",{className:"cursor-pointer hover:text-green-500 circle mx-1 items-center text-lg",onClick:P,children:e.jsx(lt,{})}),L&&e.jsx(k,{title:"Close To Won",children:e.jsx("button",{className:` circle items-center ${(a==null?void 0:a.status)!=="open"?"!cursor-not-allowed":"cursor-pointer hover:text-indigo-500"}`,disabled:(a==null?void 0:a.status)!=="open",onClick:G,children:e.jsx(mt,{})})},a.id+"won"),L&&e.jsx(k,{title:"Close To Lost",children:e.jsx("button",{className:`${(a==null?void 0:a.status)!=="open"?"!cursor-not-allowed":"cursor-pointer hover:text-orange-500"} mx-1 circle items-center `,disabled:(a==null?void 0:a.status)!=="open",onClick:H,children:e.jsx(Le,{})})},a.id+"lost")]})},f=j.useMemo(()=>[{header:"Action",id:"action",cell:i=>e.jsx(r,{row:i.row.original})},{header:"Contact Name",accessorKey:"contactName",cell:i=>{var E,P,H,G,U;const p=(E=i.row.original)!=null&&E.contactData?((H=(P=i.row.original)==null?void 0:P.contactData)==null?void 0:H.firstName)+" "+((U=(G=i.row.original)==null?void 0:G.contactData)==null?void 0:U.lastName):"-";return e.jsx(k,{title:p,children:e.jsx(M,{text:p,maxLength:15})},p)}},{header:"Title",accessorKey:"title",cell:i=>{const p=i.row.original.title;return e.jsx(k,{title:p,children:e.jsx(M,{text:p,maxLength:20})},p)}},{header:"Budget",accessorKey:"budget",cell:i=>{const p=i.row.original;return e.jsx(M,{text:p.budget,maxLength:20})}},{header:"Status",accessorKey:"status",cell:i=>{const p=i.row.original;return e.jsx(He,{status:p.status})}},{header:"Tag Name",accessorKey:"tagName",cell:i=>{const p=i.row.original.tags;return p!=null&&p.length>0?e.jsx(Ge,{tags:p}):"-"}},{header:"Notes",accessorKey:"description",cell:i=>{const p=i.row.original.description?i.row.original.description:"-";return e.jsx(k,{title:p,children:e.jsx(M,{text:p,maxLength:20})},p)}},{header:"Reason",accessorKey:"reason",cell:i=>{var E;const p=(E=i.row.original)==null?void 0:E.reason;return p?e.jsx(k,{title:p,children:e.jsx(M,{text:p,maxLength:20})},p):e.jsx(k,{title:p,children:e.jsx(M,{text:"NA",maxLength:20})},p)}}],[L,N]),A=a=>{const i=Q(g);i.pageIndex=a,o(z(i))},v=a=>{const i=Q(g);i.pageSize=Number(a),i.pageIndex=1,o(z(i))},C=a=>{const i=Q(g);i.sort=a,o(z(i))};return e.jsxs("div",{children:[e.jsx(Pe,{columns:f,data:n,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},loading:t,pagingData:{total:g.total,pageIndex:g.pageIndex,pageSize:g.pageSize},onPaginationChange:A,onSelectChange:v,onSort:C}),e.jsx(Lt,{}),e.jsx(xt,{}),e.jsxs(Ze,{isOpen:u,onClose:()=>o(B(!1)),children:[e.jsx("h5",{className:"mb-4",children:"Enter Reason"}),e.jsx(je,{})]})]})},be=j.forwardRef((o,n)=>{const{onInputChange:t}=o,u=pt(d,500);function d(m){t==null||t(m)}const c=m=>{u(m.target.value)};return e.jsx(F,{ref:n,className:"max-w-md md:w-52 mb-4",size:"sm",placeholder:"Search by name or title",prefix:e.jsx(We,{className:"text-lg"}),onChange:c})});be.displayName="LeadsTableSearch";const vt=()=>{const o=w(),n=j.useRef(null),t=x(l=>l.crmLeads.data.tableData),u=_("leads","canCreate"),d=l=>{const s=Q(t);s.query=l,s.pageIndex=1,typeof l=="string"&&l.length>1&&c(s),typeof l=="string"&&l.length===0&&c(s)},c=l=>{o(l?z(l):R())},m=()=>{o(de()),o(O({})),o(ut("Add"))};return j.useEffect(()=>{n.current&&(n.current.value=t.query||"",o(z(t)))},[t==null?void 0:t.query]),e.jsxs("div",{className:"md:flex items-center justify-between",children:[e.jsx("div",{className:"md:flex items-center gap-4",children:e.jsx(be,{ref:n,onInputChange:d})}),e.jsx("div",{className:"mb-4",children:u&&e.jsx(K,{size:"sm",onClick:m,children:"Add New"})})]})};ye("crmLeads",Re);const wt=()=>{const o=x(n=>n.crmLeads.data.tableData);return e.jsxs(e.Fragment,{children:[e.jsx(ht,{}),e.jsxs(De,{bodyClass:"h-full",children:[e.jsx(ce,{title:`Leads (${(o==null?void 0:o.total)||0})`,desc:"",className:"mb-2"}),e.jsx(vt,{}),e.jsx(Dt,{})]})]})},Cs=wt;export{Cs as default};
