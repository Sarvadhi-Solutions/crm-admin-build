import{a as D,r as d,j as t}from"./index-5b083722.js";import{T as w}from"./index-e60138cc.js";import{u as H,c as o,d as i,F as O,a as P,b as V}from"./formik.esm-ca71b2a3.js";import{c as $,a as j,f as z,b as _}from"./index.esm-7fc76d40.js";import{I as l}from"./Input-48a3f72c.js";import{A as G}from"./index-4c1fa5e5.js";import{U as J}from"./Upload-3bc63f23.js";import{I as K,a6 as Q,aa as W,ab as X}from"./index.esm-577c3d7b.js";import{A as Y}from"./index.esm-9459b8e1.js";import{T as Z,a as ee,b as te}from"./index.esm-48411fb0.js";import{u as F,D as ae,A as se,h as oe,i as ie,t as ne,j as re,k as le,g as I,s as v,l as ce}from"./AdditionalTag-2c0a87d5.js";/* empty css              */import{B as de,a as me,b as pe,c as xe}from"./index.esm-2966f74b.js";const fe=m=>{const{touched:a,errors:e}=m,f=D(),[c,g]=d.useState(!1);d.useState("#808080");const[n,p]=d.useState(!1),[y,b]=d.useState([]),[T,L]=d.useState([]),M=()=>{g(!c),p(!1)},[S,A]=d.useState("");d.useEffect(()=>{(async()=>{var x,C;try{const{payload:r}=await f(oe());console.log(r,"send Me The Id And The Payload");const u=(x=r==null?void 0:r.data)==null?void 0:x.find(h=>(h==null?void 0:h.moduleName)==="clients");if(A(u.id),u){const{payload:h}=await f(ie({id:(C=u==null?void 0:u.id)==null?void 0:C.toString()})),q=ne(h.data),E=re(h.data);L(E),b(q)}}catch(r){console.error("Error fetching module data:",r)}})()},[f]);const N=F(s=>s.crmCustomers.data.selectedCustomer),[Ce,R]=d.useState(N?N.tags||[]:[]),U=H(),B=s=>{console.log(s),R(s);const x=[s.value];U.setFieldValue("tagId",x)};return t.jsxs(t.Fragment,{children:[t.jsx(o,{invalid:e.upload&&a.upload,errorMessage:e.upload,children:t.jsx(i,{name:"img",children:({field:s,form:x})=>{const C=s.value?{src:s.value}:{};return t.jsx("div",{className:"flex justify-center",children:t.jsx(J,{className:"cursor-pointer",showList:!1,uploadLimit:1,onChange:r=>x.setFieldValue(s.name,URL.createObjectURL(r[0])),onFileRemove:r=>x.setFieldValue(s.name,URL.createObjectURL(r[0])),children:t.jsx(G,{className:"border-2 border-white dark:border-gray-800 shadow-lg",size:100,shape:"circle",icon:t.jsx(K,{}),...C})})})}})}),t.jsx(o,{label:"Customer Name",invalid:e.clientName&&a.clientName,errorMessage:e.clientName,children:t.jsx(i,{type:"text",autoComplete:"off",name:"clientName",placeholder:"Customer Name",component:l,prefix:t.jsx(Q,{className:"text-xl"})})}),t.jsx(o,{label:"Contact Number",invalid:e.contactInfo&&a.contactInfo,errorMessage:e.contactInfo,children:t.jsx(i,{type:"text",autoComplete:"off",name:"contactInfo",placeholder:"contactInfo",component:l,prefix:t.jsx(W,{className:"text-xl"})})}),t.jsx(o,{label:"Address",invalid:e.address&&a.address,errorMessage:e.address,children:t.jsx(i,{type:"text",autoComplete:"off",name:"address",placeholder:"Address",component:l,prefix:t.jsx(X,{className:"text-xl"})})}),t.jsx(o,{label:"Billing Details",invalid:e.billingDetails&&a.billingDetails,errorMessage:e.billingDetails,children:t.jsx(i,{type:"text",autoComplete:"off",name:"billingDetails",placeholder:"Billing Details",component:l,prefix:t.jsx(Z,{className:"text-xl"})})}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx(o,{label:"TagId",invalid:e.history&&a.history,errorMessage:e.history,children:t.jsxs("div",{style:{position:"relative"},children:[t.jsx(i,{name:"tagId",component:ae,options:y,placeholder:"Select a Tag",onChange:B}),t.jsx(ee,{style:{position:"absolute",right:"10px",top:"10px",border:"none",background:"#FFF"},className:"text-xl",onClick:()=>{M(),p(!0)}})]})}),t.jsx(se,{isOpen:c,moduleName:S,categoryList:T,onOpenChange:s=>g(s)})]}),t.jsx(o,{label:"History",invalid:e.history&&a.history,errorMessage:e.history,children:t.jsx(i,{type:"text",autoComplete:"off",name:"history",placeholder:"History",component:l,prefix:t.jsx(Y,{className:"text-xl"})})}),t.jsx(o,{label:"Notes",invalid:e.notes&&a.notes,errorMessage:e.notes,children:t.jsx(i,{type:"text",autoComplete:"off",name:"notes",placeholder:"Notes",component:l,prefix:t.jsx(te,{className:"text-xl"})})})]})},he=m=>{const{touched:a,errors:e}=m;return t.jsxs(t.Fragment,{children:[t.jsx(o,{label:"Facebook link",invalid:e.facebook&&a.facebook,errorMessage:e.facebook,children:t.jsx(i,{type:"text",autoComplete:"off",name:"facebook",placeholder:"URL",component:l,prefix:t.jsx(de,{className:"text-xl text-[#1773ea]"})})}),t.jsx(o,{label:"Twitter link",invalid:e.twitter&&a.twitter,errorMessage:e.twitter,children:t.jsx(i,{type:"text",autoComplete:"off",name:"twitter",placeholder:"URL",component:l,prefix:t.jsx(me,{className:"text-xl text-[#1da1f3]"})})}),t.jsx(o,{label:"Pinterest link",invalid:e.pinterest&&a.pinterest,errorMessage:e.pinterest,children:t.jsx(i,{type:"text",autoComplete:"off",name:"pinterest",placeholder:"URL",component:l,prefix:t.jsx(pe,{className:"text-xl text-[#df0018]"})})}),t.jsx(o,{label:"LinkedIn link",invalid:e.linkedIn&&a.linkedIn,errorMessage:e.linkedIn,children:t.jsx(i,{type:"text",autoComplete:"off",name:"linkedIn",placeholder:"URL",component:l,prefix:t.jsx(xe,{className:"text-xl text-[#0077b5]"})})})]})},ge=$().shape({clientName:j().required("clientName is required"),contactInfo:z().typeError("Contact must be a number").required("Contact is required").test("is-number","Contact must be a number",m=>!isNaN(m)).test("is-ten-digits","Contact must be exactly 10 digits",m=>/^\d{10}$/.test(m)),address:j().required("Address is required"),billingDetails:j().required("Billing Details is required"),history:j(),notes:j(),tagId:_()}),{TabNav:ue,TabList:je,TabContent:k}=w,be=d.forwardRef((m,a)=>{var g;const e=F(n=>n.crmCustomers.data.selectedCustomer),f=!!e.id;console.log(f,"Editing Done");const c=D();return t.jsx(O,{innerRef:a,initialValues:{clientName:(e==null?void 0:e.clientName)||"",contactInfo:(e==null?void 0:e.contactInfo)||"",address:(e==null?void 0:e.address)||"",billingDetails:(e==null?void 0:e.billingDetails)||"",history:(e==null?void 0:e.history)||"",notes:(e==null?void 0:e.notes)||"",tagId:((g=e==null?void 0:e.tags)==null?void 0:g.map(n=>n.id))||[],colorName:e!=null&&e.tags&&(e==null?void 0:e.tags.length)>0?e==null?void 0:e.tags[0].colorName:""},validationSchema:ge,onSubmit:async(n,{setSubmitting:p})=>{const{colorName:y,...b}=n;console.log(y),f?(console.log(n,"Bhai testing kar"),await c(le({customerId:(e==null?void 0:e.id)||"",updatedData:b})),await c(I()),await c(v())):(console.log("abb Maat aa"),await c(ce(b)),await c(I()),await c(v())),console.log("on submit called "),p(!1)},children:({touched:n,errors:p})=>t.jsx(P,{children:t.jsx(V,{children:t.jsxs(w,{defaultValue:"personalInfo",children:[t.jsx(je,{children:t.jsx(ue,{value:"personalInfo",children:"Custometer Detail"})}),t.jsxs("div",{className:"p-6",children:[t.jsx(k,{value:"personalInfo",children:t.jsx(fe,{touched:n,errors:p})}),t.jsx(k,{value:"social",children:t.jsx(he,{touched:n,errors:p})})]})]})})})})});be.displayName="CustomerForm";export{be as C};
