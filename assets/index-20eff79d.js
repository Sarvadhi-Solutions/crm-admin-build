import{am as o,an as D,ao as L,ap as S}from"./index-afeb99dd.js";import{P as h,m as b,Q as E,R as T,S as F,T as G,U as q,V as x,W as I,X as z,t as N,v as w,Y as O,w as k}from"./CrmService-80eafdff.js";const A="crmContact",y=o("crmContact/data/getContactStatistic",async()=>(await h()).data),m=o("crmContact/data/getContact",async()=>(await b()).data),M=o("crmContact/data/getSource",async()=>(await E()).data),R=o("crmContact/data/getStates",async()=>(await T()).data),P=o("crmContact/data/getCities",async()=>(await F()).data),Y=o("crmContact/data/createSource",async t=>{var a,e;try{return(await G(t)).data}catch(s){throw new Error((e=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:e.message)}}),g=o("crmCompany/data/getCompany",async()=>(await q()).data),_=o("crmContact/data/editContact",async({contactId:t,updatedData:a})=>{var e,s;try{return(await x(t,a)).data}catch(n){throw new Error((s=(e=n==null?void 0:n.response)==null?void 0:e.data)==null?void 0:s.message)}}),$=o("crmContact/data/deleteContact",async t=>{var a,e;try{return await I(t)}catch(s){throw new Error((e=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:e.message)}}),B=o("crmContact/data/createContact",async t=>{var a,e;try{return(await z(t)).data}catch(s){throw new Error((e=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:e.message)}}),H=o("crmContact/data/module",async()=>{var t,a;try{return(await N()).data}catch(e){throw new Error((a=(t=e==null?void 0:e.response)==null?void 0:t.data)==null?void 0:a.message)}}),J=o("tag-category",async({id:t})=>{var a,e;try{return(await w(t)).data}catch(s){throw new Error((e=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:e.message)}}),j=o("crmContact/data/getCustomField",async t=>(await O(t)).data);o("crmContact/data/fetchTag",async({id:t})=>{var a,e;try{return(await w(t)).data}catch(s){throw new Error((e=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:e.message)}});o("crmContact/data/createTag",async({masterId:t,colorName:a,tagName:e,tagCategoryId:s})=>(await k({colorName:a,tagName:e,masterId:t,tagCategoryId:s})).data);const v={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},Q={status:""},U={loading:!1,sources:[],statisticLoading:!1,contactList:[],displayedContactList:[],companyList:[],customField:[],states:[],cities:[],statisticData:{},tableData:v,filterData:Q,drawerOpen:!1,selectedContact:{},deleteConfirmation:!1},f=D({name:`${A}/state`,initialState:U,reducers:{setTableData:(t,a)=>{var s;t.tableData=a.payload;const e=(s=t.contactList)==null?void 0:s.filter(n=>n.firstName.toLowerCase().includes(a.payload.query.toLowerCase())||n.lastName.toLowerCase().includes(a.payload.query.toLowerCase())||n.email.toLowerCase().includes(a.payload.query.toLowerCase()));t.tableData={...a.payload,total:e==null?void 0:e.length},t.displayedContactList=e.slice(a.payload.pageSize*(a.payload.pageIndex-1),a.payload.pageSize*a.payload.pageIndex)},setContactList:(t,a)=>{t.contactList=a.payload},setFilterData:(t,a)=>{t.filterData=a.payload},setSelectedContact:(t,a)=>{t.selectedContact=a.payload},setDrawerOpen:t=>{t.drawerOpen=!0},setDrawerClose:t=>{t.drawerOpen=!1},toggleDeleteConfirmation:(t,a)=>{t.deleteConfirmation=a.payload}},extraReducers:t=>{t.addCase(m.fulfilled,(a,e)=>{var n,c,d,l,i,p,C,u;a.contactList=e.payload.data,a.tableData.total=(c=(n=e.payload)==null?void 0:n.data)==null?void 0:c.length;const s=(l=(d=e.payload)==null?void 0:d.data)==null?void 0:l.filter(r=>r.firstName.toLowerCase().includes(a.tableData.query||"".toLowerCase())||r.lastName.toLowerCase().includes(a.tableData.query||"".toLowerCase())||r.email.toLowerCase().includes(a.tableData.query||"".toLowerCase()));a.displayedContactList=s.slice(((i=a==null?void 0:a.tableData)==null?void 0:i.pageSize)*(((p=a==null?void 0:a.tableData)==null?void 0:p.pageIndex)-1),((C=a==null?void 0:a.tableData)==null?void 0:C.pageSize)*((u=a==null?void 0:a.tableData)==null?void 0:u.pageIndex)),a.loading=!1}).addCase(m.pending,a=>{a.loading=!0}).addCase(y.fulfilled,(a,e)=>{a.statisticData=e.payload,a.statisticLoading=!1}).addCase(j.fulfilled,(a,e)=>{a.customField=e.payload.data,a.loading=!1}).addCase(y.pending,a=>{a.statisticLoading=!0}).addCase(g.fulfilled,(a,e)=>{a.companyList=e.payload.data,a.loading=!1}).addCase(g.pending,a=>{a.loading=!0}).addCase(M.fulfilled,(a,e)=>{a.sources=e.payload.data}).addCase(R.fulfilled,(a,e)=>{a.states=e.payload.data}).addCase(P.fulfilled,(a,e)=>{a.cities=e.payload.data})}}),{setTableData:K,setContactList:Z,setFilterData:aa,setSelectedContact:ea,setDrawerOpen:ta,setDrawerClose:sa,toggleDeleteConfirmation:oa}=f.actions,V=f.reducer,na=L({data:V}),ra=S;export{J as a,y as b,g as c,$ as d,R as e,H as f,m as g,j as h,P as i,Y as j,M as k,_ as l,B as m,sa as n,K as o,ta as p,na as r,ea as s,oa as t,ra as u};
