import{a as E,r as x,j as e}from"./index-82a4cdcd.js";import"./Alert-62262f10.js";import"./index-c281b544.js";import"./Badge-df87bdc2.js";import{B as F}from"./Button-0e96ba54.js";import"./RangeCalendar-823e8aaa.js";import"./Card-6707ff6e.js";import"./index-c91d029f.js";import"./index-320abfaa.js";import"./Dialog-992e1d56.js";import"./Drawer-4bb376d7.js";import"./index-0428064e.js";import{F as S,a as p}from"./FormItem-f5087afb.js";import"./toString-b2e07e9a.js";import{I as f}from"./Input-8b535fd4.js";import{I as w}from"./index-c11d92d4.js";import"./index-d64ec43f.js";import"./index-971eae45.js";import{t as q,N as V}from"./toast-4eea8663.js";import"./Pagination-7722c7db.js";import"./Progress-7d1211e0.js";import"./index-7a0e0b9f.js";import"./ScrollBar-b2904e17.js";import"./index-7b9d9e5f.js";import{S as h,c as A}from"./Select-eb8671ae.js";import"./Skeleton-d36fd097.js";import"./index-04da13bb.js";import"./Switcher-a7e522ef.js";import"./index-4baab89c.js";import"./index-b111a719.js";import"./Tag-d5568307.js";import"./index-c63c62bb.js";import"./index-30e041a1.js";import"./Tooltip-5f04ccef.js";import"./Upload-341a9a0e.js";import{c as I}from"./countries.constant-5369f7df.js";import{F as M,a as P,b as l}from"./formik.esm-fbd7cbeb.js";import{N as k}from"./react-number-format.es-ff723f9b.js";import{c as R,a as c}from"./index.esm-f6409e84.js";import{k as $}from"./index-27de0572.js";import{C as D}from"./react-select-creatable.esm-d4b7ae22.js";import{u as B,g as W}from"./index-fca99087.js";import"./useTimeout-da6ce9b0.js";import"./index.esm-9eb3698a.js";import"./CloseButton-d6bfe260.js";import"./StatusIcon-5a72f149.js";import"./Views-5e6cd1d6.js";import"./useMergeRef-788c4cb0.js";import"./useControllableState-3caf27a6.js";import"./cloneDeep-914ca532.js";import"./_MapCache-54b9aafe.js";import"./_getPrototype-b764c861.js";import"./_baseIsEqual-2b2683ef.js";import"./get-71f6a308.js";import"./useRootClose-ca0d0d80.js";import"./usePopper-150e7e1f.js";import"./TimeInput-10fd264b.js";import"./useUniqueId-cc8af61f.js";import"./useDidUpdate-f06e2487.js";import"./index-5ca2f98c.js";import"./useUncertainRef-0553f5d8.js";import"./isNil-ad4b9ef6.js";import"./index-dff75ec8.js";import"./chainedFunction-070f832c.js";import"./slicedToArray-d75d4238.js";import"./objectWithoutProperties-8809bfcf.js";import"./toConsumableArray-26dffdfb.js";import"./floating-ui.dom-4bc0055b.js";import"./mapCloneElement-c79fb68e.js";import"./index.esm-4533a1af.js";import"./index.esm-e60cf8ff.js";import"./index.esm-bb858611.js";import"./CrmService-a7ee7c84.js";import"./AdaptableCard-f3359e05.js";import"./useThemeClass-38f80a2c.js";import"./AccountServices-da8d5ad7.js";const z=[{label:"01 ~ 09 members",value:"01~09"},{label:"10 ~ 29 members",value:"10~29"},{label:"30 ~ 49 members",value:"30~49"},{label:"50 ~ 99 members",value:"50~99"},{label:"100+",value:"100+"}],{SingleValue:G}=A,L=i=>e.jsx(f,{...i,value:i.field.value}),T=({onValueChange:i,...o})=>e.jsx(k,{customInput:f,type:"text",autoComplete:"off",onValueChange:i,...o}),H=({innerProps:i,data:o,isSelected:g})=>e.jsx("div",{className:`cursor-pointer flex items-center justify-between p-2 ${g?"bg-gray-100 dark:bg-gray-500":"hover:bg-gray-50 dark:hover:bg-gray-600"}`,...i,children:e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("span",{children:["(",o.value,") ",o.dialCode]})})}),J=i=>{const o=i.getValue()[0];return e.jsx(G,{...i,children:o&&e.jsx("span",{children:o.dialCode})})},K=R().shape({organizationName:c().required("Name is Required"),email:c().email("Invalid email").required("Email Required"),industry:c().required("Industry is Required"),contact:c().typeError("Contact must be a number").required("Contact is required").test("is-number","Contact must be a number",i=>!isNaN(i)).test("is-ten-digits","Contact must be exactly 10 digits",i=>{if(i){const o=Number(i);return/^\d{10}$/.test(o.toString())}return!0}).test("is-ten-digits","Contact number cannot start with 0",i=>i?!i.startsWith("0"):!0),numberOfEmployees:c().required("Please select your organization size"),dialCode:c().required("Please select dialCode")}),gt=({data:i={logo:"",industry:"",organizationName:"",email:"",website:"",dialCode:"",contact:"",numberOfEmployees:""},onNextChange:o,currentStepStatus:g})=>{const b=B(n=>{var r,t;return(t=(r=n.crmAccountDetailForm)==null?void 0:r.data)==null?void 0:t.industryList}),y=E(),j=x.useCallback(async()=>{await y(W())},[y]),v=x.useMemo(()=>b==null?void 0:b.map(r=>({label:r.industryName,value:r.id})),[b]);x.useEffect(()=>{j()},[j]);const O=async(n,r)=>{var s,m,N,C;const t=await y($(n));let d="",u="",a="danger";(s=t==null?void 0:t.payload)!=null&&s.success?(d="Successfully Added",u=(m=t==null?void 0:t.payload)==null?void 0:m.message,a="success",o==null||o(n,"personalInformation",r)):(d="Something went wrong !!!",u=(N=t==null?void 0:t.error)==null?void 0:N.message),(C=t==null?void 0:t.payload)!=null&&C.success&&(o==null||o(n,"personalInformation",r)),q.push(e.jsx(V,{title:d,type:a,duration:2500,children:u}),{placement:"top-end"}),r(!1)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"mb-2",children:"Organization Information"}),e.jsx("p",{children:"Basic information for opening an organization"})]}),e.jsx(M,{initialValues:i,enableReinitialize:!0,validationSchema:K,onSubmit:(n,{setSubmitting:r})=>{r(!0),setTimeout(()=>{O(n,r)},1e3)},children:({values:n,touched:r,errors:t,isSubmitting:d,setFieldValue:u})=>e.jsx(P,{children:e.jsxs(S,{children:[e.jsxs("div",{className:"md:grid grid-cols-2 gap-4",children:[e.jsx(p,{label:"Name of Organization",invalid:t.organizationName&&r.organizationName,errorMessage:t.organizationName,children:e.jsx(l,{type:"text",autoComplete:"off",name:"organizationName",placeholder:"Organization Name",component:f})}),e.jsx(p,{label:"Industry",invalid:t.industry&&r.industry,errorMessage:t.industry,children:e.jsx(l,{isClearable:!0,type:"text",autoComplete:"off",name:"industry",placeholder:"industry",value:v.find(a=>(a==null?void 0:a.value)===(n==null?void 0:n.industry)),component:h,componentAs:D,options:v,onChange:a=>{u("industry",a.value||"")}})})]}),e.jsx(p,{label:"Website",children:e.jsx(l,{type:"text",autoComplete:"off",name:"website",placeholder:"Website",component:f})}),e.jsx(p,{label:"Size of your organization",invalid:t.numberOfEmployees&&r.numberOfEmployees,errorMessage:t.numberOfEmployees,children:e.jsx(l,{name:"numberOfEmployees",children:({field:a,form:s})=>e.jsx(h,{placeholder:"Organization Size...",field:a,form:s,options:z,value:z.filter(m=>m.value===n.numberOfEmployees),onChange:m=>s.setFieldValue(a.name,m==null?void 0:m.value)})})}),e.jsx(p,{label:"Email",invalid:t.email&&r.email,errorMessage:t.email,children:e.jsx(l,{type:"email",autoComplete:"off",name:"email",placeholder:"Email",component:f})}),e.jsx("div",{className:"md:grid grid-cols-2 gap-4",children:e.jsx(p,{label:"Phone Number",invalid:t.dialCode&&r.dialCode||t.contact&&r.contact,errorMessage:t.contact,children:e.jsxs(w,{children:[e.jsx(l,{name:"dialCode",children:({field:a,form:s})=>e.jsx(h,{className:"min-w-[130px]",placeholder:"Dial Code",components:{Option:H,SingleValue:J},field:a,form:s,options:I,value:I.filter(m=>m.value===n.dialCode),onChange:m=>s.setFieldValue(a.name,m==null?void 0:m.value)})}),e.jsx(l,{name:"contact",children:({field:a,form:s})=>e.jsx(T,{form:s,field:a,customInput:L,placeholder:"Phone Number",onValueChange:m=>{s.setFieldValue(a.name,m.value)}})})]})})}),e.jsx("div",{className:"flex justify-end gap-2",children:e.jsx(F,{loading:d,variant:"solid",type:"submit",children:g==="complete"?"Save":"Next"})})]})})})]})};export{gt as default};
