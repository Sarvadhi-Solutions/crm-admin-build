import{al as o,am as y,an as m,ao as g}from"./index-9bc8ff5f.js";import{x as u,h as w,y as f,z as D,A as h,B as L,C as S,D as b,o as E,p,q as x}from"./CrmService-9a7ea8f7.js";const T="crmContact",d=o("crmContact/data/getContactStatistic",async()=>(await u()).data),i=o("crmContact/data/getContact",async()=>(await w()).data),I=o("crmContact/data/getSource",async()=>{const e=await f();return console.log({response:e}),e.data}),k=o("crmContact/data/createSource",async e=>{var a,t;try{return(await D(e)).data}catch(s){throw new Error((t=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:t.message)}}),l=o("crmCompany/data/getCompany",async()=>(await h()).data),F=o("crmContact/data/editContact",async({contactId:e,updatedData:a})=>{var t,s;try{return(await L(e,a)).data}catch(n){throw new Error((s=(t=n==null?void 0:n.response)==null?void 0:t.data)==null?void 0:s.message)}}),M=o("crmContact/data/deleteContact",async e=>{var a,t;try{return await S(e)}catch(s){throw new Error((t=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:t.message)}}),N=o("crmContact/data/createContact",async e=>{var a,t;try{return(await b(e)).data}catch(s){throw new Error((t=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:t.message)}}),j=o("crmContact/data/module",async()=>{var e,a;try{return(await E()).data}catch(t){throw new Error((a=(e=t==null?void 0:t.response)==null?void 0:e.data)==null?void 0:a.message)}}),B=o("tag-category",async({id:e})=>{var a,t;try{return(await p(e)).data}catch(s){throw new Error((t=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:t.message)}});o("crmContact/data/fetchTag",async({id:e})=>{var a,t;try{return(await p(e)).data}catch(s){throw new Error((t=(a=s==null?void 0:s.response)==null?void 0:a.data)==null?void 0:t.message)}});o("crmContact/data/createTag",async({masterId:e,colorName:a,tagName:t,tagCategoryId:s})=>(await x({colorName:a,tagName:t,masterId:e,tagCategoryId:s})).data);const z={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},G={status:""},q={loading:!1,sources:[],statisticLoading:!1,contactList:[],displayedContactList:[],companyList:[],statisticData:{},tableData:z,filterData:G,drawerOpen:!1,selectedContact:{},deleteConfirmation:!1},C=y({name:`${T}/state`,initialState:q,reducers:{setTableData:(e,a)=>{e.tableData=a.payload;const t=e.contactList.filter(s=>s.firstName.toLowerCase().includes(a.payload.query.toLowerCase())||s.lastName.toLowerCase().includes(a.payload.query.toLowerCase())||s.email.toLowerCase().includes(a.payload.query.toLowerCase()));e.displayedContactList=t.slice(a.payload.pageSize*(a.payload.pageIndex-1),a.payload.pageSize*a.payload.pageIndex)},setContactList:(e,a)=>{e.contactList=a.payload},setFilterData:(e,a)=>{e.filterData=a.payload},setSelectedContact:(e,a)=>{e.selectedContact=a.payload},setDrawerOpen:e=>{e.drawerOpen=!0},setDrawerClose:e=>{e.drawerOpen=!1},toggleDeleteConfirmation:(e,a)=>{e.deleteConfirmation=a.payload}},extraReducers:e=>{e.addCase(i.fulfilled,(a,t)=>{var s,n,r,c;a.contactList=t.payload.data,a.tableData.total=t.payload.data.length,a.displayedContactList=t.payload.data.slice(((s=a==null?void 0:a.tableData)==null?void 0:s.pageSize)*(((n=a==null?void 0:a.tableData)==null?void 0:n.pageIndex)-1),((r=a==null?void 0:a.tableData)==null?void 0:r.pageSize)*((c=a==null?void 0:a.tableData)==null?void 0:c.pageIndex)),a.loading=!1}).addCase(i.pending,a=>{a.loading=!0}).addCase(d.fulfilled,(a,t)=>{a.statisticData=t.payload,a.statisticLoading=!1}).addCase(d.pending,a=>{a.statisticLoading=!0}).addCase(l.fulfilled,(a,t)=>{a.companyList=t.payload.data,a.loading=!1}).addCase(l.pending,a=>{a.loading=!0}).addCase(I.fulfilled,(a,t)=>{a.sources=t.payload.data})}}),{setTableData:P,setContactList:_,setFilterData:$,setSelectedContact:v,setDrawerOpen:H,setDrawerClose:J,toggleDeleteConfirmation:K}=C.actions,O=C.reducer,Q=m({data:O}),U=g;export{d as a,l as b,B as c,M as d,k as e,j as f,i as g,I as h,F as i,N as j,v as k,P as l,H as m,Q as r,J as s,K as t,U as u};
