import{r as p,j as t,a as Y,a3 as Q,au as be,av as yt,aw as K,p as vt,al as jt,ah as Tt,aq as St}from"./index-dd430329.js";import{A as bt}from"./AdaptableCard-aab5007a.js";import{u as b,a as ue,g as Z,e as Xe,s as Je,b as me,f as Ae,p as je,c as Te,h as Fe,t as Re,d as Ct,i as Et,j as Dt,k as Ze,l as et,m as Nt,n as Ne,o as kt,q as Mt,v as wt,r as It}from"./index-6148931b.js";import{B as re}from"./Button-477f78d2.js";import{c as ve}from"./cloneDeep-7dd50aa7.js";import{I as H}from"./Input-2ae5f21f.js";import{b as Vt,T as Ee,Q as At,O as Ft,P as Rt,o as Lt,M as Pt,C as $t}from"./index.esm-8a75a52d.js";import{d as qt}from"./debounce-ea0d38a8.js";import{u as De}from"./checkEditUpdate-de727179.js";import{D as Ot}from"./DataTable-b28d1e98.js";import"./Alert-40c008c9.js";import{A as _t}from"./index-1bec26b5.js";import"./Badge-81ec6aad.js";import"./RangeCalendar-c7dd44b3.js";import{C as Ut}from"./Card-7303f1d6.js";import"./index-4953df19.js";import"./index-e8664bdc.js";import{D as tt}from"./Dialog-4e683d85.js";import{D as zt}from"./Drawer-851dfb0e.js";import"./index-273b73f2.js";import{F as qe,a as q}from"./FormItem-c5d9f12d.js";import"./toString-45c45754.js";import"./index-ad4d109a.js";import"./index-1e6ea035.js";import"./index-5ad45768.js";import{t as oe,N as le}from"./toast-7520b143.js";import"./Pagination-a183170a.js";import"./Progress-65bff4d5.js";import"./index-9685374c.js";import"./ScrollBar-efe95462.js";import"./index-a7fee107.js";import{m as Wt,d as Ht,S as he}from"./Select-a638e837.js";import"./Skeleton-0435d2db.js";import"./index-0bd5fcc8.js";import"./Switcher-46a64a8e.js";import"./index-03531cf7.js";import{T as at}from"./index-f4b545fd.js";import{T as Yt}from"./Tag-a01d1848.js";import"./index-c88fea13.js";import"./index-f57ef06e.js";import{T as we}from"./Tooltip-4f6c910c.js";import{U as Gt}from"./Upload-79efa750.js";import{S as Bt}from"./StatusCapsule-688bd207.js";import{T as Kt}from"./TagsList-1727f43e.js";import{T as Ie}from"./TextTruncate-104140ac.js";import{u as Qt}from"./useThemeClass-c67d9527.js";import{h as Xt}from"./moment-fbc5633a.js";import{b as Oe,A as nt,a as Jt}from"./index.esm-9e83db4a.js";import{a as Zt}from"./index.esm-2c41f11e.js";import{d as ea}from"./index.esm-1de3d473.js";import{i as ta}from"./Views-969b82ff.js";import"./chart.constant-b89d4d9a.js";import"./GrowShrinkTag-7614f549.js";import"./react-tooltip.min-90b0da4a.js";import"./RichTextEditor-ab8d719f.js";import"./SegmentItemOption-4eb9f4d2.js";import{S as st}from"./StickyFooter-8f985469.js";import"./SvgIcon-0e5d590b.js";import{F as _e,a as Ue,b as z,u as aa}from"./formik.esm-97667c88.js";import{c as Me,a as F,e as it}from"./index.esm-27140c16.js";import{D as na}from"./DoubleSidedImage-1c39f9b4.js";import{C as sa}from"./ConfirmDialog-fcfff7a2.js";/* empty css              */import{G as He}from"./index.esm-2e0dcea3.js";import{a as rt,_ as pe}from"./objectWithoutProperties-8809bfcf.js";import{_ as ee}from"./toConsumableArray-7a029c07.js";import{_ as Le}from"./slicedToArray-2ef3e469.js";import{_ as ot}from"./inheritsLoose-a77bb596.js";import{g as ia}from"./index-193291a1.js";import{M as Ye,t as xe,a as Ge,p as Be}from"./helper-64c17a1c.js";import{B as Ke}from"./index.esm-a84231c5.js";import{F as ra}from"./FormDesription-400d98a5.js";import{u as lt}from"./useGetModule-2a1cfd6d.js";import{D as oa}from"./DynamicDropDown-06637d6e.js";import{S as la}from"./Status-852657ca.js";import{M as ca}from"./MediaSkeleton-90313562.js";import{N as da}from"./react-number-format.es-b4025142.js";import"./CrmService-01e274f6.js";import"./index-5a74c47f.js";import"./_MapCache-787d0444.js";import"./_getPrototype-a234e5e0.js";import"./isNil-ba5dd027.js";import"./get-f4ce3646.js";import"./index-387d3e60.js";import"./useTimeout-8cc7d1d0.js";import"./CloseButton-be129446.js";import"./StatusIcon-1c9455ce.js";import"./useMergeRef-788c4cb0.js";import"./useControllableState-3d893585.js";import"./_baseIsEqual-da2ece8d.js";import"./useRootClose-c59d452a.js";import"./usePopper-ad874619.js";import"./TimeInput-d81057f6.js";import"./useUniqueId-abd97dae.js";import"./useDidUpdate-0f1ffc2f.js";import"./index-ab79e894.js";import"./useUncertainRef-b3ab91cc.js";import"./index-59261ffa.js";import"./chainedFunction-070f832c.js";import"./floating-ui.dom-4bc0055b.js";import"./mapCloneElement-c4c40043.js";import"./index.esm-cdf5a269.js";import"./index.esm-075cf0f7.js";import"./index.esm-7dc546a5.js";const ct=p.forwardRef((c,s)=>{const{onInputChange:e}=c,o=qt(a,500);function a(r){e==null||e(r)}const n=r=>{o(r.target.value)};return t.jsx(H,{ref:s,className:"max-w-md md:w-52 mb-4",size:"sm",placeholder:"Search by title",prefix:t.jsx(Vt,{className:"text-lg"}),onChange:n})});ct.displayName="TasksTableSearch";const ua=()=>{const c=Y(),s=p.useRef(null),e=b(l=>l.crmTasks.data.tableData),o=De("tasks","canCreate"),a=l=>{const u=ve(e);u.query=l,u.pageIndex=1,typeof l=="string"&&l.length>1&&n(u),typeof l=="string"&&l.length===0&&n(u)},n=l=>{c(l?ue(l):Z())},r=()=>{c(Xe()),c(Je("Add")),c(me({}))};return p.useEffect(()=>{s.current&&(s.current.value=e.query||"",c(ue(e)))},[e==null?void 0:e.query]),t.jsxs("div",{className:"md:flex items-center justify-between",children:[t.jsx("div",{className:"md:flex items-center gap-4",children:t.jsx(ct,{ref:s,onInputChange:a})}),t.jsx("div",{className:"mb-4",children:o&&t.jsx(re,{size:"sm",onClick:r,children:"Add New"})})]})},dt=p.forwardRef((c,s)=>{const e=Y(),o=b(h=>h.crmTasks.data.followUPConfirmation),a=b(h=>{var g,T;return(T=(g=h.crmTasks)==null?void 0:g.data)==null?void 0:T.selectedTask}),n=b(h=>h.crmTasks.data.loading),r=()=>{e(Ae(!1))},l=Me().shape({descriptions:F().required("Notes is required")}),u=async h=>{var C,I,w;const g=await e(je({taskId:a==null?void 0:a.id,data:h})),T=(C=g==null?void 0:g.payload)!=null&&C.success?{title:"Successfully Updated",type:"success",message:(I=g==null?void 0:g.payload)==null?void 0:I.message}:{title:"Something Went Wrong !!!",type:"danger",message:(w=g==null?void 0:g.error)==null?void 0:w.message};oe.push(t.jsx(le,{title:T.title,type:T==null?void 0:T.type,duration:2500,children:T.message}),{placement:"top-end"}),await e(Z()),await e(Te()),await e(Ae(!1))};return t.jsxs(tt,{isOpen:o,onClose:r,children:[t.jsx("h5",{className:"mb-4",children:"Follow Up"}),t.jsx(_e,{innerRef:s,initialValues:{descriptions:"",nextDateTime:""},validationSchema:l,onSubmit:async(h,{setSubmitting:g})=>{const T={completionStatus:"completed",descriptions:h.descriptions};h!=null&&h.nextDateTime&&(T.nextDateTime=h.nextDateTime),await u(T),g(!1)},children:({touched:h,errors:g,values:T,setFieldValue:C})=>t.jsxs(Ue,{children:[t.jsxs(qe,{children:[t.jsx(q,{label:"Next Follow-Up Date and Time",invalid:g.nextDateTime&&h.nextDateTime,errorMessage:g.nextDateTime,children:t.jsx(z,{type:"dateTime-local",autoComplete:"off",name:"nextDateTime",placeholder:"Select Next Follow-Up Date and Time",component:H,prefix:t.jsx(Ee,{className:"text-xl"})})}),t.jsx(q,{label:"Notes",invalid:g.descriptions&&h.descriptions,errorMessage:g.descriptions,children:t.jsx(z,{textArea:!0,type:"text",autoComplete:"off",name:"descriptions",placeholder:"Notes",component:H,prefix:t.jsx(Oe,{className:"text-xl"})})})]}),t.jsx(st,{className:"flex items-center justify-end py-2",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"md:flex items-center",children:[t.jsx(re,{size:"sm",className:"ltr:mr-3 rtl:ml-3",type:"button",onClick:r,children:"Cancel"}),t.jsx(re,{size:"sm",type:"submit",variant:"solid",icon:t.jsx(nt,{}),loading:n,children:"Save"})]})})]})})]})});dt.displayName="FollowUpTaskConfirmation";const ut=p.forwardRef((c,s)=>{const e=Y(),[o,a]=p.useState(""),[n,r]=p.useState(""),l=b(E=>E.crmTasks.data.quotationConfirmation),u=b(E=>{var m,f;return(f=(m=E.crmTasks)==null?void 0:m.data)==null?void 0:f.selectedTask}),h=b(E=>E.crmTasks.data.loading),g=()=>{e(Fe(!1)),a("")},T=Me().shape({descriptions:F().required("Notes is required")}),C=async E=>{var v,j,k;const m=await e(je({taskId:u==null?void 0:u.id,data:E})),f=(v=m==null?void 0:m.payload)!=null&&v.success?{title:"Successfully Updated",type:"success",message:(j=m==null?void 0:m.payload)==null?void 0:j.message}:{title:"Something Went Wrong !!!",type:"danger",message:(k=m==null?void 0:m.error)==null?void 0:k.message};oe.push(t.jsx(le,{title:f.title,type:f==null?void 0:f.type,duration:2500,children:f.message}),{placement:"top-end"}),await e(Z()),await e(Te()),await e(Fe(!1)),a("")},I=E=>{let m=!0;const f=["image/png","image/jpeg","image/jpeg","image/webp","image/gif","application/pdf","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/csv","text/plain","text/html","application/xml","application/json","application/zip","application/x-rar-compressed"],v=1e7;if(E)for(const j of E)f.includes(j.type)||(m="Please upload a .jpeg, .png, or .pdf file!"),j.size>=v&&(console.log(j.size),m="Uploaded file cannot be larger than 10MB!");return m},w=(E,m,f)=>{const v="1-img-0",j=f.length-1,k=new FileReader,D=f[j];k.onload=()=>{const P=k.result,M={id:v,name:D.name,img:P};r(D.type),a(D.name),m("attachments",M)},k.readAsDataURL(D)};return t.jsxs(tt,{isOpen:l,onClose:g,children:[t.jsx("h5",{className:"mb-4",children:"Quotation"}),t.jsx(_e,{innerRef:s,initialValues:{descriptions:"",attachments:""},validationSchema:T,onSubmit:async(E,{setSubmitting:m})=>{var v,j;const f={completionStatus:"completed",descriptions:E.descriptions};(v=E.attachments)!=null&&v.img&&(f.attachments=(j=E.attachments)==null?void 0:j.img,f.fileType=n),await C(f),m(!1)},children:({field:E,form:m,touched:f,errors:v,values:j,setFieldValue:k})=>t.jsxs(Ue,{children:[t.jsxs(qe,{children:[t.jsx(q,{label:"Upload File",children:t.jsx(Gt,{draggable:!0,className:"min-h-fit",beforeUpload:I,showList:!1,onChange:D=>w(m,k,D),children:t.jsxs("div",{className:"max-w-full flex flex-col px-4 py-2 justify-center items-center",children:[t.jsx(na,{src:"/img/others/upload.png",darkModeSrc:"/img/others/upload-dark.png"}),t.jsx("p",{className:"font-semibold",children:o?t.jsxs("span",{className:"text-gray-800 dark:text-white",children:["Selected file ",o]}):t.jsxs(t.Fragment,{children:[t.jsxs("span",{className:"text-gray-800 dark:text-white",children:["Drop your image here, or"," "]}),t.jsx("span",{className:"text-blue-500",children:"browse"})]})}),t.jsx("p",{className:"mt-1 opacity-60 dark:text-white",children:"Support: jpeg, png, pdf"})]})})}),t.jsx(q,{label:"Notes",invalid:v.descriptions&&f.descriptions,errorMessage:v.descriptions,children:t.jsx(z,{textArea:!0,type:"text",autoComplete:"off",name:"descriptions",placeholder:"Notes",component:H,prefix:t.jsx(Oe,{className:"text-xl"})})})]}),t.jsx(st,{className:"flex items-center justify-end py-2",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:t.jsxs("div",{className:"md:flex items-center",children:[t.jsx(re,{size:"sm",className:"ltr:mr-3 rtl:ml-3",type:"button",onClick:g,children:"Cancel"}),t.jsx(re,{size:"sm",type:"submit",variant:"solid",icon:t.jsx(nt,{}),loading:h,children:"Save"})]})})]})})]})});ut.displayName="QuotationTaskConfirmation";const ma=()=>{const c=Y(),s=b(n=>n.crmTasks.data.deleteConfirmation),e=b(n=>{var r,l;return(l=(r=n.crmTasks)==null?void 0:r.data)==null?void 0:l.selectedTask}),o=()=>{c(Re(!1))},a=async()=>{var r,l,u;c(Re(!1));const n=await c(Ct(e.id));await c(Z()),(r=n==null?void 0:n.payload)!=null&&r.success?oe.push(t.jsx(le,{title:"Successfuly Deleted",type:"success",duration:2500,children:(l=n==null?void 0:n.payload)==null?void 0:l.message}),{placement:"top-end"}):oe.push(t.jsx(le,{title:"Something Went Wrong !!!",type:"danger",duration:2500,children:(u=n==null?void 0:n.error)==null?void 0:u.message}),{placement:"top-end"}),await c(Te())};return t.jsx(sa,{isOpen:s,type:"danger",title:"Delete Task",confirmButtonColor:"red-600",onClose:o,onRequestClose:o,onCancel:o,onConfirm:a,children:t.jsx("p",{children:"Are you sure you want to delete this Task? All record related to this task will be deleted as well. This action cannot be undone."})})},Qe={disabled:!1},ke=Q.createContext(null);var pa=function(s){return s.scrollTop},ge="unmounted",ne="exited",se="entering",de="entered",Pe="exiting",X=function(c){ot(s,c);function s(o,a){var n;n=c.call(this,o,a)||this;var r=a,l=r&&!r.isMounting?o.enter:o.appear,u;return n.appearStatus=null,o.in?l?(u=ne,n.appearStatus=se):u=de:o.unmountOnExit||o.mountOnEnter?u=ge:u=ne,n.state={status:u},n.nextCallback=null,n}s.getDerivedStateFromProps=function(a,n){var r=a.in;return r&&n.status===ge?{status:ne}:null};var e=s.prototype;return e.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},e.componentDidUpdate=function(a){var n=null;if(a!==this.props){var r=this.state.status;this.props.in?r!==se&&r!==de&&(n=se):(r===se||r===de)&&(n=Pe)}this.updateStatus(!1,n)},e.componentWillUnmount=function(){this.cancelNextCallback()},e.getTimeouts=function(){var a=this.props.timeout,n,r,l;return n=r=l=a,a!=null&&typeof a!="number"&&(n=a.exit,r=a.enter,l=a.appear!==void 0?a.appear:r),{exit:n,enter:r,appear:l}},e.updateStatus=function(a,n){if(a===void 0&&(a=!1),n!==null)if(this.cancelNextCallback(),n===se){if(this.props.unmountOnExit||this.props.mountOnEnter){var r=this.props.nodeRef?this.props.nodeRef.current:be.findDOMNode(this);r&&pa(r)}this.performEnter(a)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ne&&this.setState({status:ge})},e.performEnter=function(a){var n=this,r=this.props.enter,l=this.context?this.context.isMounting:a,u=this.props.nodeRef?[l]:[be.findDOMNode(this),l],h=u[0],g=u[1],T=this.getTimeouts(),C=l?T.appear:T.enter;if(!a&&!r||Qe.disabled){this.safeSetState({status:de},function(){n.props.onEntered(h)});return}this.props.onEnter(h,g),this.safeSetState({status:se},function(){n.props.onEntering(h,g),n.onTransitionEnd(C,function(){n.safeSetState({status:de},function(){n.props.onEntered(h,g)})})})},e.performExit=function(){var a=this,n=this.props.exit,r=this.getTimeouts(),l=this.props.nodeRef?void 0:be.findDOMNode(this);if(!n||Qe.disabled){this.safeSetState({status:ne},function(){a.props.onExited(l)});return}this.props.onExit(l),this.safeSetState({status:Pe},function(){a.props.onExiting(l),a.onTransitionEnd(r.exit,function(){a.safeSetState({status:ne},function(){a.props.onExited(l)})})})},e.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},e.safeSetState=function(a,n){n=this.setNextCallback(n),this.setState(a,n)},e.setNextCallback=function(a){var n=this,r=!0;return this.nextCallback=function(l){r&&(r=!1,n.nextCallback=null,a(l))},this.nextCallback.cancel=function(){r=!1},this.nextCallback},e.onTransitionEnd=function(a,n){this.setNextCallback(n);var r=this.props.nodeRef?this.props.nodeRef.current:be.findDOMNode(this),l=a==null&&!this.props.addEndListener;if(!r||l){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[r,this.nextCallback],h=u[0],g=u[1];this.props.addEndListener(h,g)}a!=null&&setTimeout(this.nextCallback,a)},e.render=function(){var a=this.state.status;if(a===ge)return null;var n=this.props,r=n.children;n.in,n.mountOnEnter,n.unmountOnExit,n.appear,n.enter,n.exit,n.timeout,n.addEndListener,n.onEnter,n.onEntering,n.onEntered,n.onExit,n.onExiting,n.onExited,n.nodeRef;var l=rt(n,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Q.createElement(ke.Provider,{value:null},typeof r=="function"?r(a,l):Q.cloneElement(Q.Children.only(r),l))},s}(Q.Component);X.contextType=ke;X.propTypes={};function ce(){}X.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ce,onEntering:ce,onEntered:ce,onExit:ce,onExiting:ce,onExited:ce};X.UNMOUNTED=ge;X.EXITED=ne;X.ENTERING=se;X.ENTERED=de;X.EXITING=Pe;const mt=X;function ze(c,s){var e=function(n){return s&&p.isValidElement(n)?s(n):n},o=Object.create(null);return c&&p.Children.map(c,function(a){return a}).forEach(function(a){o[a.key]=e(a)}),o}function fa(c,s){c=c||{},s=s||{};function e(g){return g in s?s[g]:c[g]}var o=Object.create(null),a=[];for(var n in c)n in s?a.length&&(o[n]=a,a=[]):a.push(n);var r,l={};for(var u in s){if(o[u])for(r=0;r<o[u].length;r++){var h=o[u][r];l[o[u][r]]=e(h)}l[u]=e(u)}for(r=0;r<a.length;r++)l[a[r]]=e(a[r]);return l}function ie(c,s,e){return e[s]!=null?e[s]:c.props[s]}function ha(c,s){return ze(c.children,function(e){return p.cloneElement(e,{onExited:s.bind(null,e),in:!0,appear:ie(e,"appear",c),enter:ie(e,"enter",c),exit:ie(e,"exit",c)})})}function xa(c,s,e){var o=ze(c.children),a=fa(s,o);return Object.keys(a).forEach(function(n){var r=a[n];if(p.isValidElement(r)){var l=n in s,u=n in o,h=s[n],g=p.isValidElement(h)&&!h.props.in;u&&(!l||g)?a[n]=p.cloneElement(r,{onExited:e.bind(null,r),in:!0,exit:ie(r,"exit",c),enter:ie(r,"enter",c)}):!u&&l&&!g?a[n]=p.cloneElement(r,{in:!1}):u&&l&&p.isValidElement(h)&&(a[n]=p.cloneElement(r,{onExited:e.bind(null,r),in:h.props.in,exit:ie(r,"exit",c),enter:ie(r,"enter",c)}))}}),a}var ga=Object.values||function(c){return Object.keys(c).map(function(s){return c[s]})},ya={component:"div",childFactory:function(s){return s}},We=function(c){ot(s,c);function s(o,a){var n;n=c.call(this,o,a)||this;var r=n.handleExited.bind(yt(n));return n.state={contextValue:{isMounting:!0},handleExited:r,firstRender:!0},n}var e=s.prototype;return e.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},e.componentWillUnmount=function(){this.mounted=!1},s.getDerivedStateFromProps=function(a,n){var r=n.children,l=n.handleExited,u=n.firstRender;return{children:u?ha(a,l):xa(a,r,l),firstRender:!1}},e.handleExited=function(a,n){var r=ze(this.props.children);a.key in r||(a.props.onExited&&a.props.onExited(n),this.mounted&&this.setState(function(l){var u=ee({},l.children);return delete u[a.key],{children:u}}))},e.render=function(){var a=this.props,n=a.component,r=a.childFactory,l=rt(a,["component","childFactory"]),u=this.state.contextValue,h=ga(this.state.children).map(r);return delete l.appear,delete l.enter,delete l.exit,n===null?Q.createElement(ke.Provider,{value:u},h):Q.createElement(ke.Provider,{value:u},Q.createElement(n,l,h))},s}(Q.Component);We.propTypes={};We.defaultProps=ya;const pt=We;var va=["in","onExited","appear","enter","exit"],ja=function(s){return function(e){e.in,e.onExited,e.appear,e.enter,e.exit;var o=pe(e,va);return p.createElement(s,o)}},Ta=ja,Sa=["component","duration","in","onExited"],ft=function(s){var e=s.component,o=s.duration,a=o===void 0?1:o,n=s.in;s.onExited;var r=pe(s,Sa),l=p.useRef(null),u={entering:{opacity:0},entered:{opacity:1,transition:"opacity ".concat(a,"ms")},exiting:{opacity:0},exited:{opacity:0}};return p.createElement(mt,{mountOnEnter:!0,unmountOnExit:!0,in:n,timeout:a,nodeRef:l},function(h){var g={style:K({},u[h]),ref:l};return p.createElement(e,ee({innerProps:g},r))})},$e=260,ba=function(s){var e=s.children,o=s.in,a=s.onExited,n=p.useRef(null),r=p.useState("auto"),l=Le(r,2),u=l[0],h=l[1];p.useEffect(function(){var T=n.current;if(T){var C=window.requestAnimationFrame(function(){return h(T.getBoundingClientRect().width)});return function(){return window.cancelAnimationFrame(C)}}},[]);var g=function(C){switch(C){default:return{width:u};case"exiting":return{width:0,transition:"width ".concat($e,"ms ease-out")};case"exited":return{width:0}}};return p.createElement(mt,{enter:!1,mountOnEnter:!0,unmountOnExit:!0,in:o,onExited:function(){var C=n.current;C&&(a==null||a(C))},timeout:$e,nodeRef:n},function(T){return p.createElement("div",{ref:n,style:K({overflow:"hidden",whiteSpace:"nowrap"},g(T))},e)})},Ca=["in","onExited"],Ea=function(s){return function(e){var o=e.in,a=e.onExited,n=pe(e,Ca);return p.createElement(ba,{in:o,onExited:a},p.createElement(s,ee({cropWithEllipsis:o},n)))}},Da=Ea,Na=function(s){return function(e){return p.createElement(ft,ee({component:s,duration:e.isMulti?$e:1},e))}},ka=Na,Ma=function(s){return function(e){return p.createElement(ft,ee({component:s},e))}},wa=Ma,Ia=["component"],Va=["children"],Aa=function(s){return function(e){return e.isMulti?p.createElement(Fa,ee({component:s},e)):p.createElement(pt,ee({component:s},e))}},Fa=function(s){var e=s.component,o=pe(s,Ia),a=Ra(o);return p.createElement(pt,ee({component:e},a))},Ra=function(s){var e=s.children,o=pe(s,Va),a=o.isMulti,n=o.hasValue,r=o.innerProps,l=o.selectProps,u=l.components,h=l.controlShouldRenderValue,g=p.useState(a&&h&&n),T=Le(g,2),C=T[0],I=T[1],w=p.useState(!1),E=Le(w,2),m=E[0],f=E[1];p.useEffect(function(){n&&!C&&I(!0)},[n,C]),p.useEffect(function(){m&&!n&&C&&I(!1),f(!1)},[m,n,C]);var v=function(){return f(!0)},j=function(M){if(a&&p.isValidElement(M)){if(M.type===u.MultiValue)return p.cloneElement(M,{onExited:v});if(M.type===u.Placeholder&&C)return null}return M},k=K(K({},r),{},{style:K(K({},r==null?void 0:r.style),{},{display:a&&n||C?"flex":"grid"})}),D=K(K({},o),{},{innerProps:k,children:p.Children.toArray(e).map(j)});return D},La=Aa,Pa=["Input","MultiValue","Placeholder","SingleValue","ValueContainer"],ht=function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},e=Ht({components:s}),o=e.Input,a=e.MultiValue,n=e.Placeholder,r=e.SingleValue,l=e.ValueContainer,u=pe(e,Pa);return K({Input:Ta(o),MultiValue:Da(a),Placeholder:ka(n),SingleValue:wa(r),ValueContainer:La(l)},u)},Se=ht();Se.Input;Se.MultiValue;Se.Placeholder;Se.SingleValue;Se.ValueContainer;var $a=Wt(ht);const ye=[],Ce=[],qa=c=>{var U,W,N,R;const{touched:s,errors:e,setFieldValue:o,values:a}=c,n=Y();p.useState(!1),p.useState(!1);const[r,l]=p.useState(null),[u,h]=p.useState(null),[g,T]=p.useState(""),[C,I]=p.useState(""),[w,E]=p.useState([]),[m,f]=p.useState(!1),v=b(i=>{var L;return(L=i.crmTasks.data.customField)==null?void 0:L.data});b(i=>i.crmTasks.data.tasksList);const[j,k]=p.useState(""),D=p.useRef(null),P={display:"grid",gridTemplateColumns:"1fr 1fr",gap:"1rem"};p.useEffect(()=>{const i=new Date,L=i.getFullYear(),A=(i.getMonth()+1).toString().padStart(2,"0"),J=i.getDate().toString().padStart(2,"0"),_=i.getHours().toString().padStart(2,"0"),ae=i.getMinutes().toString().padStart(2,"0"),B=`${L}-${A}-${J}T${_}:${ae}`;T(B),D.current&&D.current.addEventListener("input",fe)},[]);const{getModule:M}=lt();p.useEffect(()=>{const i=async()=>{var A,J;try{const{payload:_}=await n(Ze()),ae=(A=_==null?void 0:_.data)==null?void 0:A.find(B=>(B==null?void 0:B.moduleName)==="tasks");if(k(ae.id),l(a==null?void 0:a.module),h(a==null?void 0:a.type),I(a==null?void 0:a.nextDateTime),ae){const{payload:B}=await n(et({id:(J=ae==null?void 0:ae.id)==null?void 0:J.toString()}));E(B==null?void 0:B.data)}}catch(_){console.error("Error fetching module data:",_)}};(async()=>{const A=await M("tasks");await n(Et()),await n(Dt(A)),await n(ia()),await i()})()},[n]);const fe=()=>{D.current.value<g&&(D.current.value=g)};b(i=>{var L,A;return(A=(L=i.crmTasks)==null?void 0:L.data)==null?void 0:A.selectedTask});const te=b(i=>i.crmTasks.data.drawerMode),d=aa(),x=async(i,L)=>{await d.setFieldValue(`tagId_${L}`,i),f(!m)},y=$a(),S=b(i=>i.crmTasks.data.usersList);ye.length=0,S==null||S.forEach(i=>{ye.push({label:`${i==null?void 0:i.firstName} ${i==null?void 0:i.lastName}`,value:i.id})});const V=i=>{l(i.value),o("module",i==null?void 0:i.value),i!=null&&i.value&&xe[i==null?void 0:i.value][0]&&u&&(d.setFieldValue("type",xe[i==null?void 0:i.value][0]),$(xe[i==null?void 0:i.value][0])),I("")},$=i=>{o("type",i==null?void 0:i.value),h(i.value)},O=b(i=>i.crmTasks.data.leadsList);Ce.length=0,O==null||O.forEach(i=>{Ce.push({value:i.id,label:i.title})});const G=async()=>{const i=new Set;w==null||w.forEach(A=>{a&&a[`tagId_${A.id}`]&&a[`tagId_${A.id}`].length&&a[`tagId_${A.id}`].map(_=>_.value).forEach(_=>{i.add(_)})});const L=[...i];await d.setFieldValue("tagId",L)};return p.useMemo(()=>{G()},[m,w]),t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("div",{className:"col-span-1",children:t.jsx(q,{label:"Module",invalid:e.module&&s.module,errorMessage:e.module,children:t.jsx(z,{type:"text",autoComplete:"off",name:"module",placeholder:"Module",component:he,options:Ye,value:(U=Ye)==null?void 0:U.find(i=>(i==null?void 0:i.value)==(a==null?void 0:a.module)),prefix:t.jsx(He,{className:"text-xl"}),onChange:V})})}),t.jsx("div",{className:"col-span-1",children:t.jsx(q,{label:"Type",invalid:e.type&&s.type,errorMessage:e.type,children:t.jsx(z,{type:"text",autoComplete:"off",name:"type",placeholder:"Type",component:he,options:xe[r]||[],value:(W=xe[r])==null?void 0:W.find(i=>(i==null?void 0:i.value)==(a==null?void 0:a.type)),prefix:t.jsx(He,{className:"text-xl"}),onChange:$})})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u==="followup"||u==="delivery"||u==="meeting"?t.jsx("div",{className:"col-span-1",children:t.jsx(q,{label:(N=Ge[u])==null?void 0:N.label,invalid:e.nextDateTime&&s.nextDateTime,errorMessage:e.nextDateTime,children:t.jsx(z,{ref:D,type:"dateTime-local",autoComplete:"off",name:"nextDateTime",placeholder:(R=Ge[u])==null?void 0:R.placeholder,component:H,prefix:t.jsx(Ee,{className:"text-xl"}),value:a.nextDateTime,min:g,onChange:i=>{I(i.target.value),o("nextDateTime",i.target.value)}})})}):null,u==="delivery"&&t.jsx("div",{className:"col-span-1",children:t.jsx(q,{label:"Delivery Address",invalid:e.address&&s.address,errorMessage:e.address,children:t.jsx(z,{type:"text",autoComplete:"off",name:"address",placeholder:"Delivery Address",component:H,prefix:t.jsx(Ee,{className:"text-xl"})})})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("div",{className:"col-span-1",children:t.jsx(q,{label:"Title *",invalid:e.title&&s.title,errorMessage:e.title,children:t.jsx(z,{type:"text",autoComplete:"off",name:"title",placeholder:"Title",component:H,prefix:t.jsx(At,{className:"text-xl"})})})}),t.jsx("div",{className:"col-span-1",children:t.jsx(q,{label:"Due Date *",invalid:e.dueDate&&s.dueDate,errorMessage:e.dueDate,children:t.jsx(z,{isDisabled:te==="Edit",type:"dateTime-local",autoComplete:"off",name:"dueDate",component:H,prefix:t.jsx(Ee,{className:"text-xl"}),min:g})})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsx("div",{className:"col-span-1",children:t.jsx(q,{label:"Priority *",invalid:e.priority&&s.priority,errorMessage:e.priority,children:t.jsx(he,{name:"priority",id:"priority",components:y,value:Be.find(i=>(i==null?void 0:i.value)===(a==null?void 0:a.priority)),options:Be,onChange:i=>{o("priority",i.value||"")}})})}),t.jsx("div",{className:"col-span-1",children:t.jsx(q,{label:"Assigned To",invalid:e.assignedTo&&s.assignedTo,errorMessage:e.assignedTo,children:t.jsx(he,{name:"assignedTo",id:"assignedTo",value:ye.find(i=>(i==null?void 0:i.value)===(a==null?void 0:a.assignedTo)),options:ye,onChange:i=>{o("assignedTo",i.value||"")}})})})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.jsx("div",{className:"col-span-1",children:t.jsx(q,{label:"Connected Lead",invalid:e.connectedLead&&s.connectedLead,errorMessage:e.connectedLead,children:t.jsx(he,{name:"connectedLead",id:"connectedLead",value:Ce.find(i=>(i==null?void 0:i.value)===(a==null?void 0:a.connectedLead)),options:Ce,onChange:i=>{o("connectedLead",i.value||"")}})})})}),t.jsx(q,{label:"Notes",invalid:e.descriptions&&s.descriptions,errorMessage:e.descriptions,children:t.jsx(z,{textArea:!0,type:"text",autoComplete:"off",name:"descriptions",placeholder:"Notes",component:H,prefix:t.jsx(Oe,{className:"text-xl"})})}),t.jsx(oa,{data:w,handleTagChange:x}),(v==null?void 0:v.length)>0?t.jsxs(t.Fragment,{children:[t.jsx(ra,{title:"Additional Details",desc:"",className:"mb-2"}),t.jsx("div",{style:P,children:v==null?void 0:v.map(i=>t.jsx("div",{children:t.jsx(q,{label:i==null?void 0:i.label,children:i.inputType==="textArea"?t.jsx(z,{textArea:!0,type:"text",autoComplete:"off",name:i.name,placeholder:i==null?void 0:i.label,defaultValue:i.defaultValue,component:H,prefix:t.jsx(Ke,{className:"text-xl"})}):t.jsx(z,{type:i.inputType,autoComplete:"off",name:i.name,placeholder:i==null?void 0:i.label,defaultValue:i.defaultValue,component:H,prefix:t.jsx(Ke,{className:"text-xl"})})})},i.id))})]}):null]})},Oa=Me().shape({title:F().required("Title is Required"),module:F(),type:F(),tagId:it(),connectedLead:F(),descriptions:F(),priority:F().oneOf(["none","low","medium","high"]).required("Priority is required"),nextDateTime:F().test("date-required","Date is required",function(c){const s=this.parent.type;return!((s==="followup"||s==="delivery"||s==="meeting")&&!c)})}),_a=Me().shape({module:F(),type:F(),nextDateTime:F().test("date-required","Date is required",function(c){const s=this.parent.type;return!((s==="followup"||s==="delivery"||s==="meeting")&&!c)}),address:F().test("Address is Require","Delivery Address is Require",function(c){return!(this.parent.type==="delivery"&&!c)}),title:F().required("Title is required"),dueDate:F().required("Due Date is required"),tagId:it(),connectedLead:F(),descriptions:F(),assignedTo:F().test("is-valid-user","Invalid user selected",function(c){return this.parent.assignedTo&&this.parent.assignedTo.length>0?!!ye.find(s=>s.value==c):!0}),priority:F().oneOf(["none","low","medium","high"]).required("Priority is required")}),{TabNav:Ua,TabList:za,TabContent:Wa}=at,xt=p.forwardRef((c,s)=>{var T,C,I,w,E;const e=b(m=>{var f,v;return(v=(f=m.crmTasks)==null?void 0:f.data)==null?void 0:v.selectedTask}),o=b(m=>{var f;return(f=m.crmTasks.data.customField)==null?void 0:f.data}),a=b(m=>m.crmTasks.data.drawerMode),n=Y();(T=e==null?void 0:e.tags)==null||T.reduce((m,f)=>(m[`tagId_${f.id}`]=[],m),{});const r=p.useMemo(()=>{var m;return(m=e==null?void 0:e.tags)==null?void 0:m.reduce((f,v)=>{const j=v.tagCategoryId;return f[`tagId_${j}`]||(f[`tagId_${j}`]=[]),f[`tagId_${j}`].push({label:v.tagName,value:v.id}),f},{})},[e.tags]);function l(m){if(!m)return"";const f=m.split("T");if(f.length!==2)return"";const v=f[0],j=f[1].slice(0,5);return`${v}T${j}`}const u=m=>{const f=new Date(m);if(isNaN(f.getTime()))return"";const v=f.getFullYear(),j=(f.getMonth()+1).toString().padStart(2,"0"),k=f.getDate().toString().padStart(2,"0"),D=f.getHours().toString().padStart(2,"0"),P=f.getMinutes().toString().padStart(2,"0");return`${v}-${j}-${k} ${D}:${P}`},h=async(m,f)=>{var V,$,O,G,U,W,N;const{colorName:v,tagName:j,dueDate:k,nextDateTime:D,...P}=m,M=o.reduce((R,i)=>(R[i.name]=m[i.name],R),{}),fe=u(k),te=u(D);let d,x,y;if(a==="Add")d=await n(Nt({dueDate:fe,nextDateTime:te,...P,...M,tagId:m==null?void 0:m.tagId,...r})),x="Successfully Added",y="Something went wrong !!!",(V=d==null?void 0:d.payload)!=null&&V.success&&n(Ne());else{const R={...P,tagId:m==null?void 0:m.tagId,...r};te&&(R.nextDateTime=te),d=await n(je({taskId:e==null?void 0:e.id,data:R})),x="Successfully Updated",y="Something went wrong !!!",($=d==null?void 0:d.payload)!=null&&$.success&&n(Ne())}const S=(O=d==null?void 0:d.payload)!=null&&O.success?"success":"danger";oe.push(t.jsx(le,{title:(G=d==null?void 0:d.payload)!=null&&G.success?x:y,type:S,duration:2500,children:(U=d==null?void 0:d.payload)!=null&&U.success?(W=d==null?void 0:d.payload)==null?void 0:W.message:(N=d==null?void 0:d.error)==null?void 0:N.message}),{placement:"top-end"}),await n(Z()),await n(Te()),f(!1)},g=p.useMemo(()=>o==null?void 0:o.reduce((f,v)=>{var k;const j=(k=e==null?void 0:e.taskFields)==null?void 0:k.find(D=>(D==null?void 0:D.name)===(v==null?void 0:v.name));return f[v==null?void 0:v.name]=j?j==null?void 0:j.value:v!=null&&v.defaultValue?v==null?void 0:v.defaultValue:"",f},{}),[o]);return t.jsx(_e,{innerRef:s,initialValues:{module:(e==null?void 0:e.module)||"",type:(e==null?void 0:e.type)||"",nextDateTime:l(e==null?void 0:e.nextDateTime)||"",title:(e==null?void 0:e.title)||"",address:(e==null?void 0:e.address)||"",connectedLead:(e==null?void 0:e.connectedLead)||"",dueDate:l(e==null?void 0:e.dueDate)||"",descriptions:(e==null?void 0:e.descriptions)||"",tagId:((C=e==null?void 0:e.tags)==null?void 0:C.map(m=>({label:m.tagName,value:m.id})))||[],tagName:((w=(I=e==null?void 0:e.tags)==null?void 0:I[0])==null?void 0:w.tagName)||"",priority:(e==null?void 0:e.priority)||"",assignedTo:((E=e==null?void 0:e.assignedToData)==null?void 0:E.id)||"",colorName:e!=null&&e.tags&&(e==null?void 0:e.tags.length)>0?e==null?void 0:e.tags[0].colorName:"",...g,...r},validationSchema:a==="Edit"?Oa:_a,onSubmit:async(m,{setSubmitting:f})=>{await h(m,f)},children:({touched:m,errors:f,setFieldValue:v,values:j})=>t.jsx(Ue,{children:t.jsx(qe,{children:t.jsxs(at,{defaultValue:"taskDetails",children:[t.jsx(za,{children:t.jsx(Ua,{value:"taskDetails",children:"Tasks details"})}),t.jsx("div",{className:"p-6",children:t.jsx(Wa,{value:"taskDetails",children:t.jsx(qa,{touched:m,errors:f,values:j,setFieldValue:v})})})]})})})})});xt.displayName="TasksForm";const gt=p.forwardRef((c,s)=>{const e=Y(),o=b(l=>{var u,h;return(h=(u=l.crmTasks)==null?void 0:u.data)==null?void 0:h.selectedTask}),a=b(l=>l.crmTasks.data.tasksList),{id:n}=o,r=l=>{const{name:u,birthday:h,email:g,img:T,location:C,title:I,phoneNumber:w,facebook:E,twitter:m,pinterest:f,linkedIn:v}=l,j={name:u,email:g,img:T},k={location:C,title:I,birthday:vt(h).format("DD/MM/YYYY"),phoneNumber:w,facebook:E,twitter:m,pinterest:f,linkedIn:v};let D=ve(a),P={};D=D.map(M=>(M.id===n&&(M={...M,...j},M.personalInfo={...M.personalInfo,...k},P=M),M)),ta(P)||e(je(P)),e(Ne()),e(kt(D))};return t.jsx(xt,{ref:s,tasks:o,onFormSubmit:r})});gt.displayName="TasksEditContent";const Ha=({onSaveClick:c,onCancel:s})=>t.jsxs("div",{className:"text-right w-full",children:[t.jsx(re,{size:"sm",className:"mr-2",onClick:s,children:"Cancel"}),t.jsx(re,{size:"sm",variant:"solid",onClick:c,children:"Save"})]}),Ya=()=>{const c=Y(),s=b(u=>u.crmTasks.data.drawerOpen);b(u=>u.crmTasks.data.drawerMode),b(u=>{var h,g;return(g=(h=u.crmTasks)==null?void 0:h.data)==null?void 0:g.selectedTask});const[e,o]=p.useState(window.innerWidth/2),a=()=>{c(Ne()),c(me({}))},n=p.useRef(null),r=async()=>{var u;(u=n.current)==null||u.submitForm()};p.useEffect(()=>(window.addEventListener("resize",l),()=>{window.removeEventListener("resize",l)}),[]);const l=()=>{o(window.innerWidth/2)};return t.jsx(zt,{isOpen:s,closable:!1,bodyClass:"p-0",width:e,footer:t.jsx(Ha,{onCancel:a,onSaveClick:r}),onClose:a,onRequestClose:a,children:t.jsx(gt,{ref:n})})},Ga=()=>{const c=Y(),s=b(d=>d.crmTasks.data.displayedTasksList),[e,o]=p.useState([]),[a,n]=p.useState([]),r=b(d=>d.crmTasks.data.loading);b(d=>d.crmTasks.data.filterData);const l=b(d=>d.crmTasks.data.tableData),u=De("tasks","canDelete"),h=De("tasks","canModify"),g=De("tasks","canView"),T=jt(),{getModule:C}=lt();p.useEffect(()=>{(async()=>{var x;try{const y=await C("tasks"),S=await c(Mt(y));n((x=S==null?void 0:S.payload)==null?void 0:x.data)}catch(y){console.error("Error fetching module data:",y)}})()},[]);const{pageIndex:I,pageSize:w,sort:E,query:m,total:f}=b(d=>d.crmTasks.data.tableData),v=p.useCallback(()=>{k(),c(Z())},[c]);p.useEffect(()=>(v(),()=>{window.location.pathname.includes("task")||c(ue({...l,query:""}))}),[v]);const j=p.useMemo(()=>({pageIndex:I,pageSize:w,sort:E,query:m,total:f}),[I,w,E,m,f]),k=async()=>{var d,x;try{const{payload:y}=await c(Ze()),S=(d=y==null?void 0:y.data)==null?void 0:d.find(V=>(V==null?void 0:V.moduleName)==="tasks");if(S){const{payload:V}=await c(et({id:(x=S==null?void 0:S.id)==null?void 0:x.toString()}));o(V==null?void 0:V.data)}}catch(y){console.error("Error fetching module data:",y)}},D=({row:d})=>{const x=Y();Qt();const y=()=>{x(Xe()),x(me(d)),x(Je("Edit"))},S=async()=>{await x(me(d)),x(Re(!0))},V=async()=>{await x(me(d));const U=`/app/crm/task-details/${d.id}`;T(U)},$=async U=>{var i,L,A;const W={completionStatus:U},N=await x(je({taskId:d==null?void 0:d.id,data:W})),R=(i=N==null?void 0:N.payload)!=null&&i.success?{title:"Successfully Updated",type:"success",message:(L=N==null?void 0:N.payload)==null?void 0:L.message}:{title:"Something Went Wrong !!!",type:"danger",message:(A=N==null?void 0:N.error)==null?void 0:A.message};oe.push(t.jsx(le,{title:R.title,type:R==null?void 0:R.type,duration:2500,children:R.message}),{placement:"top-end"}),await x(Z())},O=async()=>{if(d!=null&&d.type)switch(await x(me(d)),d==null?void 0:d.type){case"followup":x(Ae(!0));break;case"quotation":x(Fe(!0));break;default:$("completed");break}else $("completed")},G=async(U,W)=>{var A,J,_;const N=await x(wt({taskId:U==null?void 0:U.id,updatedData:{completionStatus:W==null?void 0:W.id}}));let R="",i="",L="danger";(A=N==null?void 0:N.payload)!=null&&A.success?(R="Successfully Added",i=(J=N==null?void 0:N.payload)==null?void 0:J.message,L="success"):(R="Something went wrong !!!",i=(_=N==null?void 0:N.error)==null?void 0:_.message),oe.push(t.jsx(le,{title:R,type:L,duration:2500,children:i}),{placement:"top-end"}),await x(Z())};return t.jsxs("div",{className:"flex text-base items-center",children:[h&&a&&t.jsx(la,{statusList:a,module:"tasks",row:d,orgStatus:d==null?void 0:d.taskStatus,handleStatusChange:G}),h&&t.jsx("button",{disabled:(d==null?void 0:d.completionStatus)==="completed",className:`cursor-pointer circle items-center ${(d==null?void 0:d.completionStatus)==="completed"?"!cursor-not-allowed":"cursor-pointer hover:text-indigo-500"}`,onClick:y,children:t.jsx(Ft,{})}),u&&t.jsx("span",{className:"cursor-pointer hover:text-red-500 circle  mx-1 items-center",onClick:S,children:t.jsx(Rt,{})}),g&&t.jsx("span",{className:"cursor-pointer  hover:text-green-500 circle items-center text-lg",onClick:V,children:t.jsx(Jt,{})}),h&&t.jsx(we,{title:"Move To In Progress",children:t.jsx("button",{disabled:(d==null?void 0:d.completionStatus)!=="pending",className:`cursor-pointer mx-1 circle items-center ${(d==null?void 0:d.completionStatus)!=="pending"?"!cursor-not-allowed":"cursor-pointer hover:text-amber-500"}`,onClick:()=>$("inProgress"),children:t.jsx(ea,{})})},d.id+"inprogress"),h&&t.jsx(we,{title:"Move To Complete",children:t.jsx("button",{disabled:(d==null?void 0:d.completionStatus)==="completed",className:`cursor-pointer circle items-center ${(d==null?void 0:d.completionStatus)==="completed"?"!cursor-not-allowed":"cursor-pointer hover:text-emerald-500"}`,onClick:O,children:t.jsx(Zt,{})})},d.id+"complete")]})},P=p.useMemo(()=>{const d=[{header:"Action",id:"action",cell:x=>t.jsx(D,{row:x.row.original})},{header:"Title",accessorKey:"title",cell:x=>{const y=x.row.original.title;return t.jsx(we,{title:y,children:t.jsx(Ie,{text:y,maxLength:20})},y)}},{header:"Due Date",accessorKey:"dueDate",cell:x=>{var y;return Xt((y=x.row.original)==null?void 0:y.dueDate).format("DD MMMM YYYY")}},{header:"priority",accessorKey:"priority",cell:x=>{const y=x.row.original.priority;return t.jsx(Bt,{status:y})}},{header:"module",accessorKey:"module",cell:x=>{var S;const y=(S=x.row.original)==null?void 0:S.module;return y?t.jsx(Ie,{text:y,maxLength:20}):"-"}},{header:"type",accessorKey:"type",cell:x=>{var S;const y=(S=x.row.original)==null?void 0:S.type;return y?t.jsx(Ie,{text:y,maxLength:20}):"-"}},{header:"Assigned to",accessorKey:"assignedTo",cell:x=>{const{firstName:y,lastName:S}=x.row.original.assignedToData||{};return y&&S?`${y} ${S}`:"-"}},{header:"Connected lead",accessorKey:"connectedLead",cell:x=>{var S;const y=x.row.original||{};return y!=null&&y.leadModel?`${(S=y==null?void 0:y.leadModel)==null?void 0:S.title}`:"-"}},{header:"Status",accessorKey:"status",cell:x=>{var V,$,O;const y=x.row.original,S={backgroundColor:`${((V=y==null?void 0:y.taskStatus)==null?void 0:V.colorCode)||"red"}10`};return t.jsx(t.Fragment,{children:t.jsx(Yt,{style:S,className:"border-0 rounded",children:t.jsx("p",{style:{color:(($=y==null?void 0:y.taskStatus)==null?void 0:$.colorCode)||"red"},children:(O=y==null?void 0:y.taskStatus)==null?void 0:O.statusName})})})}}];return e.map((x,y)=>{const S={header:x.categoryName,id:x.id,accessorKey:"tagCategory.categoryName",cell:V=>{var O;const $=(O=V.row.original.tags)==null?void 0:O.filter(G=>(G==null?void 0:G.tagCategoryId)===x.id);return $&&$.length?t.jsx(Kt,{tags:$}):"-"}};d.splice(y+5,0,S)}),d},[h,u,e]),M=d=>{const x=ve(j);x.pageIndex=d,c(ue(x))},fe=d=>{const x=ve(j);x.pageSize=Number(d),x.pageIndex=1,c(ue(x))},te=d=>{const x=ve(j);x.sort=d,c(ue(x))};return t.jsxs("div",{children:[t.jsx(Ot,{columns:P,data:s,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},loading:r,pagingData:{total:j.total,pageIndex:j.pageIndex,pageSize:j.pageSize},onPaginationChange:M,onSelectChange:fe,onSort:te}),t.jsx(Ya,{}),t.jsx(ut,{}),t.jsx(dt,{}),t.jsx(ma,{})]})},Ve=c=>{const{icon:s,avatarClass:e,label:o,value:a,growthRate:n,loading:r}=c,l=55;return t.jsx(Ut,{bordered:!0,children:t.jsx(Tt,{loading:r,customLoader:t.jsx(ca,{avatarProps:{className:"rounded",width:l,height:l}}),children:t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsx(_t,{className:e,size:l,icon:s}),t.jsxs("div",{children:[t.jsx("span",{children:o}),t.jsx("h3",{children:t.jsx(da,{thousandSeparator:!0,displayType:"text",value:a})})]})]})})})})},Ba=()=>{const c=Y(),s=b(o=>o.crmTasks.data.statisticData),e=b(o=>o.crmTasks.data.statisticLoading);return p.useEffect(()=>{c(Te())},[]),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 mb-6",children:[t.jsx(Ve,{icon:t.jsx(Lt,{}),avatarClass:"!bg-indigo-600",label:"Total Tasks",value:s==null?void 0:s.totalTasks,loading:e}),t.jsx(Ve,{icon:t.jsx(Pt,{}),avatarClass:"!bg-blue-500",label:"Completed Tasks",value:s==null?void 0:s.completedTasks,loading:e}),t.jsx(Ve,{icon:t.jsx($t,{}),avatarClass:"!bg-emerald-500",label:"This Week's New Tasks",value:s==null?void 0:s.newTasks,loading:e})]})};St("crmTasks",It);const Ka=()=>t.jsxs(t.Fragment,{children:[t.jsx(Ba,{}),t.jsxs(bt,{bodyClass:"h-full",children:[t.jsx(ua,{}),t.jsx(Ga,{})]})]}),Gs=Ka;export{Gs as default};
