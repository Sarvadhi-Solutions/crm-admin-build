import{r as N,al as M,j as e,v as D}from"./index-e9e80fad.js";import{I as d}from"./Input-d4f6dd9d.js";import{B as v}from"./Button-227d4871.js";import{C as R}from"./index-7e05bd38.js";import{F as I,a as l}from"./FormItem-4bb500cc.js";import{A as P}from"./Alert-4b9289a7.js";import{P as V}from"./PasswordInput-3bec205f.js";import{A as S}from"./ActionLink-c385399f.js";import{u as $}from"./useTimeOutMessage-22fa82d6.js";import{F as E,a as A,b as o}from"./formik.esm-41cf3f17.js";import{c as k,a as j,d as F,f as L}from"./index.esm-0ceb40eb.js";import{t as w,N as O}from"./toast-87b47471.js";import"./index-fdab81dd.js";import"./Badge-c25ebbc3.js";import"./RangeCalendar-8629c316.js";import"./Card-14c7d5e0.js";import"./index-034f67b7.js";import{D as T}from"./Dialog-78dc0140.js";import"./Drawer-6d31deda.js";import"./index-713c10b4.js";import"./toString-d452c1eb.js";import"./index-5342abc4.js";import"./index-e4774632.js";import"./index-ffd743d2.js";import"./Pagination-1965e489.js";import"./Progress-d4986dc8.js";import"./index-2b35542d.js";import"./ScrollBar-21d87604.js";import"./index-ef47c85f.js";import"./Select-435e7909.js";import"./Skeleton-635ffbd7.js";import"./index-c9660479.js";import"./Switcher-c852a089.js";import"./index-a7d59cb4.js";import"./index-7f78caa8.js";import"./Tag-b2597221.js";import"./index-9428398a.js";import"./index-ae776672.js";import"./Tooltip-0ed58b52.js";import{U as B}from"./Upload-15d917f3.js";import{c as Z,A as W}from"./index.esm-5a58505e.js";import{a as G}from"./index.esm-778bb6ce.js";import{a as H}from"./index.esm-34a7f8fe.js";import{N as Y}from"./index.esm-0e189e80.js";import{b as _}from"./index.esm-fc2e78fd.js";import{T as J}from"./index.esm-12417467.js";import"./Views-6a6f19fc.js";import"./chart.constant-b273fb4d.js";import"./GrowShrinkTag-c96f06fc.js";import"./DataTable-e88b1948.js";import{D as K}from"./DoubleSidedImage-8ea80133.js";import"./react-tooltip.min-236182d9.js";import"./RichTextEditor-a6622f10.js";import"./SegmentItemOption-c74527ef.js";import{S as Q}from"./StickyFooter-53591c8b.js";import"./SvgIcon-c423a0fc.js";import{a as X}from"./SuperAdminServices-d87e5034.js";const ee=i=>{const{label:m,name:c,children:p,touched:h,errors:x}=i,u=(s,a,t)=>{s.setFieldValue(a.name,URL.createObjectURL(t[0]))};return e.jsx(l,{label:m,invalid:x[c]&&h[c],errorMessage:x[c],children:e.jsx(o,{name:c,children:({field:s,form:a})=>e.jsx(B,{draggable:!0,className:"cursor-pointer h-[300px]",showList:!1,uploadLimit:1,onChange:t=>u(a,s,t),onFileRemove:t=>u(a,s,t),children:s.value?e.jsx("img",{className:"p-3 max-h-[300px]",src:s.value,alt:""}):e.jsxs("div",{className:"text-center",children:[p,e.jsxs("p",{className:"font-semibold",children:[e.jsxs("span",{className:"text-gray-800 dark:text-white",children:["Drop your image here, or"," "]}),e.jsx("span",{className:"text-blue-500",children:"browse"})]}),e.jsx("p",{className:"mt-1 opacity-60 dark:text-white",children:"Support: jpeg, png"})]})})})})},ae=k().shape({organizationName:j().required("Organization Name Required"),industry:j().required("Industry Required"),contact:F().typeError("Contact must be a number").required("Contact is required").test("is-number","Contact must be a number",i=>!isNaN(i)).test("is-ten-digits"," Contact must be exactly 10 digits",i=>{if(i){const m=Number(i);return/^\d{10}$/.test(m.toString())}return!0}).test("is-not-more-than-ten-digits","Contact must not exceed 10 digits",i=>i?Number(i).toString().length<=10:!0),email:j().matches(/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/i,"Invalid email").required("Email is required"),numberOfEmployees:F().typeError("Must be a number").positive("Must be a non-negative number")}),U=N.forwardRef((i,m)=>{const c=M(),{closeDialog:p}=i,[h,x]=N.useState(!1),u=async s=>{var t,f,b;x(!0);const a=await X(s);((t=a==null?void 0:a.data)==null?void 0:t.status)!=="failed"?(w.push(e.jsx(O,{title:"Successfuly added",type:"success",duration:2500,children:(f=a==null?void 0:a.data)==null?void 0:f.message}),{placement:"top-end"}),c("/welcome")):w.push(e.jsx(O,{title:"Something went wrong!!!",type:"danger",duration:2500,children:(b=a==null?void 0:a.data)==null?void 0:b.message}),{placement:"top-end"}),x(!1),p()};return e.jsx(E,{innerRef:m,initialValues:{organizationName:"",industry:"",contact:null,website:"",numberOfEmployees:null,notes:"",email:""},validationSchema:ae,onSubmit:async(s,{setSubmitting:a})=>{await u(s),a(!1)},children:({touched:s,errors:a,values:t,setFieldValue:f})=>e.jsxs(A,{children:[e.jsx(I,{children:e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4 ",children:e.jsxs("div",{className:"lg:col-span-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(ee,{name:"passportCover",label:"Passport Cover",children:e.jsx(K,{className:"mx-auto mb-3",src:"/img/thumbs/passport.png",darkModeSrc:"/img/thumbs/passport-dark.png",alt:""})}),e.jsx("div",{className:"col-span-1",children:e.jsx(l,{label:"Organization Name*",invalid:a.organizationName&&s.organizationName,errorMessage:a.organizationName,children:e.jsx(o,{type:"text",autoComplete:"off",name:"organizationName",placeholder:"Organization Name",component:d,prefix:e.jsx(H,{className:"text-xl"})})})}),e.jsx("div",{className:"col-span-1",children:e.jsx(l,{label:"Industry*",invalid:a.industry&&s.industry,errorMessage:a.industry,children:e.jsx(o,{type:"text",autoComplete:"off",name:"industry",value:t.industry,placeholder:"Organization Industry",component:d,prefix:e.jsx(G,{className:"text-xl"})})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(l,{label:"Contact*",invalid:a.contact&&s.contact,errorMessage:a.contact,children:e.jsx(o,{type:"number",autoComplete:"off",name:"contact",placeholder:"Contact",component:d,prefix:e.jsx(J,{className:"text-xl"})})})}),e.jsx("div",{className:"col-span-1",children:e.jsx(l,{label:"Email*",invalid:a.email&&s.email,errorMessage:a.email,children:e.jsx(o,{type:"text",autoComplete:"off",name:"email",placeholder:"Email",component:d,prefix:e.jsx(Y,{className:"text-xl"})})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(l,{label:"Website",invalid:a.website&&s.website,errorMessage:a.website,children:e.jsx(o,{type:"text",autoComplete:"off",name:"website",placeholder:"Website",component:d,prefix:e.jsx(_,{className:"text-xl"})})})}),e.jsx("div",{className:"col-span-1",children:e.jsx(l,{label:"Number Of Employees",invalid:a.numberOfEmployees&&s.numberOfEmployees,errorMessage:a.numberOfEmployees,children:e.jsx(o,{type:"number",autoComplete:"off",name:"numberOfEmployees",placeholder:"Number Of Employees",component:d,prefix:e.jsx(Z,{className:"text-xl"})})})})]})]})})}),e.jsx(Q,{className:"flex items-center justify-end py-2",stickyClass:"border-t bg-white dark:bg-gray-800 border-gray-200 dark:border-gray-700",children:e.jsxs("div",{className:"md:flex items-center",children:[e.jsx(v,{size:"sm",className:"ltr:mr-3 rtl:ml-3",type:"button",onClick:p,children:"Cancel"}),e.jsx(v,{size:"sm",type:"submit",variant:"solid",icon:e.jsx(W,{}),loading:h,children:"Save"})]})})]})})});U.displayName="OrganizationForm";const se=k().shape({email:j().required("Please enter your user name"),password:j().required("Please enter your password"),rememberMe:L()}),na=i=>{const{disableSubmit:m=!1,className:c,forgotPasswordUrl:p="/forgot-password",registerAdminUrl:h="/onboard-user",signUpUrl:x="/sign-up"}=i,u=M(),[s,a]=$(),[t,f]=N.useState(!1),{signIn:b}=D(),q=async(g,r)=>{const{email:y,password:z}=g;r(!0);const n=await b({email:y,password:z});n!=null&&n.isOrganizationActive&&u("app/common/organization"),(n==null?void 0:n.status)==="failed"&&w.push(e.jsx(O,{title:"Sign in failed",type:"danger",duration:2500,children:n==null?void 0:n.message}),{placement:"top-end"}),r(!1)},C=()=>{f(!1)};return e.jsxs("div",{className:c,children:[s&&e.jsx(P,{showIcon:!0,className:"mb-4",type:"danger",children:e.jsx(e.Fragment,{children:s})}),e.jsx(E,{initialValues:{email:"",password:"",rememberMe:!0},validationSchema:se,onSubmit:(g,{setSubmitting:r})=>{m?r(!1):q(g,r)},children:({touched:g,errors:r,isSubmitting:y,setFieldValue:z})=>e.jsx(A,{children:e.jsxs(I,{children:[e.jsx(l,{label:"User Name",invalid:r.email&&g.email,errorMessage:r.email,children:e.jsx(o,{type:"text",autoComplete:"off",name:"email",placeholder:"User Name",component:d})}),e.jsx(l,{label:"Password",invalid:r.password&&g.password,errorMessage:r.password,children:e.jsx(o,{autoComplete:"off",name:"password",placeholder:"Password",component:V})}),e.jsxs("div",{className:"flex justify-between mb-6",children:[e.jsx(o,{className:"mb-0",name:"rememberMe",component:R,children:"Remember Me"}),e.jsx(S,{to:p,children:"Forgot Password?"})]}),e.jsx(v,{block:!0,loading:y,variant:"solid",type:"submit",children:y?"Signing in...":"Sign In"})]})})}),e.jsxs("div",{className:"mt-4 text-center",children:[e.jsxs("span",{children:["Onboard your organization"," "]}),e.jsx(S,{to:h,children:e.jsx("span",{className:"text-indigo-700",children:"Onboarding..."})})]}),e.jsxs(T,{isOpen:t,onClose:C,children:[e.jsx("h5",{className:"mb-4",children:"Register Your Organization"}),e.jsx(U,{closeDialog:C})]})]})};export{na as S};
