import{a as j,r as x,j as e,ai as ee,ar as te}from"./index-6767ac81.js";import{A as ae}from"./AdaptableCard-1cecc9da.js";import{D as oe}from"./DataTable-7c33a6e6.js";import{u as h,f as se,a as re,e as ne,g as O,s as E,c as ie,b as H,d as F,h as K,i as le,j as $,k as ce,r as me}from"./index-767be9bf.js";import{u as V}from"./useThemeClass-a62e85dc.js";import{B as A}from"./Button-edcd26d9.js";import{D as de}from"./Drawer-95c21b15.js";import{T as W}from"./index-149a53e8.js";import{u as pe,c as d,d as p,F as xe,a as ue,b as he}from"./formik.esm-35003a33.js";import{c as ge,a as y,b as Ce}from"./index.esm-a1939a1a.js";import{I as u}from"./Input-736c9e0d.js";import{A as _}from"./index-688b9e70.js";import{U as fe}from"./Upload-1c01a3b3.js";import{I as ye,a6 as je,aa as be,ab as P,z as we,B as Ne,d as ve,a7 as De,r as Se}from"./index.esm-107f547f.js";import{A as ke}from"./index.esm-a61e2fe0.js";import{a as Te,T as Ie,b as I}from"./index.esm-da94fd5f.js";import{D as Fe,A as Oe,t as Ae,j as Le}from"./AdditionalTag-8d9009b8.js";/* empty css              */import{B as Re,a as qe,b as Me,c as Ee}from"./index.esm-52ddd804.js";import{c as S}from"./cloneDeep-028f7085.js";import{d as Be}from"./debounce-7fa991f6.js";import{S as Pe,c as Ue}from"./Select-3d321c37.js";import{B as G}from"./Badge-1f68c9c2.js";import{C as ze}from"./Card-da872ceb.js";import{M as He}from"./MediaSkeleton-4528ed7e.js";import{N as Ke}from"./react-number-format.es-3a1aae10.js";import"./index-d5eb49a4.js";import"./index.esm-ad20eb15.js";import"./Pagination-3af44538.js";import"./index-5c02b9f9.js";import"./_Uint8Array-81109713.js";import"./_MapCache-5db605d8.js";import"./Views-e5205a91.js";import"./_baseIsEqual-98c979d7.js";import"./get-582c28e3.js";import"./toString-5f976032.js";import"./TableRowSkeleton-6125f39f.js";import"./Skeleton-f6501194.js";import"./index-43da21b1.js";import"./CrmService-e70a4be4.js";import"./context-cdfa92ed.js";import"./index-1bb56c96.js";import"./CloseButton-5ef937e0.js";import"./useControllableState-dba48cec.js";import"./index-fb02f18d.js";import"./isNil-1a1387e3.js";import"./useMergeRef-788c4cb0.js";import"./Tooltip-777f9f9c.js";import"./usePopper-ba5004dc.js";import"./index.esm-3da06225.js";import"./toast-33e99923.js";import"./useTimeout-395cc71e.js";import"./StatusIcon-33312305.js";import"./chainedFunction-070f832c.js";import"./Alert-c9b22c70.js";import"./Calendar-defcfa74.js";import"./index-6bf19af2.js";import"./useRootClose-6563c421.js";import"./RangeCalendar-2da4f4e1.js";import"./TimeInput-030e16c6.js";import"./useUniqueId-1387b982.js";import"./useDidUpdate-c5cefb65.js";import"./Dialog-b04dbbb3.js";import"./index-787c9736.js";import"./useUncertainRef-e1544d29.js";import"./index-9fee79d2.js";import"./index-5e02ae30.js";import"./index-375da5f6.js";import"./Progress-b13c43d8.js";import"./index-18c6d586.js";import"./ScrollBar-e8750282.js";import"./index-bf30d0ca.js";import"./index-8c6f1de1.js";import"./mapCloneElement-3589bfd8.js";import"./Switcher-becc3d78.js";import"./Tag-28e3c136.js";import"./index-d9614e75.js";import"./index-70261eaf.js";import"./_getPrototype-48c0ebaa.js";import"./toConsumableArray-af8bf1ee.js";import"./objectWithoutPropertiesLoose-df62547b.js";import"./floating-ui.dom-bef9cea3.js";const $e=o=>{const{touched:a,errors:t}=o,r=j(),[i,l]=x.useState(!1),[n,c]=x.useState(!1),[f,w]=x.useState([]),[N,L]=x.useState([]),R=()=>{l(!i),c(!1)};x.useEffect(()=>{(async()=>{var C,v;try{const{payload:b}=await r(se()),T=(C=b==null?void 0:b.data)==null?void 0:C.find(D=>(D==null?void 0:D.moduleName)==="company");if(T){const{payload:D}=await r(re({id:(v=T==null?void 0:T.id)==null?void 0:v.toString()})),Y=Ae(D.data),Z=Le(D.data);L(Z),w(Y)}}catch(b){console.error("Error fetching module data:",b)}})()},[r]);const k=h(m=>m.crmCompany.data.selectedCompany),[B,s]=x.useState(k?k.tags||[]:[]),g=pe(),q=m=>{s(m);const C=[m.value];g.setFieldValue("tagId",C)};return e.jsxs(e.Fragment,{children:[e.jsx(d,{invalid:t.upload&&a.upload,errorMessage:t.upload,children:e.jsx(p,{name:"img",children:({field:m,form:C})=>{const v=m.value?{src:m.value}:{};return e.jsx("div",{className:"flex justify-center",children:e.jsx(fe,{className:"cursor-pointer",showList:!1,uploadLimit:1,onChange:b=>C.setFieldValue(m.name,URL.createObjectURL(b[0])),onFileRemove:b=>C.setFieldValue(m.name,URL.createObjectURL(b[0])),children:e.jsx(_,{className:"border-2 border-white dark:border-gray-800 shadow-lg",size:100,shape:"circle",icon:e.jsx(ye,{}),...v})})})}})}),e.jsx(d,{label:"Company Name",invalid:t.companyName&&a.companyName,errorMessage:t.companyName,children:e.jsx(p,{type:"text",autoComplete:"off",name:"companyName",placeholder:"Company Name",component:u,prefix:e.jsx(je,{className:"text-xl"})})}),e.jsx(d,{label:"Contact Number",invalid:t.phone&&a.phone,errorMessage:t.phone,children:e.jsx(p,{type:"text",autoComplete:"off",name:"phone",placeholder:"phone",component:u,prefix:e.jsx(be,{className:"text-xl"})})}),e.jsx(d,{label:"Website",invalid:t.website&&a.website,errorMessage:t.website,children:e.jsx(p,{type:"text",autoComplete:"off",name:"website",placeholder:"Website",component:u,prefix:e.jsx(P,{className:"text-xl"})})}),e.jsx(d,{label:"Company Owner",invalid:t.companyOwner&&a.companyOwner,errorMessage:t.companyOwner,children:e.jsx(p,{type:"text",autoComplete:"off",name:"companyOwner",placeholder:"Company Owner",component:u,prefix:e.jsx(P,{className:"text-xl"})})}),e.jsxs("div",{style:{position:"relative"},children:[e.jsx(d,{label:"TagId",children:e.jsxs("div",{style:{position:"relative"},children:[e.jsx(p,{name:"tagId",component:Fe,options:f,placeholder:"Select a Tag",onChange:q}),e.jsx(Te,{style:{position:"absolute",right:"10px",top:"10px",border:"none",background:"#FFF"},className:"text-xl",onClick:()=>{R(),c(!0)}})]})}),e.jsx(Oe,{isOpen:i,categoryList:N,onOpenChange:m=>l(m)})]}),e.jsx(d,{label:"Description",invalid:t.description&&a.description,errorMessage:t.description,children:e.jsx(p,{type:"text",autoComplete:"off",name:"description",placeholder:"Description",component:u,prefix:e.jsx(Ie,{className:"text-xl"})})}),e.jsx(d,{label:"street",invalid:t.street&&a.street,errorMessage:t.street,children:e.jsx(p,{type:"text",autoComplete:"off",name:"street",placeholder:"Street",component:u,prefix:e.jsx(ke,{className:"text-xl"})})}),e.jsx(d,{label:"City",invalid:t.city&&a.city,errorMessage:t.city,children:e.jsx(p,{type:"text",autoComplete:"off",name:"city",placeholder:"City",component:u,prefix:e.jsx(I,{className:"text-xl"})})}),e.jsx(d,{label:"State",invalid:t.state&&a.state,errorMessage:t.state,children:e.jsx(p,{type:"text",autoComplete:"off",name:"state",placeholder:"State",component:u,prefix:e.jsx(I,{className:"text-xl"})})}),e.jsx(d,{label:"Country",invalid:t.country&&a.country,errorMessage:t.country,children:e.jsx(p,{type:"text",autoComplete:"off",name:"country",placeholder:"Country",component:u,prefix:e.jsx(I,{className:"text-xl"})})}),e.jsx(d,{label:"Pin Code",invalid:t.pinCode&&a.pinCode,errorMessage:t.pinCode,children:e.jsx(p,{type:"text",autoComplete:"off",name:"pinCode",placeholder:"Pin Code",component:u,prefix:e.jsx(I,{className:"text-xl"})})})]})},Ve=o=>{const{touched:a,errors:t}=o;return e.jsxs(e.Fragment,{children:[e.jsx(d,{label:"Facebook link",invalid:t.facebook&&a.facebook,errorMessage:t.facebook,children:e.jsx(p,{type:"text",autoComplete:"off",name:"facebook",placeholder:"URL",component:u,prefix:e.jsx(Re,{className:"text-xl text-[#1773ea]"})})}),e.jsx(d,{label:"Twitter link",invalid:t.twitter&&a.twitter,errorMessage:t.twitter,children:e.jsx(p,{type:"text",autoComplete:"off",name:"twitter",placeholder:"URL",component:u,prefix:e.jsx(qe,{className:"text-xl text-[#1da1f3]"})})}),e.jsx(d,{label:"Pinterest link",invalid:t.pinterest&&a.pinterest,errorMessage:t.pinterest,children:e.jsx(p,{type:"text",autoComplete:"off",name:"pinterest",placeholder:"URL",component:u,prefix:e.jsx(Me,{className:"text-xl text-[#df0018]"})})}),e.jsx(d,{label:"LinkedIn link",invalid:t.linkedIn&&a.linkedIn,errorMessage:t.linkedIn,children:e.jsx(p,{type:"text",autoComplete:"off",name:"linkedIn",placeholder:"URL",component:u,prefix:e.jsx(Ee,{className:"text-xl text-[#0077b5]"})})})]})},We=ge().shape({companyName:y().required("Name is required"),phone:y().typeError("Company must be a number").required("Company is required"),website:y().required("First Name is required"),companyOwner:y().required("Last Name is required"),description:y().required("Description Is Required"),street:y().required("Street is required"),city:y().required("City is required"),state:y().required("State is required"),country:y().required("Country is required"),pinCode:y().required("Pin Code is required").test("is-number","Pin Code must be a number",o=>/^\d+$/.test(o)).test("is-six-digits","Pin Code must be exactly 6 digits",o=>o&&o.length===6),tagId:Ce()}),{TabNav:_e,TabList:Ge,TabContent:U}=W,J=x.forwardRef((o,a)=>{var l;const t=h(n=>n.crmCompany.data.selectedCompany),r=!!t.id;console.log(r,"Editing Done");const i=j();return e.jsx(xe,{innerRef:a,initialValues:{companyName:(t==null?void 0:t.companyName)||"",phone:(t==null?void 0:t.phone)||"",website:(t==null?void 0:t.website)||"",companyOwner:(t==null?void 0:t.companyOwner)||"",description:(t==null?void 0:t.description)||"",street:(t==null?void 0:t.street)||"",city:(t==null?void 0:t.city)||"",state:(t==null?void 0:t.state)||"",country:(t==null?void 0:t.country)||"",pinCode:(t==null?void 0:t.pinCode)||0,tagId:((l=t==null?void 0:t.tags)==null?void 0:l.map(n=>n.id))||[],colorName:t!=null&&t.tags&&(t==null?void 0:t.tags.length)>0?t==null?void 0:t.tags[0].colorName:""},validationSchema:We,onSubmit:async(n,{setSubmitting:c})=>{const{colorName:f,...w}=n;console.log(f),r===!0?(console.log(n,"Bhai testing kar"),await i(ne({companyId:(t==null?void 0:t.id)||"",updatedData:w})),await i(O()),await i(E())):(console.log(w,"Maat Aa"),await i(ie(w)),await i(O()),await i(E())),console.log("on submit called "),c(!1)},children:({touched:n,errors:c})=>e.jsx(ue,{children:e.jsx(he,{children:e.jsxs(W,{defaultValue:"personalInfo",children:[e.jsx(Ge,{children:e.jsx(_e,{value:"personalInfo",children:"Custometer Detail"})}),e.jsxs("div",{className:"p-6",children:[e.jsx(U,{value:"personalInfo",children:e.jsx($e,{touched:n,errors:c})}),e.jsx(U,{value:"social",children:e.jsx(Ve,{touched:n,errors:c})})]})]})})})})});J.displayName="CompanyForm";const Q=x.forwardRef((o,a)=>{j();const t=h(l=>l.crmCompany.data.selectedCompany),r=h(l=>l.crmCompany.data.companyList);console.log(r,"Here Is The Data");const i=async l=>{try{console.log("Edited Content Change")}catch(n){console.error("Error updating company:",n)}};return e.jsx(J,{ref:a,company:t,onFormSubmit:i})});Q.displayName="CompanyEditContent";const Je=({onSaveClick:o,onCancel:a})=>e.jsxs("div",{className:"text-right w-full",children:[e.jsx(A,{size:"sm",className:"mr-2",onClick:a,children:"Cancel"}),e.jsx(A,{size:"sm",variant:"solid",onClick:o,children:"Save"})]}),Qe=()=>{const o=j(),a=h(l=>l.crmCompany.data.drawerOpen),t=()=>{o(E()),o(H({}))},r=x.useRef(null),i=()=>{var l,n;console.log("formSubmit function called",(l=r.current)==null?void 0:l.values),(n=r.current)==null||n.submitForm()};return e.jsx(de,{isOpen:a,closable:!1,bodyClass:"p-0",footer:e.jsx(Je,{onCancel:t,onSaveClick:i}),onClose:t,onRequestClose:t,children:e.jsx(Q,{ref:r})})},Xe=({row:o})=>{const{textTheme:a}=V(),t=j(),r=()=>{t(K()),t(H(o))};return e.jsx("div",{className:`${a} cursor-pointer select-none font-semibold`,onClick:r,children:"Edit"})},Ye=({row:o})=>{const{textTheme:a}=V(),t=j(),r=()=>{console.log(o,"Bhai Agaya"),t(le(o.id))};return e.jsx("div",{className:`${a} cursor-pointer select-none font-semibold`,onClick:r,children:"Delete"})},Ze=()=>{const o=j(),a=h(s=>s.crmCompany.data.companyList),t=h(s=>s.crmCompany.data.loading),r=h(s=>s.crmCompany.data.filterData),{pageIndex:i,pageSize:l,sort:n,query:c,total:f}=h(s=>s.crmCompany.data.tableData),w=x.useCallback(()=>{o(O())},[o]);x.useEffect(()=>{w()},[w,i,l,n,r]);const N=x.useMemo(()=>({pageIndex:i,pageSize:l,sort:n,query:c,total:f}),[i,l,n,c,f]),L=x.useMemo(()=>[{header:"Company Name",accessorKey:"companyName",cell:s=>s.row.original.companyName,width:200},{header:"Contact Number",accessorKey:"phone",cell:s=>s.row.original.phone,width:200},{header:"Website",accessorKey:"website",cell:s=>s.row.original.website,width:200},{header:"Company Owner",accessorKey:"companyOwner",cell:s=>s.row.original.companyOwner,width:200},{header:"Tag Name",accessorKey:"tagName",width:200,cell:s=>{const q=(s.row.original.tags||[]).map(m=>{const C=m.colorName||"#000000",v={backgroundColor:`rgba(${parseInt(C.slice(1,3),16)}, ${parseInt(C.slice(3,5),16)}, ${parseInt(C.slice(5,7),16)}, 0.2)`,color:C,padding:"4px 8px",borderRadius:"4px",marginRight:"4px",marginBottom:"4px"};return e.jsx("div",{style:v,children:m.tagName},m.id)});return e.jsx("div",{children:q})}},{header:"Description",accessorKey:"description",cell:s=>s.row.original.description,width:200},{header:"Street",accessorKey:"street",cell:s=>s.row.original.street,width:200},{header:"City",accessorKey:"city",cell:s=>s.row.original.city,width:200},{header:"State",accessorKey:"state",cell:s=>s.row.original.state,width:200},{header:"Country",accessorKey:"country",cell:s=>s.row.original.country,width:200},{header:"Pincode",accessorKey:"pinCode",cell:s=>s.row.original.pinCode,width:200},{header:"Edit",id:"action",cell:s=>e.jsx(Xe,{row:s.row.original})},{header:"Delete",id:"action",cell:s=>e.jsx(Ye,{row:s.row.original})}],[]),R=s=>{const g=S(N);g.pageIndex=s,o(F(g))},k=s=>{const g=S(N);g.pageSize=Number(s),g.pageIndex=1,o(F(g))},B=s=>{const g=S(N);g.sort=s,o(F(g))};return e.jsxs("div",{children:[e.jsx(oe,{columns:L,data:a,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},loading:t,pagingData:{total:N.total,pageIndex:N.pageIndex,pageSize:N.pageSize},onPaginationChange:R,onSelectChange:k,onSort:B}),e.jsx(Qe,{})]})},X=x.forwardRef((o,a)=>{const{onInputChange:t}=o,r=Be(i,500);function i(n){t==null||t(n)}const l=n=>{r(n.target.value)};return e.jsx(u,{ref:a,className:"max-w-md md:w-52 mb-4",size:"sm",placeholder:"Search",prefix:e.jsx(we,{className:"text-lg"}),onChange:l})});X.displayName="CompanyTableSearch";const{Control:et}=Ue,z=[{value:"",label:"All",color:"bg-gray-500"},{value:"active",label:"Active",color:"bg-emerald-500"},{value:"blocked",label:"Blocked",color:"bg-red-500"}],tt=({innerProps:o,label:a,data:t,isSelected:r})=>e.jsxs("div",{className:`flex items-center justify-between p-2 cursor-pointer ${r?"bg-gray-100 dark:bg-gray-500":"hover:bg-gray-50 dark:hover:bg-gray-600"}`,...o,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{innerClass:t.color}),e.jsx("span",{children:a})]}),r&&e.jsx(Ne,{className:"text-emerald-500 text-xl"})]}),at=({children:o,...a})=>{const t=a.getValue()[0];return e.jsxs(et,{...a,children:[t&&e.jsx(G,{className:"ltr:ml-4 rtl:mr-4",innerClass:t.color}),o]})},ot=()=>{const o=j(),{status:a}=h(r=>r.crmCompany.data.filterData),t=r=>{o($({status:r==null?void 0:r.value}))};return e.jsx(Pe,{options:z,size:"sm",className:"mb-4 min-w-[130px]",components:{Option:tt,Control:at},value:z.filter(r=>r.value===a),onChange:t})},st=()=>{const o=j(),a=x.useRef(null),t=h(c=>c.crmCompany.data.tableData),r=c=>{const f=S(t);f.query=c,f.pageIndex=1,typeof c=="string"&&c.length>1&&i(f),typeof c=="string"&&c.length===0&&i(f)},i=c=>{o(F(c)),o(O())},l=()=>{const c=S(t);c.query="",a.current&&(a.current.value=""),o($({status:""})),i(c)},n=()=>{o(K())};return e.jsxs("div",{className:"md:flex items-center justify-between",children:[e.jsxs("div",{className:"md:flex items-center gap-4",children:[e.jsx(X,{ref:a,onInputChange:r}),e.jsx(ot,{})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(A,{size:"sm",className:"me-2",onClick:l,children:"Clear All"}),e.jsx(A,{size:"sm",onClick:n,children:"Add New"})]})]})},M=o=>{const{icon:a,avatarClass:t,label:r,value:i,loading:l}=o,n=55;return e.jsx(ze,{bordered:!0,children:e.jsx(ee,{loading:l,customLoader:e.jsx(He,{avatarProps:{className:"rounded",width:n,height:n}}),children:e.jsx("div",{className:"flex justify-between items-center",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(_,{className:t,size:n,icon:a}),e.jsxs("div",{children:[e.jsx("span",{children:r}),e.jsx("h3",{children:e.jsx(Ke,{thousandSeparator:!0,displayType:"text",value:i})})]})]})})})})},rt=()=>{const o=j(),a=h(r=>r.crmCompany.data.statisticData);console.log(a.totalCompany,"Araha Hai Bhai");const t=h(r=>r.crmCompany.data.statisticLoading);return x.useEffect(()=>{o(ce())},[]),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 mb-6",children:[e.jsx(M,{icon:e.jsx(ve,{}),avatarClass:"!bg-indigo-600",label:"Total Company",value:a.totalCompany,growthRate:a==null?void 0:a.totalCompany,loading:t}),e.jsx(M,{icon:e.jsx(De,{}),avatarClass:"!bg-blue-500",label:"Active Company",value:a.activeCompany,growthRate:a.activeCompany,loading:t}),e.jsx(M,{icon:e.jsx(Se,{}),avatarClass:"!bg-emerald-500",label:"New Company",value:a==null?void 0:a.newCompany,growthRate:a==null?void 0:a.newCompany,loading:t})]})};te("crmCompany",me);const nt=()=>e.jsxs(e.Fragment,{children:[e.jsx(rt,{}),e.jsxs(ae,{bodyClass:"h-full",children:[e.jsx(st,{}),e.jsx(Ze,{})]})]}),qa=nt;export{qa as default};
