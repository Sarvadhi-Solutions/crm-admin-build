import{am as i,an as j,ao as D,ap as S,r as b,a as T,j as s}from"./index-a9c93031.js";import{F as L,a as v,b as c}from"./formik.esm-4acf00de.js";import"./Alert-5526c2c4.js";import"./index-7cf9b27e.js";import"./Badge-c9ada007.js";import{B as u}from"./Button-47bf58f7.js";import"./Calendar-163be9bf.js";import"./Card-6b8166bd.js";import"./index-f4f34168.js";import"./index-998e4641.js";import"./Dialog-5ef978d2.js";import"./Drawer-0a33fe5a.js";import"./index-137f6e4f.js";import{a as d}from"./FormItem-493c2060.js";import"./toString-60f65c59.js";import{I as N}from"./Input-b2bc5b3e.js";import"./index-34c577ad.js";import"./index-9de29f90.js";import"./index-4104c7c5.js";import"./toast-53c71514.js";import"./Pagination-acf3b7e4.js";import"./Progress-065bbc0b.js";import"./index-803b614c.js";import"./RangeCalendar-6b212005.js";import"./ScrollBar-ad1c4e83.js";import"./index-34112b0a.js";import{S as F}from"./Select-90b6020d.js";import"./Skeleton-772a6f71.js";import"./index-cfb9e54d.js";import"./Switcher-631d0666.js";import"./index-10dbbba6.js";import"./index-cbfb4a92.js";import"./Tag-624637b7.js";import"./index-2600a77d.js";import"./index-4aad4bac.js";import"./Tooltip-4f11c588.js";import"./Upload-1dc8ae7e.js";import{c as I,d as k}from"./index.esm-6aa89ade.js";import{K as A,L as E,o as z,n as R,M as G,j as M,k as f,l as O}from"./CrmService-dbb90e89.js";const B="crmCustomers",C=i("crmCustomers/data/getCustomerStatistic",async()=>(await A()).data),g=i("crmCustomers/data/getCustomers",async()=>(await E()).data),ke=i("crmCustomers/data/editCustomer",async({customerId:t,updatedData:e})=>{var a,r;try{return(await z(t,e)).data}catch(o){throw new Error((r=(a=o==null?void 0:o.response)==null?void 0:a.data)==null?void 0:r.message)}}),Ae=i("crmCustomers/data/deleteCustomer",async t=>{var e,a;try{return await R(t)}catch(r){throw new Error((a=(e=r==null?void 0:r.response)==null?void 0:e.data)==null?void 0:a.message)}}),Ee=i("crmCustomers/data/createCustomer",async t=>{var e,a;try{return(await G(t)).data}catch(r){throw new Error((a=(e=r==null?void 0:r.response)==null?void 0:e.data)==null?void 0:a.message)}}),ze=i("crmCustomers/data/module",async()=>{const t=await M();return console.log(t.data,"response"),t.data}),Re=i("tag-category",async({id:t})=>{const e=await f(t);return console.log(e.data,"Getting Data"),e.data});i("crmCustomers/data/fetchTag",async({id:t})=>(await f(t)).data);const P=i("crmCustomers/data/createTag",async({masterId:t,colorName:e,tagName:a,tagCategoryId:r})=>(await O({colorName:e,tagName:a,masterId:t,tagCategoryId:r})).data),V={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},$={status:""},q={loading:!1,statisticLoading:!1,customerList:[],displayedCustomersList:[],statisticData:{},tableData:V,filterData:$,drawerOpen:!1,selectedCustomer:{},deleteConfirmation:!1},y=j({name:`${B}/state`,initialState:q,reducers:{setTableData:(t,e)=>{t.tableData=e.payload,t.displayedCustomersList=t.customerList.slice(e.payload.pageSize*(e.payload.pageIndex-1),e.payload.pageSize*e.payload.pageIndex)},setCustomerList:(t,e)=>{t.customerList=e.payload},setFilterData:(t,e)=>{t.filterData=e.payload},setSelectedCustomer:(t,e)=>{t.selectedCustomer=e.payload},setDrawerOpen:t=>{t.drawerOpen=!0},setDrawerClose:t=>{t.drawerOpen=!1},toggleDeleteConfirmation:(t,e)=>{t.deleteConfirmation=e.payload}},extraReducers:t=>{t.addCase(g.fulfilled,(e,a)=>{e.customerList=a.payload.data,e.tableData.total=a.payload.data.length,e.displayedCustomersList=a.payload.data.slice(0,10),e.loading=!1}).addCase(g.pending,e=>{e.loading=!0}).addCase(C.fulfilled,(e,a)=>{e.statisticData=a.payload,e.statisticLoading=!1}).addCase(C.pending,e=>{e.statisticLoading=!0})}}),{setTableData:Ge,setCustomerList:Me,setFilterData:Oe,setSelectedCustomer:Be,setDrawerOpen:Pe,setDrawerClose:Ve,toggleDeleteConfirmation:$e}=y.actions,H=y.reducer,qe=D({data:H}),He=S,K=({onCancel:t,onSave:e})=>s.jsxs("div",{className:"text-right w-full",children:[s.jsx(u,{size:"sm",className:"mr-2",onClick:t,children:"Cancel"}),s.jsx(u,{size:"sm",variant:"solid",type:"button",onClick:e,children:"Save"})]}),Ke=({isOpen:t,onOpenChange:e,categoryList:a,moduleName:r})=>{const o=b.useRef(null),x=T(),h=async()=>{var n,l,m,p;if(r){const w=r.toString();await x(P({masterId:w,tagName:(n=o.current)==null?void 0:n.values.tag,colorName:(l=o.current)==null?void 0:l.values.tagColor,tagCategoryId:(m=o.current)==null?void 0:m.values.category.value})),e(!1),console.log((p=o.current)==null?void 0:p.values)}};return s.jsx("div",{className:`${t?"flex":"hidden"} justify-center items-center top-16 left-0 z-10 bg-white p-4 border border-gray-300 w-full absolute rounded-8`,children:t&&s.jsx(L,{innerRef:o,initialValues:{category:"",tag:"",tagColor:"#808080"},onSubmit:n=>{console.log("values",n," ==== > Here The Value Is Prinitng")},children:({values:n,setFieldValue:l})=>s.jsxs(v,{children:[s.jsx(s.Fragment,{children:s.jsx(d,{label:"Category",children:s.jsx(c,{type:"text",autoComplete:"off",name:"category",placeholder:"Category",options:a,component:F,prefix:s.jsx(I,{className:"text-xl"}),onChange:m=>{l("category",m)}})})}),s.jsxs("div",{className:"flex items-center justify-center",children:[s.jsx(d,{label:"Tag Name",children:s.jsx(c,{type:"text",autoComplete:"off",name:"tag",placeholder:"Additional Tag Name",component:N,prefix:s.jsx(k,{className:"text-xl"})})}),s.jsx(d,{children:s.jsx(c,{type:"color",name:"tagColor",className:"w-8 ml-2 p-2 rounded-full h-8 mt-6"})})]}),s.jsx(K,{onCancel:()=>e(!1),onSave:h})]})})})};export{Ke as A,Be as a,C as b,Ge as c,Ae as d,Pe as e,Oe as f,g,ze as h,Re as i,ke as j,Ee as k,qe as r,Ve as s,$e as t,He as u};
