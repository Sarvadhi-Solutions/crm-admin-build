import{al as L,am as Le,an as Ce,ao as be,a as j,j as a,r as m,ah as we,aq as je}from"./index-3e880d58.js";import{A as De}from"./AdaptableCard-c2187b0f.js";import{D as ve}from"./DataTable-5b7f8f4c.js";import{S as Ie}from"./StatusCapsule-ce950877.js";import{T as Ne}from"./TagsList-79ed58cc.js";import{T as z}from"./TextTruncate-1e259c49.js";import{u as X}from"./checkEditUpdate-712507f0.js";import{u as Se}from"./useThemeClass-ee469ab6.js";import{c as V}from"./cloneDeep-3c6952f1.js";import{d as Te,e as Ae,f as Me,g as Fe,h as Oe,i as Pe,j as Ee,k as ke,l as Re,m as qe,n as ce,o as Be}from"./CrmService-a38b0f72.js";import{t as Y,N as Z}from"./toast-b78f7559.js";import{C as ze}from"./ConfirmDialog-90e160ad.js";import{B as ee}from"./Button-2946c768.js";import{D as $e}from"./Drawer-9836140f.js";import{a as w,F as Ge}from"./FormItem-2c1e6567.js";import{T as ie}from"./index-3c7f8823.js";import{u as He,b as N,F as Ke,a as Ve}from"./formik.esm-b6fc01f9.js";import{c as $,a as _,d as We,e as Ue}from"./index.esm-ef8817a5.js";import{I as W}from"./Input-cc5b259f.js";import{D as _e,t as Qe,c as Je}from"./tagAndCategory-beef627f.js";/* empty css              */import{N as Xe,O as Ye,P as Ze,b as ea,o as aa,Q as ta,C as sa}from"./index.esm-72033000.js";import"./Alert-f6d23cba.js";import{A as oa}from"./index-4d380cc3.js";import"./Badge-dfca28fd.js";import"./RangeCalendar-76b3d14c.js";import{C as ra}from"./Card-229ace64.js";import"./index-f0b859a7.js";import"./index-3e1bfc83.js";import"./Dialog-a9e6c446.js";import"./index-9d9ccba3.js";import"./toString-5649af70.js";import"./index-0199cfe3.js";import"./index-989e0cf5.js";import"./index-78df0a35.js";import"./Pagination-65d73c7a.js";import"./Progress-ae30664a.js";import"./index-e719384e.js";import"./ScrollBar-71fa1417.js";import"./index-ab165616.js";import{S as G}from"./Select-76acedff.js";import"./Skeleton-6f0cf5d7.js";import"./index-6b09464f.js";import"./Switcher-15616a0a.js";import"./index-2e6e3f8b.js";import"./Tag-baf7a322.js";import"./index-2f9ef4f4.js";import"./index-95cf3345.js";import"./Tooltip-e9d0a24c.js";import"./Upload-2e16c5c2.js";import{T as Q,a as na,b as da}from"./index.esm-218c3d6f.js";import{M as ca}from"./index.esm-7d8c0f8e.js";import{B as ia}from"./index.esm-33df2266.js";import{d as la}from"./debounce-104cbb1c.js";import{g as ma}from"./index-fe3cefb0.js";import{s as ua}from"./index-b65db238.js";import{F as pa}from"./FormDesription-1f8ea7a5.js";import{M as ga}from"./MediaSkeleton-9c9e7f25.js";import{N as ya}from"./react-number-format.es-21a90780.js";import"./index-de567301.js";import"./_MapCache-7f2c37e9.js";import"./Views-075eae35.js";import"./_getPrototype-484592c8.js";import"./useTimeout-eadd7d3b.js";import"./CloseButton-4efc1add.js";import"./StatusIcon-ff12f8c4.js";import"./chainedFunction-070f832c.js";import"./index-9c0cabce.js";import"./index-f502ce4c.js";import"./useControllableState-f10b9480.js";import"./isNil-4c059865.js";import"./get-4c4ae8d7.js";import"./useMergeRef-788c4cb0.js";import"./_baseIsEqual-785b16ba.js";import"./useRootClose-0ff11c2b.js";import"./usePopper-5fe449ce.js";import"./TimeInput-6b863084.js";import"./useUniqueId-e46a3a66.js";import"./useDidUpdate-4d89c820.js";import"./useUncertainRef-48982c60.js";import"./slicedToArray-a34215eb.js";import"./objectWithoutProperties-8809bfcf.js";import"./toConsumableArray-4b935cb5.js";import"./floating-ui.dom-bef9cea3.js";import"./mapCloneElement-024d59c7.js";import"./index.esm-9d327cb5.js";import"./index.esm-4e597ee1.js";import"./index-e0301c9f.js";import"./index-39475905.js";const ha="crmLeads",K=L("crmLeads/data/getLeadsStatistic",async()=>(await Te()).data),T=L("crmLeads/data/getLeads",async()=>(await Ae()).data),ae=L("crmContact/data/getContact",async()=>(await Me()).data),fa=L("crmLeads/data/editLeads",async({leadsId:s,updatedData:t})=>{var e,r;try{return(await Fe(s,t)).data}catch(l){throw new Error((r=(e=l==null?void 0:l.response)==null?void 0:e.data)==null?void 0:r.message)}}),xa=L("crmLeads/data/deleteLeads",async s=>{var t,e;try{return await Oe(s)}catch(r){throw new Error((e=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:e.message)}}),La=L("crmLeads/data/createLeads",async s=>{var t,e;try{return(await Pe(s)).data}catch(r){throw new Error((e=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:e.message)}}),re=L("crmLeads/data/getProduct",async s=>{var t,e;try{return(await Ee(s)).data}catch(r){throw new Error((e=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:e.message)}}),ne=L("crmLeads/data/getSubByIdCategory",async s=>{var t,e;try{return(await ke(s)).data}catch(r){throw new Error((e=(t=r==null?void 0:r.response)==null?void 0:t.data)==null?void 0:e.message)}}),le=L("crmLeads/data/getCategory",async()=>{var s,t;try{return(await Re()).data}catch(e){throw new Error((t=(s=e==null?void 0:e.response)==null?void 0:s.data)==null?void 0:t.message)}}),Ca=L("crmLeads/data/module",async()=>(await qe()).data),ba=L("tag-category",async({id:s})=>(await ce(s)).data);L("crmLeads/data/fetchTag",async({id:s})=>(await ce(s)).data);L("crmLeads/data/createTag",async({masterId:s,colorName:t,tagName:e,tagCategoryId:r})=>(await Be({colorName:t,tagName:e,masterId:s,tagCategoryId:r})).data);const wa={total:0,pageIndex:1,pageSize:10,query:"",sort:{order:"",key:""}},ja={status:""},Da={loading:!1,statisticLoading:!1,leadsList:[],categoryList:[],productList:[],subCategoryList:[],displayedLeadsList:[],statisticData:{},tableData:wa,filterData:ja,drawerOpen:!1,selectedLeads:{},contactList:[],deleteConfirmation:!1},me=Le({name:`${ha}/state`,initialState:Da,reducers:{setTableData:(s,t)=>{s.tableData=t.payload;const e=s.leadsList.filter(r=>r.contactData.firstName.toLowerCase().includes(t.payload.query.toLowerCase())||r.contactData.lastName.toLowerCase().includes(t.payload.query.toLowerCase()));s.displayedLeadsList=e.slice(t.payload.pageSize*(t.payload.pageIndex-1),t.payload.pageSize*t.payload.pageIndex)},setLeadsList:(s,t)=>{s.leadsList=t.payload},setFilterData:(s,t)=>{s.filterData=t.payload},setSelectedLeads:(s,t)=>{s.selectedLeads=t.payload},setDrawerOpen:s=>{s.drawerOpen=!0},setDrawerClose:s=>{s.drawerOpen=!1},toggleDeleteConfirmation:(s,t)=>{s.deleteConfirmation=t.payload}},extraReducers:s=>{s.addCase(T.fulfilled,(t,e)=>{var r;t.leadsList=e.payload.data,t.tableData.total=(r=e.payload.data)==null?void 0:r.length,t.displayedLeadsList=e.payload.data.slice(0,10),t.loading=!1}).addCase(T.pending,t=>{t.loading=!0}).addCase(K.fulfilled,(t,e)=>{t.statisticData=e.payload,t.statisticLoading=!1}).addCase(K.pending,t=>{t.statisticLoading=!0}).addCase(ae.fulfilled,(t,e)=>{t.contactList=e.payload.data,t.loading=!1}).addCase(ae.pending,t=>{t.loading=!0}).addCase(ne.fulfilled,(t,e)=>{t.subCategoryList=e==null?void 0:e.payload.data}).addCase(le.fulfilled,(t,e)=>{t.categoryList=e==null?void 0:e.payload.data}).addCase(re.fulfilled,(t,e)=>{t.productList=e==null?void 0:e.payload.data})}}),{setTableData:U,setLeadsList:Cs,setFilterData:bs,setSelectedLeads:te,setDrawerOpen:ue,setDrawerClose:pe,toggleDeleteConfirmation:se}=me.actions,va=me.reducer,Ia=Ce({data:va}),g=be,Na=()=>{const s=j(),t=g(c=>c.crmLeads.data.deleteConfirmation),e=g(c=>c.crmLeads.data.selectedLeads),r=()=>{s(se(!1))},l=async()=>{var u,i,f;s(se(!1));const c=await s(xa(e.id));await s(T()),(u=c==null?void 0:c.payload)!=null&&u.success?Y.push(a.jsx(Z,{title:"Successfuly Deleted",type:"success",duration:2500,children:(i=c==null?void 0:c.payload)==null?void 0:i.message}),{placement:"top-end"}):Y.push(a.jsx(Z,{title:"Something Went Wrong !!!",type:"danger",duration:2500,children:(f=c==null?void 0:c.error)==null?void 0:f.message}),{placement:"top-end"}),await s(T()),await s(K())};return a.jsx(ze,{isOpen:t,type:"danger",title:"Delete Lead",confirmButtonColor:"red-600",onClose:r,onRequestClose:r,onCancel:r,onConfirm:l,children:a.jsx("p",{children:"Are you sure you want to delete this Lead? All record related to this lead will be deleted as well. This action cannot be undone."})})},oe=[{label:"Open",value:"open"},{label:"Cancelled",value:"cancelled"},{label:"Converted",value:"converted"}],H=[],Sa=s=>{const{touched:t,errors:e,setFieldValue:r,values:l}=s,c=j(),u=He(),[i,f]=m.useState(!1),[C,D]=m.useState(!1),[P,E]=m.useState([]),k=()=>{f(!i),D(!1)},A=g(n=>n.crmLeads.data.contactList);H.length=0,A.forEach(n=>{H.push({value:n==null?void 0:n.id,label:`${n==null?void 0:n.firstName} ${n==null?void 0:n.lastName}`})});const[R,M]=m.useState("");m.useEffect(()=>{(async()=>{var h,de;try{const{payload:q}=await c(Ca()),B=(h=q==null?void 0:q.data)==null?void 0:h.find(O=>(O==null?void 0:O.moduleName)==="leads");if(M(B.id),B){const{payload:O}=await c(ba({id:(de=B==null?void 0:B.id)==null?void 0:de.toString()})),fe=Qe(O.data),xe=Je(O.data);setCategoryList(xe),E(fe)}}catch(q){console.error("Error fetching module data:",q)}})(),c(ae())},[c]);const p=g(n=>n.crmLeads.data.selectedLeads),o=g(n=>n.crmLeads.data.categoryList),d=g(n=>n.crmLeads.data.subCategoryList),y=g(n=>n.crmLeads.data.productList),x=m.useMemo(()=>o.map(h=>({label:h.name,value:h.id})),[o]),F=m.useMemo(()=>d.map(h=>({label:h.name,value:h.id})),[d]),v=m.useMemo(()=>y.map(h=>({label:h.name,value:h.id})),[y]),[S,b]=m.useState(p?p.tags||[]:[]),I=n=>{b(n);const h=[n.value];u.setFieldValue("tagId",h)};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx("div",{className:"col-span-1",children:a.jsx(w,{label:"Contact Name",invalid:e.contactsDataId&&t.contactsDataId,errorMessage:e.contactsDataId,children:a.jsx(G,{name:"contactsDataId",placeholder:"Contact Name",options:H,id:"contactsDataId",value:H.find(n=>(n==null?void 0:n.value)===(l==null?void 0:l.contactsDataId)),onChange:n=>{const h=n.value;r("contactsDataId",h)}})})}),a.jsx("div",{className:"col-span-1",children:a.jsx(w,{label:"Title",invalid:e.title&&t.title,errorMessage:e.title,children:a.jsx(N,{type:"text",autoComplete:"off",name:"title",placeholder:"Title",component:W,prefix:a.jsx(ca,{className:"text-xl"})})})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx("div",{className:"col-span-1",children:a.jsx(w,{label:"Category",invalid:e.categoryId&&t.categoryId,errorMessage:e.categoryId,children:a.jsx(N,{type:"text",autoComplete:"off",name:"categoryId",placeholder:"Category",options:x,component:G,prefix:a.jsx(Q,{className:"text-xl"}),onChange:async n=>{await c(ne(n.value)),r("categoryId",n)}})})}),a.jsx("div",{className:"col-span-1",children:a.jsx(w,{label:"Sub Category",invalid:e.subCategoryId&&t.subCategoryId,errorMessage:e.subCategoryId,children:a.jsx(N,{type:"text",autoComplete:"off",name:"subCategoryId",placeholder:"SubCategory",options:F,component:G,prefix:a.jsx(Q,{className:"text-xl"}),onChange:async n=>{await c(re(n.value)),r("subCategoryId",n)}})})})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsx("div",{className:"col-span-1",children:a.jsx(w,{label:"Product",invalid:e.productId&&t.productId,errorMessage:e.productId,children:a.jsx(N,{type:"text",autoComplete:"off",name:"productId",placeholder:"Product",options:v,component:G,prefix:a.jsx(Q,{className:"text-xl"}),onChange:async n=>{r("productId",n)}})})}),a.jsx("div",{className:"col-span-1",children:a.jsx(w,{label:"Budget",invalid:e.budget&&t.budget,errorMessage:e.budget,children:a.jsx(N,{type:"number",autoComplete:"off",name:"budget",placeholder:"Budget",component:W,prefix:a.jsx(ia,{className:"text-xl"})})})})]}),a.jsx(w,{label:"Status",invalid:e.status&&t.status,errorMessage:e.status,children:a.jsx(N,{type:"text",autoComplete:"off",name:"status",placeholder:"Status",component:G,options:oe,values:oe[0],prefix:a.jsx(Xe,{className:"text-xl"}),onChange:async n=>{r("status",n)}})}),a.jsx("div",{style:{position:"relative"},children:a.jsx(w,{label:"Tag",children:a.jsxs("div",{style:{position:"relative"},children:[a.jsx(N,{name:"Tag",component:_e,value:u.initialValues.tagName,options:P,placeholder:"Select a Tag",onChange:I}),a.jsx(na,{style:{position:"absolute",right:"10px",top:"10px",border:"none",background:"#FFF"},className:"text-xl",onClick:()=>{k(),D(!0)}})]})})}),a.jsx(w,{label:"Notes",invalid:e.notes&&t.notes,errorMessage:e.notes,children:a.jsx(N,{type:"text",autoComplete:"off",name:"notes",placeholder:"Notes",component:W,prefix:a.jsx(da,{className:"text-xl"})})})]})},Ta=$().shape({title:_().required("Title is required"),categoryId:$().required("Category is required"),subCategoryId:$().notRequired(),productId:$().required("Product is required"),status:$().required("Status is required"),notes:_(),budget:We().test("greaterThanOne","Budget must be greater than 1",s=>s>0).required("Budget is required"),tagId:Ue(),contactsDataId:_().required("Contact is required").test("is-valid-contact","Invalid contact selected",s=>!!H.find(t=>t.value===s))}),{TabNav:Aa,TabList:Ma,TabContent:Fa}=ie,ge=m.forwardRef((s,t)=>{var A,R,M,p;const e=g(o=>o.crmLeads.data.selectedLeads),r=g(o=>o.crmLeads.data.categoryList),l=g(o=>o.crmLeads.data.subCategoryList),c=g(o=>o.crmLeads.data.productList),u=!!e.id,i=j(),f=async(o,d,y)=>{var v,S,b,I;const x=(v=o==null?void 0:o.payload)!=null&&v.success?d:"Something went wrong !!!",F=(S=o==null?void 0:o.payload)!=null&&S.success?(b=o==null?void 0:o.payload)==null?void 0:b.message:y;Y.push(a.jsx(Z,{title:x,type:(I=o==null?void 0:o.payload)!=null&&I.success?"success":"danger",duration:2500,children:F}),{placement:"top-end"})},C=async(o,{setSubmitting:d})=>{try{const y={title:o.title,contactsDataId:o.contactsDataId,product:o.productId.value,status:o.status.value,budget:o.budget.toString(),description:o.notes,tagId:[]},{colorName:x,name:F,tagName:v,...S}=o,b=u?await i(fa({leadsId:(e==null?void 0:e.id)||"",updatedData:y})):await i(La(y));await f(b,u?"Successfully Updated":"Successfully Added","An error occurred."),i(pe()),await Promise.all([i(T()),i(K())])}catch(y){console.error("An error occurred:",y)}finally{d(!1)}},D=m.useMemo(()=>r.map(d=>({label:d.name,value:d.id})),[r]),P=m.useMemo(()=>l.map(d=>({label:d.name,value:d.id})),[l]),E=m.useMemo(()=>c.map(d=>({label:d.name,value:d.id})),[c]),k=async()=>{var o,d,y,x;(o=e==null?void 0:e.leadProduct)!=null&&o.categoryId&&await i(ne((d=e==null?void 0:e.leadProduct)==null?void 0:d.categoryId)),(y=e==null?void 0:e.leadProduct)!=null&&y.subCategoryId&&await i(re((x=e==null?void 0:e.leadProduct)==null?void 0:x.subCategoryId))};return m.useEffect(()=>{k()},[e,r,l,i]),a.jsx(Ke,{innerRef:t,initialValues:{contactsDataId:e.contactsDataId||null,title:(e==null?void 0:e.title)||"",categoryId:(A=e==null?void 0:e.leadProduct)!=null&&A.categoryId?D.find(o=>{var d;return o.value===((d=e==null?void 0:e.leadProduct)==null?void 0:d.categoryId)}):"",subCategoryId:(R=e==null?void 0:e.leadProduct)!=null&&R.subCategoryId?P.find(o=>{var d;return o.value===((d=e==null?void 0:e.leadProduct)==null?void 0:d.subCategoryId)}):"",productId:e!=null&&e.product?E.find(o=>o.value===(e==null?void 0:e.product)):"",status:e!=null&&e.status?oe.find(o=>o.value===(e==null?void 0:e.status)):"",notes:(e==null?void 0:e.description)||"",tagName:((p=(M=e==null?void 0:e.tags)==null?void 0:M[0])==null?void 0:p.tagName)||"",budget:(e==null?void 0:e.budget)||""},validationSchema:Ta,onSubmit:C,children:({touched:o,errors:d,values:y,setFieldValue:x})=>a.jsx(Ve,{children:a.jsx(Ge,{children:a.jsxs(ie,{defaultValue:"leadsInfo",children:[a.jsx(Ma,{children:a.jsx(Aa,{value:"leadsInfo",children:"Leads Detail"})}),a.jsx("div",{className:"p-6",children:a.jsx(Fa,{value:"leadsInfo",children:a.jsx(Sa,{touched:o,errors:d,setFieldValue:x,values:y})})})]})})})})});ge.displayName="LeadsForm";const ye=m.forwardRef((s,t)=>{j();const e=g(l=>l.crmLeads.data.selectedLeads);g(l=>l.crmLeads.data.leadsList);const r=async l=>{};return a.jsx(ge,{ref:t,leads:e,onFormSubmit:r})});ye.displayName="LeadsEditContent";const Oa=({onSaveClick:s,onCancel:t})=>a.jsxs("div",{className:"text-right w-full",children:[a.jsx(ee,{size:"sm",className:"mr-2",onClick:t,children:"Cancel"}),a.jsx(ee,{size:"sm",variant:"solid",onClick:s,children:"Save"})]}),Pa=()=>{const s=j(),t=g(i=>i.crmLeads.data.drawerOpen),[e,r]=m.useState(window.innerWidth/2),l=()=>{s(pe()),s(te({}))},c=m.useRef(null),u=()=>{var i;(i=c.current)==null||i.submitForm()};return m.useEffect(()=>{s(le())},[]),a.jsx($e,{isOpen:t,closable:!1,bodyClass:"p-0",width:e,footer:a.jsx(Oa,{onCancel:l,onSaveClick:u}),onClose:l,onRequestClose:l,children:a.jsx(ye,{ref:c})})},Ea=()=>{const s=j(),t=g(p=>p.crmLeads.data.displayedLeadsList),e=g(p=>p.crmLeads.data.loading),{pageIndex:r,pageSize:l,sort:c,query:u,total:i}=g(p=>p.crmLeads.data.tableData),f=m.useCallback(()=>{s(T())},[s]);m.useEffect(()=>{f()},[f]);const C=m.useMemo(()=>({pageIndex:r,pageSize:l,sort:c,query:u,total:i}),[r,l,c,u,i]),D=X("Leads","canDelete"),P=X("Leads","canModify"),E=({row:p})=>{const o=j(),{textTheme:d}=Se(),y=()=>{o(ue()),o(te(p))},x=async()=>{await o(te(p)),o(se(!0))};return a.jsxs("div",{className:"flex justify-start text-lg",children:[D&&a.jsx("span",{className:`cursor-pointer p-2 hover:${d}`,onClick:y,children:a.jsx(Ye,{})}),D&&a.jsx("span",{className:"cursor-pointer p-2 hover:text-red-500",onClick:x,children:a.jsx(Ze,{})})]})},k=m.useMemo(()=>[{header:"Action",id:"action",cell:o=>a.jsx(E,{row:o.row.original})},{header:"Contact Name",accessorKey:"contactName",cell:o=>{const d=o.row.original.contactData.firstName+" "+o.row.original.contactData.lastName;return a.jsx(z,{text:d,maxLength:20})}},{header:"Title",accessorKey:"title",cell:o=>{const d=o.row.original.title;return a.jsx(z,{text:d,maxLength:20})}},{header:"Product",accessorKey:"leadProduct",cell:o=>{var v,S,b,I,n;const d=o.row.original,y=((S=(v=d.leadProduct)==null?void 0:v.category)==null?void 0:S.name)||"",x=((I=(b=d.leadProduct)==null?void 0:b.subCategory)==null?void 0:I.name)||"",F=`${(n=d.leadProduct)==null?void 0:n.name} => ${y} => ${x}`;return a.jsx(z,{text:F,maxLength:20})}},{header:"Budget",accessorKey:"budget",cell:o=>{const d=o.row.original;return a.jsx(z,{text:d.budget,maxLength:20})}},{header:"Status",accessorKey:"status",cell:o=>{const d=o.row.original;return a.jsx(Ie,{status:d.status})}},{header:"Tag Name",accessorKey:"tagName",cell:o=>{const d=o.row.original.tags||[];return a.jsx(Ne,{tags:d})}},{header:"Notes",accessorKey:"description",cell:o=>{const d=o.row.original.description;return a.jsx(z,{text:d,maxLength:20})}}],[P,D]),A=p=>{const o=V(C);o.pageIndex=p,s(U(o))},R=p=>{const o=V(C);o.pageSize=Number(p),o.pageIndex=1,s(U(o))},M=p=>{const o=V(C);o.sort=p,s(U(o))};return a.jsxs("div",{children:[a.jsx(ve,{columns:k,data:t,skeletonAvatarColumns:[0],skeletonAvatarProps:{width:28,height:28},loading:e,pagingData:{total:C.total,pageIndex:C.pageIndex,pageSize:C.pageSize},onPaginationChange:A,onSelectChange:R,onSort:M}),a.jsx(Pa,{}),a.jsx(Na,{})]})},he=m.forwardRef((s,t)=>{const{onInputChange:e}=s,r=la(l,500);function l(u){e==null||e(u)}const c=u=>{r(u.target.value)};return a.jsx(W,{ref:t,className:"max-w-md md:w-52 mb-4",size:"sm",placeholder:"Search",prefix:a.jsx(ea,{className:"text-lg"}),onChange:c})});he.displayName="LeadsTableSearch";const ka=()=>{const s=j(),t=m.useRef(null),e=g(i=>i.crmLeads.data.tableData),r=X("leads","canCreate"),l=i=>{const f=V(e);f.query=i,f.pageIndex=1,typeof i=="string"&&i.length>1&&c(f),typeof i=="string"&&i.length===0&&c(f)},c=i=>{s(i?U(i):T())},u=()=>{s(ue()),s(ua("Add"))};return m.useEffect(()=>{async function i(){await s(ma())}i()},[s]),a.jsxs("div",{className:"md:flex items-center justify-between",children:[a.jsx("div",{className:"md:flex items-center gap-4",children:a.jsx(he,{ref:t,onInputChange:l})}),a.jsx("div",{className:"mb-4",children:r&&a.jsx(ee,{size:"sm",onClick:u,children:"Add New"})})]})},J=s=>{const{icon:t,avatarClass:e,label:r,value:l,loading:c}=s,u=55;return a.jsx(ra,{bordered:!0,children:a.jsx(we,{loading:c,customLoader:a.jsx(ga,{avatarProps:{className:"rounded",width:u,height:u}}),children:a.jsx("div",{className:"flex justify-between items-center",children:a.jsxs("div",{className:"flex items-center gap-4",children:[a.jsx(oa,{className:e,size:u,icon:t}),a.jsxs("div",{children:[a.jsx("span",{children:r}),a.jsx("h3",{children:a.jsx(ya,{thousandSeparator:!0,displayType:"text",value:l})})]})]})})})})},Ra=()=>{const s=j(),t=g(r=>r.crmLeads.data.statisticData),e=g(r=>r.crmLeads.data.statisticLoading);return m.useEffect(()=>{s(K())},[]),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4 mb-6",children:[a.jsx(J,{icon:a.jsx(aa,{}),avatarClass:"!bg-indigo-600",label:"Total Leads",value:t.totalLeads,growthRate:t==null?void 0:t.totalLeads,loading:e}),a.jsx(J,{icon:a.jsx(ta,{}),avatarClass:"!bg-blue-500",label:"Active Leads",value:t.activeLeads,growthRate:t.activeLeads,loading:e}),a.jsx(J,{icon:a.jsx(sa,{}),avatarClass:"!bg-emerald-500",label:"This Week's New Leads",value:t==null?void 0:t.newLeads,growthRate:t==null?void 0:t.newLeads,loading:e})]})};je("crmLeads",Ia);const qa=()=>{const s=g(t=>t.crmLeads.data.tableData);return a.jsxs(a.Fragment,{children:[a.jsx(Ra,{}),a.jsxs(De,{bodyClass:"h-full",children:[a.jsx(pa,{title:`Leads (${s==null?void 0:s.total})`,desc:"",className:"mb-2"}),a.jsx(ka,{}),a.jsx(Ea,{})]})]})},ws=qa;export{ws as default};
