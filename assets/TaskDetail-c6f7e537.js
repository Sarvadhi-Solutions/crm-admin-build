import{al as v,am as I,an as E,ao as L,j as s,a as C,r as A,ap as M,aq as B,at as P,ah as _}from"./index-d1f55000.js";import{C as Y,i as T}from"./Views-27dec28c.js";import{u as $}from"./CrmService-3f0fa95f.js";import{A as R}from"./AdaptableCard-ab6c1eb8.js";import"./Badge-2e560773.js";import"./chart.constant-ad6ca1b2.js";import"./GrowShrinkTag-ad14365e.js";import"./index-ac5acc09.js";import{B as G}from"./Button-d10f25dd.js";import"./Dialog-012b8945.js";import"./DataTable-6737e455.js";import{D as H}from"./DoubleSidedImage-3ef93e14.js";import"./Input-40502faa.js";import"./Skeleton-046fff23.js";import"./react-tooltip.min-a1c6e013.js";import"./RichTextEditor-8600bc97.js";import"./SegmentItemOption-a45281b6.js";import"./SvgIcon-24a96fd6.js";import"./Tooltip-e416896b.js";import{C as O}from"./Card-b6647cdf.js";import{t as D,N as y}from"./toast-4a408eff.js";import{C as X}from"./ConfirmDialog-de2c7ae2.js";import{P as W}from"./index.esm-a7f57555.js";import{u as q,a as N,t as z,d as K,g as j,b as J}from"./index-7b63f617.js";import{h as Q}from"./moment-fbc5633a.js";import{S as b}from"./StatusCapsule-e11d17bb.js";import{I as U}from"./index.esm-566a0333.js";import{T as V}from"./TagsList-7225eb34.js";import"./Tag-68df4337.js";import"./useMergeRef-788c4cb0.js";import"./index-e8290e1f.js";import"./CloseButton-865c8503.js";import"./index-354e9a00.js";import"./index.esm-5c3c1ac6.js";import"./Pagination-ee6d6f94.js";import"./Select-9e04c31f.js";import"./slicedToArray-db6cc43d.js";import"./objectWithoutProperties-8809bfcf.js";import"./toConsumableArray-9938cdfc.js";import"./floating-ui.dom-bef9cea3.js";import"./get-3fbe7aa4.js";import"./toString-7b4f9ac7.js";import"./_MapCache-cbdf92c8.js";import"./index-b157f735.js";import"./cloneDeep-94f873f1.js";import"./_getPrototype-30a92b72.js";import"./_baseIsEqual-cd9e2cb0.js";import"./index-56369f77.js";import"./isNil-a1b43ef7.js";import"./useThemeClass-29fe42de.js";import"./usePopper-e4ac4eb1.js";import"./index.esm-5a580c59.js";import"./index-5744fde1.js";import"./useTimeout-8ae64f40.js";import"./StatusIcon-e78efbe0.js";import"./chainedFunction-070f832c.js";import"./index-15fd7d39.js";import"./index-6ef453c4.js";import"./Alert-bc2bbe67.js";import"./RangeCalendar-d43d05d7.js";import"./useControllableState-2d8f7630.js";import"./index-2f8e95cb.js";import"./useRootClose-0334f01a.js";import"./TimeInput-75c92f6e.js";import"./useUniqueId-68699ef9.js";import"./useDidUpdate-f8015a0a.js";import"./Drawer-0c18a381.js";import"./index-d072efef.js";import"./useUncertainRef-b4892a52.js";import"./index-a10acbe3.js";import"./FormItem-4075ccd4.js";import"./index-6b0c2b51.js";import"./index-7c8f45e7.js";import"./Progress-f11fb579.js";import"./index-0f803cf5.js";import"./ScrollBar-d7d05f7c.js";import"./index-ce20e2d5.js";import"./index-073298ad.js";import"./mapCloneElement-52c7d464.js";import"./Switcher-ffa768b6.js";import"./index-fdd0fce8.js";import"./index-2efca1fd.js";import"./index-8e63d0e1.js";import"./Upload-6df85b8e.js";import"./index.esm-7beb0e22.js";const F="crmTaskDetails",Z={loading:!0,task:{}},f=v(`${F}/getTaskById`,async t=>{var i,r;try{return await $(t)}catch(l){throw new Error((r=(i=l==null?void 0:l.response)==null?void 0:i.data)==null?void 0:r.message)}}),ss=I({name:`${F}/state`,initialState:Z,reducers:{},extraReducers:t=>{t.addCase(f.fulfilled,(i,r)=>{i.loading=!1,i.task=r==null?void 0:r.payload.data}).addCase(f.pending,i=>{i.loading=!0})}}),es=ss.reducer,ts=E({data:es}),w=L,S=({title:t,value:i})=>s.jsxs("div",{children:[s.jsx("span",{children:t}),s.jsx("p",{className:`text-gray-700 dark:text-gray-200 font-semibold ${(i==null?void 0:i.length)>50?"overflow-y-auto max-h-20":""}`,children:(i==null?void 0:i.length)>50?`${i==null?void 0:i.substring(0,50)}...`:i})]}),is=t=>{const i=q(o=>{var c,a;return(a=(c=o.crmTasks)==null?void 0:c.data)==null?void 0:a.selectedTask}),r=C(),[l,e]=A.useState(!1),g=M(),x=()=>{e(!1)},n=()=>{e(!0)},h=async()=>{var c,a,d;await r(N(t)),r(z(!1));const o=await r(K(i.id));await r(j()),(c=o==null?void 0:o.payload)!=null&&c.success?(D.push(s.jsx(y,{title:"Successfuly Deleted",type:"success",duration:2500,children:(a=o==null?void 0:o.payload)==null?void 0:a.message}),{placement:"top-end"}),g("/app/crm/tasks"),r(N({}))):D.push(s.jsx(y,{title:"Something Went Wrong !!!",type:"danger",duration:2500,children:(d=o==null?void 0:o.error)==null?void 0:d.message}),{placement:"top-end"}),await r(j()),await r(J())};return s.jsxs(s.Fragment,{children:[s.jsx(G,{block:!0,icon:s.jsx(W,{}),variant:"solid",onClick:n,children:"Delete"}),s.jsx(X,{isOpen:l,type:"danger",title:"Delete Task",confirmButtonColor:"red-600",onClose:x,onRequestClose:x,onCancel:x,onConfirm:h,children:s.jsx("p",{children:"Are you sure you want to delete this Task? All record related to this Task will be deleted as well. This action cannot be undone."})})]})},rs=({data:t={}})=>s.jsx(O,{children:s.jsxs("div",{className:"flex flex-col xl:justify-between min-w-[300px] mx-auto p-4",children:[s.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-1 gap-y-7 gap-x-4 mt-3",children:[s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"font-semibold",children:"Priority:"}),s.jsx("div",{className:"ml-2",children:s.jsx(b,{status:t==null?void 0:t.priority})})]}),s.jsxs("div",{className:"flex items-center",children:[s.jsx("span",{className:"font-semibold",children:"Status:"}),s.jsx("div",{className:"ml-2",children:s.jsx(b,{status:t==null?void 0:t.completionStatus})})]}),t!=null&&t.dueDate?s.jsx(s.Fragment,{children:s.jsx(S,{title:"Due Date",value:Q(t==null?void 0:t.dueDate).format("DD MMMM YYYY")})}):null,t!=null&&t.title?s.jsx(s.Fragment,{children:s.jsx(S,{title:"Title",value:t==null?void 0:t.title})}):null]}),s.jsx("div",{className:"mt-4 flex flex-col xl:flex-row gap-2",children:s.jsx(is,{data:t})})]})});B("crmTaskDetails",ts);const Pe=()=>{var o,c,a,d,k;const t=C(),i=P(),{id:r}=i,l=w(m=>{var p,u;return(u=(p=m==null?void 0:m.crmTaskDetails)==null?void 0:p.data)==null?void 0:u.task}),e=l==null?void 0:l.data,g=w(m=>m.crmTaskDetails.data.loading);A.useEffect(()=>{x()},[]);const x=async()=>{r&&t(f(r)),await t(j())},n=({title:m,value:p})=>s.jsxs("div",{children:[s.jsx("span",{children:m}),s.jsx("p",{className:"text-gray-700 dark:text-gray-200 font-semibold",children:p})]}),h=()=>{window.history.back()};return s.jsxs(s.Fragment,{children:[s.jsxs("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",marginBottom:"15px"},children:[s.jsx("span",{className:"cursor-pointer hover:text-indigo-500 items-center lg mr-2 mt-0",style:{fontSize:"2.5rem",fontWeight:"bold",color:"black"},onClick:h,children:s.jsx(U,{})}),s.jsx("h3",{children:"Task Details"})]}),s.jsxs(Y,{className:"h-full",children:[s.jsx(_,{loading:g,children:!T(e)&&s.jsxs("div",{className:"flex flex-col xl:flex-row gap-4",children:[s.jsx("div",{children:s.jsx(rs,{data:e})}),s.jsx("div",{className:"w-full",children:s.jsx(R,{children:s.jsxs("div",{className:"flex flex-col xl:justify-between h-full 2xl:min-w-[360px] mx-auto",children:[s.jsx(n,{title:"Title",value:e==null?void 0:e.title}),s.jsx("br",{}),e!=null&&e.descriptions?s.jsxs(s.Fragment,{children:[s.jsx(n,{title:"Description",value:e==null?void 0:e.descriptions}),s.jsx("br",{})]}):null,e!=null&&e.assignedToData?s.jsxs(s.Fragment,{children:[s.jsx(n,{title:"Assigned To",value:`${(o=e==null?void 0:e.assignedToData)==null?void 0:o.firstName}  ${(c=e==null?void 0:e.assignedToData)==null?void 0:c.lastName}`}),s.jsx("br",{})]}):null,e!=null&&e.module?s.jsxs(s.Fragment,{children:[s.jsx(n,{title:"Module",value:e==null?void 0:e.module}),s.jsx("br",{})]}):null,e!=null&&e.type?s.jsxs(s.Fragment,{children:[s.jsx(n,{title:"Type",value:e==null?void 0:e.type}),s.jsx("br",{})]}):null,e!=null&&e.nextDateTime?s.jsxs(s.Fragment,{children:[s.jsx(n,{title:"Date Time",value:e==null?void 0:e.nextDateTime}),s.jsx("br",{})]}):null,((a=e==null?void 0:e.tags)==null?void 0:a.length)>0?s.jsxs(s.Fragment,{children:[s.jsx(n,{title:"Tags",value:""}),s.jsx(V,{fullDisplay:!0,tags:e==null?void 0:e.tags}),s.jsx("br",{})]}):null,((d=e==null?void 0:e.taskFields)==null?void 0:d.length)>0?s.jsxs(s.Fragment,{children:[(k=e.taskFields)==null?void 0:k.map((m,p)=>{var u;return s.jsxs(s.Fragment,{children:[s.jsx(n,{title:(u=m.customKey)==null?void 0:u.name,value:m.value}),p<e.taskFields.length-1&&s.jsx("br",{})]})}),s.jsx("br",{})]}):null]})})})]})}),!g&&T(e)&&s.jsxs("div",{className:"h-full flex flex-col items-center justify-center",children:[s.jsx(H,{src:"/img/others/img-2.png",darkModeSrc:"/img/others/img-2-dark.png",alt:"No user found!"}),s.jsx("h3",{className:"mt-8",children:"No user found!"})]})]})]})};export{Pe as default};
