import{a as D,r as p,j as t}from"./index-6767ac81.js";import{T as w}from"./index-149a53e8.js";import{u as q,c as o,d as i,F as E,a as H,b as O}from"./formik.esm-35003a33.js";import{c as P,a as u,f as V,b as $}from"./index.esm-a1939a1a.js";import{I as l}from"./Input-736c9e0d.js";import{A as z}from"./index-688b9e70.js";import{U as _}from"./Upload-1c01a3b3.js";import{I as G,a6 as J,aa as K,ab as Q}from"./index.esm-107f547f.js";import{A as W}from"./index.esm-a61e2fe0.js";import{T as X,a as Y,b as Z}from"./index.esm-da94fd5f.js";import{u as F,D as ee,A as te,h as ae,i as se,t as oe,j as ie,k as ne,g as I,s as v,l as re}from"./AdditionalTag-8d9009b8.js";/* empty css              */import{B as le,a as ce,b as de,c as pe}from"./index.esm-52ddd804.js";const me=d=>{const{touched:a,errors:e}=d,f=D(),[c,g]=p.useState(!1);p.useState("#808080");const[n,m]=p.useState(!1),[y,j]=p.useState([]),[T,L]=p.useState([]),M=()=>{g(!c),m(!1)};p.useEffect(()=>{(async()=>{var x,b;try{const{payload:r}=await f(ae());console.log(r,"send Me The Id And The Payload");const C=(x=r==null?void 0:r.data)==null?void 0:x.find(h=>(h==null?void 0:h.moduleName)==="clients");if(C){const{payload:h}=await f(se({id:(b=C==null?void 0:C.id)==null?void 0:b.toString()})),U=oe(h.data),B=ie(h.data);L(B),j(U)}}catch(r){console.error("Error fetching module data:",r)}})()},[f]);const N=F(s=>s.crmCustomers.data.selectedCustomer),[je,A]=p.useState(N?N.tags||[]:[]),S=q(),R=s=>{console.log(s),A(s);const x=[s.value];S.setFieldValue("tagId",x)};return t.jsxs(t.Fragment,{children:[t.jsx(o,{invalid:e.upload&&a.upload,errorMessage:e.upload,children:t.jsx(i,{name:"img",children:({field:s,form:x})=>{const b=s.value?{src:s.value}:{};return t.jsx("div",{className:"flex justify-center",children:t.jsx(_,{className:"cursor-pointer",showList:!1,uploadLimit:1,onChange:r=>x.setFieldValue(s.name,URL.createObjectURL(r[0])),onFileRemove:r=>x.setFieldValue(s.name,URL.createObjectURL(r[0])),children:t.jsx(z,{className:"border-2 border-white dark:border-gray-800 shadow-lg",size:100,shape:"circle",icon:t.jsx(G,{}),...b})})})}})}),t.jsx(o,{label:"Customer Name",invalid:e.clientName&&a.clientName,errorMessage:e.clientName,children:t.jsx(i,{type:"text",autoComplete:"off",name:"clientName",placeholder:"Customer Name",component:l,prefix:t.jsx(J,{className:"text-xl"})})}),t.jsx(o,{label:"Contact Number",invalid:e.contactInfo&&a.contactInfo,errorMessage:e.contactInfo,children:t.jsx(i,{type:"text",autoComplete:"off",name:"contactInfo",placeholder:"contactInfo",component:l,prefix:t.jsx(K,{className:"text-xl"})})}),t.jsx(o,{label:"Address",invalid:e.address&&a.address,errorMessage:e.address,children:t.jsx(i,{type:"text",autoComplete:"off",name:"address",placeholder:"Address",component:l,prefix:t.jsx(Q,{className:"text-xl"})})}),t.jsx(o,{label:"Billing Details",invalid:e.billingDetails&&a.billingDetails,errorMessage:e.billingDetails,children:t.jsx(i,{type:"text",autoComplete:"off",name:"billingDetails",placeholder:"Billing Details",component:l,prefix:t.jsx(X,{className:"text-xl"})})}),t.jsxs("div",{style:{position:"relative"},children:[t.jsx(o,{label:"TagId",invalid:e.history&&a.history,errorMessage:e.history,children:t.jsxs("div",{style:{position:"relative"},children:[t.jsx(i,{name:"tagId",component:ee,options:y,placeholder:"Select a Tag",onChange:R}),t.jsx(Y,{style:{position:"absolute",right:"10px",top:"10px",border:"none",background:"#FFF"},className:"text-xl",onClick:()=>{M(),m(!0)}})]})}),t.jsx(te,{isOpen:c,categoryList:T,onOpenChange:s=>g(s)})]}),t.jsx(o,{label:"History",invalid:e.history&&a.history,errorMessage:e.history,children:t.jsx(i,{type:"text",autoComplete:"off",name:"history",placeholder:"History",component:l,prefix:t.jsx(W,{className:"text-xl"})})}),t.jsx(o,{label:"Notes",invalid:e.notes&&a.notes,errorMessage:e.notes,children:t.jsx(i,{type:"text",autoComplete:"off",name:"notes",placeholder:"Notes",component:l,prefix:t.jsx(Z,{className:"text-xl"})})})]})},xe=d=>{const{touched:a,errors:e}=d;return t.jsxs(t.Fragment,{children:[t.jsx(o,{label:"Facebook link",invalid:e.facebook&&a.facebook,errorMessage:e.facebook,children:t.jsx(i,{type:"text",autoComplete:"off",name:"facebook",placeholder:"URL",component:l,prefix:t.jsx(le,{className:"text-xl text-[#1773ea]"})})}),t.jsx(o,{label:"Twitter link",invalid:e.twitter&&a.twitter,errorMessage:e.twitter,children:t.jsx(i,{type:"text",autoComplete:"off",name:"twitter",placeholder:"URL",component:l,prefix:t.jsx(ce,{className:"text-xl text-[#1da1f3]"})})}),t.jsx(o,{label:"Pinterest link",invalid:e.pinterest&&a.pinterest,errorMessage:e.pinterest,children:t.jsx(i,{type:"text",autoComplete:"off",name:"pinterest",placeholder:"URL",component:l,prefix:t.jsx(de,{className:"text-xl text-[#df0018]"})})}),t.jsx(o,{label:"LinkedIn link",invalid:e.linkedIn&&a.linkedIn,errorMessage:e.linkedIn,children:t.jsx(i,{type:"text",autoComplete:"off",name:"linkedIn",placeholder:"URL",component:l,prefix:t.jsx(pe,{className:"text-xl text-[#0077b5]"})})})]})},fe=P().shape({clientName:u().required("clientName is required"),contactInfo:V().typeError("Contact must be a number").required("Contact is required").test("is-number","Contact must be a number",d=>!isNaN(d)).test("is-ten-digits","Contact must be exactly 10 digits",d=>/^\d{10}$/.test(d)),address:u().required("Address is required"),billingDetails:u().required("Billing Details is required"),history:u(),notes:u(),tagId:$()}),{TabNav:he,TabList:ge,TabContent:k}=w,ue=p.forwardRef((d,a)=>{var g;const e=F(n=>n.crmCustomers.data.selectedCustomer),f=!!e.id;console.log(f,"Editing Done");const c=D();return t.jsx(E,{innerRef:a,initialValues:{clientName:(e==null?void 0:e.clientName)||"",contactInfo:(e==null?void 0:e.contactInfo)||"",address:(e==null?void 0:e.address)||"",billingDetails:(e==null?void 0:e.billingDetails)||"",history:(e==null?void 0:e.history)||"",notes:(e==null?void 0:e.notes)||"",tagId:((g=e==null?void 0:e.tags)==null?void 0:g.map(n=>n.id))||[],colorName:e!=null&&e.tags&&(e==null?void 0:e.tags.length)>0?e==null?void 0:e.tags[0].colorName:""},validationSchema:fe,onSubmit:async(n,{setSubmitting:m})=>{const{colorName:y,...j}=n;console.log(y),f?(console.log(n,"Bhai testing kar"),await c(ne({customerId:(e==null?void 0:e.id)||"",updatedData:j})),await c(I()),await c(v())):(console.log("abb Maat aa"),await c(re(j)),await c(I()),await c(v())),console.log("on submit called "),m(!1)},children:({touched:n,errors:m})=>t.jsx(H,{children:t.jsx(O,{children:t.jsxs(w,{defaultValue:"personalInfo",children:[t.jsx(ge,{children:t.jsx(he,{value:"personalInfo",children:"Custometer Detail"})}),t.jsxs("div",{className:"p-6",children:[t.jsx(k,{value:"personalInfo",children:t.jsx(me,{touched:n,errors:m})}),t.jsx(k,{value:"social",children:t.jsx(xe,{touched:n,errors:m})})]})]})})})})});ue.displayName="CustomerForm";export{ue as C};
